{
  "packages": [
    {
      "name": "v2/agent",
      "time": 4.341,
      "fail": true,
      "num_failed": 1
    },
    {
      "name": "v2/cli",
      "time": 26.514,
      "fail": true,
      "num_failed": 7
    },
    {
      "name": "v2/cli/cliui",
      "time": 0.037
    }
  ],
  "tests": [
    {
      "package": "v2/agent",
      "name": "TestAgent_SessionExec",
      "time": 0.86
    },
    {
      "package": "v2/agent",
      "name": "TestAgent_SessionTTYExitCode",
      "time": 0.88
    },
    {
      "package": "v2/agent",
      "name": "TestAgent_SessionTTYShell",
      "time": 0.94
    },
    {
      "package": "v2/agent",
      "name": "TestAgent_Session_TTY_FastCommandHasOutput",
      "time": 0.95,
      "fail": true,
      "output": "=== RUN   TestAgent_Session_TTY_FastCommandHasOutput\n=== PAUSE TestAgent_Session_TTY_FastCommandHasOutput\n=== CONT  TestAgent_Session_TTY_FastCommandHasOutput\n    t.go:81: 2023-03-29 13:37:27.353 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:270\u003e\tNewUserspaceEngine\t[v1] using fake (no-op) tun device\n    t.go:81: 2023-03-29 13:37:27.353 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:274\u003e\tNewUserspaceEngine\t[v1] using fake (no-op) OS network configurator\n    t.go:81: 2023-03-29 13:37:27.353 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:278\u003e\tNewUserspaceEngine\t[v1] using fake (no-op) DNS configurator\n    t.go:81: 2023-03-29 13:37:27.354 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: using dns.noopManager\n    t.go:81: 2023-03-29 13:37:27.354 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:334\u003e\tNewUserspaceEngine\tlink state: interfaces.State{defaultRoute=eth0 ifs={eth0:[172.20.0.2/16]} v4=true v6=false}\n    t.go:81: 2023-03-29 13:37:27.354 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:306\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP read buffer size to 7340032: operation not permitted\n    t.go:81: 2023-03-29 13:37:27.354 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:310\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP write buffer size to 7340032: operation not permitted\n    t.go:81: 2023-03-29 13:37:27.354 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:306\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP read buffer size to 7340032: operation not permitted\n    t.go:81: 2023-03-29 13:37:27.354 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:310\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP write buffer size to 7340032: operation not permitted\n    t.go:81: 2023-03-29 13:37:27.354 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:666\u003e\tNewConn\t[v1] couldn't create raw v4 disco listener, using regular listener instead: raw disco listening disabled, SO_MARK unavailable\n    t.go:81: 2023-03-29 13:37:27.354 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:672\u003e\tNewConn\t[v1] couldn't create raw v6 disco listener, using regular listener instead: raw disco listening disabled, SO_MARK unavailable\n    t.go:81: 2023-03-29 13:37:27.354 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1056\u003e\t(*Conn).DiscoPublicKey\tmagicsock: disco key = d:049e454260a62aa1\n    t.go:81: 2023-03-29 13:37:27.354 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:412\u003e\tNewUserspaceEngine\tCreating WireGuard device...\n    t.go:81: 2023-03-29 13:37:27.354 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:437\u003e\tNewUserspaceEngine\tBringing WireGuard device up...\n    t.go:81: 2023-03-29 13:37:27.354 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] UDP bind has been updated\n    t.go:81: 2023-03-29 13:37:27.354 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Interface state was Down, requested Up, now Up\n    t.go:81: 2023-03-29 13:37:27.354 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:441\u003e\tNewUserspaceEngine\tBringing router up...\n    t.go:81: 2023-03-29 13:37:27.354 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:21\u003e\tfakeRouter.Up\t[v1] warning: fakeRouter.Up: not implemented.\n    t.go:81: 2023-03-29 13:37:27.354 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:449\u003e\tNewUserspaceEngine\tClearing router settings...\n    t.go:81: 2023-03-29 13:37:27.354 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:26\u003e\tfakeRouter.Set\t[v1] warning: fakeRouter.Set: not implemented.\n    t.go:81: 2023-03-29 13:37:27.354 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:453\u003e\tNewUserspaceEngine\tStarting link monitor...\n    t.go:81: 2023-03-29 13:37:27.355 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:456\u003e\tNewUserspaceEngine\tEngine created.\n    t.go:81: 2023-03-29 13:37:27.355 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2444\u003e\t(*Conn).SetPrivateKey\tmagicsock: SetPrivateKey called (init)\n    t.go:81: 2023-03-29 13:37:27.356 [INFO]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:188\u003e\t(*agent).runLoop\tconnecting to coderd\n    t.go:81: 2023-03-29 13:37:27.356 [INFO]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:286\u003e\t(*agent).run\tfetched metadata\t{\"metadata\": {\"git_auth_configs\": 0, \"vscode_port_proxy_uri\": \"\", \"apps\": null, \"derpmap\": {\"Regions\": {\"1\": {\"EmbeddedRelay\": false, \"RegionID\": 1, \"RegionCode\": \"test\", \"RegionName\": \"Test\", \"Nodes\": [{\"Name\": \"t2\", \"RegionID\": 1, \"HostName\": \"\", \"IPv4\": \"127.0.0.1\", \"IPv6\": \"none\", \"STUNPort\": 34688, \"DERPPort\": 43117, \"InsecureForTests\": true}]}}}, \"environment_variables\": null, \"startup_script\": \"\", \"startup_script_timeout\": 0, \"directory\": \"\", \"motd_file\": \"\", \"shutdown_script\": \"\", \"shutdown_script_timeout\": 0}}\n    t.go:81: 2023-03-29 13:37:27.356 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:263\u003e\t(*agent).setLifecycle\tset lifecycle state\t{\"state\": \"starting\", \"last\": \"\"}\n    t.go:81: 2023-03-29 13:37:27.356 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:270\u003e\tNewUserspaceEngine\t[v1] using fake (no-op) tun device\n    t.go:81: 2023-03-29 13:37:27.356 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:274\u003e\tNewUserspaceEngine\t[v1] using fake (no-op) OS network configurator\n    t.go:81: 2023-03-29 13:37:27.356 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:278\u003e\tNewUserspaceEngine\t[v1] using fake (no-op) DNS configurator\n    t.go:81: 2023-03-29 13:37:27.356 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: using dns.noopManager\n    t.go:81: 2023-03-29 13:37:27.356 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:334\u003e\tNewUserspaceEngine\tlink state: interfaces.State{defaultRoute=eth0 ifs={eth0:[172.20.0.2/16]} v4=true v6=false}\n    t.go:81: 2023-03-29 13:37:27.356 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:306\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP read buffer size to 7340032: operation not permitted\n    t.go:81: 2023-03-29 13:37:27.356 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:310\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP write buffer size to 7340032: operation not permitted\n    t.go:81: 2023-03-29 13:37:27.356 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:306\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP read buffer size to 7340032: operation not permitted\n    t.go:81: 2023-03-29 13:37:27.357 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:310\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP write buffer size to 7340032: operation not permitted\n    t.go:81: 2023-03-29 13:37:27.357 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:666\u003e\tNewConn\t[v1] couldn't create raw v4 disco listener, using regular listener instead: raw disco listening disabled, SO_MARK unavailable\n    t.go:81: 2023-03-29 13:37:27.357 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:672\u003e\tNewConn\t[v1] couldn't create raw v6 disco listener, using regular listener instead: raw disco listening disabled, SO_MARK unavailable\n    t.go:81: 2023-03-29 13:37:27.357 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1056\u003e\t(*Conn).DiscoPublicKey\tmagicsock: disco key = d:34ff526bdd502e84\n    t.go:81: 2023-03-29 13:37:27.357 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:412\u003e\tNewUserspaceEngine\tCreating WireGuard device...\n    t.go:81: 2023-03-29 13:37:27.357 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:437\u003e\tNewUserspaceEngine\tBringing WireGuard device up...\n    t.go:81: 2023-03-29 13:37:27.357 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] UDP bind has been updated\n    t.go:81: 2023-03-29 13:37:27.357 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Interface state was Down, requested Up, now Up\n    t.go:81: 2023-03-29 13:37:27.357 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:441\u003e\tNewUserspaceEngine\tBringing router up...\n    t.go:81: 2023-03-29 13:37:27.357 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:21\u003e\tfakeRouter.Up\t[v1] warning: fakeRouter.Up: not implemented.\n    t.go:81: 2023-03-29 13:37:27.357 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:449\u003e\tNewUserspaceEngine\tClearing router settings...\n    t.go:81: 2023-03-29 13:37:27.357 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:26\u003e\tfakeRouter.Set\t[v1] warning: fakeRouter.Set: not implemented.\n    t.go:81: 2023-03-29 13:37:27.357 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:453\u003e\tNewUserspaceEngine\tStarting link monitor...\n    t.go:81: 2023-03-29 13:37:27.357 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:456\u003e\tNewUserspaceEngine\tEngine created.\n    t.go:81: 2023-03-29 13:37:27.357 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2444\u003e\t(*Conn).SetPrivateKey\tmagicsock: SetPrivateKey called (init)\n    t.go:81: 2023-03-29 13:37:27.357 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:187\u003e\tNewConn\tupdating network map\n    t.go:81: 2023-03-29 13:37:27.358 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2578\u003e\t(*Conn).SetNetworkMap\t[v1] magicsock: got updated network map; 0 peers\n    t.go:81: 2023-03-29 13:37:27.358 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:402\u003e\t(*agent).run\trunning tailnet connection coordinator\n    t.go:81: 2023-03-29 13:37:27.358 [INFO]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:620\u003e\t(*agent).runCoordinator\tconnected to coordination endpoint\n    t.go:81: 2023-03-29 13:37:27.358 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 2689903771435529409, \"as_of\": \"2023-03-29T13:37:27.358191Z\", \"key\": \"nodekey:e568ad36a49b4d60323fc0207eded97153e72170c491f74a8942ac38e9dd541f\", \"disco\": \"discokey:34ff526bdd502e84533e42919465a676d8fa64abda3b4f5943a8c9aa6fd0253b\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": []}}\n    t.go:81: 2023-03-29 13:37:27.363 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v4 - started\n    t.go:81: 2023-03-29 13:37:27.368 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v6 - started\n    t.go:81: 2023-03-29 13:37:27.373 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming receiveDERP - started\n    t.go:81: 2023-03-29 13:37:27.379 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:187\u003e\tNewConn\tupdating network map\n    t.go:81: 2023-03-29 13:37:27.379 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2578\u003e\t(*Conn).SetNetworkMap\t[v1] magicsock: got updated network map; 0 peers\n    t.go:81: 2023-03-29 13:37:27.379 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1241\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4): no matching peer\n    t.go:81: 2023-03-29 13:37:27.380 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:229\u003e\t(*agent).reportLifecycleLoop\treporting lifecycle state\t{\"state\": \"starting\"}\n    t.go:81: 2023-03-29 13:37:27.380 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:263\u003e\t(*agent).setLifecycle\tset lifecycle state\t{\"state\": \"ready\", \"last\": \"starting\"}\n    t.go:81: 2023-03-29 13:37:27.380 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:229\u003e\t(*agent).reportLifecycleLoop\treporting lifecycle state\t{\"state\": \"ready\"}\n    t.go:81: 2023-03-29 13:37:27.386 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v4 - started\n    t.go:81: 2023-03-29 13:37:27.387 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v6 - started\n    t.go:81: 2023-03-29 13:37:27.387 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming receiveDERP - started\n    t.go:81: 2023-03-29 13:37:27.389 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:423\u003e\t(*Conn).UpdateNodes\tno preferred DERP, skipping node\t{\"node\": {\"id\": 2689903771435529409, \"as_of\": \"2023-03-29T13:37:27.358191Z\", \"key\": \"nodekey:e568ad36a49b4d60323fc0207eded97153e72170c491f74a8942ac38e9dd541f\", \"disco\": \"discokey:34ff526bdd502e84533e42919465a676d8fa64abda3b4f5943a8c9aa6fd0253b\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": []}}\n    t.go:81: 2023-03-29 13:37:27.389 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n    t.go:81: 2023-03-29 13:37:27.389 [DEBUG]\t(client.netstack)\t\u003ctailscale.com/wgengine/netstack/netstack.go:367\u003e\t(*Impl).updateIPs\t[v2] netstack: registered IP fd7a:115c:a1e0:4d67:9e5c:abb:531:b55d/128\n    t.go:81: 2023-03-29 13:37:27.389 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:706\u003e\t(*userspaceEngine).maybeReconfigWireguardLocked\twgengine: Reconfig: configuring userspace WireGuard config (with 0/0 peers)\n    t.go:81: 2023-03-29 13:37:27.389 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] UAPI: Updating private key\n    t.go:81: 2023-03-29 13:37:27.389 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:921\u003e\t(*userspaceEngine).Reconfig\twgengine: Reconfig: configuring router\n    t.go:81: 2023-03-29 13:37:27.389 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:26\u003e\tfakeRouter.Set\t[v1] warning: fakeRouter.Set: not implemented.\n    t.go:81: 2023-03-29 13:37:27.389 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:931\u003e\t(*userspaceEngine).Reconfig\twgengine: Reconfig: configuring DNS\n    t.go:81: 2023-03-29 13:37:27.389 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: Set: {DefaultResolvers:[] Routes:{} SearchDomains:[] Hosts:0}\n    t.go:81: 2023-03-29 13:37:27.389 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: Resolvercfg: {Routes:{} Hosts:0 LocalDomains:[]}\n    t.go:81: 2023-03-29 13:37:27.389 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: OScfg: {Nameservers:[] SearchDomains:[] MatchDomains:[] Hosts:[]}\n    t.go:81: 2023-03-29 13:37:27.389 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n    t.go:81: 2023-03-29 13:37:27.389 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 6959219245254193963, \"as_of\": \"2023-03-29T13:37:27.379813Z\", \"key\": \"nodekey:e443af25902d57edd4bf0b663849e6cb06390f7b80e6ab179dbd5deabea10e0c\", \"disco\": \"discokey:049e454260a62aa19c35b82499dc35811a5aad44ef612f238808cae15d5c5b55\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4d67:9e5c:abb:531:b55d/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4d67:9e5c:abb:531:b55d/128\"], \"endpoints\": []}}\n    t.go:81: 2023-03-29 13:37:27.389 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:423\u003e\t(*Conn).UpdateNodes\tno preferred DERP, skipping node\t{\"node\": {\"id\": 6959219245254193963, \"as_of\": \"2023-03-29T13:37:27.379813Z\", \"key\": \"nodekey:e443af25902d57edd4bf0b663849e6cb06390f7b80e6ab179dbd5deabea10e0c\", \"disco\": \"discokey:049e454260a62aa19c35b82499dc35811a5aad44ef612f238808cae15d5c5b55\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4d67:9e5c:abb:531:b55d/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4d67:9e5c:abb:531:b55d/128\"], \"endpoints\": []}}\n    t.go:81: 2023-03-29 13:37:27.390 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n    t.go:81: 2023-03-29 13:37:27.390 [DEBUG]\t(agent.tailnet.netstack)\t\u003ctailscale.com/wgengine/netstack/netstack.go:367\u003e\t(*Impl).updateIPs\t[v2] netstack: registered IP fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\n    t.go:81: 2023-03-29 13:37:27.390 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:706\u003e\t(*userspaceEngine).maybeReconfigWireguardLocked\twgengine: Reconfig: configuring userspace WireGuard config (with 0/0 peers)\n    t.go:81: 2023-03-29 13:37:27.390 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] UAPI: Updating private key\n    t.go:81: 2023-03-29 13:37:27.390 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:921\u003e\t(*userspaceEngine).Reconfig\twgengine: Reconfig: configuring router\n    t.go:81: 2023-03-29 13:37:27.390 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:26\u003e\tfakeRouter.Set\t[v1] warning: fakeRouter.Set: not implemented.\n    t.go:81: 2023-03-29 13:37:27.390 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:931\u003e\t(*userspaceEngine).Reconfig\twgengine: Reconfig: configuring DNS\n    t.go:81: 2023-03-29 13:37:27.390 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: Set: {DefaultResolvers:[] Routes:{} SearchDomains:[] Hosts:0}\n    t.go:81: 2023-03-29 13:37:27.390 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: Resolvercfg: {Routes:{} Hosts:0 LocalDomains:[]}\n    t.go:81: 2023-03-29 13:37:27.390 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: OScfg: {Nameservers:[] SearchDomains:[] MatchDomains:[] Hosts:[]}\n    t.go:81: 2023-03-29 13:37:27.390 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n    t.go:81: 2023-03-29 13:37:27.390 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1241\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4): no matching peer\n    t.go:81: 2023-03-29 13:37:27.441 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: netcheck: UDP is blocked, trying HTTPS\n    t.go:81: 2023-03-29 13:37:27.454 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1241\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4): no matching peer\n    t.go:81: 2023-03-29 13:37:27.454 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: netcheck: UDP is blocked, trying HTTPS\n    t.go:81: 2023-03-29 13:37:27.454 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: [v1] measureAllICMPLatency: listen ip4:icmp 0.0.0.0: socket: operation not permitted\n    t.go:81: 2023-03-29 13:37:27.456 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: [v1] measureAllICMPLatency: listen ip4:icmp 0.0.0.0: socket: operation not permitted\n    t.go:81: 2023-03-29 13:37:27.513 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1241\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4): no matching peer\n    t.go:81: 2023-03-29 13:37:27.514 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: [v1] netcheck: measuring HTTPS latency of test (1): unexpected status code: 426 (426 Upgrade Required)\n    t.go:81: 2023-03-29 13:37:27.514 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: [v1] report: udp=true v6=false v6os=false mapvarydest=false hair= portmap= v4a=127.0.0.1:58992 derp=1 derpdist=1v4:62ms\n    t.go:81: 2023-03-29 13:37:27.514 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1092\u003e\t(*Conn).setNearestDERP\tmagicsock: home is now derp-1 (test)\n    t.go:81: 2023-03-29 13:37:27.514 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2759\u003e\t(*Conn).logEndpointChange\tmagicsock: endpoints changed: 127.0.0.1:58992 (stun), 172.20.0.2:58992 (local)\n    t.go:81: 2023-03-29 13:37:27.514 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:225\u003e\tNewConn.func6\twireguard status\t{\"status\": \"\\u0026{AsOf:2023-03-29 13:37:27.514434952 +0000 UTC m=+4.154042177 Peers:[] LocalAddrs:[{Addr:127.0.0.1:58992 Type:stun} {Addr:172.20.0.2:58992 Type:local}] DERPs:0}\", \"err\": null}\n    t.go:81: 2023-03-29 13:37:27.514 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 6959219245254193963, \"as_of\": \"2023-03-29T13:37:27.514515Z\", \"key\": \"nodekey:e443af25902d57edd4bf0b663849e6cb06390f7b80e6ab179dbd5deabea10e0c\", \"disco\": \"discokey:049e454260a62aa19c35b82499dc35811a5aad44ef612f238808cae15d5c5b55\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4d67:9e5c:abb:531:b55d/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4d67:9e5c:abb:531:b55d/128\"], \"endpoints\": [\"127.0.0.1:58992\", \"172.20.0.2:58992\"]}}\n    t.go:81: 2023-03-29 13:37:27.514 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:423\u003e\t(*Conn).UpdateNodes\tno preferred DERP, skipping node\t{\"node\": {\"id\": 6959219245254193963, \"as_of\": \"2023-03-29T13:37:27.514515Z\", \"key\": \"nodekey:e443af25902d57edd4bf0b663849e6cb06390f7b80e6ab179dbd5deabea10e0c\", \"disco\": \"discokey:049e454260a62aa19c35b82499dc35811a5aad44ef612f238808cae15d5c5b55\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4d67:9e5c:abb:531:b55d/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4d67:9e5c:abb:531:b55d/128\"], \"endpoints\": [\"127.0.0.1:58992\", \"172.20.0.2:58992\"]}}\n    t.go:81: 2023-03-29 13:37:27.514 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n    t.go:81: 2023-03-29 13:37:27.514 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n    t.go:81: 2023-03-29 13:37:27.514 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1480\u003e\t(*Conn).derpWriteChanOfAddr\tmagicsock: adding connection to derp-1 for home-keep-alive\n    t.go:81: 2023-03-29 13:37:27.514 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2747\u003e\t(*Conn).logActiveDerpLocked\tmagicsock: 1 active derp conns: derp-1=cr0s,wr0s\n    t.go:81: 2023-03-29 13:37:27.515 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:225\u003e\tNewConn.func6\twireguard status\t{\"status\": \"\\u0026{AsOf:2023-03-29 13:37:27.515008199 +0000 UTC m=+4.154615430 Peers:[] LocalAddrs:[{Addr:127.0.0.1:58992 Type:stun} {Addr:172.20.0.2:58992 Type:local}] DERPs:1}\", \"err\": null}\n    t.go:81: 2023-03-29 13:37:27.515 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:246\u003e\tNewConn.func7\tnetinfo callback\t{\"netinfo\": {\"MappingVariesByDestIP\": false, \"HairPinning\": null, \"WorkingIPv6\": false, \"OSHasIPv6\": false, \"WorkingUDP\": true, \"WorkingICMPv4\": false, \"UPnP\": false, \"PMP\": false, \"PCP\": false, \"PreferredDERP\": 1, \"DERPLatency\": {\"1-v4\": 0.062405899}}}\n    t.go:81: 2023-03-29 13:37:27.515 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 6959219245254193963, \"as_of\": \"2023-03-29T13:37:27.515155Z\", \"key\": \"nodekey:e443af25902d57edd4bf0b663849e6cb06390f7b80e6ab179dbd5deabea10e0c\", \"disco\": \"discokey:049e454260a62aa19c35b82499dc35811a5aad44ef612f238808cae15d5c5b55\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.062405899}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4d67:9e5c:abb:531:b55d/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4d67:9e5c:abb:531:b55d/128\"], \"endpoints\": [\"127.0.0.1:58992\", \"172.20.0.2:58992\"]}}\n    t.go:81: 2023-03-29 13:37:27.515 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:426\u003e\t(*Conn).UpdateNodes\tadding node\t{\"node\": {\"id\": 6959219245254193963, \"as_of\": \"2023-03-29T13:37:27.515155Z\", \"key\": \"nodekey:e443af25902d57edd4bf0b663849e6cb06390f7b80e6ab179dbd5deabea10e0c\", \"disco\": \"discokey:049e454260a62aa19c35b82499dc35811a5aad44ef612f238808cae15d5c5b55\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.062405899}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4d67:9e5c:abb:531:b55d/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4d67:9e5c:abb:531:b55d/128\"], \"endpoints\": [\"127.0.0.1:58992\", \"172.20.0.2:58992\"]}}\n    t.go:81: 2023-03-29 13:37:27.515 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n    t.go:81: 2023-03-29 13:37:27.515 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2578\u003e\t(*Conn).SetNetworkMap\t[v1] magicsock: got updated network map; 1 peers\n    t.go:81: 2023-03-29 13:37:27.515 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:706\u003e\t(*userspaceEngine).maybeReconfigWireguardLocked\twgengine: Reconfig: configuring userspace WireGuard config (with 0/1 peers)\n    t.go:81: 2023-03-29 13:37:27.515 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n    t.go:81: 2023-03-29 13:37:27.516 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/derp/derphttp/derphttp_client.go:401\u003e\t(*Client).connect\tderphttp.Client.Connect: connecting to derp-1 (test)\n    t.go:81: 2023-03-29 13:37:27.525 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: [v1] netcheck: measuring HTTPS latency of test (1): unexpected status code: 426 (426 Upgrade Required)\n    t.go:81: 2023-03-29 13:37:27.525 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: [v1] report: udp=true v6=false v6os=false mapvarydest=false hair= portmap= v4a=127.0.0.1:34848 derp=1 derpdist=1v4:65ms\n    t.go:81: 2023-03-29 13:37:27.525 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1092\u003e\t(*Conn).setNearestDERP\tmagicsock: home is now derp-1 (test)\n    t.go:81: 2023-03-29 13:37:27.525 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2759\u003e\t(*Conn).logEndpointChange\tmagicsock: endpoints changed: 127.0.0.1:34848 (stun), 172.20.0.2:34848 (local)\n    t.go:81: 2023-03-29 13:37:27.525 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:225\u003e\tNewConn.func6\twireguard status\t{\"status\": \"\\u0026{AsOf:2023-03-29 13:37:27.525526859 +0000 UTC m=+4.165134074 Peers:[] LocalAddrs:[{Addr:127.0.0.1:34848 Type:stun} {Addr:172.20.0.2:34848 Type:local}] DERPs:0}\", \"err\": null}\n    t.go:81: 2023-03-29 13:37:27.525 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1480\u003e\t(*Conn).derpWriteChanOfAddr\tmagicsock: adding connection to derp-1 for home-keep-alive\n    t.go:81: 2023-03-29 13:37:27.525 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2747\u003e\t(*Conn).logActiveDerpLocked\tmagicsock: 1 active derp conns: derp-1=cr0s,wr0s\n    t.go:81: 2023-03-29 13:37:27.525 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:225\u003e\tNewConn.func6\twireguard status\t{\"status\": \"\\u0026{AsOf:2023-03-29 13:37:27.525972278 +0000 UTC m=+4.165579492 Peers:[] LocalAddrs:[{Addr:127.0.0.1:34848 Type:stun} {Addr:172.20.0.2:34848 Type:local}] DERPs:1}\", \"err\": null}\n    t.go:81: 2023-03-29 13:37:27.526 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:246\u003e\tNewConn.func7\tnetinfo callback\t{\"netinfo\": {\"MappingVariesByDestIP\": false, \"HairPinning\": null, \"WorkingIPv6\": false, \"OSHasIPv6\": false, \"WorkingUDP\": true, \"WorkingICMPv4\": false, \"UPnP\": false, \"PMP\": false, \"PCP\": false, \"PreferredDERP\": 1, \"DERPLatency\": {\"1-v4\": 0.065420657}}}\n    t.go:81: 2023-03-29 13:37:27.526 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 2689903771435529409, \"as_of\": \"2023-03-29T13:37:27.5256Z\", \"key\": \"nodekey:e568ad36a49b4d60323fc0207eded97153e72170c491f74a8942ac38e9dd541f\", \"disco\": \"discokey:34ff526bdd502e84533e42919465a676d8fa64abda3b4f5943a8c9aa6fd0253b\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": [\"127.0.0.1:34848\", \"172.20.0.2:34848\"]}}\n    t.go:81: 2023-03-29 13:37:27.526 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:423\u003e\t(*Conn).UpdateNodes\tno preferred DERP, skipping node\t{\"node\": {\"id\": 2689903771435529409, \"as_of\": \"2023-03-29T13:37:27.5256Z\", \"key\": \"nodekey:e568ad36a49b4d60323fc0207eded97153e72170c491f74a8942ac38e9dd541f\", \"disco\": \"discokey:34ff526bdd502e84533e42919465a676d8fa64abda3b4f5943a8c9aa6fd0253b\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": [\"127.0.0.1:34848\", \"172.20.0.2:34848\"]}}\n    t.go:81: 2023-03-29 13:37:27.526 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n    t.go:81: 2023-03-29 13:37:27.526 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n    t.go:81: 2023-03-29 13:37:27.526 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/derp/derphttp/derphttp_client.go:401\u003e\t(*Client).connect\tderphttp.Client.Connect: connecting to derp-1 (test)\n    t.go:81: 2023-03-29 13:37:27.526 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 2689903771435529409, \"as_of\": \"2023-03-29T13:37:27.526766Z\", \"key\": \"nodekey:e568ad36a49b4d60323fc0207eded97153e72170c491f74a8942ac38e9dd541f\", \"disco\": \"discokey:34ff526bdd502e84533e42919465a676d8fa64abda3b4f5943a8c9aa6fd0253b\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.065420657}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": [\"127.0.0.1:34848\", \"172.20.0.2:34848\"]}}\n    t.go:81: 2023-03-29 13:37:27.527 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:426\u003e\t(*Conn).UpdateNodes\tadding node\t{\"node\": {\"id\": 2689903771435529409, \"as_of\": \"2023-03-29T13:37:27.526766Z\", \"key\": \"nodekey:e568ad36a49b4d60323fc0207eded97153e72170c491f74a8942ac38e9dd541f\", \"disco\": \"discokey:34ff526bdd502e84533e42919465a676d8fa64abda3b4f5943a8c9aa6fd0253b\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.065420657}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": [\"127.0.0.1:34848\", \"172.20.0.2:34848\"]}}\n    t.go:81: 2023-03-29 13:37:27.527 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n    t.go:81: 2023-03-29 13:37:27.527 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2578\u003e\t(*Conn).SetNetworkMap\t[v1] magicsock: got updated network map; 1 peers\n    t.go:81: 2023-03-29 13:37:27.527 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:706\u003e\t(*userspaceEngine).maybeReconfigWireguardLocked\twgengine: Reconfig: configuring userspace WireGuard config (with 0/1 peers)\n    t.go:81: 2023-03-29 13:37:27.527 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n    t.go:81: 2023-03-29 13:37:27.535 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1705\u003e\t(*Conn).runDerpReader\tmagicsock: derp-1 connected; connGen=1\n    t.go:81: 2023-03-29 13:37:27.537 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1705\u003e\t(*Conn).runDerpReader\tmagicsock: derp-1 connected; connGen=1\n    t.go:81: 2023-03-29 13:37:27.578 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: [v1] report: udp=true v6=false v6os=false mapvarydest= hair= portmap= v4a=127.0.0.1:58992 derp=1 derpdist=1v4:5ms\n    t.go:81: 2023-03-29 13:37:27.578 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: [v1] report: udp=true v6=false v6os=false mapvarydest= hair= portmap= v4a=127.0.0.1:34848 derp=1 derpdist=1v4:7ms\n    t.go:81: 2023-03-29 13:37:27.578 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:246\u003e\tNewConn.func7\tnetinfo callback\t{\"netinfo\": {\"MappingVariesByDestIP\": null, \"HairPinning\": null, \"WorkingIPv6\": false, \"OSHasIPv6\": false, \"WorkingUDP\": true, \"WorkingICMPv4\": false, \"UPnP\": false, \"PMP\": false, \"PCP\": false, \"PreferredDERP\": 1, \"DERPLatency\": {\"1-v4\": 0.005291379}}}\n    t.go:81: 2023-03-29 13:37:27.578 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 6959219245254193963, \"as_of\": \"2023-03-29T13:37:27.578687Z\", \"key\": \"nodekey:e443af25902d57edd4bf0b663849e6cb06390f7b80e6ab179dbd5deabea10e0c\", \"disco\": \"discokey:049e454260a62aa19c35b82499dc35811a5aad44ef612f238808cae15d5c5b55\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.005291379}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4d67:9e5c:abb:531:b55d/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4d67:9e5c:abb:531:b55d/128\"], \"endpoints\": [\"127.0.0.1:58992\", \"172.20.0.2:58992\"]}}\n    t.go:81: 2023-03-29 13:37:27.578 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:426\u003e\t(*Conn).UpdateNodes\tadding node\t{\"node\": {\"id\": 6959219245254193963, \"as_of\": \"2023-03-29T13:37:27.578687Z\", \"key\": \"nodekey:e443af25902d57edd4bf0b663849e6cb06390f7b80e6ab179dbd5deabea10e0c\", \"disco\": \"discokey:049e454260a62aa19c35b82499dc35811a5aad44ef612f238808cae15d5c5b55\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.005291379}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4d67:9e5c:abb:531:b55d/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4d67:9e5c:abb:531:b55d/128\"], \"endpoints\": [\"127.0.0.1:58992\", \"172.20.0.2:58992\"]}}\n    t.go:81: 2023-03-29 13:37:27.579 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n    t.go:81: 2023-03-29 13:37:27.579 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2578\u003e\t(*Conn).SetNetworkMap\t[v1] magicsock: got updated network map; 1 peers\n    t.go:81: 2023-03-29 13:37:27.579 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n    t.go:81: 2023-03-29 13:37:27.579 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:246\u003e\tNewConn.func7\tnetinfo callback\t{\"netinfo\": {\"MappingVariesByDestIP\": null, \"HairPinning\": null, \"WorkingIPv6\": false, \"OSHasIPv6\": false, \"WorkingUDP\": true, \"WorkingICMPv4\": false, \"UPnP\": false, \"PMP\": false, \"PCP\": false, \"PreferredDERP\": 1, \"DERPLatency\": {\"1-v4\": 0.00675754}}}\n    t.go:81: 2023-03-29 13:37:27.579 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 2689903771435529409, \"as_of\": \"2023-03-29T13:37:27.579606Z\", \"key\": \"nodekey:e568ad36a49b4d60323fc0207eded97153e72170c491f74a8942ac38e9dd541f\", \"disco\": \"discokey:34ff526bdd502e84533e42919465a676d8fa64abda3b4f5943a8c9aa6fd0253b\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.00675754}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": [\"127.0.0.1:34848\", \"172.20.0.2:34848\"]}}\n    t.go:81: 2023-03-29 13:37:27.579 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:426\u003e\t(*Conn).UpdateNodes\tadding node\t{\"node\": {\"id\": 2689903771435529409, \"as_of\": \"2023-03-29T13:37:27.579606Z\", \"key\": \"nodekey:e568ad36a49b4d60323fc0207eded97153e72170c491f74a8942ac38e9dd541f\", \"disco\": \"discokey:34ff526bdd502e84533e42919465a676d8fa64abda3b4f5943a8c9aa6fd0253b\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.00675754}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": [\"127.0.0.1:34848\", \"172.20.0.2:34848\"]}}\n    t.go:81: 2023-03-29 13:37:27.580 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n    t.go:81: 2023-03-29 13:37:27.580 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2578\u003e\t(*Conn).SetNetworkMap\t[v1] magicsock: got updated network map; 1 peers\n    t.go:81: 2023-03-29 13:37:27.580 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n    t.go:81: 2023-03-29 13:37:27.624 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1254\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4): sending disco ping to [5WitN]  ...\n    t.go:81: 2023-03-29 13:37:27.625 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1599\u003e\t(*Conn).setPeerLastDerpLocked\t[v1] magicsock: derp route for [5WitN] set to derp-1 (shared home)\n    t.go:81: 2023-03-29 13:37:27.626 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1599\u003e\t(*Conn).setPeerLastDerpLocked\t[v1] magicsock: derp route for [5EOvJ] set to derp-1 (shared home)\n    t.go:81: 2023-03-29 13:37:27.626 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:4387\u003e\t(*endpoint).handlePongConnLocked\tmagicsock: disco: node [5WitN] d:34ff526bdd502e84 now using 172.20.0.2:34848\n    t.go:81: 2023-03-29 13:37:27.626 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1254\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4): sending disco ping to [5WitN]  ...\n    t.go:81: 2023-03-29 13:37:27.626 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1254\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4): sending disco ping to [5WitN]  ...\n    t.go:81: 2023-03-29 13:37:27.627 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:706\u003e\t(*userspaceEngine).maybeReconfigWireguardLocked\twgengine: Reconfig: configuring userspace WireGuard config (with 1/1 peers)\n    t.go:81: 2023-03-29 13:37:27.628 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [5WitN] - UAPI: Created\n    t.go:81: 2023-03-29 13:37:27.628 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [5WitN] - UAPI: Updating endpoint\n    t.go:81: 2023-03-29 13:37:27.628 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [5WitN] - UAPI: Removing all allowedips\n    t.go:81: 2023-03-29 13:37:27.628 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [5WitN] - UAPI: Adding allowedip\n    t.go:81: 2023-03-29 13:37:27.628 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [5WitN] - UAPI: Updating persistent keepalive interval\n    t.go:81: 2023-03-29 13:37:27.628 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [5WitN] - Starting\n    t.go:81: 2023-03-29 13:37:27.628 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [5WitN] - Sending handshake initiation\n    t.go:81: 2023-03-29 13:37:27.628 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:584\u003e\t(*userspaceEngine).noteRecvActivity\twgengine: idle peer [5EOvJ] now active, reconfiguring WireGuard\n    t.go:81: 2023-03-29 13:37:27.628 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:706\u003e\t(*userspaceEngine).maybeReconfigWireguardLocked\twgengine: Reconfig: configuring userspace WireGuard config (with 1/1 peers)\n    t.go:81: 2023-03-29 13:37:27.629 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [5EOvJ] - UAPI: Created\n    t.go:81: 2023-03-29 13:37:27.629 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [5EOvJ] - UAPI: Updating endpoint\n    t.go:81: 2023-03-29 13:37:27.629 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [5EOvJ] - UAPI: Removing all allowedips\n    t.go:81: 2023-03-29 13:37:27.629 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [5EOvJ] - UAPI: Adding allowedip\n    t.go:81: 2023-03-29 13:37:27.629 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [5EOvJ] - UAPI: Updating persistent keepalive interval\n    t.go:81: 2023-03-29 13:37:27.629 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [5EOvJ] - Starting\n    t.go:81: 2023-03-29 13:37:27.629 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [5EOvJ] - Received handshake initiation\n    t.go:81: 2023-03-29 13:37:27.629 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [5EOvJ] - Sending handshake response\n    t.go:81: 2023-03-29 13:37:27.630 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:225\u003e\tNewConn.func6\twireguard status\t{\"status\": \"\\u0026{AsOf:2023-03-29 13:37:27.630405833 +0000 UTC m=+4.270013057 Peers:[{TxBytes:92 RxBytes:148 LastHandshake:1970-01-01 00:00:00 +0000 UTC NodeKey:nodekey:e443af25902d57edd4bf0b663849e6cb06390f7b80e6ab179dbd5deabea10e0c}] LocalAddrs:[{Addr:127.0.0.1:34848 Type:stun} {Addr:172.20.0.2:34848 Type:local}] DERPs:1}\", \"err\": null}\n    t.go:81: 2023-03-29 13:37:27.631 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [5WitN] - Received handshake response\n    t.go:81: 2023-03-29 13:37:27.631 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:4387\u003e\t(*endpoint).handlePongConnLocked\tmagicsock: disco: node [5EOvJ] d:049e454260a62aa1 now using 172.20.0.2:58992\n    t.go:81: 2023-03-29 13:37:27.631 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:225\u003e\tNewConn.func6\twireguard status\t{\"status\": \"\\u0026{AsOf:2023-03-29 13:37:27.631481797 +0000 UTC m=+4.271089021 Peers:[{TxBytes:148 RxBytes:92 LastHandshake:2023-03-29 13:37:27.631305354 +0000 UTC NodeKey:nodekey:e568ad36a49b4d60323fc0207eded97153e72170c491f74a8942ac38e9dd541f}] LocalAddrs:[{Addr:127.0.0.1:58992 Type:stun} {Addr:172.20.0.2:58992 Type:local}] DERPs:1}\", \"err\": null}\n    t.go:81: 2023-03-29 13:37:27.632 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:4387\u003e\t(*endpoint).handlePongConnLocked\tmagicsock: disco: node [5WitN] d:34ff526bdd502e84 now using 127.0.0.1:34848\n    agent_test.go:400: \n        \tError Trace:\t/home/mafredri/src/coder/coder/agent/agent_test.go:400\n        \t            \t\t\t\t/home/mafredri/src/coder/coder/agent/agent_test.go:401\n        \tError:      \t\"\" does not contain \"wazzup\"\n        \tTest:       \tTestAgent_Session_TTY_FastCommandHasOutput\n        \tMessages:   \tshould output greeting\n    ptytest.go:83: 2023-03-29 13:37:27.648: cmd: closing tpty: close\n    ptytest.go:74: 2023-03-29 13:37:27.648: cmd: closing pty\n    ptytest.go:110: 2023-03-29 13:37:27.648: cmd: copy done: read /dev/ptmx: file already closed\n    ptytest.go:111: 2023-03-29 13:37:27.648: cmd: closing out\n    ptytest.go:113: 2023-03-29 13:37:27.648: cmd: closed out: read /dev/ptmx: file already closed\n    ptytest.go:76: 2023-03-29 13:37:27.648: cmd: closed pty: \u003cnil\u003e\n    ptytest.go:74: 2023-03-29 13:37:27.648: cmd: closing logw\n    ptytest.go:76: 2023-03-29 13:37:27.648: cmd: closed logw: \u003cnil\u003e\n    ptytest.go:74: 2023-03-29 13:37:27.648: cmd: closing logr\n    ptytest.go:76: 2023-03-29 13:37:27.648: cmd: closed logr: \u003cnil\u003e\n    ptytest.go:102: 2023-03-29 13:37:27.648: cmd: closed tpty\n    t.go:81: 2023-03-29 13:37:27.648 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2736\u003e\t(*Conn).closeDerpLocked\tmagicsock: closing connection to derp-1 (conn-close), age 0s\n    t.go:81: 2023-03-29 13:37:27.648 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2747\u003e\t(*Conn).logActiveDerpLocked\tmagicsock: 0 active derp conns\n    t.go:81: 2023-03-29 13:37:27.649 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:31\u003e\tfakeRouter.Close\t[v1] warning: fakeRouter.Close: not implemented.\n    t.go:81: 2023-03-29 13:37:27.649 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Device closing\n    t.go:81: 2023-03-29 13:37:27.649 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming receiveDERP - stopped\n    t.go:81: 2023-03-29 13:37:27.649 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v6 - stopped\n    t.go:81: 2023-03-29 13:37:27.649 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v4 - stopped\n    t.go:81: 2023-03-29 13:37:27.649 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [5WitN] - Stopping\n    t.go:81: 2023-03-29 13:37:27.649 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Device closed\n    t.go:81: 2023-03-29 13:37:27.649 [INFO]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:201\u003e\t(*agent).runLoop\tdisconnected from coderd\n    t.go:81: 2023-03-29 13:37:27.649 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:263\u003e\t(*agent).setLifecycle\tset lifecycle state\t{\"state\": \"shutting_down\", \"last\": \"ready\"}\n    t.go:81: 2023-03-29 13:37:27.649 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:263\u003e\t(*agent).setLifecycle\tset lifecycle state\t{\"state\": \"off\", \"last\": \"shutting_down\"}\n    t.go:81: 2023-03-29 13:37:27.649 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:229\u003e\t(*agent).reportLifecycleLoop\treporting lifecycle state\t{\"state\": \"off\"}\n    t.go:81: 2023-03-29 13:37:27.649 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2736\u003e\t(*Conn).closeDerpLocked\tmagicsock: closing connection to derp-1 (conn-close), age 0s\n    t.go:81: 2023-03-29 13:37:27.649 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2747\u003e\t(*Conn).logActiveDerpLocked\tmagicsock: 0 active derp conns\n    t.go:81: 2023-03-29 13:37:27.649 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:31\u003e\tfakeRouter.Close\t[v1] warning: fakeRouter.Close: not implemented.\n    t.go:81: 2023-03-29 13:37:27.649 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Device closing\n    t.go:81: 2023-03-29 13:37:27.650 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming receiveDERP - stopped\n    t.go:81: 2023-03-29 13:37:27.650 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1254\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:4d67:9e5c:abb:531:b55d): sending disco ping to [5EOvJ]  ...\n    t.go:81: 2023-03-29 13:37:27.650 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v6 - stopped\n    t.go:81: 2023-03-29 13:37:27.650 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v4 - stopped\n    t.go:81: 2023-03-29 13:37:27.650 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [5EOvJ] - Stopping\n    t.go:81: 2023-03-29 13:37:27.650 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Device closed\n    stuntest.go:63: STUN server shutdown\n--- FAIL: TestAgent_Session_TTY_FastCommandHasOutput (0.95s)\n"
    },
    {
      "package": "v2/agent",
      "name": "TestAgent_Session_TTY_HugeOutputIsNotLost",
      "time": 0,
      "skip": true
    },
    {
      "package": "v2/agent",
      "name": "TestAgent_Session_TTY_Hushlogin",
      "time": 1.69
    },
    {
      "package": "v2/agent",
      "name": "TestAgent_Session_TTY_MOTD",
      "time": 1.62
    },
    {
      "package": "v2/cli",
      "name": "TestServer",
      "time": 0.05,
      "fail": true,
      "output": "=== RUN   TestServer\n--- FAIL: TestServer (0.05s)\n"
    },
    {
      "package": "v2/cli",
      "name": "TestServer/BuiltinPostgres",
      "time": 5.17
    },
    {
      "package": "v2/cli",
      "name": "TestServer/BuiltinPostgresURL",
      "time": 0.11
    },
    {
      "package": "v2/cli",
      "name": "TestServer/BuiltinPostgresURLRaw",
      "time": 0.11
    },
    {
      "package": "v2/cli",
      "name": "TestServer/CanListenUnspecifiedv4",
      "time": 0.6
    },
    {
      "package": "v2/cli",
      "name": "TestServer/CanListenUnspecifiedv6",
      "time": 0.63
    },
    {
      "package": "v2/cli",
      "name": "TestServer/DeprecatedAddress",
      "time": 0.06
    },
    {
      "package": "v2/cli",
      "name": "TestServer/DeprecatedAddress/HTTP",
      "time": 1.01
    },
    {
      "package": "v2/cli",
      "name": "TestServer/DeprecatedAddress/TLS",
      "time": 0.5
    },
    {
      "package": "v2/cli",
      "name": "TestServer/GitHubOAuth",
      "time": 1.01
    },
    {
      "package": "v2/cli",
      "name": "TestServer/LocalAccessURL",
      "time": 0.71
    },
    {
      "package": "v2/cli",
      "name": "TestServer/Logging",
      "time": 0
    },
    {
      "package": "v2/cli",
      "name": "TestServer/Logging/CreatesFile",
      "time": 0.69
    },
    {
      "package": "v2/cli",
      "name": "TestServer/Logging/Human",
      "time": 0.7
    },
    {
      "package": "v2/cli",
      "name": "TestServer/Logging/JSON",
      "time": 0.67
    },
    {
      "package": "v2/cli",
      "name": "TestServer/Logging/Multiple",
      "time": 13.24
    },
    {
      "package": "v2/cli",
      "name": "TestServer/Logging/Stackdriver",
      "time": 26.23
    },
    {
      "package": "v2/cli",
      "name": "TestServer/NoAddress",
      "time": 0
    },
    {
      "package": "v2/cli",
      "name": "TestServer/NoSchemeAccessURL",
      "time": 0
    },
    {
      "package": "v2/cli",
      "name": "TestServer/NoTLSAddress",
      "time": 0
    },
    {
      "package": "v2/cli",
      "name": "TestServer/NoWarningWithRemoteAccessURL",
      "time": 0.72
    },
    {
      "package": "v2/cli",
      "name": "TestServer/Production",
      "time": 0,
      "fail": true,
      "output": "=== RUN   TestServer/Production\n    server_test.go:109: \n        \tError Trace:\t/home/mafredri/src/coder/coder/cli/server_test.go:109\n        \tError:      \tReceived unexpected error:\n        \t            \tcould not start resource:\n        \t            \t    github.com/coder/coder/v2/coderd/database/postgres.Open\n        \t            \t        /home/mafredri/src/coder/coder/coderd/database/postgres/postgres.go:113\n        \t            \t  - dial unix /var/run/docker.sock: connect: no such file or directory\n        \t            \t    \n        \t            \t    github.com/ory/dockertest/v3.(*Pool).RunWithOptions\n        \t            \t    \t/home/mafredri/.local/go/pkg/mod/github.com/ory/dockertest/v3@v3.9.1/dockertest.go:413\n        \t            \t    github.com/coder/coder/v2/coderd/database/postgres.Open\n        \t            \t    \t/home/mafredri/src/coder/coder/coderd/database/postgres/postgres.go:77\n        \t            \t    github.com/coder/coder/v2/cli_test.TestServer.func1\n        \t            \t    \t/home/mafredri/src/coder/coder/cli/server_test.go:108\n        \t            \t    testing.tRunner\n        \t            \t    \t/usr/local/go/src/testing/testing.go:1576\n        \t            \t    runtime.goexit\n        \t            \t    \t/usr/local/go/src/runtime/asm_amd64.s:1598\n        \tTest:       \tTestServer/Production\n--- FAIL: TestServer/Production (0.00s)\n"
    },
    {
      "package": "v2/cli",
      "name": "TestServer/Prometheus",
      "time": 1
    },
    {
      "package": "v2/cli",
      "name": "TestServer/RateLimit",
      "time": 0
    },
    {
      "package": "v2/cli",
      "name": "TestServer/RateLimit/Changed",
      "time": 1.07
    },
    {
      "package": "v2/cli",
      "name": "TestServer/RateLimit/Default",
      "time": 0.85
    },
    {
      "package": "v2/cli",
      "name": "TestServer/RateLimit/Disabled",
      "time": 1.02
    },
    {
      "package": "v2/cli",
      "name": "TestServer/RemoteAccessURL",
      "time": 0.92
    },
    {
      "package": "v2/cli",
      "name": "TestServer/Shutdown",
      "time": 0.05
    },
    {
      "package": "v2/cli",
      "name": "TestServer/TLSAndHTTP",
      "time": 1.24
    },
    {
      "package": "v2/cli",
      "name": "TestServer/TLSBadClientAuth",
      "time": 0
    },
    {
      "package": "v2/cli",
      "name": "TestServer/TLSBadVersion",
      "time": 0
    },
    {
      "package": "v2/cli",
      "name": "TestServer/TLSInvalid",
      "time": 0
    },
    {
      "package": "v2/cli",
      "name": "TestServer/TLSInvalid/MismatchedCertAndKey",
      "time": 0
    },
    {
      "package": "v2/cli",
      "name": "TestServer/TLSInvalid/MismatchedCount",
      "time": 0
    },
    {
      "package": "v2/cli",
      "name": "TestServer/TLSInvalid/NoCert",
      "time": 0
    },
    {
      "package": "v2/cli",
      "name": "TestServer/TLSInvalid/NoKey",
      "time": 0
    },
    {
      "package": "v2/cli",
      "name": "TestServer/TLSRedirect",
      "time": 0.05
    },
    {
      "package": "v2/cli",
      "name": "TestServer/TLSRedirect/NoHTTPListener",
      "time": 0.62
    },
    {
      "package": "v2/cli",
      "name": "TestServer/TLSRedirect/NoRedirect",
      "time": 0.77
    },
    {
      "package": "v2/cli",
      "name": "TestServer/TLSRedirect/NoRedirectWithWildcard",
      "time": 0.47
    },
    {
      "package": "v2/cli",
      "name": "TestServer/TLSRedirect/NoTLSListener",
      "time": 0.59
    },
    {
      "package": "v2/cli",
      "name": "TestServer/TLSRedirect/OK",
      "time": 1.06
    },
    {
      "package": "v2/cli",
      "name": "TestServer/TLSValid",
      "time": 1.09
    },
    {
      "package": "v2/cli",
      "name": "TestServer/TLSValidMultiple",
      "time": 1.23
    },
    {
      "package": "v2/cli",
      "name": "TestServer/Telemetry",
      "time": 1.09
    },
    {
      "package": "v2/cli",
      "name": "TestServer/TracerNoLeak",
      "time": 0.75
    },
    {
      "package": "v2/cli",
      "name": "TestServerCreateAdminUser",
      "time": 0,
      "fail": true,
      "output": "=== RUN   TestServerCreateAdminUser\n--- FAIL: TestServerCreateAdminUser (0.00s)\n"
    },
    {
      "package": "v2/cli",
      "name": "TestServerCreateAdminUser/Env",
      "time": 0,
      "fail": true,
      "output": "=== RUN   TestServerCreateAdminUser/Env\n=== PAUSE TestServerCreateAdminUser/Env\n=== CONT  TestServerCreateAdminUser/Env\n    server_createadminuser_test.go:153: \n        \tError Trace:\t/home/mafredri/src/coder/coder/cli/server_createadminuser_test.go:153\n        \tError:      \tReceived unexpected error:\n        \t            \tcould not start resource:\n        \t            \t    github.com/coder/coder/v2/coderd/database/postgres.Open\n        \t            \t        /home/mafredri/src/coder/coder/coderd/database/postgres/postgres.go:113\n        \t            \t  - dial unix /var/run/docker.sock: connect: no such file or directory\n        \t            \t    \n        \t            \t    github.com/ory/dockertest/v3.(*Pool).RunWithOptions\n        \t            \t    \t/home/mafredri/.local/go/pkg/mod/github.com/ory/dockertest/v3@v3.9.1/dockertest.go:413\n        \t            \t    github.com/coder/coder/v2/coderd/database/postgres.Open\n        \t            \t    \t/home/mafredri/src/coder/coder/coderd/database/postgres/postgres.go:77\n        \t            \t    github.com/coder/coder/v2/cli_test.TestServerCreateAdminUser.func3\n        \t            \t    \t/home/mafredri/src/coder/coder/cli/server_createadminuser_test.go:152\n        \t            \t    testing.tRunner\n        \t            \t    \t/usr/local/go/src/testing/testing.go:1576\n        \t            \t    runtime.goexit\n        \t            \t    \t/usr/local/go/src/runtime/asm_amd64.s:1598\n        \tTest:       \tTestServerCreateAdminUser/Env\n--- FAIL: TestServerCreateAdminUser/Env (0.00s)\n"
    },
    {
      "package": "v2/cli",
      "name": "TestServerCreateAdminUser/OK",
      "time": 0,
      "fail": true,
      "output": "=== RUN   TestServerCreateAdminUser/OK\n=== PAUSE TestServerCreateAdminUser/OK\n=== CONT  TestServerCreateAdminUser/OK\n    server_createadminuser_test.go:87: \n        \tError Trace:\t/home/mafredri/src/coder/coder/cli/server_createadminuser_test.go:87\n        \tError:      \tReceived unexpected error:\n        \t            \tcould not start resource:\n        \t            \t    github.com/coder/coder/v2/coderd/database/postgres.Open\n        \t            \t        /home/mafredri/src/coder/coder/coderd/database/postgres/postgres.go:113\n        \t            \t  - dial unix /var/run/docker.sock: connect: no such file or directory\n        \t            \t    \n        \t            \t    github.com/ory/dockertest/v3.(*Pool).RunWithOptions\n        \t            \t    \t/home/mafredri/.local/go/pkg/mod/github.com/ory/dockertest/v3@v3.9.1/dockertest.go:413\n        \t            \t    github.com/coder/coder/v2/coderd/database/postgres.Open\n        \t            \t    \t/home/mafredri/src/coder/coder/coderd/database/postgres/postgres.go:77\n        \t            \t    github.com/coder/coder/v2/cli_test.TestServerCreateAdminUser.func2\n        \t            \t    \t/home/mafredri/src/coder/coder/cli/server_createadminuser_test.go:86\n        \t            \t    testing.tRunner\n        \t            \t    \t/usr/local/go/src/testing/testing.go:1576\n        \t            \t    runtime.goexit\n        \t            \t    \t/usr/local/go/src/runtime/asm_amd64.s:1598\n        \tTest:       \tTestServerCreateAdminUser/OK\n--- FAIL: TestServerCreateAdminUser/OK (0.00s)\n"
    },
    {
      "package": "v2/cli",
      "name": "TestServerCreateAdminUser/Stdin",
      "time": 0,
      "fail": true,
      "output": "=== RUN   TestServerCreateAdminUser/Stdin\n=== PAUSE TestServerCreateAdminUser/Stdin\n=== CONT  TestServerCreateAdminUser/Stdin\n    server_createadminuser_test.go:187: \n        \tError Trace:\t/home/mafredri/src/coder/coder/cli/server_createadminuser_test.go:187\n        \tError:      \tReceived unexpected error:\n        \t            \tcould not start resource:\n        \t            \t    github.com/coder/coder/v2/coderd/database/postgres.Open\n        \t            \t        /home/mafredri/src/coder/coder/coderd/database/postgres/postgres.go:113\n        \t            \t  - dial unix /var/run/docker.sock: connect: no such file or directory\n        \t            \t    \n        \t            \t    github.com/ory/dockertest/v3.(*Pool).RunWithOptions\n        \t            \t    \t/home/mafredri/.local/go/pkg/mod/github.com/ory/dockertest/v3@v3.9.1/dockertest.go:413\n        \t            \t    github.com/coder/coder/v2/coderd/database/postgres.Open\n        \t            \t    \t/home/mafredri/src/coder/coder/coderd/database/postgres/postgres.go:77\n        \t            \t    github.com/coder/coder/v2/cli_test.TestServerCreateAdminUser.func4\n        \t            \t    \t/home/mafredri/src/coder/coder/cli/server_createadminuser_test.go:186\n        \t            \t    testing.tRunner\n        \t            \t    \t/usr/local/go/src/testing/testing.go:1576\n        \t            \t    runtime.goexit\n        \t            \t    \t/usr/local/go/src/runtime/asm_amd64.s:1598\n        \tTest:       \tTestServerCreateAdminUser/Stdin\n--- FAIL: TestServerCreateAdminUser/Stdin (0.00s)\n"
    },
    {
      "package": "v2/cli",
      "name": "TestServerCreateAdminUser/Validates",
      "time": 0,
      "fail": true,
      "output": "=== RUN   TestServerCreateAdminUser/Validates\n=== PAUSE TestServerCreateAdminUser/Validates\n=== CONT  TestServerCreateAdminUser/Validates\n    server_createadminuser_test.go:227: \n        \tError Trace:\t/home/mafredri/src/coder/coder/cli/server_createadminuser_test.go:227\n        \tError:      \tReceived unexpected error:\n        \t            \tcould not start resource:\n        \t            \t    github.com/coder/coder/v2/coderd/database/postgres.Open\n        \t            \t        /home/mafredri/src/coder/coder/coderd/database/postgres/postgres.go:113\n        \t            \t  - dial unix /var/run/docker.sock: connect: no such file or directory\n        \t            \t    \n        \t            \t    github.com/ory/dockertest/v3.(*Pool).RunWithOptions\n        \t            \t    \t/home/mafredri/.local/go/pkg/mod/github.com/ory/dockertest/v3@v3.9.1/dockertest.go:413\n        \t            \t    github.com/coder/coder/v2/coderd/database/postgres.Open\n        \t            \t    \t/home/mafredri/src/coder/coder/coderd/database/postgres/postgres.go:77\n        \t            \t    github.com/coder/coder/v2/cli_test.TestServerCreateAdminUser.func5\n        \t            \t    \t/home/mafredri/src/coder/coder/cli/server_createadminuser_test.go:226\n        \t            \t    testing.tRunner\n        \t            \t    \t/usr/local/go/src/testing/testing.go:1576\n        \t            \t    runtime.goexit\n        \t            \t    \t/usr/local/go/src/runtime/asm_amd64.s:1598\n        \tTest:       \tTestServerCreateAdminUser/Validates\n--- FAIL: TestServerCreateAdminUser/Validates (0.00s)\n"
    },
    {
      "package": "v2/cli/cliui",
      "name": "TestGitAuth",
      "time": 0
    },
    {
      "package": "v2/cli/cliui",
      "name": "TestPrompt",
      "time": 0
    },
    {
      "package": "v2/cli/cliui",
      "name": "TestPrompt/BadJSON",
      "time": 0
    },
    {
      "package": "v2/cli/cliui",
      "name": "TestPrompt/Confirm",
      "time": 0
    },
    {
      "package": "v2/cli/cliui",
      "name": "TestPrompt/JSON",
      "time": 0
    },
    {
      "package": "v2/cli/cliui",
      "name": "TestPrompt/MultilineJSON",
      "time": 0
    },
    {
      "package": "v2/cli/cliui",
      "name": "TestPrompt/Skip",
      "time": 0
    },
    {
      "package": "v2/cli/cliui",
      "name": "TestPrompt/Success",
      "time": 0
    }
  ]
}
