{"Time":"2023-03-29T13:37:23.355347397Z","Action":"start","Package":"github.com/coder/coder/v2/agent"}
{"Time":"2023-03-29T13:37:23.381695238Z","Action":"run","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec"}
{"Time":"2023-03-29T13:37:23.38177342Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"=== RUN   TestAgent_SessionExec\n"}
{"Time":"2023-03-29T13:37:23.381791755Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"=== PAUSE TestAgent_SessionExec\n"}
{"Time":"2023-03-29T13:37:23.381805147Z","Action":"pause","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec"}
{"Time":"2023-03-29T13:37:23.381827974Z","Action":"run","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell"}
{"Time":"2023-03-29T13:37:23.381835977Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"=== RUN   TestAgent_SessionTTYShell\n"}
{"Time":"2023-03-29T13:37:23.381850018Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"=== PAUSE TestAgent_SessionTTYShell\n"}
{"Time":"2023-03-29T13:37:23.381857444Z","Action":"pause","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell"}
{"Time":"2023-03-29T13:37:23.381868815Z","Action":"run","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode"}
{"Time":"2023-03-29T13:37:23.381876252Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"=== RUN   TestAgent_SessionTTYExitCode\n"}
{"Time":"2023-03-29T13:37:23.381885049Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"=== PAUSE TestAgent_SessionTTYExitCode\n"}
{"Time":"2023-03-29T13:37:23.381896641Z","Action":"pause","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode"}
{"Time":"2023-03-29T13:37:23.381914968Z","Action":"run","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD"}
{"Time":"2023-03-29T13:37:23.381930694Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"=== RUN   TestAgent_Session_TTY_MOTD\n"}
{"Time":"2023-03-29T13:37:23.459584829Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.459 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:270\u003e\tNewUserspaceEngine\t[v1] using fake (no-op) tun device\n"}
{"Time":"2023-03-29T13:37:23.45962803Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.459 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:274\u003e\tNewUserspaceEngine\t[v1] using fake (no-op) OS network configurator\n"}
{"Time":"2023-03-29T13:37:23.459637144Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.459 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:278\u003e\tNewUserspaceEngine\t[v1] using fake (no-op) DNS configurator\n"}
{"Time":"2023-03-29T13:37:23.459709589Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.459 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: using dns.noopManager\n"}
{"Time":"2023-03-29T13:37:23.459766441Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.459 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:334\u003e\tNewUserspaceEngine\tlink state: interfaces.State{defaultRoute=eth0 ifs={eth0:[172.20.0.2/16]} v4=true v6=false}\n"}
{"Time":"2023-03-29T13:37:23.459896565Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.459 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:306\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP read buffer size to 7340032: operation not permitted\n"}
{"Time":"2023-03-29T13:37:23.45992711Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.459 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:310\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP write buffer size to 7340032: operation not permitted\n"}
{"Time":"2023-03-29T13:37:23.460013936Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.459 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:306\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP read buffer size to 7340032: operation not permitted\n"}
{"Time":"2023-03-29T13:37:23.460047337Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.460 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:310\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP write buffer size to 7340032: operation not permitted\n"}
{"Time":"2023-03-29T13:37:23.460151722Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.460 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:666\u003e\tNewConn\t[v1] couldn't create raw v4 disco listener, using regular listener instead: raw disco listening disabled, SO_MARK unavailable\n"}
{"Time":"2023-03-29T13:37:23.460178571Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.460 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:672\u003e\tNewConn\t[v1] couldn't create raw v6 disco listener, using regular listener instead: raw disco listening disabled, SO_MARK unavailable\n"}
{"Time":"2023-03-29T13:37:23.460311639Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.460 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1056\u003e\t(*Conn).DiscoPublicKey\tmagicsock: disco key = d:07ad6d06cd8b5ff2\n"}
{"Time":"2023-03-29T13:37:23.460356174Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.460 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:412\u003e\tNewUserspaceEngine\tCreating WireGuard device...\n"}
{"Time":"2023-03-29T13:37:23.460498076Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.460 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:437\u003e\tNewUserspaceEngine\tBringing WireGuard device up...\n"}
{"Time":"2023-03-29T13:37:23.460536017Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.460 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] UDP bind has been updated\n"}
{"Time":"2023-03-29T13:37:23.460590141Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.460 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Interface state was Down, requested Up, now Up\n"}
{"Time":"2023-03-29T13:37:23.460620636Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.460 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:441\u003e\tNewUserspaceEngine\tBringing router up...\n"}
{"Time":"2023-03-29T13:37:23.460662149Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.460 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:21\u003e\tfakeRouter.Up\t[v1] warning: fakeRouter.Up: not implemented.\n"}
{"Time":"2023-03-29T13:37:23.460698929Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.460 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:449\u003e\tNewUserspaceEngine\tClearing router settings...\n"}
{"Time":"2023-03-29T13:37:23.460733289Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.460 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:26\u003e\tfakeRouter.Set\t[v1] warning: fakeRouter.Set: not implemented.\n"}
{"Time":"2023-03-29T13:37:23.460789117Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.460 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:453\u003e\tNewUserspaceEngine\tStarting link monitor...\n"}
{"Time":"2023-03-29T13:37:23.460856196Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.460 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:456\u003e\tNewUserspaceEngine\tEngine created.\n"}
{"Time":"2023-03-29T13:37:23.460986291Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.460 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2444\u003e\t(*Conn).SetPrivateKey\tmagicsock: SetPrivateKey called (init)\n"}
{"Time":"2023-03-29T13:37:23.46141926Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.461 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:187\u003e\tNewConn\tupdating network map\n"}
{"Time":"2023-03-29T13:37:23.461506329Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.461 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2578\u003e\t(*Conn).SetNetworkMap\t[v1] magicsock: got updated network map; 0 peers\n"}
{"Time":"2023-03-29T13:37:23.461608094Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.461 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1241\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4): no matching peer\n"}
{"Time":"2023-03-29T13:37:23.46164708Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.461 [INFO]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:188\u003e\t(*agent).runLoop\tconnecting to coderd\n"}
{"Time":"2023-03-29T13:37:23.461997997Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.461 [INFO]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:286\u003e\t(*agent).run\tfetched metadata\t{\"metadata\": {\"git_auth_configs\": 0, \"vscode_port_proxy_uri\": \"\", \"apps\": null, \"derpmap\": {\"Regions\": {\"1\": {\"EmbeddedRelay\": false, \"RegionID\": 1, \"RegionCode\": \"test\", \"RegionName\": \"Test\", \"Nodes\": [{\"Name\": \"t2\", \"RegionID\": 1, \"HostName\": \"\", \"IPv4\": \"127.0.0.1\", \"IPv6\": \"none\", \"STUNPort\": 48127, \"DERPPort\": 44839, \"InsecureForTests\": true}]}}}, \"environment_variables\": null, \"startup_script\": \"\", \"startup_script_timeout\": 0, \"directory\": \"\", \"motd_file\": \"/tmp/TestAgent_Session_TTY_MOTD1157664819/001/motd\", \"shutdown_script\": \"\", \"shutdown_script_timeout\": 0}}\n"}
{"Time":"2023-03-29T13:37:23.462041275Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.461 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:263\u003e\t(*agent).setLifecycle\tset lifecycle state\t{\"state\": \"starting\", \"last\": \"\"}\n"}
{"Time":"2023-03-29T13:37:23.462418253Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.462 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:270\u003e\tNewUserspaceEngine\t[v1] using fake (no-op) tun device\n"}
{"Time":"2023-03-29T13:37:23.46244618Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.462 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:274\u003e\tNewUserspaceEngine\t[v1] using fake (no-op) OS network configurator\n"}
{"Time":"2023-03-29T13:37:23.462489007Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.462 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:278\u003e\tNewUserspaceEngine\t[v1] using fake (no-op) DNS configurator\n"}
{"Time":"2023-03-29T13:37:23.462532307Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.462 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: using dns.noopManager\n"}
{"Time":"2023-03-29T13:37:23.462584588Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.462 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:334\u003e\tNewUserspaceEngine\tlink state: interfaces.State{defaultRoute=eth0 ifs={eth0:[172.20.0.2/16]} v4=true v6=false}\n"}
{"Time":"2023-03-29T13:37:23.462669431Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.462 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:306\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP read buffer size to 7340032: operation not permitted\n"}
{"Time":"2023-03-29T13:37:23.462699701Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.462 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:310\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP write buffer size to 7340032: operation not permitted\n"}
{"Time":"2023-03-29T13:37:23.46277017Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.462 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:306\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP read buffer size to 7340032: operation not permitted\n"}
{"Time":"2023-03-29T13:37:23.46280348Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.462 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:310\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP write buffer size to 7340032: operation not permitted\n"}
{"Time":"2023-03-29T13:37:23.46284612Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.462 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:666\u003e\tNewConn\t[v1] couldn't create raw v4 disco listener, using regular listener instead: raw disco listening disabled, SO_MARK unavailable\n"}
{"Time":"2023-03-29T13:37:23.462890638Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.462 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:672\u003e\tNewConn\t[v1] couldn't create raw v6 disco listener, using regular listener instead: raw disco listening disabled, SO_MARK unavailable\n"}
{"Time":"2023-03-29T13:37:23.463014252Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.462 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1056\u003e\t(*Conn).DiscoPublicKey\tmagicsock: disco key = d:8ac4cc2c7460d56f\n"}
{"Time":"2023-03-29T13:37:23.463040585Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.463 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:412\u003e\tNewUserspaceEngine\tCreating WireGuard device...\n"}
{"Time":"2023-03-29T13:37:23.463167416Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.463 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:437\u003e\tNewUserspaceEngine\tBringing WireGuard device up...\n"}
{"Time":"2023-03-29T13:37:23.463228086Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.463 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] UDP bind has been updated\n"}
{"Time":"2023-03-29T13:37:23.463265117Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.463 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Interface state was Down, requested Up, now Up\n"}
{"Time":"2023-03-29T13:37:23.463307341Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.463 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:441\u003e\tNewUserspaceEngine\tBringing router up...\n"}
{"Time":"2023-03-29T13:37:23.463345133Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.463 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:21\u003e\tfakeRouter.Up\t[v1] warning: fakeRouter.Up: not implemented.\n"}
{"Time":"2023-03-29T13:37:23.463380146Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.463 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:449\u003e\tNewUserspaceEngine\tClearing router settings...\n"}
{"Time":"2023-03-29T13:37:23.463437865Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.463 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:26\u003e\tfakeRouter.Set\t[v1] warning: fakeRouter.Set: not implemented.\n"}
{"Time":"2023-03-29T13:37:23.463474458Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.463 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:453\u003e\tNewUserspaceEngine\tStarting link monitor...\n"}
{"Time":"2023-03-29T13:37:23.463513083Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.463 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:456\u003e\tNewUserspaceEngine\tEngine created.\n"}
{"Time":"2023-03-29T13:37:23.463651429Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.463 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2444\u003e\t(*Conn).SetPrivateKey\tmagicsock: SetPrivateKey called (init)\n"}
{"Time":"2023-03-29T13:37:23.463966826Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.463 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:187\u003e\tNewConn\tupdating network map\n"}
{"Time":"2023-03-29T13:37:23.463992242Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.463 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2578\u003e\t(*Conn).SetNetworkMap\t[v1] magicsock: got updated network map; 0 peers\n"}
{"Time":"2023-03-29T13:37:23.464079789Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.464 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:402\u003e\t(*agent).run\trunning tailnet connection coordinator\n"}
{"Time":"2023-03-29T13:37:23.464100162Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.464 [INFO]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:620\u003e\t(*agent).runCoordinator\tconnected to coordination endpoint\n"}
{"Time":"2023-03-29T13:37:23.464314405Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.464 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 5764434400100518555, \"as_of\": \"2023-03-29T13:37:23.464098Z\", \"key\": \"nodekey:d31eeb68b6968cc6779e62454901fb98bcacab1dcb46e15bec2b92205cc82229\", \"disco\": \"discokey:8ac4cc2c7460d56ffcd8064d64a7752b43475c7244a316f626b321097e07630f\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": []}}\n"}
{"Time":"2023-03-29T13:37:23.470436775Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.470 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v4 - started\n"}
{"Time":"2023-03-29T13:37:23.473142737Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.473 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v6 - started\n"}
{"Time":"2023-03-29T13:37:23.473905461Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.473 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming receiveDERP - started\n"}
{"Time":"2023-03-29T13:37:23.476012898Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.475 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 3370308278017414080, \"as_of\": \"2023-03-29T13:37:23.4615Z\", \"key\": \"nodekey:bd3f9574e34fe33bab67dc45e49054f84d69e7c686af37bb2556989a8e6e9b33\", \"disco\": \"discokey:07ad6d06cd8b5ff2fd2b25fcd8f253332fd46d9820c6e0a670d9302db2d21411\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4aeb:931f:72d2:b3f9:2775/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4aeb:931f:72d2:b3f9:2775/128\"], \"endpoints\": []}}\n"}
{"Time":"2023-03-29T13:37:23.476335333Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.476 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1241\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4): no matching peer\n"}
{"Time":"2023-03-29T13:37:23.476591432Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.476 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:229\u003e\t(*agent).reportLifecycleLoop\treporting lifecycle state\t{\"state\": \"starting\"}\n"}
{"Time":"2023-03-29T13:37:23.476641778Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.476 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:263\u003e\t(*agent).setLifecycle\tset lifecycle state\t{\"state\": \"ready\", \"last\": \"starting\"}\n"}
{"Time":"2023-03-29T13:37:23.476677236Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.476 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:229\u003e\t(*agent).reportLifecycleLoop\treporting lifecycle state\t{\"state\": \"ready\"}\n"}
{"Time":"2023-03-29T13:37:23.47834267Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.478 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v4 - started\n"}
{"Time":"2023-03-29T13:37:23.478773607Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.478 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v6 - started\n"}
{"Time":"2023-03-29T13:37:23.479289417Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.479 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming receiveDERP - started\n"}
{"Time":"2023-03-29T13:37:23.484191154Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.484 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:423\u003e\t(*Conn).UpdateNodes\tno preferred DERP, skipping node\t{\"node\": {\"id\": 3370308278017414080, \"as_of\": \"2023-03-29T13:37:23.4615Z\", \"key\": \"nodekey:bd3f9574e34fe33bab67dc45e49054f84d69e7c686af37bb2556989a8e6e9b33\", \"disco\": \"discokey:07ad6d06cd8b5ff2fd2b25fcd8f253332fd46d9820c6e0a670d9302db2d21411\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4aeb:931f:72d2:b3f9:2775/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4aeb:931f:72d2:b3f9:2775/128\"], \"endpoints\": []}}\n"}
{"Time":"2023-03-29T13:37:23.484233027Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.484 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n"}
{"Time":"2023-03-29T13:37:23.484426557Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.484 [DEBUG]\t(agent.tailnet.netstack)\t\u003ctailscale.com/wgengine/netstack/netstack.go:367\u003e\t(*Impl).updateIPs\t[v2] netstack: registered IP fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\n"}
{"Time":"2023-03-29T13:37:23.484790305Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.484 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:706\u003e\t(*userspaceEngine).maybeReconfigWireguardLocked\twgengine: Reconfig: configuring userspace WireGuard config (with 0/0 peers)\n"}
{"Time":"2023-03-29T13:37:23.484946523Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.484 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] UAPI: Updating private key\n"}
{"Time":"2023-03-29T13:37:23.485230922Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.485 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:921\u003e\t(*userspaceEngine).Reconfig\twgengine: Reconfig: configuring router\n"}
{"Time":"2023-03-29T13:37:23.485304276Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.485 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:26\u003e\tfakeRouter.Set\t[v1] warning: fakeRouter.Set: not implemented.\n"}
{"Time":"2023-03-29T13:37:23.485410816Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.485 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:931\u003e\t(*userspaceEngine).Reconfig\twgengine: Reconfig: configuring DNS\n"}
{"Time":"2023-03-29T13:37:23.485506941Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.485 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: Set: {DefaultResolvers:[] Routes:{} SearchDomains:[] Hosts:0}\n"}
{"Time":"2023-03-29T13:37:23.485747079Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.485 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: Resolvercfg: {Routes:{} Hosts:0 LocalDomains:[]}\n"}
{"Time":"2023-03-29T13:37:23.485857203Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.485 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: OScfg: {Nameservers:[] SearchDomains:[] MatchDomains:[] Hosts:[]}\n"}
{"Time":"2023-03-29T13:37:23.485942868Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.485 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n"}
{"Time":"2023-03-29T13:37:23.486354495Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.486 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:423\u003e\t(*Conn).UpdateNodes\tno preferred DERP, skipping node\t{\"node\": {\"id\": 5764434400100518555, \"as_of\": \"2023-03-29T13:37:23.464098Z\", \"key\": \"nodekey:d31eeb68b6968cc6779e62454901fb98bcacab1dcb46e15bec2b92205cc82229\", \"disco\": \"discokey:8ac4cc2c7460d56ffcd8064d64a7752b43475c7244a316f626b321097e07630f\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": []}}\n"}
{"Time":"2023-03-29T13:37:23.486406209Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.486 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n"}
{"Time":"2023-03-29T13:37:23.486580191Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.486 [DEBUG]\t(client.netstack)\t\u003ctailscale.com/wgengine/netstack/netstack.go:367\u003e\t(*Impl).updateIPs\t[v2] netstack: registered IP fd7a:115c:a1e0:4aeb:931f:72d2:b3f9:2775/128\n"}
{"Time":"2023-03-29T13:37:23.486731116Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.486 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:706\u003e\t(*userspaceEngine).maybeReconfigWireguardLocked\twgengine: Reconfig: configuring userspace WireGuard config (with 0/0 peers)\n"}
{"Time":"2023-03-29T13:37:23.486910536Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.486 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] UAPI: Updating private key\n"}
{"Time":"2023-03-29T13:37:23.48721125Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.487 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:921\u003e\t(*userspaceEngine).Reconfig\twgengine: Reconfig: configuring router\n"}
{"Time":"2023-03-29T13:37:23.487271545Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.487 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:26\u003e\tfakeRouter.Set\t[v1] warning: fakeRouter.Set: not implemented.\n"}
{"Time":"2023-03-29T13:37:23.487362767Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.487 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:931\u003e\t(*userspaceEngine).Reconfig\twgengine: Reconfig: configuring DNS\n"}
{"Time":"2023-03-29T13:37:23.487505661Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.487 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: Set: {DefaultResolvers:[] Routes:{} SearchDomains:[] Hosts:0}\n"}
{"Time":"2023-03-29T13:37:23.48757023Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.487 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: Resolvercfg: {Routes:{} Hosts:0 LocalDomains:[]}\n"}
{"Time":"2023-03-29T13:37:23.487687075Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.487 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: OScfg: {Nameservers:[] SearchDomains:[] MatchDomains:[] Hosts:[]}\n"}
{"Time":"2023-03-29T13:37:23.487755179Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.487 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n"}
{"Time":"2023-03-29T13:37:23.533579774Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.533 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: [v1] report: udp=true v6=false v6os=false mapvarydest=false hair= portmap= v4a=127.0.0.1:41471 derp=1 derpdist=1v4:5ms\n"}
{"Time":"2023-03-29T13:37:23.533653394Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.533 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1092\u003e\t(*Conn).setNearestDERP\tmagicsock: home is now derp-1 (test)\n"}
{"Time":"2023-03-29T13:37:23.534036522Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.533 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2759\u003e\t(*Conn).logEndpointChange\tmagicsock: endpoints changed: 127.0.0.1:41471 (stun), 172.20.0.2:41471 (local)\n"}
{"Time":"2023-03-29T13:37:23.534320881Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.534 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:225\u003e\tNewConn.func6\twireguard status\t{\"status\": \"\\u0026{AsOf:2023-03-29 13:37:23.534012576 +0000 UTC m=+0.173619877 Peers:[] LocalAddrs:[{Addr:127.0.0.1:41471 Type:stun} {Addr:172.20.0.2:41471 Type:local}] DERPs:0}\", \"err\": null}\n"}
{"Time":"2023-03-29T13:37:23.534485142Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.534 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: [v1] report: udp=true v6=false v6os=false mapvarydest=false hair= portmap= v4a=127.0.0.1:34768 derp=1 derpdist=1v4:4ms\n"}
{"Time":"2023-03-29T13:37:23.534597588Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.534 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1092\u003e\t(*Conn).setNearestDERP\tmagicsock: home is now derp-1 (test)\n"}
{"Time":"2023-03-29T13:37:23.534893919Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.534 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2759\u003e\t(*Conn).logEndpointChange\tmagicsock: endpoints changed: 127.0.0.1:34768 (stun), 172.20.0.2:34768 (local)\n"}
{"Time":"2023-03-29T13:37:23.535056614Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.534 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:225\u003e\tNewConn.func6\twireguard status\t{\"status\": \"\\u0026{AsOf:2023-03-29 13:37:23.534872863 +0000 UTC m=+0.174480149 Peers:[] LocalAddrs:[{Addr:127.0.0.1:34768 Type:stun} {Addr:172.20.0.2:34768 Type:local}] DERPs:0}\", \"err\": null}\n"}
{"Time":"2023-03-29T13:37:23.535722359Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.535 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1480\u003e\t(*Conn).derpWriteChanOfAddr\tmagicsock: adding connection to derp-1 for home-keep-alive\n"}
{"Time":"2023-03-29T13:37:23.535840193Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.535 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2747\u003e\t(*Conn).logActiveDerpLocked\tmagicsock: 1 active derp conns: derp-1=cr0s,wr0s\n"}
{"Time":"2023-03-29T13:37:23.53601927Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.535 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:225\u003e\tNewConn.func6\twireguard status\t{\"status\": \"\\u0026{AsOf:2023-03-29 13:37:23.535826298 +0000 UTC m=+0.175433549 Peers:[] LocalAddrs:[{Addr:127.0.0.1:41471 Type:stun} {Addr:172.20.0.2:41471 Type:local}] DERPs:1}\", \"err\": null}\n"}
{"Time":"2023-03-29T13:37:23.536284979Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.536 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:246\u003e\tNewConn.func7\tnetinfo callback\t{\"netinfo\": {\"MappingVariesByDestIP\": false, \"HairPinning\": null, \"WorkingIPv6\": false, \"OSHasIPv6\": false, \"WorkingUDP\": true, \"WorkingICMPv4\": false, \"UPnP\": false, \"PMP\": false, \"PCP\": false, \"PreferredDERP\": 1, \"DERPLatency\": {\"1-v4\": 0.004534057}}}\n"}
{"Time":"2023-03-29T13:37:23.536457311Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.536 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 3370308278017414080, \"as_of\": \"2023-03-29T13:37:23.5343Z\", \"key\": \"nodekey:bd3f9574e34fe33bab67dc45e49054f84d69e7c686af37bb2556989a8e6e9b33\", \"disco\": \"discokey:07ad6d06cd8b5ff2fd2b25fcd8f253332fd46d9820c6e0a670d9302db2d21411\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4aeb:931f:72d2:b3f9:2775/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4aeb:931f:72d2:b3f9:2775/128\"], \"endpoints\": [\"127.0.0.1:41471\", \"172.20.0.2:41471\"]}}\n"}
{"Time":"2023-03-29T13:37:23.536888005Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.536 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:423\u003e\t(*Conn).UpdateNodes\tno preferred DERP, skipping node\t{\"node\": {\"id\": 3370308278017414080, \"as_of\": \"2023-03-29T13:37:23.5343Z\", \"key\": \"nodekey:bd3f9574e34fe33bab67dc45e49054f84d69e7c686af37bb2556989a8e6e9b33\", \"disco\": \"discokey:07ad6d06cd8b5ff2fd2b25fcd8f253332fd46d9820c6e0a670d9302db2d21411\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4aeb:931f:72d2:b3f9:2775/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4aeb:931f:72d2:b3f9:2775/128\"], \"endpoints\": [\"127.0.0.1:41471\", \"172.20.0.2:41471\"]}}\n"}
{"Time":"2023-03-29T13:37:23.536962253Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.536 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n"}
{"Time":"2023-03-29T13:37:23.537168204Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.537 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n"}
{"Time":"2023-03-29T13:37:23.537809136Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.537 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1241\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4): no matching peer\n"}
{"Time":"2023-03-29T13:37:23.537959175Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.537 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1480\u003e\t(*Conn).derpWriteChanOfAddr\tmagicsock: adding connection to derp-1 for home-keep-alive\n"}
{"Time":"2023-03-29T13:37:23.538044116Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.537 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2747\u003e\t(*Conn).logActiveDerpLocked\tmagicsock: 1 active derp conns: derp-1=cr0s,wr0s\n"}
{"Time":"2023-03-29T13:37:23.538236588Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.538 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:225\u003e\tNewConn.func6\twireguard status\t{\"status\": \"\\u0026{AsOf:2023-03-29 13:37:23.538043332 +0000 UTC m=+0.177650587 Peers:[] LocalAddrs:[{Addr:127.0.0.1:34768 Type:stun} {Addr:172.20.0.2:34768 Type:local}] DERPs:1}\", \"err\": null}\n"}
{"Time":"2023-03-29T13:37:23.538347057Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.538 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:246\u003e\tNewConn.func7\tnetinfo callback\t{\"netinfo\": {\"MappingVariesByDestIP\": false, \"HairPinning\": null, \"WorkingIPv6\": false, \"OSHasIPv6\": false, \"WorkingUDP\": true, \"WorkingICMPv4\": false, \"UPnP\": false, \"PMP\": false, \"PCP\": false, \"PreferredDERP\": 1, \"DERPLatency\": {\"1-v4\": 0.004475683}}}\n"}
{"Time":"2023-03-29T13:37:23.538488084Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.538 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 5764434400100518555, \"as_of\": \"2023-03-29T13:37:23.535038Z\", \"key\": \"nodekey:d31eeb68b6968cc6779e62454901fb98bcacab1dcb46e15bec2b92205cc82229\", \"disco\": \"discokey:8ac4cc2c7460d56ffcd8064d64a7752b43475c7244a316f626b321097e07630f\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": [\"127.0.0.1:34768\", \"172.20.0.2:34768\"]}}\n"}
{"Time":"2023-03-29T13:37:23.538915728Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.538 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:423\u003e\t(*Conn).UpdateNodes\tno preferred DERP, skipping node\t{\"node\": {\"id\": 5764434400100518555, \"as_of\": \"2023-03-29T13:37:23.535038Z\", \"key\": \"nodekey:d31eeb68b6968cc6779e62454901fb98bcacab1dcb46e15bec2b92205cc82229\", \"disco\": \"discokey:8ac4cc2c7460d56ffcd8064d64a7752b43475c7244a316f626b321097e07630f\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": [\"127.0.0.1:34768\", \"172.20.0.2:34768\"]}}\n"}
{"Time":"2023-03-29T13:37:23.538974002Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.538 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n"}
{"Time":"2023-03-29T13:37:23.539154829Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.539 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n"}
{"Time":"2023-03-29T13:37:23.539540545Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.539 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/derp/derphttp/derphttp_client.go:401\u003e\t(*Client).connect\tderphttp.Client.Connect: connecting to derp-1 (test)\n"}
{"Time":"2023-03-29T13:37:23.539953465Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.539 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 3370308278017414080, \"as_of\": \"2023-03-29T13:37:23.539778Z\", \"key\": \"nodekey:bd3f9574e34fe33bab67dc45e49054f84d69e7c686af37bb2556989a8e6e9b33\", \"disco\": \"discokey:07ad6d06cd8b5ff2fd2b25fcd8f253332fd46d9820c6e0a670d9302db2d21411\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.004534057}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4aeb:931f:72d2:b3f9:2775/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4aeb:931f:72d2:b3f9:2775/128\"], \"endpoints\": [\"127.0.0.1:41471\", \"172.20.0.2:41471\"]}}\n"}
{"Time":"2023-03-29T13:37:23.540373922Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.540 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:426\u003e\t(*Conn).UpdateNodes\tadding node\t{\"node\": {\"id\": 3370308278017414080, \"as_of\": \"2023-03-29T13:37:23.539778Z\", \"key\": \"nodekey:bd3f9574e34fe33bab67dc45e49054f84d69e7c686af37bb2556989a8e6e9b33\", \"disco\": \"discokey:07ad6d06cd8b5ff2fd2b25fcd8f253332fd46d9820c6e0a670d9302db2d21411\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.004534057}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4aeb:931f:72d2:b3f9:2775/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4aeb:931f:72d2:b3f9:2775/128\"], \"endpoints\": [\"127.0.0.1:41471\", \"172.20.0.2:41471\"]}}\n"}
{"Time":"2023-03-29T13:37:23.540832675Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.540 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n"}
{"Time":"2023-03-29T13:37:23.540920246Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.540 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2578\u003e\t(*Conn).SetNetworkMap\t[v1] magicsock: got updated network map; 1 peers\n"}
{"Time":"2023-03-29T13:37:23.541080962Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.541 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:706\u003e\t(*userspaceEngine).maybeReconfigWireguardLocked\twgengine: Reconfig: configuring userspace WireGuard config (with 0/1 peers)\n"}
{"Time":"2023-03-29T13:37:23.541207198Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.541 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n"}
{"Time":"2023-03-29T13:37:23.541540025Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.541 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/derp/derphttp/derphttp_client.go:401\u003e\t(*Client).connect\tderphttp.Client.Connect: connecting to derp-1 (test)\n"}
{"Time":"2023-03-29T13:37:23.541869031Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.541 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 5764434400100518555, \"as_of\": \"2023-03-29T13:37:23.541715Z\", \"key\": \"nodekey:d31eeb68b6968cc6779e62454901fb98bcacab1dcb46e15bec2b92205cc82229\", \"disco\": \"discokey:8ac4cc2c7460d56ffcd8064d64a7752b43475c7244a316f626b321097e07630f\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.004475683}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": [\"127.0.0.1:34768\", \"172.20.0.2:34768\"]}}\n"}
{"Time":"2023-03-29T13:37:23.542270097Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.542 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:426\u003e\t(*Conn).UpdateNodes\tadding node\t{\"node\": {\"id\": 5764434400100518555, \"as_of\": \"2023-03-29T13:37:23.541715Z\", \"key\": \"nodekey:d31eeb68b6968cc6779e62454901fb98bcacab1dcb46e15bec2b92205cc82229\", \"disco\": \"discokey:8ac4cc2c7460d56ffcd8064d64a7752b43475c7244a316f626b321097e07630f\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.004475683}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": [\"127.0.0.1:34768\", \"172.20.0.2:34768\"]}}\n"}
{"Time":"2023-03-29T13:37:23.542592821Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.542 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n"}
{"Time":"2023-03-29T13:37:23.542683196Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.542 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2578\u003e\t(*Conn).SetNetworkMap\t[v1] magicsock: got updated network map; 1 peers\n"}
{"Time":"2023-03-29T13:37:23.542867815Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.542 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:706\u003e\t(*userspaceEngine).maybeReconfigWireguardLocked\twgengine: Reconfig: configuring userspace WireGuard config (with 0/1 peers)\n"}
{"Time":"2023-03-29T13:37:23.542985478Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.542 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n"}
{"Time":"2023-03-29T13:37:23.55226213Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.552 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1705\u003e\t(*Conn).runDerpReader\tmagicsock: derp-1 connected; connGen=1\n"}
{"Time":"2023-03-29T13:37:23.552392256Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.552 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1705\u003e\t(*Conn).runDerpReader\tmagicsock: derp-1 connected; connGen=1\n"}
{"Time":"2023-03-29T13:37:23.589932282Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.589 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: [v1] report: udp=true v6=false v6os=false mapvarydest=false hair= portmap= v4a=127.0.0.1:34768 derp=1 derpdist=1v4:4ms\n"}
{"Time":"2023-03-29T13:37:23.591567427Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.591 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: [v1] report: udp=true v6=false v6os=false mapvarydest=false hair= portmap= v4a=127.0.0.1:41471 derp=1 derpdist=1v4:2ms\n"}
{"Time":"2023-03-29T13:37:23.598751818Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.598 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1254\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4): sending disco ping to [0x7ra]  ...\n"}
{"Time":"2023-03-29T13:37:23.598954894Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.598 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1599\u003e\t(*Conn).setPeerLastDerpLocked\t[v1] magicsock: derp route for [0x7ra] set to derp-1 (shared home)\n"}
{"Time":"2023-03-29T13:37:23.599390218Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.599 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1599\u003e\t(*Conn).setPeerLastDerpLocked\t[v1] magicsock: derp route for [vT+Vd] set to derp-1 (shared home)\n"}
{"Time":"2023-03-29T13:37:23.599516651Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.599 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:4387\u003e\t(*endpoint).handlePongConnLocked\tmagicsock: disco: node [0x7ra] d:8ac4cc2c7460d56f now using 172.20.0.2:34768\n"}
{"Time":"2023-03-29T13:37:23.599643596Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.599 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1254\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4): sending disco ping to [0x7ra]  ...\n"}
{"Time":"2023-03-29T13:37:23.59972717Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.599 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1254\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4): sending disco ping to [0x7ra]  ...\n"}
{"Time":"2023-03-29T13:37:23.600132385Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.600 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:706\u003e\t(*userspaceEngine).maybeReconfigWireguardLocked\twgengine: Reconfig: configuring userspace WireGuard config (with 1/1 peers)\n"}
{"Time":"2023-03-29T13:37:23.600385251Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.600 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [0x7ra] - UAPI: Created\n"}
{"Time":"2023-03-29T13:37:23.600423261Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.600 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [0x7ra] - UAPI: Updating endpoint\n"}
{"Time":"2023-03-29T13:37:23.600476824Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.600 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [0x7ra] - UAPI: Removing all allowedips\n"}
{"Time":"2023-03-29T13:37:23.600511572Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.600 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [0x7ra] - UAPI: Adding allowedip\n"}
{"Time":"2023-03-29T13:37:23.600547765Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.600 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [0x7ra] - UAPI: Updating persistent keepalive interval\n"}
{"Time":"2023-03-29T13:37:23.600583838Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.600 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [0x7ra] - Starting\n"}
{"Time":"2023-03-29T13:37:23.600650591Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.600 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [0x7ra] - Sending handshake initiation\n"}
{"Time":"2023-03-29T13:37:23.601044073Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.600 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:584\u003e\t(*userspaceEngine).noteRecvActivity\twgengine: idle peer [vT+Vd] now active, reconfiguring WireGuard\n"}
{"Time":"2023-03-29T13:37:23.601107152Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.601 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:706\u003e\t(*userspaceEngine).maybeReconfigWireguardLocked\twgengine: Reconfig: configuring userspace WireGuard config (with 1/1 peers)\n"}
{"Time":"2023-03-29T13:37:23.601327676Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.601 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [vT+Vd] - UAPI: Created\n"}
{"Time":"2023-03-29T13:37:23.601369666Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.601 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [vT+Vd] - UAPI: Updating endpoint\n"}
{"Time":"2023-03-29T13:37:23.601396751Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.601 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [vT+Vd] - UAPI: Removing all allowedips\n"}
{"Time":"2023-03-29T13:37:23.601460927Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.601 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [vT+Vd] - UAPI: Adding allowedip\n"}
{"Time":"2023-03-29T13:37:23.601495639Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.601 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [vT+Vd] - UAPI: Updating persistent keepalive interval\n"}
{"Time":"2023-03-29T13:37:23.601526183Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.601 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [vT+Vd] - Starting\n"}
{"Time":"2023-03-29T13:37:23.60175503Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.601 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [vT+Vd] - Received handshake initiation\n"}
{"Time":"2023-03-29T13:37:23.601775856Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.601 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [vT+Vd] - Sending handshake response\n"}
{"Time":"2023-03-29T13:37:23.602280259Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.602 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:225\u003e\tNewConn.func6\twireguard status\t{\"status\": \"\\u0026{AsOf:2023-03-29 13:37:23.602127595 +0000 UTC m=+0.241734812 Peers:[{TxBytes:92 RxBytes:148 LastHandshake:1970-01-01 00:00:00 +0000 UTC NodeKey:nodekey:bd3f9574e34fe33bab67dc45e49054f84d69e7c686af37bb2556989a8e6e9b33}] LocalAddrs:[{Addr:127.0.0.1:34768 Type:stun} {Addr:172.20.0.2:34768 Type:local}] DERPs:1}\", \"err\": null}\n"}
{"Time":"2023-03-29T13:37:23.602838109Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.602 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [0x7ra] - Received handshake response\n"}
{"Time":"2023-03-29T13:37:23.602930775Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.602 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:4387\u003e\t(*endpoint).handlePongConnLocked\tmagicsock: disco: node [vT+Vd] d:07ad6d06cd8b5ff2 now using 172.20.0.2:41471\n"}
{"Time":"2023-03-29T13:37:23.603134941Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.602 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:225\u003e\tNewConn.func6\twireguard status\t{\"status\": \"\\u0026{AsOf:2023-03-29 13:37:23.602980142 +0000 UTC m=+0.242587360 Peers:[{TxBytes:148 RxBytes:92 LastHandshake:2023-03-29 13:37:23.602828352 +0000 UTC NodeKey:nodekey:d31eeb68b6968cc6779e62454901fb98bcacab1dcb46e15bec2b92205cc82229}] LocalAddrs:[{Addr:127.0.0.1:41471 Type:stun} {Addr:172.20.0.2:41471 Type:local}] DERPs:1}\", \"err\": null}\n"}
{"Time":"2023-03-29T13:37:23.603731388Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.603 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:4387\u003e\t(*endpoint).handlePongConnLocked\tmagicsock: disco: node [0x7ra] d:8ac4cc2c7460d56f now using 127.0.0.1:34768\n"}
{"Time":"2023-03-29T13:37:23.629049874Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    agent_test.go:298: 2023-03-29 13:37:23.628: cmd: stdin: \"exit 0\\r\"\n"}
{"Time":"2023-03-29T13:37:23.62993175Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    ptytest.go:121: 2023-03-29 13:37:23.629: cmd: \"exit 0\"\n"}
{"Time":"2023-03-29T13:37:23.643243989Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.643 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: [v1] report: udp=true v6=false v6os=false mapvarydest= hair= portmap= v4a=127.0.0.1:34768 derp=1 derpdist=1v4:1ms\n"}
{"Time":"2023-03-29T13:37:23.643873931Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.643 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: [v1] report: udp=true v6=false v6os=false mapvarydest= hair= portmap= v4a=127.0.0.1:41471 derp=1 derpdist=1v4:0s\n"}
{"Time":"2023-03-29T13:37:23.644469186Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.644 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:246\u003e\tNewConn.func7\tnetinfo callback\t{\"netinfo\": {\"MappingVariesByDestIP\": null, \"HairPinning\": null, \"WorkingIPv6\": false, \"OSHasIPv6\": false, \"WorkingUDP\": true, \"WorkingICMPv4\": false, \"UPnP\": false, \"PMP\": false, \"PCP\": false, \"PreferredDERP\": 1, \"DERPLatency\": {\"1-v4\": 0.000547591}}}\n"}
{"Time":"2023-03-29T13:37:23.644715274Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.644 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 5764434400100518555, \"as_of\": \"2023-03-29T13:37:23.644461Z\", \"key\": \"nodekey:d31eeb68b6968cc6779e62454901fb98bcacab1dcb46e15bec2b92205cc82229\", \"disco\": \"discokey:8ac4cc2c7460d56ffcd8064d64a7752b43475c7244a316f626b321097e07630f\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.000547591}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": [\"127.0.0.1:34768\", \"172.20.0.2:34768\"]}}\n"}
{"Time":"2023-03-29T13:37:23.645390624Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.645 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:426\u003e\t(*Conn).UpdateNodes\tadding node\t{\"node\": {\"id\": 5764434400100518555, \"as_of\": \"2023-03-29T13:37:23.644461Z\", \"key\": \"nodekey:d31eeb68b6968cc6779e62454901fb98bcacab1dcb46e15bec2b92205cc82229\", \"disco\": \"discokey:8ac4cc2c7460d56ffcd8064d64a7752b43475c7244a316f626b321097e07630f\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.000547591}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": [\"127.0.0.1:34768\", \"172.20.0.2:34768\"]}}\n"}
{"Time":"2023-03-29T13:37:23.64591875Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.645 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n"}
{"Time":"2023-03-29T13:37:23.646145075Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.645 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2578\u003e\t(*Conn).SetNetworkMap\t[v1] magicsock: got updated network map; 1 peers\n"}
{"Time":"2023-03-29T13:37:23.646400847Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.646 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:706\u003e\t(*userspaceEngine).maybeReconfigWireguardLocked\twgengine: Reconfig: configuring userspace WireGuard config (with 1/1 peers)\n"}
{"Time":"2023-03-29T13:37:23.646730863Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.646 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [0x7ra] - UAPI: Updating persistent keepalive interval\n"}
{"Time":"2023-03-29T13:37:23.646828936Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.646 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [0x7ra] - Sending keepalive packet\n"}
{"Time":"2023-03-29T13:37:23.646930238Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.646 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n"}
{"Time":"2023-03-29T13:37:23.647158211Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.646 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:246\u003e\tNewConn.func7\tnetinfo callback\t{\"netinfo\": {\"MappingVariesByDestIP\": null, \"HairPinning\": null, \"WorkingIPv6\": false, \"OSHasIPv6\": false, \"WorkingUDP\": true, \"WorkingICMPv4\": false, \"UPnP\": false, \"PMP\": false, \"PCP\": false, \"PreferredDERP\": 1, \"DERPLatency\": {\"1-v4\": 0.000154898}}}\n"}
{"Time":"2023-03-29T13:37:23.647376125Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.647 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 3370308278017414080, \"as_of\": \"2023-03-29T13:37:23.64715Z\", \"key\": \"nodekey:bd3f9574e34fe33bab67dc45e49054f84d69e7c686af37bb2556989a8e6e9b33\", \"disco\": \"discokey:07ad6d06cd8b5ff2fd2b25fcd8f253332fd46d9820c6e0a670d9302db2d21411\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.000154898}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4aeb:931f:72d2:b3f9:2775/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4aeb:931f:72d2:b3f9:2775/128\"], \"endpoints\": [\"127.0.0.1:41471\", \"172.20.0.2:41471\"]}}\n"}
{"Time":"2023-03-29T13:37:23.648003118Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.647 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:426\u003e\t(*Conn).UpdateNodes\tadding node\t{\"node\": {\"id\": 3370308278017414080, \"as_of\": \"2023-03-29T13:37:23.64715Z\", \"key\": \"nodekey:bd3f9574e34fe33bab67dc45e49054f84d69e7c686af37bb2556989a8e6e9b33\", \"disco\": \"discokey:07ad6d06cd8b5ff2fd2b25fcd8f253332fd46d9820c6e0a670d9302db2d21411\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.000154898}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4aeb:931f:72d2:b3f9:2775/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4aeb:931f:72d2:b3f9:2775/128\"], \"endpoints\": [\"127.0.0.1:41471\", \"172.20.0.2:41471\"]}}\n"}
{"Time":"2023-03-29T13:37:23.648256172Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.648 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n"}
{"Time":"2023-03-29T13:37:23.648338509Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.648 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2578\u003e\t(*Conn).SetNetworkMap\t[v1] magicsock: got updated network map; 1 peers\n"}
{"Time":"2023-03-29T13:37:23.648471344Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.648 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:706\u003e\t(*userspaceEngine).maybeReconfigWireguardLocked\twgengine: Reconfig: configuring userspace WireGuard config (with 1/1 peers)\n"}
{"Time":"2023-03-29T13:37:23.648609559Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.648 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [vT+Vd] - UAPI: Updating persistent keepalive interval\n"}
{"Time":"2023-03-29T13:37:23.648638814Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.648 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [vT+Vd] - Sending keepalive packet\n"}
{"Time":"2023-03-29T13:37:23.648721589Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.648 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n"}
{"Time":"2023-03-29T13:37:23.648895668Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.648 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [vT+Vd] - Receiving keepalive packet\n"}
{"Time":"2023-03-29T13:37:23.648944175Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.648 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [0x7ra] - Receiving keepalive packet\n"}
{"Time":"2023-03-29T13:37:23.983374775Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:23.983 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1254\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:4aeb:931f:72d2:b3f9:2775): sending disco ping to [vT+Vd]  ...\n"}
{"Time":"2023-03-29T13:37:24.483975661Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:24.483 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1254\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:4aeb:931f:72d2:b3f9:2775): sending disco ping to [vT+Vd]  ...\n"}
{"Time":"2023-03-29T13:37:24.983883086Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:24.983 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1254\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:4aeb:931f:72d2:b3f9:2775): sending disco ping to [vT+Vd]  ...\n"}
{"Time":"2023-03-29T13:37:24.997284571Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    ptytest.go:83: 2023-03-29 13:37:24.997: cmd: closing tpty: close\n"}
{"Time":"2023-03-29T13:37:24.997307935Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    ptytest.go:74: 2023-03-29 13:37:24.997: cmd: closing pty\n"}
{"Time":"2023-03-29T13:37:24.997315409Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    ptytest.go:110: 2023-03-29 13:37:24.997: cmd: copy done: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:37:24.997319364Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    ptytest.go:111: 2023-03-29 13:37:24.997: cmd: closing out\n"}
{"Time":"2023-03-29T13:37:24.997323588Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    ptytest.go:113: 2023-03-29 13:37:24.997: cmd: closed out: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:37:24.997370156Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    ptytest.go:76: 2023-03-29 13:37:24.997: cmd: closed pty: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:24.997381692Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    ptytest.go:74: 2023-03-29 13:37:24.997: cmd: closing logw\n"}
{"Time":"2023-03-29T13:37:24.997385034Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    ptytest.go:76: 2023-03-29 13:37:24.997: cmd: closed logw: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:24.997389205Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    ptytest.go:74: 2023-03-29 13:37:24.997: cmd: closing logr\n"}
{"Time":"2023-03-29T13:37:24.997393753Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    ptytest.go:76: 2023-03-29 13:37:24.997: cmd: closed logr: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:24.997405892Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    ptytest.go:102: 2023-03-29 13:37:24.997: cmd: closed tpty\n"}
{"Time":"2023-03-29T13:37:24.997490606Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:24.997 [INFO]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:201\u003e\t(*agent).runLoop\tdisconnected from coderd\n"}
{"Time":"2023-03-29T13:37:24.997723999Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:24.997 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2736\u003e\t(*Conn).closeDerpLocked\tmagicsock: closing connection to derp-1 (conn-close), age 1s\n"}
{"Time":"2023-03-29T13:37:24.997783062Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:24.997 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2747\u003e\t(*Conn).logActiveDerpLocked\tmagicsock: 0 active derp conns\n"}
{"Time":"2023-03-29T13:37:24.997839084Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:24.997 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:31\u003e\tfakeRouter.Close\t[v1] warning: fakeRouter.Close: not implemented.\n"}
{"Time":"2023-03-29T13:37:24.997864344Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:24.997 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Device closing\n"}
{"Time":"2023-03-29T13:37:24.997932377Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:24.997 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming receiveDERP - stopped\n"}
{"Time":"2023-03-29T13:37:24.998046302Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:24.997 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v6 - stopped\n"}
{"Time":"2023-03-29T13:37:24.998086112Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:24.998 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v4 - stopped\n"}
{"Time":"2023-03-29T13:37:24.998136192Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:24.998 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [0x7ra] - Stopping\n"}
{"Time":"2023-03-29T13:37:24.998214902Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:24.998 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Device closed\n"}
{"Time":"2023-03-29T13:37:24.998405401Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:24.998 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:263\u003e\t(*agent).setLifecycle\tset lifecycle state\t{\"state\": \"shutting_down\", \"last\": \"ready\"}\n"}
{"Time":"2023-03-29T13:37:24.998453108Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:24.998 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:263\u003e\t(*agent).setLifecycle\tset lifecycle state\t{\"state\": \"off\", \"last\": \"shutting_down\"}\n"}
{"Time":"2023-03-29T13:37:24.998545966Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:24.998 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:229\u003e\t(*agent).reportLifecycleLoop\treporting lifecycle state\t{\"state\": \"off\"}\n"}
{"Time":"2023-03-29T13:37:24.998863807Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:24.998 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2736\u003e\t(*Conn).closeDerpLocked\tmagicsock: closing connection to derp-1 (conn-close), age 1s\n"}
{"Time":"2023-03-29T13:37:24.998907983Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:24.998 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2747\u003e\t(*Conn).logActiveDerpLocked\tmagicsock: 0 active derp conns\n"}
{"Time":"2023-03-29T13:37:24.998974565Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:24.998 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:31\u003e\tfakeRouter.Close\t[v1] warning: fakeRouter.Close: not implemented.\n"}
{"Time":"2023-03-29T13:37:24.999012856Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:24.998 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Device closing\n"}
{"Time":"2023-03-29T13:37:24.999084066Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:24.999 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming receiveDERP - stopped\n"}
{"Time":"2023-03-29T13:37:24.999163662Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:24.999 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1254\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:4aeb:931f:72d2:b3f9:2775): sending disco ping to [vT+Vd]  ...\n"}
{"Time":"2023-03-29T13:37:24.999281214Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:24.999 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v6 - stopped\n"}
{"Time":"2023-03-29T13:37:24.999322797Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:24.999 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v4 - stopped\n"}
{"Time":"2023-03-29T13:37:24.999367964Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:24.999 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [vT+Vd] - Stopping\n"}
{"Time":"2023-03-29T13:37:24.999477141Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    t.go:81: 2023-03-29 13:37:24.999 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Device closed\n"}
{"Time":"2023-03-29T13:37:24.999790842Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"    stuntest.go:63: STUN server shutdown\n"}
{"Time":"2023-03-29T13:37:24.999978482Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Output":"--- PASS: TestAgent_Session_TTY_MOTD (1.62s)\n"}
{"Time":"2023-03-29T13:37:24.999989636Z","Action":"pass","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_MOTD","Elapsed":1.62}
{"Time":"2023-03-29T13:37:25.000001861Z","Action":"run","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin"}
{"Time":"2023-03-29T13:37:25.000006766Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"=== RUN   TestAgent_Session_TTY_Hushlogin\n"}
{"Time":"2023-03-29T13:37:25.061523057Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.061 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:270\u003e\tNewUserspaceEngine\t[v1] using fake (no-op) tun device\n"}
{"Time":"2023-03-29T13:37:25.061562172Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.061 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:274\u003e\tNewUserspaceEngine\t[v1] using fake (no-op) OS network configurator\n"}
{"Time":"2023-03-29T13:37:25.061580317Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.061 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:278\u003e\tNewUserspaceEngine\t[v1] using fake (no-op) DNS configurator\n"}
{"Time":"2023-03-29T13:37:25.061650184Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.061 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: using dns.noopManager\n"}
{"Time":"2023-03-29T13:37:25.061692748Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.061 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:334\u003e\tNewUserspaceEngine\tlink state: interfaces.State{defaultRoute=eth0 ifs={eth0:[172.20.0.2/16]} v4=true v6=false}\n"}
{"Time":"2023-03-29T13:37:25.061779714Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.061 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:306\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP read buffer size to 7340032: operation not permitted\n"}
{"Time":"2023-03-29T13:37:25.061825894Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.061 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:310\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP write buffer size to 7340032: operation not permitted\n"}
{"Time":"2023-03-29T13:37:25.0619026Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.061 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:306\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP read buffer size to 7340032: operation not permitted\n"}
{"Time":"2023-03-29T13:37:25.061948469Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.061 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:310\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP write buffer size to 7340032: operation not permitted\n"}
{"Time":"2023-03-29T13:37:25.061997351Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.061 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:666\u003e\tNewConn\t[v1] couldn't create raw v4 disco listener, using regular listener instead: raw disco listening disabled, SO_MARK unavailable\n"}
{"Time":"2023-03-29T13:37:25.062034009Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.061 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:672\u003e\tNewConn\t[v1] couldn't create raw v6 disco listener, using regular listener instead: raw disco listening disabled, SO_MARK unavailable\n"}
{"Time":"2023-03-29T13:37:25.062159882Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.062 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1056\u003e\t(*Conn).DiscoPublicKey\tmagicsock: disco key = d:de63960686d4d969\n"}
{"Time":"2023-03-29T13:37:25.062211517Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.062 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:412\u003e\tNewUserspaceEngine\tCreating WireGuard device...\n"}
{"Time":"2023-03-29T13:37:25.062292207Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.062 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:437\u003e\tNewUserspaceEngine\tBringing WireGuard device up...\n"}
{"Time":"2023-03-29T13:37:25.062336748Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.062 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] UDP bind has been updated\n"}
{"Time":"2023-03-29T13:37:25.062378334Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.062 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Interface state was Down, requested Up, now Up\n"}
{"Time":"2023-03-29T13:37:25.062420493Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.062 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:441\u003e\tNewUserspaceEngine\tBringing router up...\n"}
{"Time":"2023-03-29T13:37:25.06246598Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.062 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:21\u003e\tfakeRouter.Up\t[v1] warning: fakeRouter.Up: not implemented.\n"}
{"Time":"2023-03-29T13:37:25.062509064Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.062 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:449\u003e\tNewUserspaceEngine\tClearing router settings...\n"}
{"Time":"2023-03-29T13:37:25.0625467Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.062 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:26\u003e\tfakeRouter.Set\t[v1] warning: fakeRouter.Set: not implemented.\n"}
{"Time":"2023-03-29T13:37:25.062582098Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.062 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:453\u003e\tNewUserspaceEngine\tStarting link monitor...\n"}
{"Time":"2023-03-29T13:37:25.062621581Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.062 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:456\u003e\tNewUserspaceEngine\tEngine created.\n"}
{"Time":"2023-03-29T13:37:25.062741251Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.062 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2444\u003e\t(*Conn).SetPrivateKey\tmagicsock: SetPrivateKey called (init)\n"}
{"Time":"2023-03-29T13:37:25.063047606Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.063 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:187\u003e\tNewConn\tupdating network map\n"}
{"Time":"2023-03-29T13:37:25.063098481Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.063 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2578\u003e\t(*Conn).SetNetworkMap\t[v1] magicsock: got updated network map; 0 peers\n"}
{"Time":"2023-03-29T13:37:25.063228621Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.063 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1241\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4): no matching peer\n"}
{"Time":"2023-03-29T13:37:25.063275399Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.063 [INFO]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:188\u003e\t(*agent).runLoop\tconnecting to coderd\n"}
{"Time":"2023-03-29T13:37:25.063394952Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.063 [INFO]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:286\u003e\t(*agent).run\tfetched metadata\t{\"metadata\": {\"git_auth_configs\": 0, \"vscode_port_proxy_uri\": \"\", \"apps\": null, \"derpmap\": {\"Regions\": {\"1\": {\"EmbeddedRelay\": false, \"RegionID\": 1, \"RegionCode\": \"test\", \"RegionName\": \"Test\", \"Nodes\": [{\"Name\": \"t2\", \"RegionID\": 1, \"HostName\": \"\", \"IPv4\": \"127.0.0.1\", \"IPv6\": \"none\", \"STUNPort\": 48719, \"DERPPort\": 45121, \"InsecureForTests\": true}]}}}, \"environment_variables\": null, \"startup_script\": \"\", \"startup_script_timeout\": 0, \"directory\": \"\", \"motd_file\": \"/tmp/TestAgent_Session_TTY_Hushlogin1510664063/001/motd\", \"shutdown_script\": \"\", \"shutdown_script_timeout\": 0}}\n"}
{"Time":"2023-03-29T13:37:25.063449256Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.063 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:263\u003e\t(*agent).setLifecycle\tset lifecycle state\t{\"state\": \"starting\", \"last\": \"\"}\n"}
{"Time":"2023-03-29T13:37:25.063787886Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.063 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:270\u003e\tNewUserspaceEngine\t[v1] using fake (no-op) tun device\n"}
{"Time":"2023-03-29T13:37:25.063828837Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.063 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:274\u003e\tNewUserspaceEngine\t[v1] using fake (no-op) OS network configurator\n"}
{"Time":"2023-03-29T13:37:25.063873191Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.063 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:278\u003e\tNewUserspaceEngine\t[v1] using fake (no-op) DNS configurator\n"}
{"Time":"2023-03-29T13:37:25.063920593Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.063 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: using dns.noopManager\n"}
{"Time":"2023-03-29T13:37:25.063972721Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.063 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:334\u003e\tNewUserspaceEngine\tlink state: interfaces.State{defaultRoute=eth0 ifs={eth0:[172.20.0.2/16]} v4=true v6=false}\n"}
{"Time":"2023-03-29T13:37:25.064056998Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.064 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:306\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP read buffer size to 7340032: operation not permitted\n"}
{"Time":"2023-03-29T13:37:25.064104109Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.064 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:310\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP write buffer size to 7340032: operation not permitted\n"}
{"Time":"2023-03-29T13:37:25.064172955Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.064 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:306\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP read buffer size to 7340032: operation not permitted\n"}
{"Time":"2023-03-29T13:37:25.064220262Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.064 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:310\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP write buffer size to 7340032: operation not permitted\n"}
{"Time":"2023-03-29T13:37:25.064265054Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.064 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:666\u003e\tNewConn\t[v1] couldn't create raw v4 disco listener, using regular listener instead: raw disco listening disabled, SO_MARK unavailable\n"}
{"Time":"2023-03-29T13:37:25.064311842Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.064 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:672\u003e\tNewConn\t[v1] couldn't create raw v6 disco listener, using regular listener instead: raw disco listening disabled, SO_MARK unavailable\n"}
{"Time":"2023-03-29T13:37:25.064424792Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.064 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1056\u003e\t(*Conn).DiscoPublicKey\tmagicsock: disco key = d:a2fa54a4398f4b14\n"}
{"Time":"2023-03-29T13:37:25.064460776Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.064 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:412\u003e\tNewUserspaceEngine\tCreating WireGuard device...\n"}
{"Time":"2023-03-29T13:37:25.064519398Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.064 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:437\u003e\tNewUserspaceEngine\tBringing WireGuard device up...\n"}
{"Time":"2023-03-29T13:37:25.064564764Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.064 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] UDP bind has been updated\n"}
{"Time":"2023-03-29T13:37:25.064610015Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.064 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Interface state was Down, requested Up, now Up\n"}
{"Time":"2023-03-29T13:37:25.064649665Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.064 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:441\u003e\tNewUserspaceEngine\tBringing router up...\n"}
{"Time":"2023-03-29T13:37:25.064697586Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.064 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:21\u003e\tfakeRouter.Up\t[v1] warning: fakeRouter.Up: not implemented.\n"}
{"Time":"2023-03-29T13:37:25.064733375Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.064 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:449\u003e\tNewUserspaceEngine\tClearing router settings...\n"}
{"Time":"2023-03-29T13:37:25.06476809Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.064 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:26\u003e\tfakeRouter.Set\t[v1] warning: fakeRouter.Set: not implemented.\n"}
{"Time":"2023-03-29T13:37:25.064817752Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.064 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:453\u003e\tNewUserspaceEngine\tStarting link monitor...\n"}
{"Time":"2023-03-29T13:37:25.064858351Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.064 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:456\u003e\tNewUserspaceEngine\tEngine created.\n"}
{"Time":"2023-03-29T13:37:25.064968632Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.064 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2444\u003e\t(*Conn).SetPrivateKey\tmagicsock: SetPrivateKey called (init)\n"}
{"Time":"2023-03-29T13:37:25.065284782Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.065 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:187\u003e\tNewConn\tupdating network map\n"}
{"Time":"2023-03-29T13:37:25.065331529Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.065 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2578\u003e\t(*Conn).SetNetworkMap\t[v1] magicsock: got updated network map; 0 peers\n"}
{"Time":"2023-03-29T13:37:25.065409197Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.065 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:402\u003e\t(*agent).run\trunning tailnet connection coordinator\n"}
{"Time":"2023-03-29T13:37:25.065446163Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.065 [INFO]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:620\u003e\t(*agent).runCoordinator\tconnected to coordination endpoint\n"}
{"Time":"2023-03-29T13:37:25.065532991Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.065 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 2366729466453183316, \"as_of\": \"2023-03-29T13:37:25.065442Z\", \"key\": \"nodekey:d0b8ee28a0ee87a0b3a9c4e4d551d52d6abae50aac6b29587f8aaaecaf92dc1c\", \"disco\": \"discokey:a2fa54a4398f4b14ed94f97af08fb0c8f1a7276aa663caf7d25542e565ef4f28\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": []}}\n"}
{"Time":"2023-03-29T13:37:25.065984331Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.065 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v4 - started\n"}
{"Time":"2023-03-29T13:37:25.066385592Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.066 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v6 - started\n"}
{"Time":"2023-03-29T13:37:25.066774463Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.066 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming receiveDERP - started\n"}
{"Time":"2023-03-29T13:37:25.067577596Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.067 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 2479211229855255143, \"as_of\": \"2023-03-29T13:37:25.063134Z\", \"key\": \"nodekey:4b52886038d0b10509d4ba999d1a1ad8721795e419e104079b9b0d4334ccf262\", \"disco\": \"discokey:de63960686d4d9696035b3395ad51c334b1b6762f27929160b70e330e59fc955\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4c72:9ce3:62e1:7385:dec7/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4c72:9ce3:62e1:7385:dec7/128\"], \"endpoints\": []}}\n"}
{"Time":"2023-03-29T13:37:25.067723294Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.067 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1241\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4): no matching peer\n"}
{"Time":"2023-03-29T13:37:25.067791082Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.067 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:229\u003e\t(*agent).reportLifecycleLoop\treporting lifecycle state\t{\"state\": \"starting\"}\n"}
{"Time":"2023-03-29T13:37:25.067853127Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.067 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:263\u003e\t(*agent).setLifecycle\tset lifecycle state\t{\"state\": \"ready\", \"last\": \"starting\"}\n"}
{"Time":"2023-03-29T13:37:25.067910376Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.067 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:229\u003e\t(*agent).reportLifecycleLoop\treporting lifecycle state\t{\"state\": \"ready\"}\n"}
{"Time":"2023-03-29T13:37:25.0683366Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.068 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v4 - started\n"}
{"Time":"2023-03-29T13:37:25.07002731Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.069 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v6 - started\n"}
{"Time":"2023-03-29T13:37:25.071537156Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.071 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming receiveDERP - started\n"}
{"Time":"2023-03-29T13:37:25.073373256Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.073 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:423\u003e\t(*Conn).UpdateNodes\tno preferred DERP, skipping node\t{\"node\": {\"id\": 2366729466453183316, \"as_of\": \"2023-03-29T13:37:25.065442Z\", \"key\": \"nodekey:d0b8ee28a0ee87a0b3a9c4e4d551d52d6abae50aac6b29587f8aaaecaf92dc1c\", \"disco\": \"discokey:a2fa54a4398f4b14ed94f97af08fb0c8f1a7276aa663caf7d25542e565ef4f28\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": []}}\n"}
{"Time":"2023-03-29T13:37:25.073396962Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.073 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n"}
{"Time":"2023-03-29T13:37:25.073480235Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.073 [DEBUG]\t(client.netstack)\t\u003ctailscale.com/wgengine/netstack/netstack.go:367\u003e\t(*Impl).updateIPs\t[v2] netstack: registered IP fd7a:115c:a1e0:4c72:9ce3:62e1:7385:dec7/128\n"}
{"Time":"2023-03-29T13:37:25.073564836Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.073 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:706\u003e\t(*userspaceEngine).maybeReconfigWireguardLocked\twgengine: Reconfig: configuring userspace WireGuard config (with 0/0 peers)\n"}
{"Time":"2023-03-29T13:37:25.073671864Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.073 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] UAPI: Updating private key\n"}
{"Time":"2023-03-29T13:37:25.07378875Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.073 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:921\u003e\t(*userspaceEngine).Reconfig\twgengine: Reconfig: configuring router\n"}
{"Time":"2023-03-29T13:37:25.073820206Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.073 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:26\u003e\tfakeRouter.Set\t[v1] warning: fakeRouter.Set: not implemented.\n"}
{"Time":"2023-03-29T13:37:25.073854357Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.073 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:931\u003e\t(*userspaceEngine).Reconfig\twgengine: Reconfig: configuring DNS\n"}
{"Time":"2023-03-29T13:37:25.073896565Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.073 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: Set: {DefaultResolvers:[] Routes:{} SearchDomains:[] Hosts:0}\n"}
{"Time":"2023-03-29T13:37:25.073931707Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.073 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: Resolvercfg: {Routes:{} Hosts:0 LocalDomains:[]}\n"}
{"Time":"2023-03-29T13:37:25.073965714Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.073 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: OScfg: {Nameservers:[] SearchDomains:[] MatchDomains:[] Hosts:[]}\n"}
{"Time":"2023-03-29T13:37:25.074005901Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.073 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n"}
{"Time":"2023-03-29T13:37:25.074880124Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.074 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:423\u003e\t(*Conn).UpdateNodes\tno preferred DERP, skipping node\t{\"node\": {\"id\": 2479211229855255143, \"as_of\": \"2023-03-29T13:37:25.063134Z\", \"key\": \"nodekey:4b52886038d0b10509d4ba999d1a1ad8721795e419e104079b9b0d4334ccf262\", \"disco\": \"discokey:de63960686d4d9696035b3395ad51c334b1b6762f27929160b70e330e59fc955\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4c72:9ce3:62e1:7385:dec7/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4c72:9ce3:62e1:7385:dec7/128\"], \"endpoints\": []}}\n"}
{"Time":"2023-03-29T13:37:25.074899766Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.074 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n"}
{"Time":"2023-03-29T13:37:25.074982929Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.074 [DEBUG]\t(agent.tailnet.netstack)\t\u003ctailscale.com/wgengine/netstack/netstack.go:367\u003e\t(*Impl).updateIPs\t[v2] netstack: registered IP fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\n"}
{"Time":"2023-03-29T13:37:25.075048527Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.075 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:706\u003e\t(*userspaceEngine).maybeReconfigWireguardLocked\twgengine: Reconfig: configuring userspace WireGuard config (with 0/0 peers)\n"}
{"Time":"2023-03-29T13:37:25.075142259Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.075 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] UAPI: Updating private key\n"}
{"Time":"2023-03-29T13:37:25.075263679Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.075 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:921\u003e\t(*userspaceEngine).Reconfig\twgengine: Reconfig: configuring router\n"}
{"Time":"2023-03-29T13:37:25.075295728Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.075 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:26\u003e\tfakeRouter.Set\t[v1] warning: fakeRouter.Set: not implemented.\n"}
{"Time":"2023-03-29T13:37:25.075336116Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.075 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:931\u003e\t(*userspaceEngine).Reconfig\twgengine: Reconfig: configuring DNS\n"}
{"Time":"2023-03-29T13:37:25.075375372Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.075 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: Set: {DefaultResolvers:[] Routes:{} SearchDomains:[] Hosts:0}\n"}
{"Time":"2023-03-29T13:37:25.075421587Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.075 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: Resolvercfg: {Routes:{} Hosts:0 LocalDomains:[]}\n"}
{"Time":"2023-03-29T13:37:25.075466864Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.075 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: OScfg: {Nameservers:[] SearchDomains:[] MatchDomains:[] Hosts:[]}\n"}
{"Time":"2023-03-29T13:37:25.075504912Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.075 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n"}
{"Time":"2023-03-29T13:37:25.117000024Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.116 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1241\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4): no matching peer\n"}
{"Time":"2023-03-29T13:37:25.124882906Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.124 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: [v1] report: udp=true v6=false v6os=false mapvarydest=false hair= portmap= v4a=127.0.0.1:60850 derp=1 derpdist=1v4:1ms\n"}
{"Time":"2023-03-29T13:37:25.125053667Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.124 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1092\u003e\t(*Conn).setNearestDERP\tmagicsock: home is now derp-1 (test)\n"}
{"Time":"2023-03-29T13:37:25.12561266Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.125 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2759\u003e\t(*Conn).logEndpointChange\tmagicsock: endpoints changed: 127.0.0.1:60850 (stun), 172.20.0.2:60850 (local)\n"}
{"Time":"2023-03-29T13:37:25.125905661Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.125 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:225\u003e\tNewConn.func6\twireguard status\t{\"status\": \"\\u0026{AsOf:2023-03-29 13:37:25.125569748 +0000 UTC m=+1.765177074 Peers:[] LocalAddrs:[{Addr:127.0.0.1:60850 Type:stun} {Addr:172.20.0.2:60850 Type:local}] DERPs:0}\", \"err\": null}\n"}
{"Time":"2023-03-29T13:37:25.126844264Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.126 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: [v1] report: udp=true v6=false v6os=false mapvarydest=false hair= portmap= v4a=127.0.0.1:58304 derp=1 derpdist=1v4:1ms\n"}
{"Time":"2023-03-29T13:37:25.127005238Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.126 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1092\u003e\t(*Conn).setNearestDERP\tmagicsock: home is now derp-1 (test)\n"}
{"Time":"2023-03-29T13:37:25.127513222Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.127 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2759\u003e\t(*Conn).logEndpointChange\tmagicsock: endpoints changed: 127.0.0.1:58304 (stun), 172.20.0.2:58304 (local)\n"}
{"Time":"2023-03-29T13:37:25.127757541Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.127 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:225\u003e\tNewConn.func6\twireguard status\t{\"status\": \"\\u0026{AsOf:2023-03-29 13:37:25.127481783 +0000 UTC m=+1.767089103 Peers:[] LocalAddrs:[{Addr:127.0.0.1:58304 Type:stun} {Addr:172.20.0.2:58304 Type:local}] DERPs:0}\", \"err\": null}\n"}
{"Time":"2023-03-29T13:37:25.128599916Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.128 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1480\u003e\t(*Conn).derpWriteChanOfAddr\tmagicsock: adding connection to derp-1 for home-keep-alive\n"}
{"Time":"2023-03-29T13:37:25.128762101Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.128 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2747\u003e\t(*Conn).logActiveDerpLocked\tmagicsock: 1 active derp conns: derp-1=cr0s,wr0s\n"}
{"Time":"2023-03-29T13:37:25.129009957Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.128 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:225\u003e\tNewConn.func6\twireguard status\t{\"status\": \"\\u0026{AsOf:2023-03-29 13:37:25.12872419 +0000 UTC m=+1.768331474 Peers:[] LocalAddrs:[{Addr:127.0.0.1:60850 Type:stun} {Addr:172.20.0.2:60850 Type:local}] DERPs:1}\", \"err\": null}\n"}
{"Time":"2023-03-29T13:37:25.129209925Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.128 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:246\u003e\tNewConn.func7\tnetinfo callback\t{\"netinfo\": {\"MappingVariesByDestIP\": false, \"HairPinning\": null, \"WorkingIPv6\": false, \"OSHasIPv6\": false, \"WorkingUDP\": true, \"WorkingICMPv4\": false, \"UPnP\": false, \"PMP\": false, \"PCP\": false, \"PreferredDERP\": 1, \"DERPLatency\": {\"1-v4\": 0.000985407}}}\n"}
{"Time":"2023-03-29T13:37:25.129460508Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.129 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 2366729466453183316, \"as_of\": \"2023-03-29T13:37:25.125849Z\", \"key\": \"nodekey:d0b8ee28a0ee87a0b3a9c4e4d551d52d6abae50aac6b29587f8aaaecaf92dc1c\", \"disco\": \"discokey:a2fa54a4398f4b14ed94f97af08fb0c8f1a7276aa663caf7d25542e565ef4f28\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": [\"127.0.0.1:60850\", \"172.20.0.2:60850\"]}}\n"}
{"Time":"2023-03-29T13:37:25.130127324Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.129 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:423\u003e\t(*Conn).UpdateNodes\tno preferred DERP, skipping node\t{\"node\": {\"id\": 2366729466453183316, \"as_of\": \"2023-03-29T13:37:25.125849Z\", \"key\": \"nodekey:d0b8ee28a0ee87a0b3a9c4e4d551d52d6abae50aac6b29587f8aaaecaf92dc1c\", \"disco\": \"discokey:a2fa54a4398f4b14ed94f97af08fb0c8f1a7276aa663caf7d25542e565ef4f28\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": [\"127.0.0.1:60850\", \"172.20.0.2:60850\"]}}\n"}
{"Time":"2023-03-29T13:37:25.130232734Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.130 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n"}
{"Time":"2023-03-29T13:37:25.13055158Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.130 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n"}
{"Time":"2023-03-29T13:37:25.131114968Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.130 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1480\u003e\t(*Conn).derpWriteChanOfAddr\tmagicsock: adding connection to derp-1 for home-keep-alive\n"}
{"Time":"2023-03-29T13:37:25.131240194Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.131 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2747\u003e\t(*Conn).logActiveDerpLocked\tmagicsock: 1 active derp conns: derp-1=cr0s,wr0s\n"}
{"Time":"2023-03-29T13:37:25.131519421Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.131 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:225\u003e\tNewConn.func6\twireguard status\t{\"status\": \"\\u0026{AsOf:2023-03-29 13:37:25.131235659 +0000 UTC m=+1.770842948 Peers:[] LocalAddrs:[{Addr:127.0.0.1:58304 Type:stun} {Addr:172.20.0.2:58304 Type:local}] DERPs:1}\", \"err\": null}\n"}
{"Time":"2023-03-29T13:37:25.131694593Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.131 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:246\u003e\tNewConn.func7\tnetinfo callback\t{\"netinfo\": {\"MappingVariesByDestIP\": false, \"HairPinning\": null, \"WorkingIPv6\": false, \"OSHasIPv6\": false, \"WorkingUDP\": true, \"WorkingICMPv4\": false, \"UPnP\": false, \"PMP\": false, \"PCP\": false, \"PreferredDERP\": 1, \"DERPLatency\": {\"1-v4\": 0.001250656}}}\n"}
{"Time":"2023-03-29T13:37:25.131999693Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.131 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 2479211229855255143, \"as_of\": \"2023-03-29T13:37:25.127736Z\", \"key\": \"nodekey:4b52886038d0b10509d4ba999d1a1ad8721795e419e104079b9b0d4334ccf262\", \"disco\": \"discokey:de63960686d4d9696035b3395ad51c334b1b6762f27929160b70e330e59fc955\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4c72:9ce3:62e1:7385:dec7/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4c72:9ce3:62e1:7385:dec7/128\"], \"endpoints\": [\"127.0.0.1:58304\", \"172.20.0.2:58304\"]}}\n"}
{"Time":"2023-03-29T13:37:25.132733057Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.132 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/derp/derphttp/derphttp_client.go:401\u003e\t(*Client).connect\tderphttp.Client.Connect: connecting to derp-1 (test)\n"}
{"Time":"2023-03-29T13:37:25.133220162Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.132 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 2366729466453183316, \"as_of\": \"2023-03-29T13:37:25.132982Z\", \"key\": \"nodekey:d0b8ee28a0ee87a0b3a9c4e4d551d52d6abae50aac6b29587f8aaaecaf92dc1c\", \"disco\": \"discokey:a2fa54a4398f4b14ed94f97af08fb0c8f1a7276aa663caf7d25542e565ef4f28\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.000985407}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": [\"127.0.0.1:60850\", \"172.20.0.2:60850\"]}}\n"}
{"Time":"2023-03-29T13:37:25.133869838Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.133 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:426\u003e\t(*Conn).UpdateNodes\tadding node\t{\"node\": {\"id\": 2366729466453183316, \"as_of\": \"2023-03-29T13:37:25.132982Z\", \"key\": \"nodekey:d0b8ee28a0ee87a0b3a9c4e4d551d52d6abae50aac6b29587f8aaaecaf92dc1c\", \"disco\": \"discokey:a2fa54a4398f4b14ed94f97af08fb0c8f1a7276aa663caf7d25542e565ef4f28\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.000985407}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": [\"127.0.0.1:60850\", \"172.20.0.2:60850\"]}}\n"}
{"Time":"2023-03-29T13:37:25.134272814Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.134 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n"}
{"Time":"2023-03-29T13:37:25.134404044Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.134 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/derp/derphttp/derphttp_client.go:401\u003e\t(*Client).connect\tderphttp.Client.Connect: connecting to derp-1 (test)\n"}
{"Time":"2023-03-29T13:37:25.134672632Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.134 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 2479211229855255143, \"as_of\": \"2023-03-29T13:37:25.134517Z\", \"key\": \"nodekey:4b52886038d0b10509d4ba999d1a1ad8721795e419e104079b9b0d4334ccf262\", \"disco\": \"discokey:de63960686d4d9696035b3395ad51c334b1b6762f27929160b70e330e59fc955\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.001250656}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4c72:9ce3:62e1:7385:dec7/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4c72:9ce3:62e1:7385:dec7/128\"], \"endpoints\": [\"127.0.0.1:58304\", \"172.20.0.2:58304\"]}}\n"}
{"Time":"2023-03-29T13:37:25.134983325Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.134 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:423\u003e\t(*Conn).UpdateNodes\tno preferred DERP, skipping node\t{\"node\": {\"id\": 2479211229855255143, \"as_of\": \"2023-03-29T13:37:25.127736Z\", \"key\": \"nodekey:4b52886038d0b10509d4ba999d1a1ad8721795e419e104079b9b0d4334ccf262\", \"disco\": \"discokey:de63960686d4d9696035b3395ad51c334b1b6762f27929160b70e330e59fc955\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4c72:9ce3:62e1:7385:dec7/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4c72:9ce3:62e1:7385:dec7/128\"], \"endpoints\": [\"127.0.0.1:58304\", \"172.20.0.2:58304\"]}}\n"}
{"Time":"2023-03-29T13:37:25.135024699Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.134 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n"}
{"Time":"2023-03-29T13:37:25.135198837Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.135 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n"}
{"Time":"2023-03-29T13:37:25.135284701Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.135 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2578\u003e\t(*Conn).SetNetworkMap\t[v1] magicsock: got updated network map; 1 peers\n"}
{"Time":"2023-03-29T13:37:25.135438825Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.135 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:706\u003e\t(*userspaceEngine).maybeReconfigWireguardLocked\twgengine: Reconfig: configuring userspace WireGuard config (with 0/1 peers)\n"}
{"Time":"2023-03-29T13:37:25.135566373Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.135 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n"}
{"Time":"2023-03-29T13:37:25.135876201Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.135 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:426\u003e\t(*Conn).UpdateNodes\tadding node\t{\"node\": {\"id\": 2479211229855255143, \"as_of\": \"2023-03-29T13:37:25.134517Z\", \"key\": \"nodekey:4b52886038d0b10509d4ba999d1a1ad8721795e419e104079b9b0d4334ccf262\", \"disco\": \"discokey:de63960686d4d9696035b3395ad51c334b1b6762f27929160b70e330e59fc955\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.001250656}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4c72:9ce3:62e1:7385:dec7/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4c72:9ce3:62e1:7385:dec7/128\"], \"endpoints\": [\"127.0.0.1:58304\", \"172.20.0.2:58304\"]}}\n"}
{"Time":"2023-03-29T13:37:25.136046662Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.136 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n"}
{"Time":"2023-03-29T13:37:25.136091872Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.136 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2578\u003e\t(*Conn).SetNetworkMap\t[v1] magicsock: got updated network map; 1 peers\n"}
{"Time":"2023-03-29T13:37:25.136196604Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.136 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:706\u003e\t(*userspaceEngine).maybeReconfigWireguardLocked\twgengine: Reconfig: configuring userspace WireGuard config (with 0/1 peers)\n"}
{"Time":"2023-03-29T13:37:25.136258441Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.136 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n"}
{"Time":"2023-03-29T13:37:25.143831824Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.143 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1705\u003e\t(*Conn).runDerpReader\tmagicsock: derp-1 connected; connGen=1\n"}
{"Time":"2023-03-29T13:37:25.143963014Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.143 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1705\u003e\t(*Conn).runDerpReader\tmagicsock: derp-1 connected; connGen=1\n"}
{"Time":"2023-03-29T13:37:25.181560631Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.181 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: [v1] report: udp=true v6=false v6os=false mapvarydest=false hair= portmap= v4a=127.0.0.1:60850 derp=1 derpdist=1v4:10ms\n"}
{"Time":"2023-03-29T13:37:25.182840653Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.182 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: [v1] report: udp=true v6=false v6os=false mapvarydest=false hair= portmap= v4a=127.0.0.1:58304 derp=1 derpdist=1v4:8ms\n"}
{"Time":"2023-03-29T13:37:25.197904655Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.197 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1254\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4): sending disco ping to [0LjuK]  ...\n"}
{"Time":"2023-03-29T13:37:25.198311943Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.198 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1599\u003e\t(*Conn).setPeerLastDerpLocked\t[v1] magicsock: derp route for [0LjuK] set to derp-1 (shared home)\n"}
{"Time":"2023-03-29T13:37:25.199139623Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.199 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1599\u003e\t(*Conn).setPeerLastDerpLocked\t[v1] magicsock: derp route for [S1KIY] set to derp-1 (shared home)\n"}
{"Time":"2023-03-29T13:37:25.199333828Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.199 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:4387\u003e\t(*endpoint).handlePongConnLocked\tmagicsock: disco: node [0LjuK] d:a2fa54a4398f4b14 now using 172.20.0.2:60850\n"}
{"Time":"2023-03-29T13:37:25.199614502Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.199 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1254\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4): sending disco ping to [0LjuK]  ...\n"}
{"Time":"2023-03-29T13:37:25.199798383Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.199 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1254\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4): sending disco ping to [0LjuK]  ...\n"}
{"Time":"2023-03-29T13:37:25.200531317Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.200 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:706\u003e\t(*userspaceEngine).maybeReconfigWireguardLocked\twgengine: Reconfig: configuring userspace WireGuard config (with 1/1 peers)\n"}
{"Time":"2023-03-29T13:37:25.20096595Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.200 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [0LjuK] - UAPI: Created\n"}
{"Time":"2023-03-29T13:37:25.201076837Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.200 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [0LjuK] - UAPI: Updating endpoint\n"}
{"Time":"2023-03-29T13:37:25.201187536Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.201 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [0LjuK] - UAPI: Removing all allowedips\n"}
{"Time":"2023-03-29T13:37:25.201294507Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.201 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [0LjuK] - UAPI: Adding allowedip\n"}
{"Time":"2023-03-29T13:37:25.201406637Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.201 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [0LjuK] - UAPI: Updating persistent keepalive interval\n"}
{"Time":"2023-03-29T13:37:25.20154342Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.201 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [0LjuK] - Starting\n"}
{"Time":"2023-03-29T13:37:25.201642014Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.201 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [0LjuK] - Sending handshake initiation\n"}
{"Time":"2023-03-29T13:37:25.202494139Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.202 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:584\u003e\t(*userspaceEngine).noteRecvActivity\twgengine: idle peer [S1KIY] now active, reconfiguring WireGuard\n"}
{"Time":"2023-03-29T13:37:25.202613281Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.202 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:706\u003e\t(*userspaceEngine).maybeReconfigWireguardLocked\twgengine: Reconfig: configuring userspace WireGuard config (with 1/1 peers)\n"}
{"Time":"2023-03-29T13:37:25.203067239Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.202 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [S1KIY] - UAPI: Created\n"}
{"Time":"2023-03-29T13:37:25.203194112Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.203 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [S1KIY] - UAPI: Updating endpoint\n"}
{"Time":"2023-03-29T13:37:25.203305469Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.203 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [S1KIY] - UAPI: Removing all allowedips\n"}
{"Time":"2023-03-29T13:37:25.203432836Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.203 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [S1KIY] - UAPI: Adding allowedip\n"}
{"Time":"2023-03-29T13:37:25.203643635Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.203 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [S1KIY] - UAPI: Updating persistent keepalive interval\n"}
{"Time":"2023-03-29T13:37:25.203694677Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.203 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [S1KIY] - Starting\n"}
{"Time":"2023-03-29T13:37:25.204047455Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.203 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [S1KIY] - Received handshake initiation\n"}
{"Time":"2023-03-29T13:37:25.20407267Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.204 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [S1KIY] - Sending handshake response\n"}
{"Time":"2023-03-29T13:37:25.204499058Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.204 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:225\u003e\tNewConn.func6\twireguard status\t{\"status\": \"\\u0026{AsOf:2023-03-29 13:37:25.204364109 +0000 UTC m=+1.843971335 Peers:[{TxBytes:92 RxBytes:148 LastHandshake:1970-01-01 00:00:00 +0000 UTC NodeKey:nodekey:4b52886038d0b10509d4ba999d1a1ad8721795e419e104079b9b0d4334ccf262}] LocalAddrs:[{Addr:127.0.0.1:60850 Type:stun} {Addr:172.20.0.2:60850 Type:local}] DERPs:1}\", \"err\": null}\n"}
{"Time":"2023-03-29T13:37:25.204985233Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.204 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [0LjuK] - Received handshake response\n"}
{"Time":"2023-03-29T13:37:25.205043968Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.204 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:4387\u003e\t(*endpoint).handlePongConnLocked\tmagicsock: disco: node [S1KIY] d:de63960686d4d969 now using 172.20.0.2:58304\n"}
{"Time":"2023-03-29T13:37:25.205186973Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.205 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:225\u003e\tNewConn.func6\twireguard status\t{\"status\": \"\\u0026{AsOf:2023-03-29 13:37:25.205077383 +0000 UTC m=+1.844684599 Peers:[{TxBytes:148 RxBytes:92 LastHandshake:2023-03-29 13:37:25.204972346 +0000 UTC NodeKey:nodekey:d0b8ee28a0ee87a0b3a9c4e4d551d52d6abae50aac6b29587f8aaaecaf92dc1c}] LocalAddrs:[{Addr:127.0.0.1:58304 Type:stun} {Addr:172.20.0.2:58304 Type:local}] DERPs:1}\", \"err\": null}\n"}
{"Time":"2023-03-29T13:37:25.205653441Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.205 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:4387\u003e\t(*endpoint).handlePongConnLocked\tmagicsock: disco: node [0LjuK] d:a2fa54a4398f4b14 now using 127.0.0.1:60850\n"}
{"Time":"2023-03-29T13:37:25.228059809Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    agent_test.go:344: 2023-03-29 13:37:25.227: cmd: stdin: \"exit 0\\r\"\n"}
{"Time":"2023-03-29T13:37:25.228276231Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    ptytest.go:121: 2023-03-29 13:37:25.228: cmd: \"exit 0\"\n"}
{"Time":"2023-03-29T13:37:25.235085539Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.235 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: [v1] report: udp=true v6=false v6os=false mapvarydest= hair= portmap= v4a=127.0.0.1:58304 derp=1 derpdist=1v4:0s\n"}
{"Time":"2023-03-29T13:37:25.235327678Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.235 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: [v1] report: udp=true v6=false v6os=false mapvarydest= hair= portmap= v4a=127.0.0.1:60850 derp=1 derpdist=1v4:0s\n"}
{"Time":"2023-03-29T13:37:25.235573892Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.235 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:246\u003e\tNewConn.func7\tnetinfo callback\t{\"netinfo\": {\"MappingVariesByDestIP\": null, \"HairPinning\": null, \"WorkingIPv6\": false, \"OSHasIPv6\": false, \"WorkingUDP\": true, \"WorkingICMPv4\": false, \"UPnP\": false, \"PMP\": false, \"PCP\": false, \"PreferredDERP\": 1, \"DERPLatency\": {\"1-v4\": 0.000235695}}}\n"}
{"Time":"2023-03-29T13:37:25.235627639Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.235 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 2479211229855255143, \"as_of\": \"2023-03-29T13:37:25.235549Z\", \"key\": \"nodekey:4b52886038d0b10509d4ba999d1a1ad8721795e419e104079b9b0d4334ccf262\", \"disco\": \"discokey:de63960686d4d9696035b3395ad51c334b1b6762f27929160b70e330e59fc955\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.000235695}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4c72:9ce3:62e1:7385:dec7/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4c72:9ce3:62e1:7385:dec7/128\"], \"endpoints\": [\"127.0.0.1:58304\", \"172.20.0.2:58304\"]}}\n"}
{"Time":"2023-03-29T13:37:25.235912714Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.235 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:426\u003e\t(*Conn).UpdateNodes\tadding node\t{\"node\": {\"id\": 2479211229855255143, \"as_of\": \"2023-03-29T13:37:25.235549Z\", \"key\": \"nodekey:4b52886038d0b10509d4ba999d1a1ad8721795e419e104079b9b0d4334ccf262\", \"disco\": \"discokey:de63960686d4d9696035b3395ad51c334b1b6762f27929160b70e330e59fc955\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.000235695}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4c72:9ce3:62e1:7385:dec7/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4c72:9ce3:62e1:7385:dec7/128\"], \"endpoints\": [\"127.0.0.1:58304\", \"172.20.0.2:58304\"]}}\n"}
{"Time":"2023-03-29T13:37:25.2361447Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.236 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n"}
{"Time":"2023-03-29T13:37:25.236185457Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.236 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2578\u003e\t(*Conn).SetNetworkMap\t[v1] magicsock: got updated network map; 1 peers\n"}
{"Time":"2023-03-29T13:37:25.23632231Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.236 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:706\u003e\t(*userspaceEngine).maybeReconfigWireguardLocked\twgengine: Reconfig: configuring userspace WireGuard config (with 1/1 peers)\n"}
{"Time":"2023-03-29T13:37:25.2364646Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.236 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [S1KIY] - UAPI: Updating persistent keepalive interval\n"}
{"Time":"2023-03-29T13:37:25.23648571Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.236 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [S1KIY] - Sending keepalive packet\n"}
{"Time":"2023-03-29T13:37:25.236535173Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.236 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n"}
{"Time":"2023-03-29T13:37:25.236646389Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.236 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:246\u003e\tNewConn.func7\tnetinfo callback\t{\"netinfo\": {\"MappingVariesByDestIP\": null, \"HairPinning\": null, \"WorkingIPv6\": false, \"OSHasIPv6\": false, \"WorkingUDP\": true, \"WorkingICMPv4\": false, \"UPnP\": false, \"PMP\": false, \"PCP\": false, \"PreferredDERP\": 1, \"DERPLatency\": {\"1-v4\": 0.000124794}}}\n"}
{"Time":"2023-03-29T13:37:25.236691145Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.236 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 2366729466453183316, \"as_of\": \"2023-03-29T13:37:25.236616Z\", \"key\": \"nodekey:d0b8ee28a0ee87a0b3a9c4e4d551d52d6abae50aac6b29587f8aaaecaf92dc1c\", \"disco\": \"discokey:a2fa54a4398f4b14ed94f97af08fb0c8f1a7276aa663caf7d25542e565ef4f28\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.000124794}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": [\"127.0.0.1:60850\", \"172.20.0.2:60850\"]}}\n"}
{"Time":"2023-03-29T13:37:25.236953136Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.236 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:426\u003e\t(*Conn).UpdateNodes\tadding node\t{\"node\": {\"id\": 2366729466453183316, \"as_of\": \"2023-03-29T13:37:25.236616Z\", \"key\": \"nodekey:d0b8ee28a0ee87a0b3a9c4e4d551d52d6abae50aac6b29587f8aaaecaf92dc1c\", \"disco\": \"discokey:a2fa54a4398f4b14ed94f97af08fb0c8f1a7276aa663caf7d25542e565ef4f28\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.000124794}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": [\"127.0.0.1:60850\", \"172.20.0.2:60850\"]}}\n"}
{"Time":"2023-03-29T13:37:25.237148814Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.237 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n"}
{"Time":"2023-03-29T13:37:25.23717419Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.237 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2578\u003e\t(*Conn).SetNetworkMap\t[v1] magicsock: got updated network map; 1 peers\n"}
{"Time":"2023-03-29T13:37:25.23729907Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.237 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:706\u003e\t(*userspaceEngine).maybeReconfigWireguardLocked\twgengine: Reconfig: configuring userspace WireGuard config (with 1/1 peers)\n"}
{"Time":"2023-03-29T13:37:25.237442993Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.237 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [0LjuK] - UAPI: Updating persistent keepalive interval\n"}
{"Time":"2023-03-29T13:37:25.237465362Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.237 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [0LjuK] - Sending keepalive packet\n"}
{"Time":"2023-03-29T13:37:25.23748091Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.237 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n"}
{"Time":"2023-03-29T13:37:25.237621079Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.237 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [0LjuK] - Receiving keepalive packet\n"}
{"Time":"2023-03-29T13:37:25.237646187Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.237 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [S1KIY] - Receiving keepalive packet\n"}
{"Time":"2023-03-29T13:37:25.57358248Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:25.573 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1254\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:4c72:9ce3:62e1:7385:dec7): sending disco ping to [S1KIY]  ...\n"}
{"Time":"2023-03-29T13:37:26.073909695Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:26.073 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1254\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:4c72:9ce3:62e1:7385:dec7): sending disco ping to [S1KIY]  ...\n"}
{"Time":"2023-03-29T13:37:26.573442313Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:26.573 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1254\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:4c72:9ce3:62e1:7385:dec7): sending disco ping to [S1KIY]  ...\n"}
{"Time":"2023-03-29T13:37:26.685974077Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    ptytest.go:83: 2023-03-29 13:37:26.685: cmd: closing tpty: close\n"}
{"Time":"2023-03-29T13:37:26.686024343Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    ptytest.go:74: 2023-03-29 13:37:26.685: cmd: closing pty\n"}
{"Time":"2023-03-29T13:37:26.686044434Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    ptytest.go:110: 2023-03-29 13:37:26.685: cmd: copy done: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:37:26.686057034Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    ptytest.go:111: 2023-03-29 13:37:26.685: cmd: closing out\n"}
{"Time":"2023-03-29T13:37:26.686068789Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    ptytest.go:113: 2023-03-29 13:37:26.685: cmd: closed out: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:37:26.686157867Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    ptytest.go:76: 2023-03-29 13:37:26.686: cmd: closed pty: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:26.686173026Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    ptytest.go:74: 2023-03-29 13:37:26.686: cmd: closing logw\n"}
{"Time":"2023-03-29T13:37:26.686188025Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    ptytest.go:76: 2023-03-29 13:37:26.686: cmd: closed logw: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:26.686198978Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    ptytest.go:74: 2023-03-29 13:37:26.686: cmd: closing logr\n"}
{"Time":"2023-03-29T13:37:26.686213128Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    ptytest.go:76: 2023-03-29 13:37:26.686: cmd: closed logr: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:26.686224275Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    ptytest.go:102: 2023-03-29 13:37:26.686: cmd: closed tpty\n"}
{"Time":"2023-03-29T13:37:26.686399517Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:26.686 [INFO]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:201\u003e\t(*agent).runLoop\tdisconnected from coderd\n"}
{"Time":"2023-03-29T13:37:26.686631954Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:26.686 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2736\u003e\t(*Conn).closeDerpLocked\tmagicsock: closing connection to derp-1 (conn-close), age 2s\n"}
{"Time":"2023-03-29T13:37:26.686672029Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:26.686 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2747\u003e\t(*Conn).logActiveDerpLocked\tmagicsock: 0 active derp conns\n"}
{"Time":"2023-03-29T13:37:26.686752993Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:26.686 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:31\u003e\tfakeRouter.Close\t[v1] warning: fakeRouter.Close: not implemented.\n"}
{"Time":"2023-03-29T13:37:26.686793215Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:26.686 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Device closing\n"}
{"Time":"2023-03-29T13:37:26.686883059Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:26.686 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming receiveDERP - stopped\n"}
{"Time":"2023-03-29T13:37:26.687010573Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:26.686 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v6 - stopped\n"}
{"Time":"2023-03-29T13:37:26.687040046Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:26.686 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v4 - stopped\n"}
{"Time":"2023-03-29T13:37:26.687106628Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:26.687 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [0LjuK] - Stopping\n"}
{"Time":"2023-03-29T13:37:26.687190751Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:26.687 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Device closed\n"}
{"Time":"2023-03-29T13:37:26.68730229Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:26.687 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:263\u003e\t(*agent).setLifecycle\tset lifecycle state\t{\"state\": \"shutting_down\", \"last\": \"ready\"}\n"}
{"Time":"2023-03-29T13:37:26.687319022Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:26.687 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:263\u003e\t(*agent).setLifecycle\tset lifecycle state\t{\"state\": \"off\", \"last\": \"shutting_down\"}\n"}
{"Time":"2023-03-29T13:37:26.68739086Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:26.687 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:229\u003e\t(*agent).reportLifecycleLoop\treporting lifecycle state\t{\"state\": \"off\"}\n"}
{"Time":"2023-03-29T13:37:26.687791287Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:26.687 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2736\u003e\t(*Conn).closeDerpLocked\tmagicsock: closing connection to derp-1 (conn-close), age 2s\n"}
{"Time":"2023-03-29T13:37:26.687807566Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:26.687 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2747\u003e\t(*Conn).logActiveDerpLocked\tmagicsock: 0 active derp conns\n"}
{"Time":"2023-03-29T13:37:26.687907277Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:26.687 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:31\u003e\tfakeRouter.Close\t[v1] warning: fakeRouter.Close: not implemented.\n"}
{"Time":"2023-03-29T13:37:26.687956258Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:26.687 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Device closing\n"}
{"Time":"2023-03-29T13:37:26.68802861Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:26.687 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming receiveDERP - stopped\n"}
{"Time":"2023-03-29T13:37:26.688112368Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:26.688 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1254\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:4c72:9ce3:62e1:7385:dec7): sending disco ping to [S1KIY]  ...\n"}
{"Time":"2023-03-29T13:37:26.688253692Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:26.688 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v6 - stopped\n"}
{"Time":"2023-03-29T13:37:26.688318345Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:26.688 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v4 - stopped\n"}
{"Time":"2023-03-29T13:37:26.688366659Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:26.688 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [S1KIY] - Stopping\n"}
{"Time":"2023-03-29T13:37:26.688473063Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    t.go:81: 2023-03-29 13:37:26.688 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Device closed\n"}
{"Time":"2023-03-29T13:37:26.688794731Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"    stuntest.go:63: STUN server shutdown\n"}
{"Time":"2023-03-29T13:37:26.688993708Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Output":"--- PASS: TestAgent_Session_TTY_Hushlogin (1.69s)\n"}
{"Time":"2023-03-29T13:37:26.689005169Z","Action":"pass","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_Hushlogin","Elapsed":1.69}
{"Time":"2023-03-29T13:37:26.689017486Z","Action":"run","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput"}
{"Time":"2023-03-29T13:37:26.689022846Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"=== RUN   TestAgent_Session_TTY_FastCommandHasOutput\n"}
{"Time":"2023-03-29T13:37:26.689031231Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"=== PAUSE TestAgent_Session_TTY_FastCommandHasOutput\n"}
{"Time":"2023-03-29T13:37:26.689049237Z","Action":"pause","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput"}
{"Time":"2023-03-29T13:37:26.689055783Z","Action":"run","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_HugeOutputIsNotLost"}
{"Time":"2023-03-29T13:37:26.689060673Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_HugeOutputIsNotLost","Output":"=== RUN   TestAgent_Session_TTY_HugeOutputIsNotLost\n"}
{"Time":"2023-03-29T13:37:26.689069084Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_HugeOutputIsNotLost","Output":"=== PAUSE TestAgent_Session_TTY_HugeOutputIsNotLost\n"}
{"Time":"2023-03-29T13:37:26.689074026Z","Action":"pause","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_HugeOutputIsNotLost"}
{"Time":"2023-03-29T13:37:26.689083532Z","Action":"cont","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec"}
{"Time":"2023-03-29T13:37:26.689090279Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"=== CONT  TestAgent_SessionExec\n"}
{"Time":"2023-03-29T13:37:26.703787142Z","Action":"cont","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_HugeOutputIsNotLost"}
{"Time":"2023-03-29T13:37:26.703825656Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_HugeOutputIsNotLost","Output":"=== CONT  TestAgent_Session_TTY_HugeOutputIsNotLost\n"}
{"Time":"2023-03-29T13:37:26.703839698Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_HugeOutputIsNotLost","Output":"    agent_test.go:413: This test proves we have a bug where parts of large output on a PTY can be lost after the command exits, skipped to avoid test failures.\n"}
{"Time":"2023-03-29T13:37:26.703868206Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_HugeOutputIsNotLost","Output":"--- SKIP: TestAgent_Session_TTY_HugeOutputIsNotLost (0.00s)\n"}
{"Time":"2023-03-29T13:37:26.70388799Z","Action":"skip","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_HugeOutputIsNotLost","Elapsed":0}
{"Time":"2023-03-29T13:37:26.703900175Z","Action":"cont","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput"}
{"Time":"2023-03-29T13:37:26.703908033Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"=== CONT  TestAgent_Session_TTY_FastCommandHasOutput\n"}
{"Time":"2023-03-29T13:37:26.723935151Z","Action":"cont","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode"}
{"Time":"2023-03-29T13:37:26.723957967Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"=== CONT  TestAgent_SessionTTYExitCode\n"}
{"Time":"2023-03-29T13:37:26.744050676Z","Action":"cont","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell"}
{"Time":"2023-03-29T13:37:26.744073511Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"=== CONT  TestAgent_SessionTTYShell\n"}
{"Time":"2023-03-29T13:37:26.975908391Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:26.975 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:270\u003e\tNewUserspaceEngine\t[v1] using fake (no-op) tun device\n"}
{"Time":"2023-03-29T13:37:26.975935102Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:26.975 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:274\u003e\tNewUserspaceEngine\t[v1] using fake (no-op) OS network configurator\n"}
{"Time":"2023-03-29T13:37:26.975941463Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:26.975 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:278\u003e\tNewUserspaceEngine\t[v1] using fake (no-op) DNS configurator\n"}
{"Time":"2023-03-29T13:37:26.975992643Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:26.975 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: using dns.noopManager\n"}
{"Time":"2023-03-29T13:37:26.976027672Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:26.975 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:334\u003e\tNewUserspaceEngine\tlink state: interfaces.State{defaultRoute=eth0 ifs={eth0:[172.20.0.2/16]} v4=true v6=false}\n"}
{"Time":"2023-03-29T13:37:26.976097148Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:26.976 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:306\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP read buffer size to 7340032: operation not permitted\n"}
{"Time":"2023-03-29T13:37:26.976137127Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:26.976 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:310\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP write buffer size to 7340032: operation not permitted\n"}
{"Time":"2023-03-29T13:37:26.976202552Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:26.976 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:306\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP read buffer size to 7340032: operation not permitted\n"}
{"Time":"2023-03-29T13:37:26.976237559Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:26.976 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:310\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP write buffer size to 7340032: operation not permitted\n"}
{"Time":"2023-03-29T13:37:26.976273529Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:26.976 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:666\u003e\tNewConn\t[v1] couldn't create raw v4 disco listener, using regular listener instead: raw disco listening disabled, SO_MARK unavailable\n"}
{"Time":"2023-03-29T13:37:26.976300958Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:26.976 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:672\u003e\tNewConn\t[v1] couldn't create raw v6 disco listener, using regular listener instead: raw disco listening disabled, SO_MARK unavailable\n"}
{"Time":"2023-03-29T13:37:26.976417909Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:26.976 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1056\u003e\t(*Conn).DiscoPublicKey\tmagicsock: disco key = d:17b5066de479f458\n"}
{"Time":"2023-03-29T13:37:26.976445133Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:26.976 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:412\u003e\tNewUserspaceEngine\tCreating WireGuard device...\n"}
{"Time":"2023-03-29T13:37:26.976529694Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:26.976 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:437\u003e\tNewUserspaceEngine\tBringing WireGuard device up...\n"}
{"Time":"2023-03-29T13:37:26.976575591Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:26.976 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] UDP bind has been updated\n"}
{"Time":"2023-03-29T13:37:26.976603915Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:26.976 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Interface state was Down, requested Up, now Up\n"}
{"Time":"2023-03-29T13:37:26.976641835Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:26.976 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:441\u003e\tNewUserspaceEngine\tBringing router up...\n"}
{"Time":"2023-03-29T13:37:26.97666441Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:26.976 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:21\u003e\tfakeRouter.Up\t[v1] warning: fakeRouter.Up: not implemented.\n"}
{"Time":"2023-03-29T13:37:26.976690087Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:26.976 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:449\u003e\tNewUserspaceEngine\tClearing router settings...\n"}
{"Time":"2023-03-29T13:37:26.97672446Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:26.976 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:26\u003e\tfakeRouter.Set\t[v1] warning: fakeRouter.Set: not implemented.\n"}
{"Time":"2023-03-29T13:37:26.976749123Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:26.976 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:453\u003e\tNewUserspaceEngine\tStarting link monitor...\n"}
{"Time":"2023-03-29T13:37:26.976786013Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:26.976 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:456\u003e\tNewUserspaceEngine\tEngine created.\n"}
{"Time":"2023-03-29T13:37:26.976893189Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:26.976 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2444\u003e\t(*Conn).SetPrivateKey\tmagicsock: SetPrivateKey called (init)\n"}
{"Time":"2023-03-29T13:37:26.977219957Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:26.977 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:187\u003e\tNewConn\tupdating network map\n"}
{"Time":"2023-03-29T13:37:26.977264288Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:26.977 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2578\u003e\t(*Conn).SetNetworkMap\t[v1] magicsock: got updated network map; 0 peers\n"}
{"Time":"2023-03-29T13:37:26.977393997Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:26.977 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1241\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4): no matching peer\n"}
{"Time":"2023-03-29T13:37:27.015978257Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.015 [INFO]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:188\u003e\t(*agent).runLoop\tconnecting to coderd\n"}
{"Time":"2023-03-29T13:37:27.016072388Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.015 [INFO]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:286\u003e\t(*agent).run\tfetched metadata\t{\"metadata\": {\"git_auth_configs\": 0, \"vscode_port_proxy_uri\": \"\", \"apps\": null, \"derpmap\": {\"Regions\": {\"1\": {\"EmbeddedRelay\": false, \"RegionID\": 1, \"RegionCode\": \"test\", \"RegionName\": \"Test\", \"Nodes\": [{\"Name\": \"t2\", \"RegionID\": 1, \"HostName\": \"\", \"IPv4\": \"127.0.0.1\", \"IPv6\": \"none\", \"STUNPort\": 55109, \"DERPPort\": 34655, \"InsecureForTests\": true}]}}}, \"environment_variables\": null, \"startup_script\": \"\", \"startup_script_timeout\": 0, \"directory\": \"\", \"motd_file\": \"\", \"shutdown_script\": \"\", \"shutdown_script_timeout\": 0}}\n"}
{"Time":"2023-03-29T13:37:27.016101997Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.016 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:263\u003e\t(*agent).setLifecycle\tset lifecycle state\t{\"state\": \"starting\", \"last\": \"\"}\n"}
{"Time":"2023-03-29T13:37:27.016454205Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.016 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:270\u003e\tNewUserspaceEngine\t[v1] using fake (no-op) tun device\n"}
{"Time":"2023-03-29T13:37:27.016484809Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.016 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:274\u003e\tNewUserspaceEngine\t[v1] using fake (no-op) OS network configurator\n"}
{"Time":"2023-03-29T13:37:27.016527444Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.016 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:278\u003e\tNewUserspaceEngine\t[v1] using fake (no-op) DNS configurator\n"}
{"Time":"2023-03-29T13:37:27.016579577Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.016 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: using dns.noopManager\n"}
{"Time":"2023-03-29T13:37:27.016616504Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.016 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:334\u003e\tNewUserspaceEngine\tlink state: interfaces.State{defaultRoute=eth0 ifs={eth0:[172.20.0.2/16]} v4=true v6=false}\n"}
{"Time":"2023-03-29T13:37:27.01670613Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.016 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:306\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP read buffer size to 7340032: operation not permitted\n"}
{"Time":"2023-03-29T13:37:27.016736272Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.016 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:310\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP write buffer size to 7340032: operation not permitted\n"}
{"Time":"2023-03-29T13:37:27.016795884Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.016 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:306\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP read buffer size to 7340032: operation not permitted\n"}
{"Time":"2023-03-29T13:37:27.01683051Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.016 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:310\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP write buffer size to 7340032: operation not permitted\n"}
{"Time":"2023-03-29T13:37:27.016869184Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.016 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:666\u003e\tNewConn\t[v1] couldn't create raw v4 disco listener, using regular listener instead: raw disco listening disabled, SO_MARK unavailable\n"}
{"Time":"2023-03-29T13:37:27.016901207Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.016 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:672\u003e\tNewConn\t[v1] couldn't create raw v6 disco listener, using regular listener instead: raw disco listening disabled, SO_MARK unavailable\n"}
{"Time":"2023-03-29T13:37:27.017009443Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.016 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1056\u003e\t(*Conn).DiscoPublicKey\tmagicsock: disco key = d:e6f05f1260bbd611\n"}
{"Time":"2023-03-29T13:37:27.017032499Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.017 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:412\u003e\tNewUserspaceEngine\tCreating WireGuard device...\n"}
{"Time":"2023-03-29T13:37:27.017087268Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.017 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:437\u003e\tNewUserspaceEngine\tBringing WireGuard device up...\n"}
{"Time":"2023-03-29T13:37:27.017133219Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.017 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] UDP bind has been updated\n"}
{"Time":"2023-03-29T13:37:27.017166541Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.017 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Interface state was Down, requested Up, now Up\n"}
{"Time":"2023-03-29T13:37:27.017198439Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.017 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:441\u003e\tNewUserspaceEngine\tBringing router up...\n"}
{"Time":"2023-03-29T13:37:27.017231784Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.017 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:21\u003e\tfakeRouter.Up\t[v1] warning: fakeRouter.Up: not implemented.\n"}
{"Time":"2023-03-29T13:37:27.017255027Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.017 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:449\u003e\tNewUserspaceEngine\tClearing router settings...\n"}
{"Time":"2023-03-29T13:37:27.017285867Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.017 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:26\u003e\tfakeRouter.Set\t[v1] warning: fakeRouter.Set: not implemented.\n"}
{"Time":"2023-03-29T13:37:27.017313159Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.017 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:453\u003e\tNewUserspaceEngine\tStarting link monitor...\n"}
{"Time":"2023-03-29T13:37:27.017341323Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.017 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:456\u003e\tNewUserspaceEngine\tEngine created.\n"}
{"Time":"2023-03-29T13:37:27.017453136Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.017 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2444\u003e\t(*Conn).SetPrivateKey\tmagicsock: SetPrivateKey called (init)\n"}
{"Time":"2023-03-29T13:37:27.017777899Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.017 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:187\u003e\tNewConn\tupdating network map\n"}
{"Time":"2023-03-29T13:37:27.01781684Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.017 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2578\u003e\t(*Conn).SetNetworkMap\t[v1] magicsock: got updated network map; 0 peers\n"}
{"Time":"2023-03-29T13:37:27.017877499Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.017 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:402\u003e\t(*agent).run\trunning tailnet connection coordinator\n"}
{"Time":"2023-03-29T13:37:27.017903073Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.017 [INFO]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:620\u003e\t(*agent).runCoordinator\tconnected to coordination endpoint\n"}
{"Time":"2023-03-29T13:37:27.017983662Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.017 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 1396496777246732951, \"as_of\": \"2023-03-29T13:37:27.017904Z\", \"key\": \"nodekey:eb8a91888d02040ddaee61afa4ae8d03bd6c35ddf3f76edcaa5bde89743e5c24\", \"disco\": \"discokey:e6f05f1260bbd61182192a11c1541a28ccace412e36cdb487e15a598d8327a73\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": []}}\n"}
{"Time":"2023-03-29T13:37:27.018477038Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.018 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v4 - started\n"}
{"Time":"2023-03-29T13:37:27.018878036Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.018 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v6 - started\n"}
{"Time":"2023-03-29T13:37:27.019251435Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.019 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming receiveDERP - started\n"}
{"Time":"2023-03-29T13:37:27.020053918Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.019 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 6193178684101620604, \"as_of\": \"2023-03-29T13:37:26.977307Z\", \"key\": \"nodekey:76ff2edcacaac78382de86ce14dcf7d1464d8bff76ab14412a1c18ef29aa9370\", \"disco\": \"discokey:17b5066de479f45868013352cba173846e33492e64258b47a5e823c1746f8449\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4781:bb82:1540:3954:6a8/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4781:bb82:1540:3954:6a8/128\"], \"endpoints\": []}}\n"}
{"Time":"2023-03-29T13:37:27.020198673Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.020 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1241\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4): no matching peer\n"}
{"Time":"2023-03-29T13:37:27.020242577Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.020 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:229\u003e\t(*agent).reportLifecycleLoop\treporting lifecycle state\t{\"state\": \"starting\"}\n"}
{"Time":"2023-03-29T13:37:27.020285833Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.020 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:263\u003e\t(*agent).setLifecycle\tset lifecycle state\t{\"state\": \"ready\", \"last\": \"starting\"}\n"}
{"Time":"2023-03-29T13:37:27.020317905Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.020 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:229\u003e\t(*agent).reportLifecycleLoop\treporting lifecycle state\t{\"state\": \"ready\"}\n"}
{"Time":"2023-03-29T13:37:27.036521314Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.036 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v4 - started\n"}
{"Time":"2023-03-29T13:37:27.036924425Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.036 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v6 - started\n"}
{"Time":"2023-03-29T13:37:27.037332816Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.037 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming receiveDERP - started\n"}
{"Time":"2023-03-29T13:37:27.03841778Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.038 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:423\u003e\t(*Conn).UpdateNodes\tno preferred DERP, skipping node\t{\"node\": {\"id\": 1396496777246732951, \"as_of\": \"2023-03-29T13:37:27.017904Z\", \"key\": \"nodekey:eb8a91888d02040ddaee61afa4ae8d03bd6c35ddf3f76edcaa5bde89743e5c24\", \"disco\": \"discokey:e6f05f1260bbd61182192a11c1541a28ccace412e36cdb487e15a598d8327a73\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": []}}\n"}
{"Time":"2023-03-29T13:37:27.038434547Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.038 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n"}
{"Time":"2023-03-29T13:37:27.03852175Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.038 [DEBUG]\t(client.netstack)\t\u003ctailscale.com/wgengine/netstack/netstack.go:367\u003e\t(*Impl).updateIPs\t[v2] netstack: registered IP fd7a:115c:a1e0:4781:bb82:1540:3954:6a8/128\n"}
{"Time":"2023-03-29T13:37:27.038608926Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.038 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:706\u003e\t(*userspaceEngine).maybeReconfigWireguardLocked\twgengine: Reconfig: configuring userspace WireGuard config (with 0/0 peers)\n"}
{"Time":"2023-03-29T13:37:27.038696362Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.038 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] UAPI: Updating private key\n"}
{"Time":"2023-03-29T13:37:27.038810178Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.038 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:921\u003e\t(*userspaceEngine).Reconfig\twgengine: Reconfig: configuring router\n"}
{"Time":"2023-03-29T13:37:27.038824686Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.038 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:26\u003e\tfakeRouter.Set\t[v1] warning: fakeRouter.Set: not implemented.\n"}
{"Time":"2023-03-29T13:37:27.038858134Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.038 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:931\u003e\t(*userspaceEngine).Reconfig\twgengine: Reconfig: configuring DNS\n"}
{"Time":"2023-03-29T13:37:27.038891063Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.038 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: Set: {DefaultResolvers:[] Routes:{} SearchDomains:[] Hosts:0}\n"}
{"Time":"2023-03-29T13:37:27.038924242Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.038 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: Resolvercfg: {Routes:{} Hosts:0 LocalDomains:[]}\n"}
{"Time":"2023-03-29T13:37:27.038937309Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.038 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: OScfg: {Nameservers:[] SearchDomains:[] MatchDomains:[] Hosts:[]}\n"}
{"Time":"2023-03-29T13:37:27.038976455Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.038 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n"}
{"Time":"2023-03-29T13:37:27.039988711Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.039 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:423\u003e\t(*Conn).UpdateNodes\tno preferred DERP, skipping node\t{\"node\": {\"id\": 6193178684101620604, \"as_of\": \"2023-03-29T13:37:26.977307Z\", \"key\": \"nodekey:76ff2edcacaac78382de86ce14dcf7d1464d8bff76ab14412a1c18ef29aa9370\", \"disco\": \"discokey:17b5066de479f45868013352cba173846e33492e64258b47a5e823c1746f8449\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4781:bb82:1540:3954:6a8/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4781:bb82:1540:3954:6a8/128\"], \"endpoints\": []}}\n"}
{"Time":"2023-03-29T13:37:27.040010425Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.039 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n"}
{"Time":"2023-03-29T13:37:27.040059771Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.040 [DEBUG]\t(agent.tailnet.netstack)\t\u003ctailscale.com/wgengine/netstack/netstack.go:367\u003e\t(*Impl).updateIPs\t[v2] netstack: registered IP fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\n"}
{"Time":"2023-03-29T13:37:27.040126554Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.040 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:706\u003e\t(*userspaceEngine).maybeReconfigWireguardLocked\twgengine: Reconfig: configuring userspace WireGuard config (with 0/0 peers)\n"}
{"Time":"2023-03-29T13:37:27.040195696Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.040 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] UAPI: Updating private key\n"}
{"Time":"2023-03-29T13:37:27.040300593Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.040 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:921\u003e\t(*userspaceEngine).Reconfig\twgengine: Reconfig: configuring router\n"}
{"Time":"2023-03-29T13:37:27.040315089Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.040 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:26\u003e\tfakeRouter.Set\t[v1] warning: fakeRouter.Set: not implemented.\n"}
{"Time":"2023-03-29T13:37:27.040342986Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.040 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:931\u003e\t(*userspaceEngine).Reconfig\twgengine: Reconfig: configuring DNS\n"}
{"Time":"2023-03-29T13:37:27.040371935Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.040 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: Set: {DefaultResolvers:[] Routes:{} SearchDomains:[] Hosts:0}\n"}
{"Time":"2023-03-29T13:37:27.040410694Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.040 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: Resolvercfg: {Routes:{} Hosts:0 LocalDomains:[]}\n"}
{"Time":"2023-03-29T13:37:27.040423938Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.040 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: OScfg: {Nameservers:[] SearchDomains:[] MatchDomains:[] Hosts:[]}\n"}
{"Time":"2023-03-29T13:37:27.040453889Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.040 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n"}
{"Time":"2023-03-29T13:37:27.096588631Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.096 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: netcheck: UDP is blocked, trying HTTPS\n"}
{"Time":"2023-03-29T13:37:27.096797479Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.096 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1241\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4): no matching peer\n"}
{"Time":"2023-03-29T13:37:27.097032423Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.096 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: [v1] measureAllICMPLatency: listen ip4:icmp 0.0.0.0: socket: operation not permitted\n"}
{"Time":"2023-03-29T13:37:27.09709667Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.097 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: netcheck: UDP is blocked, trying HTTPS\n"}
{"Time":"2023-03-29T13:37:27.12109969Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.121 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:270\u003e\tNewUserspaceEngine\t[v1] using fake (no-op) tun device\n"}
{"Time":"2023-03-29T13:37:27.121135169Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.121 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:274\u003e\tNewUserspaceEngine\t[v1] using fake (no-op) OS network configurator\n"}
{"Time":"2023-03-29T13:37:27.121150972Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.121 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:278\u003e\tNewUserspaceEngine\t[v1] using fake (no-op) DNS configurator\n"}
{"Time":"2023-03-29T13:37:27.121167311Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.121 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: using dns.noopManager\n"}
{"Time":"2023-03-29T13:37:27.121216222Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.121 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:334\u003e\tNewUserspaceEngine\tlink state: interfaces.State{defaultRoute=eth0 ifs={eth0:[172.20.0.2/16]} v4=true v6=false}\n"}
{"Time":"2023-03-29T13:37:27.121292057Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.121 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:306\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP read buffer size to 7340032: operation not permitted\n"}
{"Time":"2023-03-29T13:37:27.12132273Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.121 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:310\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP write buffer size to 7340032: operation not permitted\n"}
{"Time":"2023-03-29T13:37:27.121381219Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.121 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:306\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP read buffer size to 7340032: operation not permitted\n"}
{"Time":"2023-03-29T13:37:27.121408684Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.121 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:310\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP write buffer size to 7340032: operation not permitted\n"}
{"Time":"2023-03-29T13:37:27.121435744Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.121 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:666\u003e\tNewConn\t[v1] couldn't create raw v4 disco listener, using regular listener instead: raw disco listening disabled, SO_MARK unavailable\n"}
{"Time":"2023-03-29T13:37:27.121461695Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.121 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:672\u003e\tNewConn\t[v1] couldn't create raw v6 disco listener, using regular listener instead: raw disco listening disabled, SO_MARK unavailable\n"}
{"Time":"2023-03-29T13:37:27.121594822Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.121 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1056\u003e\t(*Conn).DiscoPublicKey\tmagicsock: disco key = d:c7f1bea9d6ff269c\n"}
{"Time":"2023-03-29T13:37:27.121620573Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.121 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:412\u003e\tNewUserspaceEngine\tCreating WireGuard device...\n"}
{"Time":"2023-03-29T13:37:27.121655676Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.121 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:437\u003e\tNewUserspaceEngine\tBringing WireGuard device up...\n"}
{"Time":"2023-03-29T13:37:27.121730239Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.121 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] UDP bind has been updated\n"}
{"Time":"2023-03-29T13:37:27.121756777Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.121 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Interface state was Down, requested Up, now Up\n"}
{"Time":"2023-03-29T13:37:27.121781901Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.121 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:441\u003e\tNewUserspaceEngine\tBringing router up...\n"}
{"Time":"2023-03-29T13:37:27.121808996Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.121 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:21\u003e\tfakeRouter.Up\t[v1] warning: fakeRouter.Up: not implemented.\n"}
{"Time":"2023-03-29T13:37:27.121833529Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.121 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:449\u003e\tNewUserspaceEngine\tClearing router settings...\n"}
{"Time":"2023-03-29T13:37:27.121858413Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.121 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:26\u003e\tfakeRouter.Set\t[v1] warning: fakeRouter.Set: not implemented.\n"}
{"Time":"2023-03-29T13:37:27.121888455Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.121 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:453\u003e\tNewUserspaceEngine\tStarting link monitor...\n"}
{"Time":"2023-03-29T13:37:27.121913023Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.121 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:456\u003e\tNewUserspaceEngine\tEngine created.\n"}
{"Time":"2023-03-29T13:37:27.122044906Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.121 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2444\u003e\t(*Conn).SetPrivateKey\tmagicsock: SetPrivateKey called (init)\n"}
{"Time":"2023-03-29T13:37:27.12234719Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.122 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:187\u003e\tNewConn\tupdating network map\n"}
{"Time":"2023-03-29T13:37:27.122375547Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.122 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2578\u003e\t(*Conn).SetNetworkMap\t[v1] magicsock: got updated network map; 0 peers\n"}
{"Time":"2023-03-29T13:37:27.122495597Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.122 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1241\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4): no matching peer\n"}
{"Time":"2023-03-29T13:37:27.136791704Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.136 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: [v1] measureAllICMPLatency: listen ip4:icmp 0.0.0.0: socket: operation not permitted\n"}
{"Time":"2023-03-29T13:37:27.136826981Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.136 [INFO]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:188\u003e\t(*agent).runLoop\tconnecting to coderd\n"}
{"Time":"2023-03-29T13:37:27.13694108Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.136 [INFO]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:286\u003e\t(*agent).run\tfetched metadata\t{\"metadata\": {\"git_auth_configs\": 0, \"vscode_port_proxy_uri\": \"\", \"apps\": null, \"derpmap\": {\"Regions\": {\"1\": {\"EmbeddedRelay\": false, \"RegionID\": 1, \"RegionCode\": \"test\", \"RegionName\": \"Test\", \"Nodes\": [{\"Name\": \"t2\", \"RegionID\": 1, \"HostName\": \"\", \"IPv4\": \"127.0.0.1\", \"IPv6\": \"none\", \"STUNPort\": 48864, \"DERPPort\": 33963, \"InsecureForTests\": true}]}}}, \"environment_variables\": null, \"startup_script\": \"\", \"startup_script_timeout\": 0, \"directory\": \"\", \"motd_file\": \"\", \"shutdown_script\": \"\", \"shutdown_script_timeout\": 0}}\n"}
{"Time":"2023-03-29T13:37:27.136979053Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.136 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:263\u003e\t(*agent).setLifecycle\tset lifecycle state\t{\"state\": \"starting\", \"last\": \"\"}\n"}
{"Time":"2023-03-29T13:37:27.137291589Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.137 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:270\u003e\tNewUserspaceEngine\t[v1] using fake (no-op) tun device\n"}
{"Time":"2023-03-29T13:37:27.137308609Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.137 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:274\u003e\tNewUserspaceEngine\t[v1] using fake (no-op) OS network configurator\n"}
{"Time":"2023-03-29T13:37:27.13732063Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.137 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:278\u003e\tNewUserspaceEngine\t[v1] using fake (no-op) DNS configurator\n"}
{"Time":"2023-03-29T13:37:27.137373985Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.137 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: using dns.noopManager\n"}
{"Time":"2023-03-29T13:37:27.137407965Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.137 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:334\u003e\tNewUserspaceEngine\tlink state: interfaces.State{defaultRoute=eth0 ifs={eth0:[172.20.0.2/16]} v4=true v6=false}\n"}
{"Time":"2023-03-29T13:37:27.137495219Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.137 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:306\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP read buffer size to 7340032: operation not permitted\n"}
{"Time":"2023-03-29T13:37:27.137519229Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.137 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:310\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP write buffer size to 7340032: operation not permitted\n"}
{"Time":"2023-03-29T13:37:27.137572028Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.137 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:306\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP read buffer size to 7340032: operation not permitted\n"}
{"Time":"2023-03-29T13:37:27.137602411Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.137 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:310\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP write buffer size to 7340032: operation not permitted\n"}
{"Time":"2023-03-29T13:37:27.137622846Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.137 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:666\u003e\tNewConn\t[v1] couldn't create raw v4 disco listener, using regular listener instead: raw disco listening disabled, SO_MARK unavailable\n"}
{"Time":"2023-03-29T13:37:27.137667976Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.137 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:672\u003e\tNewConn\t[v1] couldn't create raw v6 disco listener, using regular listener instead: raw disco listening disabled, SO_MARK unavailable\n"}
{"Time":"2023-03-29T13:37:27.137770053Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.137 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1056\u003e\t(*Conn).DiscoPublicKey\tmagicsock: disco key = d:59083cba13956f00\n"}
{"Time":"2023-03-29T13:37:27.137794544Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.137 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:412\u003e\tNewUserspaceEngine\tCreating WireGuard device...\n"}
{"Time":"2023-03-29T13:37:27.137898354Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.137 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:437\u003e\tNewUserspaceEngine\tBringing WireGuard device up...\n"}
{"Time":"2023-03-29T13:37:27.137934758Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.137 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] UDP bind has been updated\n"}
{"Time":"2023-03-29T13:37:27.137955272Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.137 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Interface state was Down, requested Up, now Up\n"}
{"Time":"2023-03-29T13:37:27.138002548Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.137 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:441\u003e\tNewUserspaceEngine\tBringing router up...\n"}
{"Time":"2023-03-29T13:37:27.138024513Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.137 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:21\u003e\tfakeRouter.Up\t[v1] warning: fakeRouter.Up: not implemented.\n"}
{"Time":"2023-03-29T13:37:27.138043252Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.138 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:449\u003e\tNewUserspaceEngine\tClearing router settings...\n"}
{"Time":"2023-03-29T13:37:27.138068121Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.138 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:26\u003e\tfakeRouter.Set\t[v1] warning: fakeRouter.Set: not implemented.\n"}
{"Time":"2023-03-29T13:37:27.138095784Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.138 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:453\u003e\tNewUserspaceEngine\tStarting link monitor...\n"}
{"Time":"2023-03-29T13:37:27.138122918Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.138 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:456\u003e\tNewUserspaceEngine\tEngine created.\n"}
{"Time":"2023-03-29T13:37:27.138231919Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.138 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2444\u003e\t(*Conn).SetPrivateKey\tmagicsock: SetPrivateKey called (init)\n"}
{"Time":"2023-03-29T13:37:27.138531438Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.138 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:187\u003e\tNewConn\tupdating network map\n"}
{"Time":"2023-03-29T13:37:27.138556077Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.138 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2578\u003e\t(*Conn).SetNetworkMap\t[v1] magicsock: got updated network map; 0 peers\n"}
{"Time":"2023-03-29T13:37:27.138636819Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.138 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:402\u003e\t(*agent).run\trunning tailnet connection coordinator\n"}
{"Time":"2023-03-29T13:37:27.138658918Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.138 [INFO]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:620\u003e\t(*agent).runCoordinator\tconnected to coordination endpoint\n"}
{"Time":"2023-03-29T13:37:27.138754966Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.138 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 6125567726523641784, \"as_of\": \"2023-03-29T13:37:27.138663Z\", \"key\": \"nodekey:5e5bb74471183bca142348628f8e5cb431c9b3367f0fe15605a03a1721343e56\", \"disco\": \"discokey:59083cba13956f00814aa780f8a19b58ddd40f9ae6f940398e509d2f2c79076e\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": []}}\n"}
{"Time":"2023-03-29T13:37:27.139212045Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.139 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v4 - started\n"}
{"Time":"2023-03-29T13:37:27.139609965Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.139 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v6 - started\n"}
{"Time":"2023-03-29T13:37:27.141001091Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.140 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming receiveDERP - started\n"}
{"Time":"2023-03-29T13:37:27.143964866Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.143 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 918863977196614381, \"as_of\": \"2023-03-29T13:37:27.122393Z\", \"key\": \"nodekey:b967da7372e7aa1e4ed1fc6f032437dfe7a6e1a0d465cd04c9adf77d69ee2a1e\", \"disco\": \"discokey:c7f1bea9d6ff269c8662c153c39a3d92f57c567590b806c16bf693226039c84b\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4341:84c0:6b1c:81d1:5805/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4341:84c0:6b1c:81d1:5805/128\"], \"endpoints\": []}}\n"}
{"Time":"2023-03-29T13:37:27.144498996Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.144 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1241\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4): no matching peer\n"}
{"Time":"2023-03-29T13:37:27.144562824Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.144 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:229\u003e\t(*agent).reportLifecycleLoop\treporting lifecycle state\t{\"state\": \"starting\"}\n"}
{"Time":"2023-03-29T13:37:27.144649797Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.144 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:263\u003e\t(*agent).setLifecycle\tset lifecycle state\t{\"state\": \"ready\", \"last\": \"starting\"}\n"}
{"Time":"2023-03-29T13:37:27.144702964Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.144 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:229\u003e\t(*agent).reportLifecycleLoop\treporting lifecycle state\t{\"state\": \"ready\"}\n"}
{"Time":"2023-03-29T13:37:27.147050678Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.146 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v4 - started\n"}
{"Time":"2023-03-29T13:37:27.152240491Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.152 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v6 - started\n"}
{"Time":"2023-03-29T13:37:27.157654353Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.157 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming receiveDERP - started\n"}
{"Time":"2023-03-29T13:37:27.16338877Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.163 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1241\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4): no matching peer\n"}
{"Time":"2023-03-29T13:37:27.16375523Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.163 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:423\u003e\t(*Conn).UpdateNodes\tno preferred DERP, skipping node\t{\"node\": {\"id\": 6125567726523641784, \"as_of\": \"2023-03-29T13:37:27.138663Z\", \"key\": \"nodekey:5e5bb74471183bca142348628f8e5cb431c9b3367f0fe15605a03a1721343e56\", \"disco\": \"discokey:59083cba13956f00814aa780f8a19b58ddd40f9ae6f940398e509d2f2c79076e\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": []}}\n"}
{"Time":"2023-03-29T13:37:27.163780585Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.163 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n"}
{"Time":"2023-03-29T13:37:27.163864424Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.163 [DEBUG]\t(client.netstack)\t\u003ctailscale.com/wgengine/netstack/netstack.go:367\u003e\t(*Impl).updateIPs\t[v2] netstack: registered IP fd7a:115c:a1e0:4341:84c0:6b1c:81d1:5805/128\n"}
{"Time":"2023-03-29T13:37:27.163963441Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.163 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:706\u003e\t(*userspaceEngine).maybeReconfigWireguardLocked\twgengine: Reconfig: configuring userspace WireGuard config (with 0/0 peers)\n"}
{"Time":"2023-03-29T13:37:27.164079841Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.164 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] UAPI: Updating private key\n"}
{"Time":"2023-03-29T13:37:27.164217744Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.164 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:921\u003e\t(*userspaceEngine).Reconfig\twgengine: Reconfig: configuring router\n"}
{"Time":"2023-03-29T13:37:27.164235438Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.164 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:26\u003e\tfakeRouter.Set\t[v1] warning: fakeRouter.Set: not implemented.\n"}
{"Time":"2023-03-29T13:37:27.16424974Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.164 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:931\u003e\t(*userspaceEngine).Reconfig\twgengine: Reconfig: configuring DNS\n"}
{"Time":"2023-03-29T13:37:27.164316222Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.164 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: Set: {DefaultResolvers:[] Routes:{} SearchDomains:[] Hosts:0}\n"}
{"Time":"2023-03-29T13:37:27.164338403Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.164 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: Resolvercfg: {Routes:{} Hosts:0 LocalDomains:[]}\n"}
{"Time":"2023-03-29T13:37:27.164386486Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.164 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: OScfg: {Nameservers:[] SearchDomains:[] MatchDomains:[] Hosts:[]}\n"}
{"Time":"2023-03-29T13:37:27.1644261Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.164 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n"}
{"Time":"2023-03-29T13:37:27.165498628Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.165 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:423\u003e\t(*Conn).UpdateNodes\tno preferred DERP, skipping node\t{\"node\": {\"id\": 918863977196614381, \"as_of\": \"2023-03-29T13:37:27.122393Z\", \"key\": \"nodekey:b967da7372e7aa1e4ed1fc6f032437dfe7a6e1a0d465cd04c9adf77d69ee2a1e\", \"disco\": \"discokey:c7f1bea9d6ff269c8662c153c39a3d92f57c567590b806c16bf693226039c84b\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4341:84c0:6b1c:81d1:5805/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4341:84c0:6b1c:81d1:5805/128\"], \"endpoints\": []}}\n"}
{"Time":"2023-03-29T13:37:27.165527893Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.165 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n"}
{"Time":"2023-03-29T13:37:27.16555513Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.165 [DEBUG]\t(agent.tailnet.netstack)\t\u003ctailscale.com/wgengine/netstack/netstack.go:367\u003e\t(*Impl).updateIPs\t[v2] netstack: registered IP fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\n"}
{"Time":"2023-03-29T13:37:27.165643091Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.165 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:706\u003e\t(*userspaceEngine).maybeReconfigWireguardLocked\twgengine: Reconfig: configuring userspace WireGuard config (with 0/0 peers)\n"}
{"Time":"2023-03-29T13:37:27.165737176Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.165 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] UAPI: Updating private key\n"}
{"Time":"2023-03-29T13:37:27.165892091Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.165 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:921\u003e\t(*userspaceEngine).Reconfig\twgengine: Reconfig: configuring router\n"}
{"Time":"2023-03-29T13:37:27.165909805Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.165 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:26\u003e\tfakeRouter.Set\t[v1] warning: fakeRouter.Set: not implemented.\n"}
{"Time":"2023-03-29T13:37:27.165924292Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.165 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:931\u003e\t(*userspaceEngine).Reconfig\twgengine: Reconfig: configuring DNS\n"}
{"Time":"2023-03-29T13:37:27.165977872Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.165 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: Set: {DefaultResolvers:[] Routes:{} SearchDomains:[] Hosts:0}\n"}
{"Time":"2023-03-29T13:37:27.166008015Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.165 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: Resolvercfg: {Routes:{} Hosts:0 LocalDomains:[]}\n"}
{"Time":"2023-03-29T13:37:27.166054821Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.166 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: OScfg: {Nameservers:[] SearchDomains:[] MatchDomains:[] Hosts:[]}\n"}
{"Time":"2023-03-29T13:37:27.166085097Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.166 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n"}
{"Time":"2023-03-29T13:37:27.187154465Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.187 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1241\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4): no matching peer\n"}
{"Time":"2023-03-29T13:37:27.247520351Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.247 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1241\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4): no matching peer\n"}
{"Time":"2023-03-29T13:37:27.247693682Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.247 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: netcheck: UDP is blocked, trying HTTPS\n"}
{"Time":"2023-03-29T13:37:27.247900828Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.247 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: netcheck: UDP is blocked, trying HTTPS\n"}
{"Time":"2023-03-29T13:37:27.248074095Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.248 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: [v1] measureAllICMPLatency: listen ip4:icmp 0.0.0.0: socket: operation not permitted\n"}
{"Time":"2023-03-29T13:37:27.248118748Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.248 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: [v1] measureAllICMPLatency: listen ip4:icmp 0.0.0.0: socket: operation not permitted\n"}
{"Time":"2023-03-29T13:37:27.267591238Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.267 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1241\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4): no matching peer\n"}
{"Time":"2023-03-29T13:37:27.327992838Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.327 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: [v1] netcheck: measuring HTTPS latency of test (1): unexpected status code: 426 (426 Upgrade Required)\n"}
{"Time":"2023-03-29T13:37:27.328026983Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.327 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: [v1] report: udp=true v6=false v6os=false mapvarydest=false hair= portmap= v4a=127.0.0.1:59384 derp=1 derpdist=1v4:83ms\n"}
{"Time":"2023-03-29T13:37:27.328082537Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.328 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1092\u003e\t(*Conn).setNearestDERP\tmagicsock: home is now derp-1 (test)\n"}
{"Time":"2023-03-29T13:37:27.328318974Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.328 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2759\u003e\t(*Conn).logEndpointChange\tmagicsock: endpoints changed: 127.0.0.1:59384 (stun), 172.20.0.2:59384 (local)\n"}
{"Time":"2023-03-29T13:37:27.328415723Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.328 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:225\u003e\tNewConn.func6\twireguard status\t{\"status\": \"\\u0026{AsOf:2023-03-29 13:37:27.328311263 +0000 UTC m=+3.967918487 Peers:[] LocalAddrs:[{Addr:127.0.0.1:59384 Type:stun} {Addr:172.20.0.2:59384 Type:local}] DERPs:0}\", \"err\": null}\n"}
{"Time":"2023-03-29T13:37:27.331309331Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.331 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1480\u003e\t(*Conn).derpWriteChanOfAddr\tmagicsock: adding connection to derp-1 for home-keep-alive\n"}
{"Time":"2023-03-29T13:37:27.331346835Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.331 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2747\u003e\t(*Conn).logActiveDerpLocked\tmagicsock: 1 active derp conns: derp-1=cr0s,wr0s\n"}
{"Time":"2023-03-29T13:37:27.331498355Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.331 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:225\u003e\tNewConn.func6\twireguard status\t{\"status\": \"\\u0026{AsOf:2023-03-29 13:37:27.331349704 +0000 UTC m=+3.970956931 Peers:[] LocalAddrs:[{Addr:127.0.0.1:59384 Type:stun} {Addr:172.20.0.2:59384 Type:local}] DERPs:1}\", \"err\": null}\n"}
{"Time":"2023-03-29T13:37:27.331576885Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.331 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:246\u003e\tNewConn.func7\tnetinfo callback\t{\"netinfo\": {\"MappingVariesByDestIP\": false, \"HairPinning\": null, \"WorkingIPv6\": false, \"OSHasIPv6\": false, \"WorkingUDP\": true, \"WorkingICMPv4\": false, \"UPnP\": false, \"PMP\": false, \"PCP\": false, \"PreferredDERP\": 1, \"DERPLatency\": {\"1-v4\": 0.083211738}}}\n"}
{"Time":"2023-03-29T13:37:27.331699503Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.331 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 6193178684101620604, \"as_of\": \"2023-03-29T13:37:27.328409Z\", \"key\": \"nodekey:76ff2edcacaac78382de86ce14dcf7d1464d8bff76ab14412a1c18ef29aa9370\", \"disco\": \"discokey:17b5066de479f45868013352cba173846e33492e64258b47a5e823c1746f8449\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4781:bb82:1540:3954:6a8/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4781:bb82:1540:3954:6a8/128\"], \"endpoints\": [\"127.0.0.1:59384\", \"172.20.0.2:59384\"]}}\n"}
{"Time":"2023-03-29T13:37:27.331945606Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.331 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:423\u003e\t(*Conn).UpdateNodes\tno preferred DERP, skipping node\t{\"node\": {\"id\": 6193178684101620604, \"as_of\": \"2023-03-29T13:37:27.328409Z\", \"key\": \"nodekey:76ff2edcacaac78382de86ce14dcf7d1464d8bff76ab14412a1c18ef29aa9370\", \"disco\": \"discokey:17b5066de479f45868013352cba173846e33492e64258b47a5e823c1746f8449\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4781:bb82:1540:3954:6a8/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4781:bb82:1540:3954:6a8/128\"], \"endpoints\": [\"127.0.0.1:59384\", \"172.20.0.2:59384\"]}}\n"}
{"Time":"2023-03-29T13:37:27.33196728Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.331 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n"}
{"Time":"2023-03-29T13:37:27.332108335Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.332 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n"}
{"Time":"2023-03-29T13:37:27.332325739Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.332 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/derp/derphttp/derphttp_client.go:401\u003e\t(*Client).connect\tderphttp.Client.Connect: connecting to derp-1 (test)\n"}
{"Time":"2023-03-29T13:37:27.332542999Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.332 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 6193178684101620604, \"as_of\": \"2023-03-29T13:37:27.332444Z\", \"key\": \"nodekey:76ff2edcacaac78382de86ce14dcf7d1464d8bff76ab14412a1c18ef29aa9370\", \"disco\": \"discokey:17b5066de479f45868013352cba173846e33492e64258b47a5e823c1746f8449\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.083211738}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4781:bb82:1540:3954:6a8/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4781:bb82:1540:3954:6a8/128\"], \"endpoints\": [\"127.0.0.1:59384\", \"172.20.0.2:59384\"]}}\n"}
{"Time":"2023-03-29T13:37:27.332790784Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.332 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:426\u003e\t(*Conn).UpdateNodes\tadding node\t{\"node\": {\"id\": 6193178684101620604, \"as_of\": \"2023-03-29T13:37:27.332444Z\", \"key\": \"nodekey:76ff2edcacaac78382de86ce14dcf7d1464d8bff76ab14412a1c18ef29aa9370\", \"disco\": \"discokey:17b5066de479f45868013352cba173846e33492e64258b47a5e823c1746f8449\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.083211738}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4781:bb82:1540:3954:6a8/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4781:bb82:1540:3954:6a8/128\"], \"endpoints\": [\"127.0.0.1:59384\", \"172.20.0.2:59384\"]}}\n"}
{"Time":"2023-03-29T13:37:27.333024686Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.332 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n"}
{"Time":"2023-03-29T13:37:27.333062782Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.333 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2578\u003e\t(*Conn).SetNetworkMap\t[v1] magicsock: got updated network map; 1 peers\n"}
{"Time":"2023-03-29T13:37:27.333182232Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.333 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:706\u003e\t(*userspaceEngine).maybeReconfigWireguardLocked\twgengine: Reconfig: configuring userspace WireGuard config (with 0/1 peers)\n"}
{"Time":"2023-03-29T13:37:27.333249208Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.333 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n"}
{"Time":"2023-03-29T13:37:27.348154607Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.348 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1241\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4): no matching peer\n"}
{"Time":"2023-03-29T13:37:27.353941907Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.353 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:270\u003e\tNewUserspaceEngine\t[v1] using fake (no-op) tun device\n"}
{"Time":"2023-03-29T13:37:27.353956013Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.353 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:274\u003e\tNewUserspaceEngine\t[v1] using fake (no-op) OS network configurator\n"}
{"Time":"2023-03-29T13:37:27.353983717Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.353 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:278\u003e\tNewUserspaceEngine\t[v1] using fake (no-op) DNS configurator\n"}
{"Time":"2023-03-29T13:37:27.354104135Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.354 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: using dns.noopManager\n"}
{"Time":"2023-03-29T13:37:27.354170721Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.354 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:334\u003e\tNewUserspaceEngine\tlink state: interfaces.State{defaultRoute=eth0 ifs={eth0:[172.20.0.2/16]} v4=true v6=false}\n"}
{"Time":"2023-03-29T13:37:27.354248787Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.354 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:306\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP read buffer size to 7340032: operation not permitted\n"}
{"Time":"2023-03-29T13:37:27.354272858Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.354 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:310\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP write buffer size to 7340032: operation not permitted\n"}
{"Time":"2023-03-29T13:37:27.35432815Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.354 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:306\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP read buffer size to 7340032: operation not permitted\n"}
{"Time":"2023-03-29T13:37:27.354379756Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.354 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:310\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP write buffer size to 7340032: operation not permitted\n"}
{"Time":"2023-03-29T13:37:27.354437701Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.354 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:666\u003e\tNewConn\t[v1] couldn't create raw v4 disco listener, using regular listener instead: raw disco listening disabled, SO_MARK unavailable\n"}
{"Time":"2023-03-29T13:37:27.354522443Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.354 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:672\u003e\tNewConn\t[v1] couldn't create raw v6 disco listener, using regular listener instead: raw disco listening disabled, SO_MARK unavailable\n"}
{"Time":"2023-03-29T13:37:27.35465091Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.354 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1056\u003e\t(*Conn).DiscoPublicKey\tmagicsock: disco key = d:049e454260a62aa1\n"}
{"Time":"2023-03-29T13:37:27.354686785Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.354 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:412\u003e\tNewUserspaceEngine\tCreating WireGuard device...\n"}
{"Time":"2023-03-29T13:37:27.354820076Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.354 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:437\u003e\tNewUserspaceEngine\tBringing WireGuard device up...\n"}
{"Time":"2023-03-29T13:37:27.35484141Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.354 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] UDP bind has been updated\n"}
{"Time":"2023-03-29T13:37:27.354884035Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.354 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Interface state was Down, requested Up, now Up\n"}
{"Time":"2023-03-29T13:37:27.354900747Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.354 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:441\u003e\tNewUserspaceEngine\tBringing router up...\n"}
{"Time":"2023-03-29T13:37:27.354943262Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.354 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:21\u003e\tfakeRouter.Up\t[v1] warning: fakeRouter.Up: not implemented.\n"}
{"Time":"2023-03-29T13:37:27.354962224Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.354 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:449\u003e\tNewUserspaceEngine\tClearing router settings...\n"}
{"Time":"2023-03-29T13:37:27.354997734Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.354 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:26\u003e\tfakeRouter.Set\t[v1] warning: fakeRouter.Set: not implemented.\n"}
{"Time":"2023-03-29T13:37:27.355013636Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.354 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:453\u003e\tNewUserspaceEngine\tStarting link monitor...\n"}
{"Time":"2023-03-29T13:37:27.355062521Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.355 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:456\u003e\tNewUserspaceEngine\tEngine created.\n"}
{"Time":"2023-03-29T13:37:27.355172916Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.355 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2444\u003e\t(*Conn).SetPrivateKey\tmagicsock: SetPrivateKey called (init)\n"}
{"Time":"2023-03-29T13:37:27.355579603Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.355 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: [v1] netcheck: measuring HTTPS latency of test (1): unexpected status code: 426 (426 Upgrade Required)\n"}
{"Time":"2023-03-29T13:37:27.355609674Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.355 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: [v1] report: udp=true v6=false v6os=false mapvarydest=false hair= portmap= v4a=127.0.0.1:45837 derp=1 derpdist=1v4:83ms\n"}
{"Time":"2023-03-29T13:37:27.35566873Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.355 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1092\u003e\t(*Conn).setNearestDERP\tmagicsock: home is now derp-1 (test)\n"}
{"Time":"2023-03-29T13:37:27.355827579Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.355 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2759\u003e\t(*Conn).logEndpointChange\tmagicsock: endpoints changed: 127.0.0.1:45837 (stun), 172.20.0.2:45837 (local)\n"}
{"Time":"2023-03-29T13:37:27.355913155Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.355 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:225\u003e\tNewConn.func6\twireguard status\t{\"status\": \"\\u0026{AsOf:2023-03-29 13:37:27.355809216 +0000 UTC m=+3.995416428 Peers:[] LocalAddrs:[{Addr:127.0.0.1:45837 Type:stun} {Addr:172.20.0.2:45837 Type:local}] DERPs:0}\", \"err\": null}\n"}
{"Time":"2023-03-29T13:37:27.356261459Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.356 [INFO]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:188\u003e\t(*agent).runLoop\tconnecting to coderd\n"}
{"Time":"2023-03-29T13:37:27.356354227Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.356 [INFO]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:286\u003e\t(*agent).run\tfetched metadata\t{\"metadata\": {\"git_auth_configs\": 0, \"vscode_port_proxy_uri\": \"\", \"apps\": null, \"derpmap\": {\"Regions\": {\"1\": {\"EmbeddedRelay\": false, \"RegionID\": 1, \"RegionCode\": \"test\", \"RegionName\": \"Test\", \"Nodes\": [{\"Name\": \"t2\", \"RegionID\": 1, \"HostName\": \"\", \"IPv4\": \"127.0.0.1\", \"IPv6\": \"none\", \"STUNPort\": 34688, \"DERPPort\": 43117, \"InsecureForTests\": true}]}}}, \"environment_variables\": null, \"startup_script\": \"\", \"startup_script_timeout\": 0, \"directory\": \"\", \"motd_file\": \"\", \"shutdown_script\": \"\", \"shutdown_script_timeout\": 0}}\n"}
{"Time":"2023-03-29T13:37:27.35638277Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.356 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:263\u003e\t(*agent).setLifecycle\tset lifecycle state\t{\"state\": \"starting\", \"last\": \"\"}\n"}
{"Time":"2023-03-29T13:37:27.356686207Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.356 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:270\u003e\tNewUserspaceEngine\t[v1] using fake (no-op) tun device\n"}
{"Time":"2023-03-29T13:37:27.356708299Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.356 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:274\u003e\tNewUserspaceEngine\t[v1] using fake (no-op) OS network configurator\n"}
{"Time":"2023-03-29T13:37:27.356723833Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.356 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:278\u003e\tNewUserspaceEngine\t[v1] using fake (no-op) DNS configurator\n"}
{"Time":"2023-03-29T13:37:27.356833939Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.356 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: using dns.noopManager\n"}
{"Time":"2023-03-29T13:37:27.356850125Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.356 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:334\u003e\tNewUserspaceEngine\tlink state: interfaces.State{defaultRoute=eth0 ifs={eth0:[172.20.0.2/16]} v4=true v6=false}\n"}
{"Time":"2023-03-29T13:37:27.356945712Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.356 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:306\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP read buffer size to 7340032: operation not permitted\n"}
{"Time":"2023-03-29T13:37:27.356968923Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.356 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:310\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP write buffer size to 7340032: operation not permitted\n"}
{"Time":"2023-03-29T13:37:27.357036251Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.356 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:306\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP read buffer size to 7340032: operation not permitted\n"}
{"Time":"2023-03-29T13:37:27.357070033Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.357 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:310\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP write buffer size to 7340032: operation not permitted\n"}
{"Time":"2023-03-29T13:37:27.35711526Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.357 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:666\u003e\tNewConn\t[v1] couldn't create raw v4 disco listener, using regular listener instead: raw disco listening disabled, SO_MARK unavailable\n"}
{"Time":"2023-03-29T13:37:27.357134582Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.357 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:672\u003e\tNewConn\t[v1] couldn't create raw v6 disco listener, using regular listener instead: raw disco listening disabled, SO_MARK unavailable\n"}
{"Time":"2023-03-29T13:37:27.357249522Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.357 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1056\u003e\t(*Conn).DiscoPublicKey\tmagicsock: disco key = d:34ff526bdd502e84\n"}
{"Time":"2023-03-29T13:37:27.35727419Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.357 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:412\u003e\tNewUserspaceEngine\tCreating WireGuard device...\n"}
{"Time":"2023-03-29T13:37:27.35742285Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.357 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:437\u003e\tNewUserspaceEngine\tBringing WireGuard device up...\n"}
{"Time":"2023-03-29T13:37:27.357459674Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.357 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] UDP bind has been updated\n"}
{"Time":"2023-03-29T13:37:27.357483314Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.357 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Interface state was Down, requested Up, now Up\n"}
{"Time":"2023-03-29T13:37:27.357523236Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.357 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:441\u003e\tNewUserspaceEngine\tBringing router up...\n"}
{"Time":"2023-03-29T13:37:27.357548281Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.357 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:21\u003e\tfakeRouter.Up\t[v1] warning: fakeRouter.Up: not implemented.\n"}
{"Time":"2023-03-29T13:37:27.357567638Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.357 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:449\u003e\tNewUserspaceEngine\tClearing router settings...\n"}
{"Time":"2023-03-29T13:37:27.357589503Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.357 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:26\u003e\tfakeRouter.Set\t[v1] warning: fakeRouter.Set: not implemented.\n"}
{"Time":"2023-03-29T13:37:27.357626515Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.357 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:453\u003e\tNewUserspaceEngine\tStarting link monitor...\n"}
{"Time":"2023-03-29T13:37:27.357652913Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.357 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:456\u003e\tNewUserspaceEngine\tEngine created.\n"}
{"Time":"2023-03-29T13:37:27.357769486Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.357 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2444\u003e\t(*Conn).SetPrivateKey\tmagicsock: SetPrivateKey called (init)\n"}
{"Time":"2023-03-29T13:37:27.358036076Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.357 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:187\u003e\tNewConn\tupdating network map\n"}
{"Time":"2023-03-29T13:37:27.358075196Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.358 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2578\u003e\t(*Conn).SetNetworkMap\t[v1] magicsock: got updated network map; 0 peers\n"}
{"Time":"2023-03-29T13:37:27.358178009Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.358 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:402\u003e\t(*agent).run\trunning tailnet connection coordinator\n"}
{"Time":"2023-03-29T13:37:27.358202627Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.358 [INFO]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:620\u003e\t(*agent).runCoordinator\tconnected to coordination endpoint\n"}
{"Time":"2023-03-29T13:37:27.358298603Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.358 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 2689903771435529409, \"as_of\": \"2023-03-29T13:37:27.358191Z\", \"key\": \"nodekey:e568ad36a49b4d60323fc0207eded97153e72170c491f74a8942ac38e9dd541f\", \"disco\": \"discokey:34ff526bdd502e84533e42919465a676d8fa64abda3b4f5943a8c9aa6fd0253b\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": []}}\n"}
{"Time":"2023-03-29T13:37:27.363703025Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.363 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v4 - started\n"}
{"Time":"2023-03-29T13:37:27.368878553Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.368 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v6 - started\n"}
{"Time":"2023-03-29T13:37:27.374094674Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.373 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming receiveDERP - started\n"}
{"Time":"2023-03-29T13:37:27.379724421Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.379 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:187\u003e\tNewConn\tupdating network map\n"}
{"Time":"2023-03-29T13:37:27.379782057Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.379 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2578\u003e\t(*Conn).SetNetworkMap\t[v1] magicsock: got updated network map; 0 peers\n"}
{"Time":"2023-03-29T13:37:27.379915271Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.379 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1241\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4): no matching peer\n"}
{"Time":"2023-03-29T13:37:27.37996992Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.379 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1480\u003e\t(*Conn).derpWriteChanOfAddr\tmagicsock: adding connection to derp-1 for home-keep-alive\n"}
{"Time":"2023-03-29T13:37:27.380020183Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.379 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2747\u003e\t(*Conn).logActiveDerpLocked\tmagicsock: 1 active derp conns: derp-1=cr0s,wr0s\n"}
{"Time":"2023-03-29T13:37:27.380128212Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.380 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:225\u003e\tNewConn.func6\twireguard status\t{\"status\": \"\\u0026{AsOf:2023-03-29 13:37:27.380012238 +0000 UTC m=+4.019619457 Peers:[] LocalAddrs:[{Addr:127.0.0.1:45837 Type:stun} {Addr:172.20.0.2:45837 Type:local}] DERPs:1}\", \"err\": null}\n"}
{"Time":"2023-03-29T13:37:27.380193848Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.380 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:246\u003e\tNewConn.func7\tnetinfo callback\t{\"netinfo\": {\"MappingVariesByDestIP\": false, \"HairPinning\": null, \"WorkingIPv6\": false, \"OSHasIPv6\": false, \"WorkingUDP\": true, \"WorkingICMPv4\": false, \"UPnP\": false, \"PMP\": false, \"PCP\": false, \"PreferredDERP\": 1, \"DERPLatency\": {\"1-v4\": 0.082795986}}}\n"}
{"Time":"2023-03-29T13:37:27.380276172Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.380 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 1396496777246732951, \"as_of\": \"2023-03-29T13:37:27.355895Z\", \"key\": \"nodekey:eb8a91888d02040ddaee61afa4ae8d03bd6c35ddf3f76edcaa5bde89743e5c24\", \"disco\": \"discokey:e6f05f1260bbd61182192a11c1541a28ccace412e36cdb487e15a598d8327a73\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": [\"127.0.0.1:45837\", \"172.20.0.2:45837\"]}}\n"}
{"Time":"2023-03-29T13:37:27.38052742Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.380 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:423\u003e\t(*Conn).UpdateNodes\tno preferred DERP, skipping node\t{\"node\": {\"id\": 1396496777246732951, \"as_of\": \"2023-03-29T13:37:27.355895Z\", \"key\": \"nodekey:eb8a91888d02040ddaee61afa4ae8d03bd6c35ddf3f76edcaa5bde89743e5c24\", \"disco\": \"discokey:e6f05f1260bbd61182192a11c1541a28ccace412e36cdb487e15a598d8327a73\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": [\"127.0.0.1:45837\", \"172.20.0.2:45837\"]}}\n"}
{"Time":"2023-03-29T13:37:27.380550207Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.380 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n"}
{"Time":"2023-03-29T13:37:27.380665436Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.380 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n"}
{"Time":"2023-03-29T13:37:27.380879187Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.380 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:229\u003e\t(*agent).reportLifecycleLoop\treporting lifecycle state\t{\"state\": \"starting\"}\n"}
{"Time":"2023-03-29T13:37:27.380925379Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.380 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:263\u003e\t(*agent).setLifecycle\tset lifecycle state\t{\"state\": \"ready\", \"last\": \"starting\"}\n"}
{"Time":"2023-03-29T13:37:27.380952567Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.380 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:229\u003e\t(*agent).reportLifecycleLoop\treporting lifecycle state\t{\"state\": \"ready\"}\n"}
{"Time":"2023-03-29T13:37:27.386338613Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.386 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v4 - started\n"}
{"Time":"2023-03-29T13:37:27.387267029Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.387 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v6 - started\n"}
{"Time":"2023-03-29T13:37:27.387774697Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.387 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming receiveDERP - started\n"}
{"Time":"2023-03-29T13:37:27.389160607Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.389 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:423\u003e\t(*Conn).UpdateNodes\tno preferred DERP, skipping node\t{\"node\": {\"id\": 2689903771435529409, \"as_of\": \"2023-03-29T13:37:27.358191Z\", \"key\": \"nodekey:e568ad36a49b4d60323fc0207eded97153e72170c491f74a8942ac38e9dd541f\", \"disco\": \"discokey:34ff526bdd502e84533e42919465a676d8fa64abda3b4f5943a8c9aa6fd0253b\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": []}}\n"}
{"Time":"2023-03-29T13:37:27.389186972Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.389 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n"}
{"Time":"2023-03-29T13:37:27.389275389Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.389 [DEBUG]\t(client.netstack)\t\u003ctailscale.com/wgengine/netstack/netstack.go:367\u003e\t(*Impl).updateIPs\t[v2] netstack: registered IP fd7a:115c:a1e0:4d67:9e5c:abb:531:b55d/128\n"}
{"Time":"2023-03-29T13:37:27.389397112Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.389 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:706\u003e\t(*userspaceEngine).maybeReconfigWireguardLocked\twgengine: Reconfig: configuring userspace WireGuard config (with 0/0 peers)\n"}
{"Time":"2023-03-29T13:37:27.38946191Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.389 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] UAPI: Updating private key\n"}
{"Time":"2023-03-29T13:37:27.389582352Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.389 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:921\u003e\t(*userspaceEngine).Reconfig\twgengine: Reconfig: configuring router\n"}
{"Time":"2023-03-29T13:37:27.389605243Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.389 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:26\u003e\tfakeRouter.Set\t[v1] warning: fakeRouter.Set: not implemented.\n"}
{"Time":"2023-03-29T13:37:27.389634845Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.389 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:931\u003e\t(*userspaceEngine).Reconfig\twgengine: Reconfig: configuring DNS\n"}
{"Time":"2023-03-29T13:37:27.389680241Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.389 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: Set: {DefaultResolvers:[] Routes:{} SearchDomains:[] Hosts:0}\n"}
{"Time":"2023-03-29T13:37:27.389711656Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.389 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: Resolvercfg: {Routes:{} Hosts:0 LocalDomains:[]}\n"}
{"Time":"2023-03-29T13:37:27.389725148Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.389 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: OScfg: {Nameservers:[] SearchDomains:[] MatchDomains:[] Hosts:[]}\n"}
{"Time":"2023-03-29T13:37:27.389767299Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.389 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n"}
{"Time":"2023-03-29T13:37:27.389833677Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.389 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 6959219245254193963, \"as_of\": \"2023-03-29T13:37:27.379813Z\", \"key\": \"nodekey:e443af25902d57edd4bf0b663849e6cb06390f7b80e6ab179dbd5deabea10e0c\", \"disco\": \"discokey:049e454260a62aa19c35b82499dc35811a5aad44ef612f238808cae15d5c5b55\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4d67:9e5c:abb:531:b55d/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4d67:9e5c:abb:531:b55d/128\"], \"endpoints\": []}}\n"}
{"Time":"2023-03-29T13:37:27.390055453Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.389 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:423\u003e\t(*Conn).UpdateNodes\tno preferred DERP, skipping node\t{\"node\": {\"id\": 6959219245254193963, \"as_of\": \"2023-03-29T13:37:27.379813Z\", \"key\": \"nodekey:e443af25902d57edd4bf0b663849e6cb06390f7b80e6ab179dbd5deabea10e0c\", \"disco\": \"discokey:049e454260a62aa19c35b82499dc35811a5aad44ef612f238808cae15d5c5b55\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4d67:9e5c:abb:531:b55d/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4d67:9e5c:abb:531:b55d/128\"], \"endpoints\": []}}\n"}
{"Time":"2023-03-29T13:37:27.390076169Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.390 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n"}
{"Time":"2023-03-29T13:37:27.390126429Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.390 [DEBUG]\t(agent.tailnet.netstack)\t\u003ctailscale.com/wgengine/netstack/netstack.go:367\u003e\t(*Impl).updateIPs\t[v2] netstack: registered IP fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\n"}
{"Time":"2023-03-29T13:37:27.390188645Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.390 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:706\u003e\t(*userspaceEngine).maybeReconfigWireguardLocked\twgengine: Reconfig: configuring userspace WireGuard config (with 0/0 peers)\n"}
{"Time":"2023-03-29T13:37:27.39025637Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.390 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] UAPI: Updating private key\n"}
{"Time":"2023-03-29T13:37:27.390371704Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.390 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:921\u003e\t(*userspaceEngine).Reconfig\twgengine: Reconfig: configuring router\n"}
{"Time":"2023-03-29T13:37:27.39038785Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.390 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:26\u003e\tfakeRouter.Set\t[v1] warning: fakeRouter.Set: not implemented.\n"}
{"Time":"2023-03-29T13:37:27.390406815Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.390 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:931\u003e\t(*userspaceEngine).Reconfig\twgengine: Reconfig: configuring DNS\n"}
{"Time":"2023-03-29T13:37:27.390435981Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.390 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: Set: {DefaultResolvers:[] Routes:{} SearchDomains:[] Hosts:0}\n"}
{"Time":"2023-03-29T13:37:27.390450102Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.390 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: Resolvercfg: {Routes:{} Hosts:0 LocalDomains:[]}\n"}
{"Time":"2023-03-29T13:37:27.39048039Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.390 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: OScfg: {Nameservers:[] SearchDomains:[] MatchDomains:[] Hosts:[]}\n"}
{"Time":"2023-03-29T13:37:27.390509523Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.390 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n"}
{"Time":"2023-03-29T13:37:27.390585223Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.390 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1241\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4): no matching peer\n"}
{"Time":"2023-03-29T13:37:27.390644997Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.390 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/derp/derphttp/derphttp_client.go:401\u003e\t(*Client).connect\tderphttp.Client.Connect: connecting to derp-1 (test)\n"}
{"Time":"2023-03-29T13:37:27.39085229Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.390 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 1396496777246732951, \"as_of\": \"2023-03-29T13:37:27.390753Z\", \"key\": \"nodekey:eb8a91888d02040ddaee61afa4ae8d03bd6c35ddf3f76edcaa5bde89743e5c24\", \"disco\": \"discokey:e6f05f1260bbd61182192a11c1541a28ccace412e36cdb487e15a598d8327a73\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.082795986}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": [\"127.0.0.1:45837\", \"172.20.0.2:45837\"]}}\n"}
{"Time":"2023-03-29T13:37:27.391046642Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.390 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:426\u003e\t(*Conn).UpdateNodes\tadding node\t{\"node\": {\"id\": 1396496777246732951, \"as_of\": \"2023-03-29T13:37:27.390753Z\", \"key\": \"nodekey:eb8a91888d02040ddaee61afa4ae8d03bd6c35ddf3f76edcaa5bde89743e5c24\", \"disco\": \"discokey:e6f05f1260bbd61182192a11c1541a28ccace412e36cdb487e15a598d8327a73\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.082795986}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": [\"127.0.0.1:45837\", \"172.20.0.2:45837\"]}}\n"}
{"Time":"2023-03-29T13:37:27.391253711Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.391 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n"}
{"Time":"2023-03-29T13:37:27.391294825Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.391 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2578\u003e\t(*Conn).SetNetworkMap\t[v1] magicsock: got updated network map; 1 peers\n"}
{"Time":"2023-03-29T13:37:27.391387255Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.391 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:706\u003e\t(*userspaceEngine).maybeReconfigWireguardLocked\twgengine: Reconfig: configuring userspace WireGuard config (with 0/1 peers)\n"}
{"Time":"2023-03-29T13:37:27.391491088Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.391 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n"}
{"Time":"2023-03-29T13:37:27.408305611Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.408 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:270\u003e\tNewUserspaceEngine\t[v1] using fake (no-op) tun device\n"}
{"Time":"2023-03-29T13:37:27.408340875Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.408 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:274\u003e\tNewUserspaceEngine\t[v1] using fake (no-op) OS network configurator\n"}
{"Time":"2023-03-29T13:37:27.408352182Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.408 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:278\u003e\tNewUserspaceEngine\t[v1] using fake (no-op) DNS configurator\n"}
{"Time":"2023-03-29T13:37:27.408381704Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.408 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: using dns.noopManager\n"}
{"Time":"2023-03-29T13:37:27.41114267Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.411 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1241\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4): no matching peer\n"}
{"Time":"2023-03-29T13:37:27.41133032Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.411 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: [v1] netcheck: measuring HTTPS latency of test (1): unexpected status code: 426 (426 Upgrade Required)\n"}
{"Time":"2023-03-29T13:37:27.411379291Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.411 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: [v1] report: udp=true v6=false v6os=false mapvarydest=false hair= portmap= v4a=127.0.0.1:35595 derp=1 derpdist=1v4:84ms\n"}
{"Time":"2023-03-29T13:37:27.411463359Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.411 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1092\u003e\t(*Conn).setNearestDERP\tmagicsock: home is now derp-1 (test)\n"}
{"Time":"2023-03-29T13:37:27.411622433Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.411 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2759\u003e\t(*Conn).logEndpointChange\tmagicsock: endpoints changed: 127.0.0.1:35595 (stun), 172.20.0.2:35595 (local)\n"}
{"Time":"2023-03-29T13:37:27.411704928Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.411 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:225\u003e\tNewConn.func6\twireguard status\t{\"status\": \"\\u0026{AsOf:2023-03-29 13:37:27.411617207 +0000 UTC m=+4.051224425 Peers:[] LocalAddrs:[{Addr:127.0.0.1:35595 Type:stun} {Addr:172.20.0.2:35595 Type:local}] DERPs:0}\", \"err\": null}\n"}
{"Time":"2023-03-29T13:37:27.412030111Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.411 [INFO]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:188\u003e\t(*agent).runLoop\tconnecting to coderd\n"}
{"Time":"2023-03-29T13:37:27.412110894Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.412 [INFO]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:286\u003e\t(*agent).run\tfetched metadata\t{\"metadata\": {\"git_auth_configs\": 0, \"vscode_port_proxy_uri\": \"\", \"apps\": null, \"derpmap\": {\"Regions\": {\"1\": {\"EmbeddedRelay\": false, \"RegionID\": 1, \"RegionCode\": \"test\", \"RegionName\": \"Test\", \"Nodes\": [{\"Name\": \"t2\", \"RegionID\": 1, \"HostName\": \"\", \"IPv4\": \"127.0.0.1\", \"IPv6\": \"none\", \"STUNPort\": 51906, \"DERPPort\": 41275, \"InsecureForTests\": true}]}}}, \"environment_variables\": null, \"startup_script\": \"\", \"startup_script_timeout\": 0, \"directory\": \"\", \"motd_file\": \"\", \"shutdown_script\": \"\", \"shutdown_script_timeout\": 0}}\n"}
{"Time":"2023-03-29T13:37:27.41214998Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.412 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:263\u003e\t(*agent).setLifecycle\tset lifecycle state\t{\"state\": \"starting\", \"last\": \"\"}\n"}
{"Time":"2023-03-29T13:37:27.412464057Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.412 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:270\u003e\tNewUserspaceEngine\t[v1] using fake (no-op) tun device\n"}
{"Time":"2023-03-29T13:37:27.412485841Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.412 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:274\u003e\tNewUserspaceEngine\t[v1] using fake (no-op) OS network configurator\n"}
{"Time":"2023-03-29T13:37:27.412515514Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.412 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:278\u003e\tNewUserspaceEngine\t[v1] using fake (no-op) DNS configurator\n"}
{"Time":"2023-03-29T13:37:27.412564627Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.412 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: using dns.noopManager\n"}
{"Time":"2023-03-29T13:37:27.412620272Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.412 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:334\u003e\tNewUserspaceEngine\tlink state: interfaces.State{defaultRoute=eth0 ifs={eth0:[172.20.0.2/16]} v4=true v6=false}\n"}
{"Time":"2023-03-29T13:37:27.412695891Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.412 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:306\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP read buffer size to 7340032: operation not permitted\n"}
{"Time":"2023-03-29T13:37:27.412734645Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.412 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:310\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP write buffer size to 7340032: operation not permitted\n"}
{"Time":"2023-03-29T13:37:27.412796459Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.412 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:306\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP read buffer size to 7340032: operation not permitted\n"}
{"Time":"2023-03-29T13:37:27.41282973Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.412 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:310\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP write buffer size to 7340032: operation not permitted\n"}
{"Time":"2023-03-29T13:37:27.412882896Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.412 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:666\u003e\tNewConn\t[v1] couldn't create raw v4 disco listener, using regular listener instead: raw disco listening disabled, SO_MARK unavailable\n"}
{"Time":"2023-03-29T13:37:27.412921148Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.412 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:672\u003e\tNewConn\t[v1] couldn't create raw v6 disco listener, using regular listener instead: raw disco listening disabled, SO_MARK unavailable\n"}
{"Time":"2023-03-29T13:37:27.413034159Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.412 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1056\u003e\t(*Conn).DiscoPublicKey\tmagicsock: disco key = d:cc502d2065d3910d\n"}
{"Time":"2023-03-29T13:37:27.413066135Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.413 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:412\u003e\tNewUserspaceEngine\tCreating WireGuard device...\n"}
{"Time":"2023-03-29T13:37:27.413142789Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.413 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:437\u003e\tNewUserspaceEngine\tBringing WireGuard device up...\n"}
{"Time":"2023-03-29T13:37:27.413196003Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.413 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] UDP bind has been updated\n"}
{"Time":"2023-03-29T13:37:27.413234614Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.413 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Interface state was Down, requested Up, now Up\n"}
{"Time":"2023-03-29T13:37:27.413259313Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.413 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:441\u003e\tNewUserspaceEngine\tBringing router up...\n"}
{"Time":"2023-03-29T13:37:27.413291621Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.413 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:21\u003e\tfakeRouter.Up\t[v1] warning: fakeRouter.Up: not implemented.\n"}
{"Time":"2023-03-29T13:37:27.413317957Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.413 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:449\u003e\tNewUserspaceEngine\tClearing router settings...\n"}
{"Time":"2023-03-29T13:37:27.413346325Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.413 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:26\u003e\tfakeRouter.Set\t[v1] warning: fakeRouter.Set: not implemented.\n"}
{"Time":"2023-03-29T13:37:27.413369117Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.413 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:453\u003e\tNewUserspaceEngine\tStarting link monitor...\n"}
{"Time":"2023-03-29T13:37:27.413402783Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.413 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:456\u003e\tNewUserspaceEngine\tEngine created.\n"}
{"Time":"2023-03-29T13:37:27.413518268Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.413 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2444\u003e\t(*Conn).SetPrivateKey\tmagicsock: SetPrivateKey called (init)\n"}
{"Time":"2023-03-29T13:37:27.413809664Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.413 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:187\u003e\tNewConn\tupdating network map\n"}
{"Time":"2023-03-29T13:37:27.413845445Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.413 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2578\u003e\t(*Conn).SetNetworkMap\t[v1] magicsock: got updated network map; 0 peers\n"}
{"Time":"2023-03-29T13:37:27.413910962Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.413 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:402\u003e\t(*agent).run\trunning tailnet connection coordinator\n"}
{"Time":"2023-03-29T13:37:27.413937365Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.413 [INFO]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:620\u003e\t(*agent).runCoordinator\tconnected to coordination endpoint\n"}
{"Time":"2023-03-29T13:37:27.414017708Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.413 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 4984932330222696591, \"as_of\": \"2023-03-29T13:37:27.413933Z\", \"key\": \"nodekey:5c74998353a1ae2dd2b8ee0de399386279c035b2b3d95bd245ba4820d0403907\", \"disco\": \"discokey:cc502d2065d3910d659fc206b5c1b833cc8721e43ccd43ed245fc56e1d9d6219\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": []}}\n"}
{"Time":"2023-03-29T13:37:27.414064655Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.414 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1480\u003e\t(*Conn).derpWriteChanOfAddr\tmagicsock: adding connection to derp-1 for home-keep-alive\n"}
{"Time":"2023-03-29T13:37:27.414111814Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.414 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2747\u003e\t(*Conn).logActiveDerpLocked\tmagicsock: 1 active derp conns: derp-1=cr0s,wr0s\n"}
{"Time":"2023-03-29T13:37:27.414189184Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.414 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:225\u003e\tNewConn.func6\twireguard status\t{\"status\": \"\\u0026{AsOf:2023-03-29 13:37:27.414107708 +0000 UTC m=+4.053714921 Peers:[] LocalAddrs:[{Addr:127.0.0.1:35595 Type:stun} {Addr:172.20.0.2:35595 Type:local}] DERPs:1}\", \"err\": null}\n"}
{"Time":"2023-03-29T13:37:27.414245907Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.414 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:246\u003e\tNewConn.func7\tnetinfo callback\t{\"netinfo\": {\"MappingVariesByDestIP\": false, \"HairPinning\": null, \"WorkingIPv6\": false, \"OSHasIPv6\": false, \"WorkingUDP\": true, \"WorkingICMPv4\": false, \"UPnP\": false, \"PMP\": false, \"PCP\": false, \"PreferredDERP\": 1, \"DERPLatency\": {\"1-v4\": 0.083765437}}}\n"}
{"Time":"2023-03-29T13:37:27.414312155Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.414 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 6125567726523641784, \"as_of\": \"2023-03-29T13:37:27.4117Z\", \"key\": \"nodekey:5e5bb74471183bca142348628f8e5cb431c9b3367f0fe15605a03a1721343e56\", \"disco\": \"discokey:59083cba13956f00814aa780f8a19b58ddd40f9ae6f940398e509d2f2c79076e\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": [\"127.0.0.1:35595\", \"172.20.0.2:35595\"]}}\n"}
{"Time":"2023-03-29T13:37:27.414517803Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.414 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:423\u003e\t(*Conn).UpdateNodes\tno preferred DERP, skipping node\t{\"node\": {\"id\": 6125567726523641784, \"as_of\": \"2023-03-29T13:37:27.4117Z\", \"key\": \"nodekey:5e5bb74471183bca142348628f8e5cb431c9b3367f0fe15605a03a1721343e56\", \"disco\": \"discokey:59083cba13956f00814aa780f8a19b58ddd40f9ae6f940398e509d2f2c79076e\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": [\"127.0.0.1:35595\", \"172.20.0.2:35595\"]}}\n"}
{"Time":"2023-03-29T13:37:27.414535126Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.414 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n"}
{"Time":"2023-03-29T13:37:27.414623995Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.414 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n"}
{"Time":"2023-03-29T13:37:27.414849045Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.414 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:229\u003e\t(*agent).reportLifecycleLoop\treporting lifecycle state\t{\"state\": \"starting\"}\n"}
{"Time":"2023-03-29T13:37:27.414905554Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.414 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:263\u003e\t(*agent).setLifecycle\tset lifecycle state\t{\"state\": \"ready\", \"last\": \"starting\"}\n"}
{"Time":"2023-03-29T13:37:27.414936416Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.414 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:229\u003e\t(*agent).reportLifecycleLoop\treporting lifecycle state\t{\"state\": \"ready\"}\n"}
{"Time":"2023-03-29T13:37:27.415525692Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.415 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v4 - started\n"}
{"Time":"2023-03-29T13:37:27.416019712Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.415 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v6 - started\n"}
{"Time":"2023-03-29T13:37:27.416475957Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.416 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming receiveDERP - started\n"}
{"Time":"2023-03-29T13:37:27.419029132Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.418 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/derp/derphttp/derphttp_client.go:401\u003e\t(*Client).connect\tderphttp.Client.Connect: connecting to derp-1 (test)\n"}
{"Time":"2023-03-29T13:37:27.419447399Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.419 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 6125567726523641784, \"as_of\": \"2023-03-29T13:37:27.419321Z\", \"key\": \"nodekey:5e5bb74471183bca142348628f8e5cb431c9b3367f0fe15605a03a1721343e56\", \"disco\": \"discokey:59083cba13956f00814aa780f8a19b58ddd40f9ae6f940398e509d2f2c79076e\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.083765437}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": [\"127.0.0.1:35595\", \"172.20.0.2:35595\"]}}\n"}
{"Time":"2023-03-29T13:37:27.42011877Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.420 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:426\u003e\t(*Conn).UpdateNodes\tadding node\t{\"node\": {\"id\": 6125567726523641784, \"as_of\": \"2023-03-29T13:37:27.419321Z\", \"key\": \"nodekey:5e5bb74471183bca142348628f8e5cb431c9b3367f0fe15605a03a1721343e56\", \"disco\": \"discokey:59083cba13956f00814aa780f8a19b58ddd40f9ae6f940398e509d2f2c79076e\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.083765437}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": [\"127.0.0.1:35595\", \"172.20.0.2:35595\"]}}\n"}
{"Time":"2023-03-29T13:37:27.420376019Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.420 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n"}
{"Time":"2023-03-29T13:37:27.420736563Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.420 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2578\u003e\t(*Conn).SetNetworkMap\t[v1] magicsock: got updated network map; 1 peers\n"}
{"Time":"2023-03-29T13:37:27.42087992Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.420 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:706\u003e\t(*userspaceEngine).maybeReconfigWireguardLocked\twgengine: Reconfig: configuring userspace WireGuard config (with 0/1 peers)\n"}
{"Time":"2023-03-29T13:37:27.420979406Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.420 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n"}
{"Time":"2023-03-29T13:37:27.422951198Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.422 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: [v1] netcheck: measuring HTTPS latency of test (1): unexpected status code: 426 (426 Upgrade Required)\n"}
{"Time":"2023-03-29T13:37:27.42298967Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.422 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: [v1] report: udp=true v6=false v6os=false mapvarydest=false hair= portmap= v4a=127.0.0.1:51685 derp=1 derpdist=1v4:84ms\n"}
{"Time":"2023-03-29T13:37:27.423073917Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.423 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1092\u003e\t(*Conn).setNearestDERP\tmagicsock: home is now derp-1 (test)\n"}
{"Time":"2023-03-29T13:37:27.423298046Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.423 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2759\u003e\t(*Conn).logEndpointChange\tmagicsock: endpoints changed: 127.0.0.1:51685 (stun), 172.20.0.2:51685 (local)\n"}
{"Time":"2023-03-29T13:37:27.423385945Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.423 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:225\u003e\tNewConn.func6\twireguard status\t{\"status\": \"\\u0026{AsOf:2023-03-29 13:37:27.423272543 +0000 UTC m=+4.062879776 Peers:[] LocalAddrs:[{Addr:127.0.0.1:51685 Type:stun} {Addr:172.20.0.2:51685 Type:local}] DERPs:0}\", \"err\": null}\n"}
{"Time":"2023-03-29T13:37:27.424393184Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.424 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1480\u003e\t(*Conn).derpWriteChanOfAddr\tmagicsock: adding connection to derp-1 for home-keep-alive\n"}
{"Time":"2023-03-29T13:37:27.424445676Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.424 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2747\u003e\t(*Conn).logActiveDerpLocked\tmagicsock: 1 active derp conns: derp-1=cr0s,wr0s\n"}
{"Time":"2023-03-29T13:37:27.424603665Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.424 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:225\u003e\tNewConn.func6\twireguard status\t{\"status\": \"\\u0026{AsOf:2023-03-29 13:37:27.424442129 +0000 UTC m=+4.064049348 Peers:[] LocalAddrs:[{Addr:127.0.0.1:51685 Type:stun} {Addr:172.20.0.2:51685 Type:local}] DERPs:1}\", \"err\": null}\n"}
{"Time":"2023-03-29T13:37:27.424655158Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.424 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:246\u003e\tNewConn.func7\tnetinfo callback\t{\"netinfo\": {\"MappingVariesByDestIP\": false, \"HairPinning\": null, \"WorkingIPv6\": false, \"OSHasIPv6\": false, \"WorkingUDP\": true, \"WorkingICMPv4\": false, \"UPnP\": false, \"PMP\": false, \"PCP\": false, \"PreferredDERP\": 1, \"DERPLatency\": {\"1-v4\": 0.084146852}}}\n"}
{"Time":"2023-03-29T13:37:27.424762683Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.424 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 918863977196614381, \"as_of\": \"2023-03-29T13:37:27.423371Z\", \"key\": \"nodekey:b967da7372e7aa1e4ed1fc6f032437dfe7a6e1a0d465cd04c9adf77d69ee2a1e\", \"disco\": \"discokey:c7f1bea9d6ff269c8662c153c39a3d92f57c567590b806c16bf693226039c84b\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4341:84c0:6b1c:81d1:5805/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4341:84c0:6b1c:81d1:5805/128\"], \"endpoints\": [\"127.0.0.1:51685\", \"172.20.0.2:51685\"]}}\n"}
{"Time":"2023-03-29T13:37:27.425045855Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.424 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:423\u003e\t(*Conn).UpdateNodes\tno preferred DERP, skipping node\t{\"node\": {\"id\": 918863977196614381, \"as_of\": \"2023-03-29T13:37:27.423371Z\", \"key\": \"nodekey:b967da7372e7aa1e4ed1fc6f032437dfe7a6e1a0d465cd04c9adf77d69ee2a1e\", \"disco\": \"discokey:c7f1bea9d6ff269c8662c153c39a3d92f57c567590b806c16bf693226039c84b\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4341:84c0:6b1c:81d1:5805/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4341:84c0:6b1c:81d1:5805/128\"], \"endpoints\": [\"127.0.0.1:51685\", \"172.20.0.2:51685\"]}}\n"}
{"Time":"2023-03-29T13:37:27.425065382Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.425 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n"}
{"Time":"2023-03-29T13:37:27.425204191Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.425 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n"}
{"Time":"2023-03-29T13:37:27.425429938Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.425 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/derp/derphttp/derphttp_client.go:401\u003e\t(*Client).connect\tderphttp.Client.Connect: connecting to derp-1 (test)\n"}
{"Time":"2023-03-29T13:37:27.425622509Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.425 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 918863977196614381, \"as_of\": \"2023-03-29T13:37:27.425514Z\", \"key\": \"nodekey:b967da7372e7aa1e4ed1fc6f032437dfe7a6e1a0d465cd04c9adf77d69ee2a1e\", \"disco\": \"discokey:c7f1bea9d6ff269c8662c153c39a3d92f57c567590b806c16bf693226039c84b\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.084146852}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4341:84c0:6b1c:81d1:5805/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4341:84c0:6b1c:81d1:5805/128\"], \"endpoints\": [\"127.0.0.1:51685\", \"172.20.0.2:51685\"]}}\n"}
{"Time":"2023-03-29T13:37:27.425845165Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.425 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:426\u003e\t(*Conn).UpdateNodes\tadding node\t{\"node\": {\"id\": 918863977196614381, \"as_of\": \"2023-03-29T13:37:27.425514Z\", \"key\": \"nodekey:b967da7372e7aa1e4ed1fc6f032437dfe7a6e1a0d465cd04c9adf77d69ee2a1e\", \"disco\": \"discokey:c7f1bea9d6ff269c8662c153c39a3d92f57c567590b806c16bf693226039c84b\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.084146852}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4341:84c0:6b1c:81d1:5805/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4341:84c0:6b1c:81d1:5805/128\"], \"endpoints\": [\"127.0.0.1:51685\", \"172.20.0.2:51685\"]}}\n"}
{"Time":"2023-03-29T13:37:27.426046304Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.425 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n"}
{"Time":"2023-03-29T13:37:27.426095567Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.426 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2578\u003e\t(*Conn).SetNetworkMap\t[v1] magicsock: got updated network map; 1 peers\n"}
{"Time":"2023-03-29T13:37:27.426917109Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.426 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:706\u003e\t(*userspaceEngine).maybeReconfigWireguardLocked\twgengine: Reconfig: configuring userspace WireGuard config (with 0/1 peers)\n"}
{"Time":"2023-03-29T13:37:27.426975294Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.426 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n"}
{"Time":"2023-03-29T13:37:27.427132044Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.427 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: [v1] report: udp=true v6=false v6os=false mapvarydest= hair= portmap= v4a=127.0.0.1:59384 derp=1 derpdist=1v4:95ms\n"}
{"Time":"2023-03-29T13:37:27.427810726Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.408 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:334\u003e\tNewUserspaceEngine\tlink state: interfaces.State{defaultRoute=eth0 ifs={eth0:[172.20.0.2/16]} v4=true v6=false}\n"}
{"Time":"2023-03-29T13:37:27.427890723Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.427 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:306\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP read buffer size to 7340032: operation not permitted\n"}
{"Time":"2023-03-29T13:37:27.427915145Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.427 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:310\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP write buffer size to 7340032: operation not permitted\n"}
{"Time":"2023-03-29T13:37:27.42800586Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.427 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:306\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP read buffer size to 7340032: operation not permitted\n"}
{"Time":"2023-03-29T13:37:27.428030074Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.427 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock_linux.go:310\u003e\ttrySetSocketBuffer.func1\tmagicsock: failed to force-set UDP write buffer size to 7340032: operation not permitted\n"}
{"Time":"2023-03-29T13:37:27.428084359Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.428 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:666\u003e\tNewConn\t[v1] couldn't create raw v4 disco listener, using regular listener instead: raw disco listening disabled, SO_MARK unavailable\n"}
{"Time":"2023-03-29T13:37:27.428115313Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.428 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:672\u003e\tNewConn\t[v1] couldn't create raw v6 disco listener, using regular listener instead: raw disco listening disabled, SO_MARK unavailable\n"}
{"Time":"2023-03-29T13:37:27.428260646Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.428 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1056\u003e\t(*Conn).DiscoPublicKey\tmagicsock: disco key = d:9c9ea8075f682592\n"}
{"Time":"2023-03-29T13:37:27.428283953Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.428 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:412\u003e\tNewUserspaceEngine\tCreating WireGuard device...\n"}
{"Time":"2023-03-29T13:37:27.428422249Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.428 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:437\u003e\tNewUserspaceEngine\tBringing WireGuard device up...\n"}
{"Time":"2023-03-29T13:37:27.428458364Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.428 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] UDP bind has been updated\n"}
{"Time":"2023-03-29T13:37:27.428479111Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.428 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Interface state was Down, requested Up, now Up\n"}
{"Time":"2023-03-29T13:37:27.428530647Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.428 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:441\u003e\tNewUserspaceEngine\tBringing router up...\n"}
{"Time":"2023-03-29T13:37:27.428549605Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.428 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:21\u003e\tfakeRouter.Up\t[v1] warning: fakeRouter.Up: not implemented.\n"}
{"Time":"2023-03-29T13:37:27.428596203Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.428 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:449\u003e\tNewUserspaceEngine\tClearing router settings...\n"}
{"Time":"2023-03-29T13:37:27.428629468Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.428 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:26\u003e\tfakeRouter.Set\t[v1] warning: fakeRouter.Set: not implemented.\n"}
{"Time":"2023-03-29T13:37:27.42866001Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.428 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:453\u003e\tNewUserspaceEngine\tStarting link monitor...\n"}
{"Time":"2023-03-29T13:37:27.428692965Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.428 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:456\u003e\tNewUserspaceEngine\tEngine created.\n"}
{"Time":"2023-03-29T13:37:27.42881653Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.428 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2444\u003e\t(*Conn).SetPrivateKey\tmagicsock: SetPrivateKey called (init)\n"}
{"Time":"2023-03-29T13:37:27.430284733Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.430 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:246\u003e\tNewConn.func7\tnetinfo callback\t{\"netinfo\": {\"MappingVariesByDestIP\": null, \"HairPinning\": null, \"WorkingIPv6\": false, \"OSHasIPv6\": false, \"WorkingUDP\": true, \"WorkingICMPv4\": false, \"UPnP\": false, \"PMP\": false, \"PCP\": false, \"PreferredDERP\": 1, \"DERPLatency\": {\"1-v4\": 0.094731332}}}\n"}
{"Time":"2023-03-29T13:37:27.430366553Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.430 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 6193178684101620604, \"as_of\": \"2023-03-29T13:37:27.430277Z\", \"key\": \"nodekey:76ff2edcacaac78382de86ce14dcf7d1464d8bff76ab14412a1c18ef29aa9370\", \"disco\": \"discokey:17b5066de479f45868013352cba173846e33492e64258b47a5e823c1746f8449\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.094731332}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4781:bb82:1540:3954:6a8/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4781:bb82:1540:3954:6a8/128\"], \"endpoints\": [\"127.0.0.1:59384\", \"172.20.0.2:59384\"]}}\n"}
{"Time":"2023-03-29T13:37:27.430637096Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.430 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:426\u003e\t(*Conn).UpdateNodes\tadding node\t{\"node\": {\"id\": 6193178684101620604, \"as_of\": \"2023-03-29T13:37:27.430277Z\", \"key\": \"nodekey:76ff2edcacaac78382de86ce14dcf7d1464d8bff76ab14412a1c18ef29aa9370\", \"disco\": \"discokey:17b5066de479f45868013352cba173846e33492e64258b47a5e823c1746f8449\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.094731332}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4781:bb82:1540:3954:6a8/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4781:bb82:1540:3954:6a8/128\"], \"endpoints\": [\"127.0.0.1:59384\", \"172.20.0.2:59384\"]}}\n"}
{"Time":"2023-03-29T13:37:27.430871537Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.430 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n"}
{"Time":"2023-03-29T13:37:27.430971821Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.430 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: [v1] report: udp=true v6=false v6os=false mapvarydest= hair= portmap= v4a=127.0.0.1:45837 derp=1 derpdist=1v4:37ms\n"}
{"Time":"2023-03-29T13:37:27.436731495Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.436 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v4 - started\n"}
{"Time":"2023-03-29T13:37:27.441948864Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.441 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: netcheck: UDP is blocked, trying HTTPS\n"}
{"Time":"2023-03-29T13:37:27.442143804Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.442 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v6 - started\n"}
{"Time":"2023-03-29T13:37:27.447325985Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.447 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:58\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming receiveDERP - started\n"}
{"Time":"2023-03-29T13:37:27.452941046Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.452 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:187\u003e\tNewConn\tupdating network map\n"}
{"Time":"2023-03-29T13:37:27.452978923Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.452 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2578\u003e\t(*Conn).SetNetworkMap\t[v1] magicsock: got updated network map; 0 peers\n"}
{"Time":"2023-03-29T13:37:27.453138084Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.453 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1241\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4): no matching peer\n"}
{"Time":"2023-03-29T13:37:27.453213493Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.453 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2578\u003e\t(*Conn).SetNetworkMap\t[v1] magicsock: got updated network map; 1 peers\n"}
{"Time":"2023-03-29T13:37:27.453354362Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.453 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n"}
{"Time":"2023-03-29T13:37:27.45343882Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.453 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:246\u003e\tNewConn.func7\tnetinfo callback\t{\"netinfo\": {\"MappingVariesByDestIP\": null, \"HairPinning\": null, \"WorkingIPv6\": false, \"OSHasIPv6\": false, \"WorkingUDP\": true, \"WorkingICMPv4\": false, \"UPnP\": false, \"PMP\": false, \"PCP\": false, \"PreferredDERP\": 1, \"DERPLatency\": {\"1-v4\": 0.037239154}}}\n"}
{"Time":"2023-03-29T13:37:27.453524949Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.453 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 1396496777246732951, \"as_of\": \"2023-03-29T13:37:27.453418Z\", \"key\": \"nodekey:eb8a91888d02040ddaee61afa4ae8d03bd6c35ddf3f76edcaa5bde89743e5c24\", \"disco\": \"discokey:e6f05f1260bbd61182192a11c1541a28ccace412e36cdb487e15a598d8327a73\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.037239154}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": [\"127.0.0.1:45837\", \"172.20.0.2:45837\"]}}\n"}
{"Time":"2023-03-29T13:37:27.453796409Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.453 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:426\u003e\t(*Conn).UpdateNodes\tadding node\t{\"node\": {\"id\": 1396496777246732951, \"as_of\": \"2023-03-29T13:37:27.453418Z\", \"key\": \"nodekey:eb8a91888d02040ddaee61afa4ae8d03bd6c35ddf3f76edcaa5bde89743e5c24\", \"disco\": \"discokey:e6f05f1260bbd61182192a11c1541a28ccace412e36cdb487e15a598d8327a73\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.037239154}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": [\"127.0.0.1:45837\", \"172.20.0.2:45837\"]}}\n"}
{"Time":"2023-03-29T13:37:27.454022251Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.453 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n"}
{"Time":"2023-03-29T13:37:27.454053656Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.454 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2578\u003e\t(*Conn).SetNetworkMap\t[v1] magicsock: got updated network map; 1 peers\n"}
{"Time":"2023-03-29T13:37:27.454164006Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.454 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n"}
{"Time":"2023-03-29T13:37:27.454402409Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.454 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1241\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4): no matching peer\n"}
{"Time":"2023-03-29T13:37:27.454452969Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.454 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: netcheck: UDP is blocked, trying HTTPS\n"}
{"Time":"2023-03-29T13:37:27.454661334Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.454 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: [v1] measureAllICMPLatency: listen ip4:icmp 0.0.0.0: socket: operation not permitted\n"}
{"Time":"2023-03-29T13:37:27.455180586Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.455 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:423\u003e\t(*Conn).UpdateNodes\tno preferred DERP, skipping node\t{\"node\": {\"id\": 4984932330222696591, \"as_of\": \"2023-03-29T13:37:27.413933Z\", \"key\": \"nodekey:5c74998353a1ae2dd2b8ee0de399386279c035b2b3d95bd245ba4820d0403907\", \"disco\": \"discokey:cc502d2065d3910d659fc206b5c1b833cc8721e43ccd43ed245fc56e1d9d6219\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": []}}\n"}
{"Time":"2023-03-29T13:37:27.45520381Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.455 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n"}
{"Time":"2023-03-29T13:37:27.455291748Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.455 [DEBUG]\t(client.netstack)\t\u003ctailscale.com/wgengine/netstack/netstack.go:367\u003e\t(*Impl).updateIPs\t[v2] netstack: registered IP fd7a:115c:a1e0:4743:8dab:c855:f633:532/128\n"}
{"Time":"2023-03-29T13:37:27.455371391Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.455 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:706\u003e\t(*userspaceEngine).maybeReconfigWireguardLocked\twgengine: Reconfig: configuring userspace WireGuard config (with 0/0 peers)\n"}
{"Time":"2023-03-29T13:37:27.45558374Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.455 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] UAPI: Updating private key\n"}
{"Time":"2023-03-29T13:37:27.455722626Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.455 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:921\u003e\t(*userspaceEngine).Reconfig\twgengine: Reconfig: configuring router\n"}
{"Time":"2023-03-29T13:37:27.455744892Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.455 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:26\u003e\tfakeRouter.Set\t[v1] warning: fakeRouter.Set: not implemented.\n"}
{"Time":"2023-03-29T13:37:27.455759263Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.455 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:931\u003e\t(*userspaceEngine).Reconfig\twgengine: Reconfig: configuring DNS\n"}
{"Time":"2023-03-29T13:37:27.455811196Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.455 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: Set: {DefaultResolvers:[] Routes:{} SearchDomains:[] Hosts:0}\n"}
{"Time":"2023-03-29T13:37:27.455851745Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.455 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: Resolvercfg: {Routes:{} Hosts:0 LocalDomains:[]}\n"}
{"Time":"2023-03-29T13:37:27.455887337Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.455 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: OScfg: {Nameservers:[] SearchDomains:[] MatchDomains:[] Hosts:[]}\n"}
{"Time":"2023-03-29T13:37:27.45593531Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.455 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n"}
{"Time":"2023-03-29T13:37:27.456026705Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.455 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 3791438885238154126, \"as_of\": \"2023-03-29T13:37:27.453Z\", \"key\": \"nodekey:57880137ed805a8c0fd7b29e835a3cd85d87c32c890d3b0f6ed3fc8620837c00\", \"disco\": \"discokey:9c9ea8075f682592f7a084f08ca03fcad41aea85a44de470f32d96f1067b8a60\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4743:8dab:c855:f633:532/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4743:8dab:c855:f633:532/128\"], \"endpoints\": []}}\n"}
{"Time":"2023-03-29T13:37:27.456257727Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.456 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:423\u003e\t(*Conn).UpdateNodes\tno preferred DERP, skipping node\t{\"node\": {\"id\": 3791438885238154126, \"as_of\": \"2023-03-29T13:37:27.453Z\", \"key\": \"nodekey:57880137ed805a8c0fd7b29e835a3cd85d87c32c890d3b0f6ed3fc8620837c00\", \"disco\": \"discokey:9c9ea8075f682592f7a084f08ca03fcad41aea85a44de470f32d96f1067b8a60\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4743:8dab:c855:f633:532/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4743:8dab:c855:f633:532/128\"], \"endpoints\": []}}\n"}
{"Time":"2023-03-29T13:37:27.456275526Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.456 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n"}
{"Time":"2023-03-29T13:37:27.456348245Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.456 [DEBUG]\t(agent.tailnet.netstack)\t\u003ctailscale.com/wgengine/netstack/netstack.go:367\u003e\t(*Impl).updateIPs\t[v2] netstack: registered IP fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\n"}
{"Time":"2023-03-29T13:37:27.456430865Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.456 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:706\u003e\t(*userspaceEngine).maybeReconfigWireguardLocked\twgengine: Reconfig: configuring userspace WireGuard config (with 0/0 peers)\n"}
{"Time":"2023-03-29T13:37:27.456533237Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.456 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] UAPI: Updating private key\n"}
{"Time":"2023-03-29T13:37:27.456666838Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.456 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:921\u003e\t(*userspaceEngine).Reconfig\twgengine: Reconfig: configuring router\n"}
{"Time":"2023-03-29T13:37:27.456681257Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.456 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:26\u003e\tfakeRouter.Set\t[v1] warning: fakeRouter.Set: not implemented.\n"}
{"Time":"2023-03-29T13:37:27.456709567Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.456 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:931\u003e\t(*userspaceEngine).Reconfig\twgengine: Reconfig: configuring DNS\n"}
{"Time":"2023-03-29T13:37:27.456736103Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.456 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: Set: {DefaultResolvers:[] Routes:{} SearchDomains:[] Hosts:0}\n"}
{"Time":"2023-03-29T13:37:27.456785483Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.456 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: Resolvercfg: {Routes:{} Hosts:0 LocalDomains:[]}\n"}
{"Time":"2023-03-29T13:37:27.456811479Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.456 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/net/dns/logger.go:98\u003e\tNewManager.func1\tdns: OScfg: {Nameservers:[] SearchDomains:[] MatchDomains:[] Hosts:[]}\n"}
{"Time":"2023-03-29T13:37:27.456866526Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.456 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n"}
{"Time":"2023-03-29T13:37:27.456945718Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.456 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1241\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4): no matching peer\n"}
{"Time":"2023-03-29T13:37:27.457035437Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.456 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: [v1] measureAllICMPLatency: listen ip4:icmp 0.0.0.0: socket: operation not permitted\n"}
{"Time":"2023-03-29T13:37:27.490404055Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.490 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: [v1] report: udp=true v6=false v6os=false mapvarydest= hair= portmap= v4a=127.0.0.1:35595 derp=1 derpdist=1v4:45ms\n"}
{"Time":"2023-03-29T13:37:27.490957872Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.490 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: [v1] report: udp=true v6=false v6os=false mapvarydest=false hair= portmap= v4a=127.0.0.1:57709 derp=1 derpdist=1v4:31ms\n"}
{"Time":"2023-03-29T13:37:27.491013794Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.490 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1092\u003e\t(*Conn).setNearestDERP\tmagicsock: home is now derp-1 (test)\n"}
{"Time":"2023-03-29T13:37:27.491185914Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.491 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2759\u003e\t(*Conn).logEndpointChange\tmagicsock: endpoints changed: 127.0.0.1:57709 (stun), 172.20.0.2:57709 (local)\n"}
{"Time":"2023-03-29T13:37:27.491295468Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.491 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:225\u003e\tNewConn.func6\twireguard status\t{\"status\": \"\\u0026{AsOf:2023-03-29 13:37:27.491174325 +0000 UTC m=+4.130781564 Peers:[] LocalAddrs:[{Addr:127.0.0.1:57709 Type:stun} {Addr:172.20.0.2:57709 Type:local}] DERPs:0}\", \"err\": null}\n"}
{"Time":"2023-03-29T13:37:27.491675303Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.491 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:246\u003e\tNewConn.func7\tnetinfo callback\t{\"netinfo\": {\"MappingVariesByDestIP\": null, \"HairPinning\": null, \"WorkingIPv6\": false, \"OSHasIPv6\": false, \"WorkingUDP\": true, \"WorkingICMPv4\": false, \"UPnP\": false, \"PMP\": false, \"PCP\": false, \"PreferredDERP\": 1, \"DERPLatency\": {\"1-v4\": 0.045323829}}}\n"}
{"Time":"2023-03-29T13:37:27.491767926Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.491 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 6125567726523641784, \"as_of\": \"2023-03-29T13:37:27.491649Z\", \"key\": \"nodekey:5e5bb74471183bca142348628f8e5cb431c9b3367f0fe15605a03a1721343e56\", \"disco\": \"discokey:59083cba13956f00814aa780f8a19b58ddd40f9ae6f940398e509d2f2c79076e\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.045323829}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": [\"127.0.0.1:35595\", \"172.20.0.2:35595\"]}}\n"}
{"Time":"2023-03-29T13:37:27.492071167Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.491 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:426\u003e\t(*Conn).UpdateNodes\tadding node\t{\"node\": {\"id\": 6125567726523641784, \"as_of\": \"2023-03-29T13:37:27.491649Z\", \"key\": \"nodekey:5e5bb74471183bca142348628f8e5cb431c9b3367f0fe15605a03a1721343e56\", \"disco\": \"discokey:59083cba13956f00814aa780f8a19b58ddd40f9ae6f940398e509d2f2c79076e\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.045323829}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": [\"127.0.0.1:35595\", \"172.20.0.2:35595\"]}}\n"}
{"Time":"2023-03-29T13:37:27.492303429Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.492 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n"}
{"Time":"2023-03-29T13:37:27.492381183Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.492 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2578\u003e\t(*Conn).SetNetworkMap\t[v1] magicsock: got updated network map; 1 peers\n"}
{"Time":"2023-03-29T13:37:27.492509729Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.492 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n"}
{"Time":"2023-03-29T13:37:27.492832285Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.492 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1480\u003e\t(*Conn).derpWriteChanOfAddr\tmagicsock: adding connection to derp-1 for home-keep-alive\n"}
{"Time":"2023-03-29T13:37:27.492955047Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.492 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2747\u003e\t(*Conn).logActiveDerpLocked\tmagicsock: 1 active derp conns: derp-1=cr0s,wr0s\n"}
{"Time":"2023-03-29T13:37:27.493041705Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.492 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:225\u003e\tNewConn.func6\twireguard status\t{\"status\": \"\\u0026{AsOf:2023-03-29 13:37:27.492824353 +0000 UTC m=+4.132431585 Peers:[] LocalAddrs:[{Addr:127.0.0.1:57709 Type:stun} {Addr:172.20.0.2:57709 Type:local}] DERPs:1}\", \"err\": null}\n"}
{"Time":"2023-03-29T13:37:27.493059245Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.492 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:246\u003e\tNewConn.func7\tnetinfo callback\t{\"netinfo\": {\"MappingVariesByDestIP\": false, \"HairPinning\": null, \"WorkingIPv6\": false, \"OSHasIPv6\": false, \"WorkingUDP\": true, \"WorkingICMPv4\": false, \"UPnP\": false, \"PMP\": false, \"PCP\": false, \"PreferredDERP\": 1, \"DERPLatency\": {\"1-v4\": 0.031410894}}}\n"}
{"Time":"2023-03-29T13:37:27.493174012Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.493 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 4984932330222696591, \"as_of\": \"2023-03-29T13:37:27.491286Z\", \"key\": \"nodekey:5c74998353a1ae2dd2b8ee0de399386279c035b2b3d95bd245ba4820d0403907\", \"disco\": \"discokey:cc502d2065d3910d659fc206b5c1b833cc8721e43ccd43ed245fc56e1d9d6219\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": [\"127.0.0.1:57709\", \"172.20.0.2:57709\"]}}\n"}
{"Time":"2023-03-29T13:37:27.493508739Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.493 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:423\u003e\t(*Conn).UpdateNodes\tno preferred DERP, skipping node\t{\"node\": {\"id\": 4984932330222696591, \"as_of\": \"2023-03-29T13:37:27.491286Z\", \"key\": \"nodekey:5c74998353a1ae2dd2b8ee0de399386279c035b2b3d95bd245ba4820d0403907\", \"disco\": \"discokey:cc502d2065d3910d659fc206b5c1b833cc8721e43ccd43ed245fc56e1d9d6219\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": [\"127.0.0.1:57709\", \"172.20.0.2:57709\"]}}\n"}
{"Time":"2023-03-29T13:37:27.493558301Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.493 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n"}
{"Time":"2023-03-29T13:37:27.493658522Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.493 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n"}
{"Time":"2023-03-29T13:37:27.493954418Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.493 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/derp/derphttp/derphttp_client.go:401\u003e\t(*Client).connect\tderphttp.Client.Connect: connecting to derp-1 (test)\n"}
{"Time":"2023-03-29T13:37:27.49414611Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.494 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 4984932330222696591, \"as_of\": \"2023-03-29T13:37:27.494032Z\", \"key\": \"nodekey:5c74998353a1ae2dd2b8ee0de399386279c035b2b3d95bd245ba4820d0403907\", \"disco\": \"discokey:cc502d2065d3910d659fc206b5c1b833cc8721e43ccd43ed245fc56e1d9d6219\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.031410894}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": [\"127.0.0.1:57709\", \"172.20.0.2:57709\"]}}\n"}
{"Time":"2023-03-29T13:37:27.494394917Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.494 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:426\u003e\t(*Conn).UpdateNodes\tadding node\t{\"node\": {\"id\": 4984932330222696591, \"as_of\": \"2023-03-29T13:37:27.494032Z\", \"key\": \"nodekey:5c74998353a1ae2dd2b8ee0de399386279c035b2b3d95bd245ba4820d0403907\", \"disco\": \"discokey:cc502d2065d3910d659fc206b5c1b833cc8721e43ccd43ed245fc56e1d9d6219\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.031410894}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": [\"127.0.0.1:57709\", \"172.20.0.2:57709\"]}}\n"}
{"Time":"2023-03-29T13:37:27.494635514Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.494 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n"}
{"Time":"2023-03-29T13:37:27.494676622Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.494 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2578\u003e\t(*Conn).SetNetworkMap\t[v1] magicsock: got updated network map; 1 peers\n"}
{"Time":"2023-03-29T13:37:27.494780288Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.494 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:706\u003e\t(*userspaceEngine).maybeReconfigWireguardLocked\twgengine: Reconfig: configuring userspace WireGuard config (with 0/1 peers)\n"}
{"Time":"2023-03-29T13:37:27.494840889Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.494 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n"}
{"Time":"2023-03-29T13:37:27.495169992Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.495 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: [v1] report: udp=true v6=false v6os=false mapvarydest= hair= portmap= v4a=127.0.0.1:59384 derp=1 derpdist=1v4:64ms\n"}
{"Time":"2023-03-29T13:37:27.497129169Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.497 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1254\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4): sending disco ping to [XHSZg]  ...\n"}
{"Time":"2023-03-29T13:37:27.497196731Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.497 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: [v1] report: udp=true v6=false v6os=false mapvarydest= hair= portmap= v4a=127.0.0.1:51685 derp=1 derpdist=1v4:71ms\n"}
{"Time":"2023-03-29T13:37:27.498816504Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.498 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1480\u003e\t(*Conn).derpWriteChanOfAddr\tmagicsock: adding connection to derp-1 for [XHSZg]\n"}
{"Time":"2023-03-29T13:37:27.498899237Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.498 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2747\u003e\t(*Conn).logActiveDerpLocked\tmagicsock: 1 active derp conns: derp-1=cr0s,wr0s\n"}
{"Time":"2023-03-29T13:37:27.498921801Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.498 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1599\u003e\t(*Conn).setPeerLastDerpLocked\t[v1] magicsock: derp route for [XHSZg] set to derp-1 (their home)\n"}
{"Time":"2023-03-29T13:37:27.499047332Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.498 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:225\u003e\tNewConn.func6\twireguard status\t{\"status\": \"\\u0026{AsOf:2023-03-29 13:37:27.498914775 +0000 UTC m=+4.138522011 Peers:[] LocalAddrs:[] DERPs:1}\", \"err\": null}\n"}
{"Time":"2023-03-29T13:37:27.499167908Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.499 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:246\u003e\tNewConn.func7\tnetinfo callback\t{\"netinfo\": {\"MappingVariesByDestIP\": null, \"HairPinning\": null, \"WorkingIPv6\": false, \"OSHasIPv6\": false, \"WorkingUDP\": true, \"WorkingICMPv4\": false, \"UPnP\": false, \"PMP\": false, \"PCP\": false, \"PreferredDERP\": 1, \"DERPLatency\": {\"1-v4\": 0.070836569}}}\n"}
{"Time":"2023-03-29T13:37:27.499241573Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.499 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 918863977196614381, \"as_of\": \"2023-03-29T13:37:27.499162Z\", \"key\": \"nodekey:b967da7372e7aa1e4ed1fc6f032437dfe7a6e1a0d465cd04c9adf77d69ee2a1e\", \"disco\": \"discokey:c7f1bea9d6ff269c8662c153c39a3d92f57c567590b806c16bf693226039c84b\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.070836569}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4341:84c0:6b1c:81d1:5805/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4341:84c0:6b1c:81d1:5805/128\"], \"endpoints\": [\"127.0.0.1:51685\", \"172.20.0.2:51685\"]}}\n"}
{"Time":"2023-03-29T13:37:27.49953116Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.499 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:426\u003e\t(*Conn).UpdateNodes\tadding node\t{\"node\": {\"id\": 918863977196614381, \"as_of\": \"2023-03-29T13:37:27.499162Z\", \"key\": \"nodekey:b967da7372e7aa1e4ed1fc6f032437dfe7a6e1a0d465cd04c9adf77d69ee2a1e\", \"disco\": \"discokey:c7f1bea9d6ff269c8662c153c39a3d92f57c567590b806c16bf693226039c84b\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.070836569}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4341:84c0:6b1c:81d1:5805/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4341:84c0:6b1c:81d1:5805/128\"], \"endpoints\": [\"127.0.0.1:51685\", \"172.20.0.2:51685\"]}}\n"}
{"Time":"2023-03-29T13:37:27.499756959Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.499 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n"}
{"Time":"2023-03-29T13:37:27.499820527Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.499 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2578\u003e\t(*Conn).SetNetworkMap\t[v1] magicsock: got updated network map; 1 peers\n"}
{"Time":"2023-03-29T13:37:27.499954778Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.499 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n"}
{"Time":"2023-03-29T13:37:27.500094938Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.500 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/derp/derphttp/derphttp_client.go:401\u003e\t(*Client).connect\tderphttp.Client.Connect: connecting to derp-1 (test)\n"}
{"Time":"2023-03-29T13:37:27.508017322Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.507 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: [v1] report: udp=true v6=false v6os=false mapvarydest=false hair= portmap= v4a=127.0.0.1:51993 derp=1 derpdist=1v4:48ms\n"}
{"Time":"2023-03-29T13:37:27.50805261Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.507 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1092\u003e\t(*Conn).setNearestDERP\tmagicsock: home is now derp-1 (test)\n"}
{"Time":"2023-03-29T13:37:27.508212683Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.508 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2759\u003e\t(*Conn).logEndpointChange\tmagicsock: endpoints changed: 127.0.0.1:51993 (stun), 172.20.0.2:51993 (local)\n"}
{"Time":"2023-03-29T13:37:27.508285157Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.508 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:225\u003e\tNewConn.func6\twireguard status\t{\"status\": \"\\u0026{AsOf:2023-03-29 13:37:27.50819775 +0000 UTC m=+4.147804976 Peers:[] LocalAddrs:[{Addr:127.0.0.1:51993 Type:stun} {Addr:172.20.0.2:51993 Type:local}] DERPs:1}\", \"err\": null}\n"}
{"Time":"2023-03-29T13:37:27.51148228Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.511 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:246\u003e\tNewConn.func7\tnetinfo callback\t{\"netinfo\": {\"MappingVariesByDestIP\": false, \"HairPinning\": null, \"WorkingIPv6\": false, \"OSHasIPv6\": false, \"WorkingUDP\": true, \"WorkingICMPv4\": false, \"UPnP\": false, \"PMP\": false, \"PCP\": false, \"PreferredDERP\": 1, \"DERPLatency\": {\"1-v4\": 0.047681075}}}\n"}
{"Time":"2023-03-29T13:37:27.511561169Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.511 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 3791438885238154126, \"as_of\": \"2023-03-29T13:37:27.50828Z\", \"key\": \"nodekey:57880137ed805a8c0fd7b29e835a3cd85d87c32c890d3b0f6ed3fc8620837c00\", \"disco\": \"discokey:9c9ea8075f682592f7a084f08ca03fcad41aea85a44de470f32d96f1067b8a60\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4743:8dab:c855:f633:532/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4743:8dab:c855:f633:532/128\"], \"endpoints\": [\"127.0.0.1:51993\", \"172.20.0.2:51993\"]}}\n"}
{"Time":"2023-03-29T13:37:27.511646171Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.511 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1254\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4): sending disco ping to [64qRi]  ...\n"}
{"Time":"2023-03-29T13:37:27.512004191Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.511 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:423\u003e\t(*Conn).UpdateNodes\tno preferred DERP, skipping node\t{\"node\": {\"id\": 3791438885238154126, \"as_of\": \"2023-03-29T13:37:27.50828Z\", \"key\": \"nodekey:57880137ed805a8c0fd7b29e835a3cd85d87c32c890d3b0f6ed3fc8620837c00\", \"disco\": \"discokey:9c9ea8075f682592f7a084f08ca03fcad41aea85a44de470f32d96f1067b8a60\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4743:8dab:c855:f633:532/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4743:8dab:c855:f633:532/128\"], \"endpoints\": [\"127.0.0.1:51993\", \"172.20.0.2:51993\"]}}\n"}
{"Time":"2023-03-29T13:37:27.512026173Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.511 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n"}
{"Time":"2023-03-29T13:37:27.512131402Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.512 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n"}
{"Time":"2023-03-29T13:37:27.512284203Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.512 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1599\u003e\t(*Conn).setPeerLastDerpLocked\t[v1] magicsock: derp route for [64qRi] set to derp-1 (shared home)\n"}
{"Time":"2023-03-29T13:37:27.512446305Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.512 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 3791438885238154126, \"as_of\": \"2023-03-29T13:37:27.512355Z\", \"key\": \"nodekey:57880137ed805a8c0fd7b29e835a3cd85d87c32c890d3b0f6ed3fc8620837c00\", \"disco\": \"discokey:9c9ea8075f682592f7a084f08ca03fcad41aea85a44de470f32d96f1067b8a60\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.047681075}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4743:8dab:c855:f633:532/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4743:8dab:c855:f633:532/128\"], \"endpoints\": [\"127.0.0.1:51993\", \"172.20.0.2:51993\"]}}\n"}
{"Time":"2023-03-29T13:37:27.512694091Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.512 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:426\u003e\t(*Conn).UpdateNodes\tadding node\t{\"node\": {\"id\": 3791438885238154126, \"as_of\": \"2023-03-29T13:37:27.512355Z\", \"key\": \"nodekey:57880137ed805a8c0fd7b29e835a3cd85d87c32c890d3b0f6ed3fc8620837c00\", \"disco\": \"discokey:9c9ea8075f682592f7a084f08ca03fcad41aea85a44de470f32d96f1067b8a60\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.047681075}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4743:8dab:c855:f633:532/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4743:8dab:c855:f633:532/128\"], \"endpoints\": [\"127.0.0.1:51993\", \"172.20.0.2:51993\"]}}\n"}
{"Time":"2023-03-29T13:37:27.512945734Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.512 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n"}
{"Time":"2023-03-29T13:37:27.512982501Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.512 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2578\u003e\t(*Conn).SetNetworkMap\t[v1] magicsock: got updated network map; 1 peers\n"}
{"Time":"2023-03-29T13:37:27.513074208Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.513 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:706\u003e\t(*userspaceEngine).maybeReconfigWireguardLocked\twgengine: Reconfig: configuring userspace WireGuard config (with 0/1 peers)\n"}
{"Time":"2023-03-29T13:37:27.513149912Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.513 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n"}
{"Time":"2023-03-29T13:37:27.513458516Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.513 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1241\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4): no matching peer\n"}
{"Time":"2023-03-29T13:37:27.513601111Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.513 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1705\u003e\t(*Conn).runDerpReader\tmagicsock: derp-1 connected; connGen=1\n"}
{"Time":"2023-03-29T13:37:27.514167854Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.514 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: [v1] netcheck: measuring HTTPS latency of test (1): unexpected status code: 426 (426 Upgrade Required)\n"}
{"Time":"2023-03-29T13:37:27.514216037Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.514 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: [v1] report: udp=true v6=false v6os=false mapvarydest=false hair= portmap= v4a=127.0.0.1:58992 derp=1 derpdist=1v4:62ms\n"}
{"Time":"2023-03-29T13:37:27.514270704Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.514 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1092\u003e\t(*Conn).setNearestDERP\tmagicsock: home is now derp-1 (test)\n"}
{"Time":"2023-03-29T13:37:27.51443958Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.514 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2759\u003e\t(*Conn).logEndpointChange\tmagicsock: endpoints changed: 127.0.0.1:58992 (stun), 172.20.0.2:58992 (local)\n"}
{"Time":"2023-03-29T13:37:27.514519618Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.514 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:225\u003e\tNewConn.func6\twireguard status\t{\"status\": \"\\u0026{AsOf:2023-03-29 13:37:27.514434952 +0000 UTC m=+4.154042177 Peers:[] LocalAddrs:[{Addr:127.0.0.1:58992 Type:stun} {Addr:172.20.0.2:58992 Type:local}] DERPs:0}\", \"err\": null}\n"}
{"Time":"2023-03-29T13:37:27.514591409Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.514 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 6959219245254193963, \"as_of\": \"2023-03-29T13:37:27.514515Z\", \"key\": \"nodekey:e443af25902d57edd4bf0b663849e6cb06390f7b80e6ab179dbd5deabea10e0c\", \"disco\": \"discokey:049e454260a62aa19c35b82499dc35811a5aad44ef612f238808cae15d5c5b55\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4d67:9e5c:abb:531:b55d/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4d67:9e5c:abb:531:b55d/128\"], \"endpoints\": [\"127.0.0.1:58992\", \"172.20.0.2:58992\"]}}\n"}
{"Time":"2023-03-29T13:37:27.514811275Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.514 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:423\u003e\t(*Conn).UpdateNodes\tno preferred DERP, skipping node\t{\"node\": {\"id\": 6959219245254193963, \"as_of\": \"2023-03-29T13:37:27.514515Z\", \"key\": \"nodekey:e443af25902d57edd4bf0b663849e6cb06390f7b80e6ab179dbd5deabea10e0c\", \"disco\": \"discokey:049e454260a62aa19c35b82499dc35811a5aad44ef612f238808cae15d5c5b55\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4d67:9e5c:abb:531:b55d/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4d67:9e5c:abb:531:b55d/128\"], \"endpoints\": [\"127.0.0.1:58992\", \"172.20.0.2:58992\"]}}\n"}
{"Time":"2023-03-29T13:37:27.514831215Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.514 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n"}
{"Time":"2023-03-29T13:37:27.514927532Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.514 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n"}
{"Time":"2023-03-29T13:37:27.514969002Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.514 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1480\u003e\t(*Conn).derpWriteChanOfAddr\tmagicsock: adding connection to derp-1 for home-keep-alive\n"}
{"Time":"2023-03-29T13:37:27.51501Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.514 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2747\u003e\t(*Conn).logActiveDerpLocked\tmagicsock: 1 active derp conns: derp-1=cr0s,wr0s\n"}
{"Time":"2023-03-29T13:37:27.515094247Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.515 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:225\u003e\tNewConn.func6\twireguard status\t{\"status\": \"\\u0026{AsOf:2023-03-29 13:37:27.515008199 +0000 UTC m=+4.154615430 Peers:[] LocalAddrs:[{Addr:127.0.0.1:58992 Type:stun} {Addr:172.20.0.2:58992 Type:local}] DERPs:1}\", \"err\": null}\n"}
{"Time":"2023-03-29T13:37:27.515144167Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.515 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:246\u003e\tNewConn.func7\tnetinfo callback\t{\"netinfo\": {\"MappingVariesByDestIP\": false, \"HairPinning\": null, \"WorkingIPv6\": false, \"OSHasIPv6\": false, \"WorkingUDP\": true, \"WorkingICMPv4\": false, \"UPnP\": false, \"PMP\": false, \"PCP\": false, \"PreferredDERP\": 1, \"DERPLatency\": {\"1-v4\": 0.062405899}}}\n"}
{"Time":"2023-03-29T13:37:27.515231182Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.515 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 6959219245254193963, \"as_of\": \"2023-03-29T13:37:27.515155Z\", \"key\": \"nodekey:e443af25902d57edd4bf0b663849e6cb06390f7b80e6ab179dbd5deabea10e0c\", \"disco\": \"discokey:049e454260a62aa19c35b82499dc35811a5aad44ef612f238808cae15d5c5b55\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.062405899}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4d67:9e5c:abb:531:b55d/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4d67:9e5c:abb:531:b55d/128\"], \"endpoints\": [\"127.0.0.1:58992\", \"172.20.0.2:58992\"]}}\n"}
{"Time":"2023-03-29T13:37:27.515477352Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.515 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:426\u003e\t(*Conn).UpdateNodes\tadding node\t{\"node\": {\"id\": 6959219245254193963, \"as_of\": \"2023-03-29T13:37:27.515155Z\", \"key\": \"nodekey:e443af25902d57edd4bf0b663849e6cb06390f7b80e6ab179dbd5deabea10e0c\", \"disco\": \"discokey:049e454260a62aa19c35b82499dc35811a5aad44ef612f238808cae15d5c5b55\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.062405899}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4d67:9e5c:abb:531:b55d/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4d67:9e5c:abb:531:b55d/128\"], \"endpoints\": [\"127.0.0.1:58992\", \"172.20.0.2:58992\"]}}\n"}
{"Time":"2023-03-29T13:37:27.5157436Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.515 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n"}
{"Time":"2023-03-29T13:37:27.515810118Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.515 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2578\u003e\t(*Conn).SetNetworkMap\t[v1] magicsock: got updated network map; 1 peers\n"}
{"Time":"2023-03-29T13:37:27.515944355Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.515 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:706\u003e\t(*userspaceEngine).maybeReconfigWireguardLocked\twgengine: Reconfig: configuring userspace WireGuard config (with 0/1 peers)\n"}
{"Time":"2023-03-29T13:37:27.51603017Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.515 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n"}
{"Time":"2023-03-29T13:37:27.516114674Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.516 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/derp/derphttp/derphttp_client.go:401\u003e\t(*Client).connect\tderphttp.Client.Connect: connecting to derp-1 (test)\n"}
{"Time":"2023-03-29T13:37:27.520145614Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.520 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:4387\u003e\t(*endpoint).handlePongConnLocked\tmagicsock: disco: node [64qRi] d:e6f05f1260bbd611 now using 172.20.0.2:45837\n"}
{"Time":"2023-03-29T13:37:27.520236787Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.520 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1254\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4): sending disco ping to [64qRi]  ...\n"}
{"Time":"2023-03-29T13:37:27.520381164Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.520 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1705\u003e\t(*Conn).runDerpReader\tmagicsock: derp-1 connected; connGen=1\n"}
{"Time":"2023-03-29T13:37:27.523889233Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.523 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1254\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4): sending disco ping to [64qRi]  ...\n"}
{"Time":"2023-03-29T13:37:27.524071718Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.524 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1705\u003e\t(*Conn).runDerpReader\tmagicsock: derp-1 connected; connGen=1\n"}
{"Time":"2023-03-29T13:37:27.525270748Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.525 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: [v1] netcheck: measuring HTTPS latency of test (1): unexpected status code: 426 (426 Upgrade Required)\n"}
{"Time":"2023-03-29T13:37:27.525326669Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.525 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: [v1] report: udp=true v6=false v6os=false mapvarydest=false hair= portmap= v4a=127.0.0.1:34848 derp=1 derpdist=1v4:65ms\n"}
{"Time":"2023-03-29T13:37:27.525374168Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.525 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1092\u003e\t(*Conn).setNearestDERP\tmagicsock: home is now derp-1 (test)\n"}
{"Time":"2023-03-29T13:37:27.525530241Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.525 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2759\u003e\t(*Conn).logEndpointChange\tmagicsock: endpoints changed: 127.0.0.1:34848 (stun), 172.20.0.2:34848 (local)\n"}
{"Time":"2023-03-29T13:37:27.525639565Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.525 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:225\u003e\tNewConn.func6\twireguard status\t{\"status\": \"\\u0026{AsOf:2023-03-29 13:37:27.525526859 +0000 UTC m=+4.165134074 Peers:[] LocalAddrs:[{Addr:127.0.0.1:34848 Type:stun} {Addr:172.20.0.2:34848 Type:local}] DERPs:0}\", \"err\": null}\n"}
{"Time":"2023-03-29T13:37:27.525953664Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.525 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1480\u003e\t(*Conn).derpWriteChanOfAddr\tmagicsock: adding connection to derp-1 for home-keep-alive\n"}
{"Time":"2023-03-29T13:37:27.525977204Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.525 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2747\u003e\t(*Conn).logActiveDerpLocked\tmagicsock: 1 active derp conns: derp-1=cr0s,wr0s\n"}
{"Time":"2023-03-29T13:37:27.526067972Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.525 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:225\u003e\tNewConn.func6\twireguard status\t{\"status\": \"\\u0026{AsOf:2023-03-29 13:37:27.525972278 +0000 UTC m=+4.165579492 Peers:[] LocalAddrs:[{Addr:127.0.0.1:34848 Type:stun} {Addr:172.20.0.2:34848 Type:local}] DERPs:1}\", \"err\": null}\n"}
{"Time":"2023-03-29T13:37:27.526107105Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.526 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:246\u003e\tNewConn.func7\tnetinfo callback\t{\"netinfo\": {\"MappingVariesByDestIP\": false, \"HairPinning\": null, \"WorkingIPv6\": false, \"OSHasIPv6\": false, \"WorkingUDP\": true, \"WorkingICMPv4\": false, \"UPnP\": false, \"PMP\": false, \"PCP\": false, \"PreferredDERP\": 1, \"DERPLatency\": {\"1-v4\": 0.065420657}}}\n"}
{"Time":"2023-03-29T13:37:27.526188976Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.526 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 2689903771435529409, \"as_of\": \"2023-03-29T13:37:27.5256Z\", \"key\": \"nodekey:e568ad36a49b4d60323fc0207eded97153e72170c491f74a8942ac38e9dd541f\", \"disco\": \"discokey:34ff526bdd502e84533e42919465a676d8fa64abda3b4f5943a8c9aa6fd0253b\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": [\"127.0.0.1:34848\", \"172.20.0.2:34848\"]}}\n"}
{"Time":"2023-03-29T13:37:27.526396168Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.526 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:423\u003e\t(*Conn).UpdateNodes\tno preferred DERP, skipping node\t{\"node\": {\"id\": 2689903771435529409, \"as_of\": \"2023-03-29T13:37:27.5256Z\", \"key\": \"nodekey:e568ad36a49b4d60323fc0207eded97153e72170c491f74a8942ac38e9dd541f\", \"disco\": \"discokey:34ff526bdd502e84533e42919465a676d8fa64abda3b4f5943a8c9aa6fd0253b\", \"preferred_derp\": 0, \"derp_latency\": null, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": [\"127.0.0.1:34848\", \"172.20.0.2:34848\"]}}\n"}
{"Time":"2023-03-29T13:37:27.526422378Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.526 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n"}
{"Time":"2023-03-29T13:37:27.526517317Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.526 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n"}
{"Time":"2023-03-29T13:37:27.526687969Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.526 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/derp/derphttp/derphttp_client.go:401\u003e\t(*Client).connect\tderphttp.Client.Connect: connecting to derp-1 (test)\n"}
{"Time":"2023-03-29T13:37:27.526875114Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.526 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 2689903771435529409, \"as_of\": \"2023-03-29T13:37:27.526766Z\", \"key\": \"nodekey:e568ad36a49b4d60323fc0207eded97153e72170c491f74a8942ac38e9dd541f\", \"disco\": \"discokey:34ff526bdd502e84533e42919465a676d8fa64abda3b4f5943a8c9aa6fd0253b\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.065420657}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": [\"127.0.0.1:34848\", \"172.20.0.2:34848\"]}}\n"}
{"Time":"2023-03-29T13:37:27.527145691Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.527 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:426\u003e\t(*Conn).UpdateNodes\tadding node\t{\"node\": {\"id\": 2689903771435529409, \"as_of\": \"2023-03-29T13:37:27.526766Z\", \"key\": \"nodekey:e568ad36a49b4d60323fc0207eded97153e72170c491f74a8942ac38e9dd541f\", \"disco\": \"discokey:34ff526bdd502e84533e42919465a676d8fa64abda3b4f5943a8c9aa6fd0253b\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.065420657}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": [\"127.0.0.1:34848\", \"172.20.0.2:34848\"]}}\n"}
{"Time":"2023-03-29T13:37:27.527368061Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.527 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n"}
{"Time":"2023-03-29T13:37:27.527462668Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.527 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2578\u003e\t(*Conn).SetNetworkMap\t[v1] magicsock: got updated network map; 1 peers\n"}
{"Time":"2023-03-29T13:37:27.527579879Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.527 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:706\u003e\t(*userspaceEngine).maybeReconfigWireguardLocked\twgengine: Reconfig: configuring userspace WireGuard config (with 0/1 peers)\n"}
{"Time":"2023-03-29T13:37:27.52765384Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.527 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n"}
{"Time":"2023-03-29T13:37:27.531819508Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.531 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1705\u003e\t(*Conn).runDerpReader\tmagicsock: derp-1 connected; connGen=1\n"}
{"Time":"2023-03-29T13:37:27.532053362Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.532 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:706\u003e\t(*userspaceEngine).maybeReconfigWireguardLocked\twgengine: Reconfig: configuring userspace WireGuard config (with 1/1 peers)\n"}
{"Time":"2023-03-29T13:37:27.532237504Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.532 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [64qRi] - UAPI: Created\n"}
{"Time":"2023-03-29T13:37:27.5322919Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.532 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [64qRi] - UAPI: Updating endpoint\n"}
{"Time":"2023-03-29T13:37:27.532342787Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.532 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [64qRi] - UAPI: Removing all allowedips\n"}
{"Time":"2023-03-29T13:37:27.532383163Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.532 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [64qRi] - UAPI: Adding allowedip\n"}
{"Time":"2023-03-29T13:37:27.532430032Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.532 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [64qRi] - UAPI: Updating persistent keepalive interval\n"}
{"Time":"2023-03-29T13:37:27.532468962Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.532 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [64qRi] - Starting\n"}
{"Time":"2023-03-29T13:37:27.532522407Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.532 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [64qRi] - Sending handshake initiation\n"}
{"Time":"2023-03-29T13:37:27.53317143Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.533 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1705\u003e\t(*Conn).runDerpReader\tmagicsock: derp-1 connected; connGen=1\n"}
{"Time":"2023-03-29T13:37:27.533306241Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.533 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1705\u003e\t(*Conn).runDerpReader\tmagicsock: derp-1 connected; connGen=1\n"}
{"Time":"2023-03-29T13:37:27.534331952Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.534 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:584\u003e\t(*userspaceEngine).noteRecvActivity\twgengine: idle peer [dv8u3] now active, reconfiguring WireGuard\n"}
{"Time":"2023-03-29T13:37:27.534386848Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.534 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:706\u003e\t(*userspaceEngine).maybeReconfigWireguardLocked\twgengine: Reconfig: configuring userspace WireGuard config (with 1/1 peers)\n"}
{"Time":"2023-03-29T13:37:27.53460606Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.534 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [dv8u3] - UAPI: Created\n"}
{"Time":"2023-03-29T13:37:27.534650003Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.534 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [dv8u3] - UAPI: Updating endpoint\n"}
{"Time":"2023-03-29T13:37:27.53470262Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.534 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [dv8u3] - UAPI: Removing all allowedips\n"}
{"Time":"2023-03-29T13:37:27.534744335Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.534 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [dv8u3] - UAPI: Adding allowedip\n"}
{"Time":"2023-03-29T13:37:27.534797239Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.534 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [dv8u3] - UAPI: Updating persistent keepalive interval\n"}
{"Time":"2023-03-29T13:37:27.534834361Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.534 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [dv8u3] - Starting\n"}
{"Time":"2023-03-29T13:37:27.535064975Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.535 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [dv8u3] - Received handshake initiation\n"}
{"Time":"2023-03-29T13:37:27.535101365Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.535 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [dv8u3] - Sending handshake response\n"}
{"Time":"2023-03-29T13:37:27.535486164Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.535 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1599\u003e\t(*Conn).setPeerLastDerpLocked\t[v1] magicsock: derp route for [dv8u3] set to derp-1 (shared home)\n"}
{"Time":"2023-03-29T13:37:27.535646633Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.535 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:225\u003e\tNewConn.func6\twireguard status\t{\"status\": \"\\u0026{AsOf:2023-03-29 13:37:27.535517538 +0000 UTC m=+4.175124762 Peers:[{TxBytes:92 RxBytes:148 LastHandshake:1970-01-01 00:00:00 +0000 UTC NodeKey:nodekey:76ff2edcacaac78382de86ce14dcf7d1464d8bff76ab14412a1c18ef29aa9370}] LocalAddrs:[{Addr:127.0.0.1:45837 Type:stun} {Addr:172.20.0.2:45837 Type:local}] DERPs:1}\", \"err\": null}\n"}
{"Time":"2023-03-29T13:37:27.535973095Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.535 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1705\u003e\t(*Conn).runDerpReader\tmagicsock: derp-1 connected; connGen=1\n"}
{"Time":"2023-03-29T13:37:27.536642888Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.536 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [64qRi] - Received handshake response\n"}
{"Time":"2023-03-29T13:37:27.536713027Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.536 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:4387\u003e\t(*endpoint).handlePongConnLocked\tmagicsock: disco: node [dv8u3] d:17b5066de479f458 now using 172.20.0.2:59384\n"}
{"Time":"2023-03-29T13:37:27.536917351Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.536 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:225\u003e\tNewConn.func6\twireguard status\t{\"status\": \"\\u0026{AsOf:2023-03-29 13:37:27.536783767 +0000 UTC m=+4.176390982 Peers:[{TxBytes:148 RxBytes:92 LastHandshake:2023-03-29 13:37:27.536635319 +0000 UTC NodeKey:nodekey:eb8a91888d02040ddaee61afa4ae8d03bd6c35ddf3f76edcaa5bde89743e5c24}] LocalAddrs:[{Addr:127.0.0.1:59384 Type:stun} {Addr:172.20.0.2:59384 Type:local}] DERPs:1}\", \"err\": null}\n"}
{"Time":"2023-03-29T13:37:27.53763406Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.537 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1705\u003e\t(*Conn).runDerpReader\tmagicsock: derp-1 connected; connGen=1\n"}
{"Time":"2023-03-29T13:37:27.538314662Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.538 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1254\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:4781:bb82:1540:3954:6a8): sending disco ping to [dv8u3]  ...\n"}
{"Time":"2023-03-29T13:37:27.542696821Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.542 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: [v1] report: udp=true v6=false v6os=false mapvarydest= hair= portmap= v4a=127.0.0.1:35595 derp=1 derpdist=1v4:9ms\n"}
{"Time":"2023-03-29T13:37:27.545658947Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.545 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: [v1] report: udp=true v6=false v6os=false mapvarydest= hair= portmap= v4a=127.0.0.1:57709 derp=1 derpdist=1v4:15ms\n"}
{"Time":"2023-03-29T13:37:27.546526665Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.546 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:246\u003e\tNewConn.func7\tnetinfo callback\t{\"netinfo\": {\"MappingVariesByDestIP\": null, \"HairPinning\": null, \"WorkingIPv6\": false, \"OSHasIPv6\": false, \"WorkingUDP\": true, \"WorkingICMPv4\": false, \"UPnP\": false, \"PMP\": false, \"PCP\": false, \"PreferredDERP\": 1, \"DERPLatency\": {\"1-v4\": 0.014798468}}}\n"}
{"Time":"2023-03-29T13:37:27.546624395Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.546 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 4984932330222696591, \"as_of\": \"2023-03-29T13:37:27.546513Z\", \"key\": \"nodekey:5c74998353a1ae2dd2b8ee0de399386279c035b2b3d95bd245ba4820d0403907\", \"disco\": \"discokey:cc502d2065d3910d659fc206b5c1b833cc8721e43ccd43ed245fc56e1d9d6219\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.014798468}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": [\"127.0.0.1:57709\", \"172.20.0.2:57709\"]}}\n"}
{"Time":"2023-03-29T13:37:27.546899956Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.546 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:426\u003e\t(*Conn).UpdateNodes\tadding node\t{\"node\": {\"id\": 4984932330222696591, \"as_of\": \"2023-03-29T13:37:27.546513Z\", \"key\": \"nodekey:5c74998353a1ae2dd2b8ee0de399386279c035b2b3d95bd245ba4820d0403907\", \"disco\": \"discokey:cc502d2065d3910d659fc206b5c1b833cc8721e43ccd43ed245fc56e1d9d6219\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.014798468}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": [\"127.0.0.1:57709\", \"172.20.0.2:57709\"]}}\n"}
{"Time":"2023-03-29T13:37:27.547131568Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.547 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n"}
{"Time":"2023-03-29T13:37:27.547206358Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.547 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2578\u003e\t(*Conn).SetNetworkMap\t[v1] magicsock: got updated network map; 1 peers\n"}
{"Time":"2023-03-29T13:37:27.547317822Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.547 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n"}
{"Time":"2023-03-29T13:37:27.548159459Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.548 [INFO]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:201\u003e\t(*agent).runLoop\tdisconnected from coderd\n"}
{"Time":"2023-03-29T13:37:27.548281455Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.548 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2736\u003e\t(*Conn).closeDerpLocked\tmagicsock: closing connection to derp-1 (conn-close), age 0s\n"}
{"Time":"2023-03-29T13:37:27.548330701Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.548 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2747\u003e\t(*Conn).logActiveDerpLocked\tmagicsock: 0 active derp conns\n"}
{"Time":"2023-03-29T13:37:27.548397336Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.548 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:31\u003e\tfakeRouter.Close\t[v1] warning: fakeRouter.Close: not implemented.\n"}
{"Time":"2023-03-29T13:37:27.548439957Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.548 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Device closing\n"}
{"Time":"2023-03-29T13:37:27.548494794Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.548 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming receiveDERP - stopped\n"}
{"Time":"2023-03-29T13:37:27.548600181Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.548 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v6 - stopped\n"}
{"Time":"2023-03-29T13:37:27.548645011Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.548 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v4 - stopped\n"}
{"Time":"2023-03-29T13:37:27.548694237Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.548 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [64qRi] - Stopping\n"}
{"Time":"2023-03-29T13:37:27.548765909Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.548 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Device closed\n"}
{"Time":"2023-03-29T13:37:27.548840457Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.548 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:263\u003e\t(*agent).setLifecycle\tset lifecycle state\t{\"state\": \"shutting_down\", \"last\": \"ready\"}\n"}
{"Time":"2023-03-29T13:37:27.548886886Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.548 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:263\u003e\t(*agent).setLifecycle\tset lifecycle state\t{\"state\": \"off\", \"last\": \"shutting_down\"}\n"}
{"Time":"2023-03-29T13:37:27.548943901Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.548 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:229\u003e\t(*agent).reportLifecycleLoop\treporting lifecycle state\t{\"state\": \"off\"}\n"}
{"Time":"2023-03-29T13:37:27.549285716Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.549 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2736\u003e\t(*Conn).closeDerpLocked\tmagicsock: closing connection to derp-1 (conn-close), age 0s\n"}
{"Time":"2023-03-29T13:37:27.549325844Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.549 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2747\u003e\t(*Conn).logActiveDerpLocked\tmagicsock: 0 active derp conns\n"}
{"Time":"2023-03-29T13:37:27.549397271Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.549 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:31\u003e\tfakeRouter.Close\t[v1] warning: fakeRouter.Close: not implemented.\n"}
{"Time":"2023-03-29T13:37:27.549434623Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.549 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Device closing\n"}
{"Time":"2023-03-29T13:37:27.549486154Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.549 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming receiveDERP - stopped\n"}
{"Time":"2023-03-29T13:37:27.549569105Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.549 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1254\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:4781:bb82:1540:3954:6a8): sending disco ping to [dv8u3]  ...\n"}
{"Time":"2023-03-29T13:37:27.54967718Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.549 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v6 - stopped\n"}
{"Time":"2023-03-29T13:37:27.549720977Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.549 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v4 - stopped\n"}
{"Time":"2023-03-29T13:37:27.549763197Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.549 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [dv8u3] - Stopping\n"}
{"Time":"2023-03-29T13:37:27.549846472Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    t.go:81: 2023-03-29 13:37:27.549 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Device closed\n"}
{"Time":"2023-03-29T13:37:27.55012971Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"    stuntest.go:63: STUN server shutdown\n"}
{"Time":"2023-03-29T13:37:27.55014656Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Output":"--- PASS: TestAgent_SessionExec (0.86s)\n"}
{"Time":"2023-03-29T13:37:27.562749894Z","Action":"pass","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionExec","Elapsed":0.86}
{"Time":"2023-03-29T13:37:27.562803065Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.562 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: [v1] report: udp=true v6=false v6os=false mapvarydest= hair= portmap= v4a=127.0.0.1:51993 derp=1 derpdist=1v4:8ms\n"}
{"Time":"2023-03-29T13:37:27.563392796Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.563 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1254\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4): sending disco ping to [XHSZg]  ...\n"}
{"Time":"2023-03-29T13:37:27.563801502Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.563 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:246\u003e\tNewConn.func7\tnetinfo callback\t{\"netinfo\": {\"MappingVariesByDestIP\": null, \"HairPinning\": null, \"WorkingIPv6\": false, \"OSHasIPv6\": false, \"WorkingUDP\": true, \"WorkingICMPv4\": false, \"UPnP\": false, \"PMP\": false, \"PCP\": false, \"PreferredDERP\": 1, \"DERPLatency\": {\"1-v4\": 0.008279639}}}\n"}
{"Time":"2023-03-29T13:37:27.56407208Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.563 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 3791438885238154126, \"as_of\": \"2023-03-29T13:37:27.563776Z\", \"key\": \"nodekey:57880137ed805a8c0fd7b29e835a3cd85d87c32c890d3b0f6ed3fc8620837c00\", \"disco\": \"discokey:9c9ea8075f682592f7a084f08ca03fcad41aea85a44de470f32d96f1067b8a60\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.008279639}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4743:8dab:c855:f633:532/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4743:8dab:c855:f633:532/128\"], \"endpoints\": [\"127.0.0.1:51993\", \"172.20.0.2:51993\"]}}\n"}
{"Time":"2023-03-29T13:37:27.564819316Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.564 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:426\u003e\t(*Conn).UpdateNodes\tadding node\t{\"node\": {\"id\": 3791438885238154126, \"as_of\": \"2023-03-29T13:37:27.563776Z\", \"key\": \"nodekey:57880137ed805a8c0fd7b29e835a3cd85d87c32c890d3b0f6ed3fc8620837c00\", \"disco\": \"discokey:9c9ea8075f682592f7a084f08ca03fcad41aea85a44de470f32d96f1067b8a60\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.008279639}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4743:8dab:c855:f633:532/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4743:8dab:c855:f633:532/128\"], \"endpoints\": [\"127.0.0.1:51993\", \"172.20.0.2:51993\"]}}\n"}
{"Time":"2023-03-29T13:37:27.565650461Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.565 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n"}
{"Time":"2023-03-29T13:37:27.565870529Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.565 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2578\u003e\t(*Conn).SetNetworkMap\t[v1] magicsock: got updated network map; 1 peers\n"}
{"Time":"2023-03-29T13:37:27.566173208Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.566 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n"}
{"Time":"2023-03-29T13:37:27.567328308Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.567 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1599\u003e\t(*Conn).setPeerLastDerpLocked\t[v1] magicsock: derp route for [V4gBN] set to derp-1 (shared home)\n"}
{"Time":"2023-03-29T13:37:27.567693064Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.567 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:4387\u003e\t(*endpoint).handlePongConnLocked\tmagicsock: disco: node [XHSZg] d:cc502d2065d3910d now using 127.0.0.1:57709\n"}
{"Time":"2023-03-29T13:37:27.567994501Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.567 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1254\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4): sending disco ping to [XHSZg]  ...\n"}
{"Time":"2023-03-29T13:37:27.568226707Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.568 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1254\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4): sending disco ping to [XHSZg]  ...\n"}
{"Time":"2023-03-29T13:37:27.56908417Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.568 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:706\u003e\t(*userspaceEngine).maybeReconfigWireguardLocked\twgengine: Reconfig: configuring userspace WireGuard config (with 1/1 peers)\n"}
{"Time":"2023-03-29T13:37:27.569629095Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.569 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [XHSZg] - UAPI: Created\n"}
{"Time":"2023-03-29T13:37:27.569764065Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.569 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [XHSZg] - UAPI: Updating endpoint\n"}
{"Time":"2023-03-29T13:37:27.569899377Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.569 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [XHSZg] - UAPI: Removing all allowedips\n"}
{"Time":"2023-03-29T13:37:27.570050145Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.569 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [XHSZg] - UAPI: Adding allowedip\n"}
{"Time":"2023-03-29T13:37:27.57018252Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.570 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [XHSZg] - UAPI: Updating persistent keepalive interval\n"}
{"Time":"2023-03-29T13:37:27.570302009Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.570 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [XHSZg] - Starting\n"}
{"Time":"2023-03-29T13:37:27.570580746Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.570 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [XHSZg] - Sending keepalive packet\n"}
{"Time":"2023-03-29T13:37:27.570704044Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.570 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [XHSZg] - Sending handshake initiation\n"}
{"Time":"2023-03-29T13:37:27.571723295Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.571 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:584\u003e\t(*userspaceEngine).noteRecvActivity\twgengine: idle peer [V4gBN] now active, reconfiguring WireGuard\n"}
{"Time":"2023-03-29T13:37:27.571754224Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.571 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:706\u003e\t(*userspaceEngine).maybeReconfigWireguardLocked\twgengine: Reconfig: configuring userspace WireGuard config (with 1/1 peers)\n"}
{"Time":"2023-03-29T13:37:27.571960017Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.571 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [V4gBN] - UAPI: Created\n"}
{"Time":"2023-03-29T13:37:27.5720063Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.571 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [V4gBN] - UAPI: Updating endpoint\n"}
{"Time":"2023-03-29T13:37:27.572053253Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.572 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [V4gBN] - UAPI: Removing all allowedips\n"}
{"Time":"2023-03-29T13:37:27.572098018Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.572 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [V4gBN] - UAPI: Adding allowedip\n"}
{"Time":"2023-03-29T13:37:27.572143378Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.572 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [V4gBN] - UAPI: Updating persistent keepalive interval\n"}
{"Time":"2023-03-29T13:37:27.572182651Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.572 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [V4gBN] - Starting\n"}
{"Time":"2023-03-29T13:37:27.572412769Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.572 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [V4gBN] - Received handshake initiation\n"}
{"Time":"2023-03-29T13:37:27.57244765Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.572 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [V4gBN] - Sending handshake response\n"}
{"Time":"2023-03-29T13:37:27.572888396Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.572 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:225\u003e\tNewConn.func6\twireguard status\t{\"status\": \"\\u0026{AsOf:2023-03-29 13:37:27.57276895 +0000 UTC m=+4.212376174 Peers:[{TxBytes:92 RxBytes:148 LastHandshake:1970-01-01 00:00:00 +0000 UTC NodeKey:nodekey:57880137ed805a8c0fd7b29e835a3cd85d87c32c890d3b0f6ed3fc8620837c00}] LocalAddrs:[{Addr:127.0.0.1:57709 Type:stun} {Addr:172.20.0.2:57709 Type:local}] DERPs:1}\", \"err\": null}\n"}
{"Time":"2023-03-29T13:37:27.573422095Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.573 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [XHSZg] - Received handshake response\n"}
{"Time":"2023-03-29T13:37:27.573505226Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.573 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:4387\u003e\t(*endpoint).handlePongConnLocked\tmagicsock: disco: node [V4gBN] d:9c9ea8075f682592 now using 172.20.0.2:51993\n"}
{"Time":"2023-03-29T13:37:27.573673421Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.573 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:225\u003e\tNewConn.func6\twireguard status\t{\"status\": \"\\u0026{AsOf:2023-03-29 13:37:27.573556739 +0000 UTC m=+4.213163954 Peers:[{TxBytes:148 RxBytes:92 LastHandshake:2023-03-29 13:37:27.573422752 +0000 UTC NodeKey:nodekey:5c74998353a1ae2dd2b8ee0de399386279c035b2b3d95bd245ba4820d0403907}] LocalAddrs:[{Addr:127.0.0.1:51993 Type:stun} {Addr:172.20.0.2:51993 Type:local}] DERPs:1}\", \"err\": null}\n"}
{"Time":"2023-03-29T13:37:27.574036177Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.573 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [V4gBN] - Receiving keepalive packet\n"}
{"Time":"2023-03-29T13:37:27.578151189Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.578 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: [v1] report: udp=true v6=false v6os=false mapvarydest= hair= portmap= v4a=127.0.0.1:58992 derp=1 derpdist=1v4:5ms\n"}
{"Time":"2023-03-29T13:37:27.578464111Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.578 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: [v1] report: udp=true v6=false v6os=false mapvarydest= hair= portmap= v4a=127.0.0.1:34848 derp=1 derpdist=1v4:7ms\n"}
{"Time":"2023-03-29T13:37:27.578697845Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.578 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:246\u003e\tNewConn.func7\tnetinfo callback\t{\"netinfo\": {\"MappingVariesByDestIP\": null, \"HairPinning\": null, \"WorkingIPv6\": false, \"OSHasIPv6\": false, \"WorkingUDP\": true, \"WorkingICMPv4\": false, \"UPnP\": false, \"PMP\": false, \"PCP\": false, \"PreferredDERP\": 1, \"DERPLatency\": {\"1-v4\": 0.005291379}}}\n"}
{"Time":"2023-03-29T13:37:27.578788271Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.578 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 6959219245254193963, \"as_of\": \"2023-03-29T13:37:27.578687Z\", \"key\": \"nodekey:e443af25902d57edd4bf0b663849e6cb06390f7b80e6ab179dbd5deabea10e0c\", \"disco\": \"discokey:049e454260a62aa19c35b82499dc35811a5aad44ef612f238808cae15d5c5b55\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.005291379}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4d67:9e5c:abb:531:b55d/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4d67:9e5c:abb:531:b55d/128\"], \"endpoints\": [\"127.0.0.1:58992\", \"172.20.0.2:58992\"]}}\n"}
{"Time":"2023-03-29T13:37:27.579040964Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.578 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:426\u003e\t(*Conn).UpdateNodes\tadding node\t{\"node\": {\"id\": 6959219245254193963, \"as_of\": \"2023-03-29T13:37:27.578687Z\", \"key\": \"nodekey:e443af25902d57edd4bf0b663849e6cb06390f7b80e6ab179dbd5deabea10e0c\", \"disco\": \"discokey:049e454260a62aa19c35b82499dc35811a5aad44ef612f238808cae15d5c5b55\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.005291379}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:4d67:9e5c:abb:531:b55d/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:4d67:9e5c:abb:531:b55d/128\"], \"endpoints\": [\"127.0.0.1:58992\", \"172.20.0.2:58992\"]}}\n"}
{"Time":"2023-03-29T13:37:27.579269912Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.579 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n"}
{"Time":"2023-03-29T13:37:27.579338921Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.579 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2578\u003e\t(*Conn).SetNetworkMap\t[v1] magicsock: got updated network map; 1 peers\n"}
{"Time":"2023-03-29T13:37:27.579486192Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.579 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n"}
{"Time":"2023-03-29T13:37:27.579615554Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.579 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:246\u003e\tNewConn.func7\tnetinfo callback\t{\"netinfo\": {\"MappingVariesByDestIP\": null, \"HairPinning\": null, \"WorkingIPv6\": false, \"OSHasIPv6\": false, \"WorkingUDP\": true, \"WorkingICMPv4\": false, \"UPnP\": false, \"PMP\": false, \"PCP\": false, \"PreferredDERP\": 1, \"DERPLatency\": {\"1-v4\": 0.00675754}}}\n"}
{"Time":"2023-03-29T13:37:27.579715409Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.579 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:642\u003e\t(*Conn).sendNode.func1\tsending node\t{\"node\": {\"id\": 2689903771435529409, \"as_of\": \"2023-03-29T13:37:27.579606Z\", \"key\": \"nodekey:e568ad36a49b4d60323fc0207eded97153e72170c491f74a8942ac38e9dd541f\", \"disco\": \"discokey:34ff526bdd502e84533e42919465a676d8fa64abda3b4f5943a8c9aa6fd0253b\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.00675754}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": [\"127.0.0.1:34848\", \"172.20.0.2:34848\"]}}\n"}
{"Time":"2023-03-29T13:37:27.580015856Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.579 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:426\u003e\t(*Conn).UpdateNodes\tadding node\t{\"node\": {\"id\": 2689903771435529409, \"as_of\": \"2023-03-29T13:37:27.579606Z\", \"key\": \"nodekey:e568ad36a49b4d60323fc0207eded97153e72170c491f74a8942ac38e9dd541f\", \"disco\": \"discokey:34ff526bdd502e84533e42919465a676d8fa64abda3b4f5943a8c9aa6fd0253b\", \"preferred_derp\": 1, \"derp_latency\": {\"1-v4\": 0.00675754}, \"derp_forced_websockets\": {}, \"addresses\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"allowed_ips\": [\"fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4/128\"], \"endpoints\": [\"127.0.0.1:34848\", \"172.20.0.2:34848\"]}}\n"}
{"Time":"2023-03-29T13:37:27.580200069Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.580 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:454\u003e\t(*Conn).UpdateNodes\tupdating network map\n"}
{"Time":"2023-03-29T13:37:27.580263003Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.580 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2578\u003e\t(*Conn).SetNetworkMap\t[v1] magicsock: got updated network map; 1 peers\n"}
{"Time":"2023-03-29T13:37:27.580357379Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.580 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:967\u003e\t(*userspaceEngine).Reconfig\t[v1] wgengine: Reconfig done\n"}
{"Time":"2023-03-29T13:37:27.584912838Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.584 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:836\u003e\t(*agent).init.func2\tssh session returned\t{\"error\": \"exit status 127\"}\n"}
{"Time":"2023-03-29T13:37:27.585085871Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.585 [WARN]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:1119\u003e\t(*agent).handleSSHSession.func2\tfailed to resize tty ...\n"}
{"Time":"2023-03-29T13:37:27.58510059Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"        \"error\": pty: closed:\n"}
{"Time":"2023-03-29T13:37:27.585107445Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"                     github.com/coder/coder/pty.(*otherPty).Close\n"}
{"Time":"2023-03-29T13:37:27.585113814Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"                         /home/mafredri/src/coder/coder/pty/pty_other.go:134\n"}
{"Time":"2023-03-29T13:37:27.585512242Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    ptytest.go:83: 2023-03-29 13:37:27.585: cmd: closing tpty: close\n"}
{"Time":"2023-03-29T13:37:27.585526871Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    ptytest.go:74: 2023-03-29 13:37:27.585: cmd: closing pty\n"}
{"Time":"2023-03-29T13:37:27.58556302Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    ptytest.go:110: 2023-03-29 13:37:27.585: cmd: copy done: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:37:27.585579238Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    ptytest.go:111: 2023-03-29 13:37:27.585: cmd: closing out\n"}
{"Time":"2023-03-29T13:37:27.585599261Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    ptytest.go:113: 2023-03-29 13:37:27.585: cmd: closed out: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:37:27.58566446Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    ptytest.go:76: 2023-03-29 13:37:27.585: cmd: closed pty: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:27.585677492Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    ptytest.go:74: 2023-03-29 13:37:27.585: cmd: closing logw\n"}
{"Time":"2023-03-29T13:37:27.585682384Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    ptytest.go:76: 2023-03-29 13:37:27.585: cmd: closed logw: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:27.585699939Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    ptytest.go:74: 2023-03-29 13:37:27.585: cmd: closing logr\n"}
{"Time":"2023-03-29T13:37:27.58570508Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    ptytest.go:76: 2023-03-29 13:37:27.585: cmd: closed logr: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:27.585722893Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    ptytest.go:102: 2023-03-29 13:37:27.585: cmd: closed tpty\n"}
{"Time":"2023-03-29T13:37:27.585976831Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.585 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2736\u003e\t(*Conn).closeDerpLocked\tmagicsock: closing connection to derp-1 (conn-close), age 0s\n"}
{"Time":"2023-03-29T13:37:27.586016625Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.585 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2747\u003e\t(*Conn).logActiveDerpLocked\tmagicsock: 0 active derp conns\n"}
{"Time":"2023-03-29T13:37:27.586092293Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.586 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:31\u003e\tfakeRouter.Close\t[v1] warning: fakeRouter.Close: not implemented.\n"}
{"Time":"2023-03-29T13:37:27.586133054Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.586 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Device closing\n"}
{"Time":"2023-03-29T13:37:27.586200024Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.586 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming receiveDERP - stopped\n"}
{"Time":"2023-03-29T13:37:27.586329617Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.586 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v6 - stopped\n"}
{"Time":"2023-03-29T13:37:27.586371206Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.586 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v4 - stopped\n"}
{"Time":"2023-03-29T13:37:27.586499602Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.586 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [XHSZg] - Stopping\n"}
{"Time":"2023-03-29T13:37:27.586608393Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.586 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Device closed\n"}
{"Time":"2023-03-29T13:37:27.58672256Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.586 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:263\u003e\t(*agent).setLifecycle\tset lifecycle state\t{\"state\": \"shutting_down\", \"last\": \"ready\"}\n"}
{"Time":"2023-03-29T13:37:27.586761915Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.586 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:263\u003e\t(*agent).setLifecycle\tset lifecycle state\t{\"state\": \"off\", \"last\": \"shutting_down\"}\n"}
{"Time":"2023-03-29T13:37:27.586833422Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.586 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:229\u003e\t(*agent).reportLifecycleLoop\treporting lifecycle state\t{\"state\": \"off\"}\n"}
{"Time":"2023-03-29T13:37:27.5869144Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.586 [INFO]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:201\u003e\t(*agent).runLoop\tdisconnected from coderd\n"}
{"Time":"2023-03-29T13:37:27.58723746Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.587 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2736\u003e\t(*Conn).closeDerpLocked\tmagicsock: closing connection to derp-1 (conn-close), age 0s\n"}
{"Time":"2023-03-29T13:37:27.58728708Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.587 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2747\u003e\t(*Conn).logActiveDerpLocked\tmagicsock: 0 active derp conns\n"}
{"Time":"2023-03-29T13:37:27.587374552Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.587 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v4 - stopped\n"}
{"Time":"2023-03-29T13:37:27.587490464Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.587 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1254\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:4743:8dab:c855:f633:532): sending disco ping to [V4gBN]  ...\n"}
{"Time":"2023-03-29T13:37:27.587617597Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.587 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v6 - stopped\n"}
{"Time":"2023-03-29T13:37:27.598290287Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.598 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/logger.go:98\u003e\tNewConn.func6\tnetcheck: [v1] report: udp=true v6=false v6os=false mapvarydest= hair= portmap= v4a=127.0.0.1:57709 derp=1 derpdist=1v4:3ms\n"}
{"Time":"2023-03-29T13:37:27.598667071Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.598 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:31\u003e\tfakeRouter.Close\t[v1] warning: fakeRouter.Close: not implemented.\n"}
{"Time":"2023-03-29T13:37:27.598735879Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.598 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Device closing\n"}
{"Time":"2023-03-29T13:37:27.598824991Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.598 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming receiveDERP - stopped\n"}
{"Time":"2023-03-29T13:37:27.598917706Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.598 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [V4gBN] - Stopping\n"}
{"Time":"2023-03-29T13:37:27.599077451Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    t.go:81: 2023-03-29 13:37:27.599 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Device closed\n"}
{"Time":"2023-03-29T13:37:27.599268425Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"    stuntest.go:63: STUN server shutdown\n"}
{"Time":"2023-03-29T13:37:27.599297466Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Output":"--- PASS: TestAgent_SessionTTYExitCode (0.88s)\n"}
{"Time":"2023-03-29T13:37:27.624884929Z","Action":"pass","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYExitCode","Elapsed":0.88}
{"Time":"2023-03-29T13:37:27.624923874Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.624 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1254\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4): sending disco ping to [5WitN]  ...\n"}
{"Time":"2023-03-29T13:37:27.625357585Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.625 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1599\u003e\t(*Conn).setPeerLastDerpLocked\t[v1] magicsock: derp route for [5WitN] set to derp-1 (shared home)\n"}
{"Time":"2023-03-29T13:37:27.626340882Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.626 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1599\u003e\t(*Conn).setPeerLastDerpLocked\t[v1] magicsock: derp route for [5EOvJ] set to derp-1 (shared home)\n"}
{"Time":"2023-03-29T13:37:27.626577093Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.626 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:4387\u003e\t(*endpoint).handlePongConnLocked\tmagicsock: disco: node [5WitN] d:34ff526bdd502e84 now using 172.20.0.2:34848\n"}
{"Time":"2023-03-29T13:37:27.626873494Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.626 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1254\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4): sending disco ping to [5WitN]  ...\n"}
{"Time":"2023-03-29T13:37:27.627094808Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.626 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1254\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4): sending disco ping to [5WitN]  ...\n"}
{"Time":"2023-03-29T13:37:27.627846604Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.627 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:706\u003e\t(*userspaceEngine).maybeReconfigWireguardLocked\twgengine: Reconfig: configuring userspace WireGuard config (with 1/1 peers)\n"}
{"Time":"2023-03-29T13:37:27.628133034Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.628 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [5WitN] - UAPI: Created\n"}
{"Time":"2023-03-29T13:37:27.628178673Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.628 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [5WitN] - UAPI: Updating endpoint\n"}
{"Time":"2023-03-29T13:37:27.628231143Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.628 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [5WitN] - UAPI: Removing all allowedips\n"}
{"Time":"2023-03-29T13:37:27.628273924Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.628 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [5WitN] - UAPI: Adding allowedip\n"}
{"Time":"2023-03-29T13:37:27.628326843Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.628 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [5WitN] - UAPI: Updating persistent keepalive interval\n"}
{"Time":"2023-03-29T13:37:27.628365041Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.628 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [5WitN] - Starting\n"}
{"Time":"2023-03-29T13:37:27.628423532Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.628 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [5WitN] - Sending handshake initiation\n"}
{"Time":"2023-03-29T13:37:27.62897967Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.628 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:584\u003e\t(*userspaceEngine).noteRecvActivity\twgengine: idle peer [5EOvJ] now active, reconfiguring WireGuard\n"}
{"Time":"2023-03-29T13:37:27.62904036Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.628 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:706\u003e\t(*userspaceEngine).maybeReconfigWireguardLocked\twgengine: Reconfig: configuring userspace WireGuard config (with 1/1 peers)\n"}
{"Time":"2023-03-29T13:37:27.629335987Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.629 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [5EOvJ] - UAPI: Created\n"}
{"Time":"2023-03-29T13:37:27.629378533Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.629 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [5EOvJ] - UAPI: Updating endpoint\n"}
{"Time":"2023-03-29T13:37:27.629437221Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.629 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [5EOvJ] - UAPI: Removing all allowedips\n"}
{"Time":"2023-03-29T13:37:27.629484031Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.629 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [5EOvJ] - UAPI: Adding allowedip\n"}
{"Time":"2023-03-29T13:37:27.629528288Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.629 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [5EOvJ] - UAPI: Updating persistent keepalive interval\n"}
{"Time":"2023-03-29T13:37:27.629564272Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.629 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [5EOvJ] - Starting\n"}
{"Time":"2023-03-29T13:37:27.629899772Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.629 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [5EOvJ] - Received handshake initiation\n"}
{"Time":"2023-03-29T13:37:27.629937538Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.629 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [5EOvJ] - Sending handshake response\n"}
{"Time":"2023-03-29T13:37:27.630550619Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.630 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:225\u003e\tNewConn.func6\twireguard status\t{\"status\": \"\\u0026{AsOf:2023-03-29 13:37:27.630405833 +0000 UTC m=+4.270013057 Peers:[{TxBytes:92 RxBytes:148 LastHandshake:1970-01-01 00:00:00 +0000 UTC NodeKey:nodekey:e443af25902d57edd4bf0b663849e6cb06390f7b80e6ab179dbd5deabea10e0c}] LocalAddrs:[{Addr:127.0.0.1:34848 Type:stun} {Addr:172.20.0.2:34848 Type:local}] DERPs:1}\", \"err\": null}\n"}
{"Time":"2023-03-29T13:37:27.631298672Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.631 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [5WitN] - Received handshake response\n"}
{"Time":"2023-03-29T13:37:27.631395745Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.631 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:4387\u003e\t(*endpoint).handlePongConnLocked\tmagicsock: disco: node [5EOvJ] d:049e454260a62aa1 now using 172.20.0.2:58992\n"}
{"Time":"2023-03-29T13:37:27.631619667Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.631 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:225\u003e\tNewConn.func6\twireguard status\t{\"status\": \"\\u0026{AsOf:2023-03-29 13:37:27.631481797 +0000 UTC m=+4.271089021 Peers:[{TxBytes:148 RxBytes:92 LastHandshake:2023-03-29 13:37:27.631305354 +0000 UTC NodeKey:nodekey:e568ad36a49b4d60323fc0207eded97153e72170c491f74a8942ac38e9dd541f}] LocalAddrs:[{Addr:127.0.0.1:58992 Type:stun} {Addr:172.20.0.2:58992 Type:local}] DERPs:1}\", \"err\": null}\n"}
{"Time":"2023-03-29T13:37:27.632260898Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.632 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:4387\u003e\t(*endpoint).handlePongConnLocked\tmagicsock: disco: node [5WitN] d:34ff526bdd502e84 now using 127.0.0.1:34848\n"}
{"Time":"2023-03-29T13:37:27.637293337Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.637 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1254\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4): sending disco ping to [Xlu3R]  ...\n"}
{"Time":"2023-03-29T13:37:27.637491883Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.637 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1599\u003e\t(*Conn).setPeerLastDerpLocked\t[v1] magicsock: derp route for [Xlu3R] set to derp-1 (shared home)\n"}
{"Time":"2023-03-29T13:37:27.638607677Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.638 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:1599\u003e\t(*Conn).setPeerLastDerpLocked\t[v1] magicsock: derp route for [uWfac] set to derp-1 (shared home)\n"}
{"Time":"2023-03-29T13:37:27.6387189Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.638 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:4387\u003e\t(*endpoint).handlePongConnLocked\tmagicsock: disco: node [Xlu3R] d:59083cba13956f00 now using 172.20.0.2:35595\n"}
{"Time":"2023-03-29T13:37:27.638794177Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.638 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1254\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4): sending disco ping to [Xlu3R]  ...\n"}
{"Time":"2023-03-29T13:37:27.638932756Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.638 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1254\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:49d6:b259:b7ac:b1b2:48f4): sending disco ping to [Xlu3R]  ...\n"}
{"Time":"2023-03-29T13:37:27.639446274Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.639 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:706\u003e\t(*userspaceEngine).maybeReconfigWireguardLocked\twgengine: Reconfig: configuring userspace WireGuard config (with 1/1 peers)\n"}
{"Time":"2023-03-29T13:37:27.639629272Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.639 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [Xlu3R] - UAPI: Created\n"}
{"Time":"2023-03-29T13:37:27.639676449Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.639 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [Xlu3R] - UAPI: Updating endpoint\n"}
{"Time":"2023-03-29T13:37:27.639710523Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.639 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [Xlu3R] - UAPI: Removing all allowedips\n"}
{"Time":"2023-03-29T13:37:27.639738112Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.639 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [Xlu3R] - UAPI: Adding allowedip\n"}
{"Time":"2023-03-29T13:37:27.639767671Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.639 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [Xlu3R] - UAPI: Updating persistent keepalive interval\n"}
{"Time":"2023-03-29T13:37:27.639792041Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.639 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [Xlu3R] - Starting\n"}
{"Time":"2023-03-29T13:37:27.639832214Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.639 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [Xlu3R] - Sending handshake initiation\n"}
{"Time":"2023-03-29T13:37:27.640359836Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.640 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:584\u003e\t(*userspaceEngine).noteRecvActivity\twgengine: idle peer [uWfac] now active, reconfiguring WireGuard\n"}
{"Time":"2023-03-29T13:37:27.640405214Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.640 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:706\u003e\t(*userspaceEngine).maybeReconfigWireguardLocked\twgengine: Reconfig: configuring userspace WireGuard config (with 1/1 peers)\n"}
{"Time":"2023-03-29T13:37:27.640596752Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.640 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [uWfac] - UAPI: Created\n"}
{"Time":"2023-03-29T13:37:27.64062514Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.640 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [uWfac] - UAPI: Updating endpoint\n"}
{"Time":"2023-03-29T13:37:27.640660936Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.640 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [uWfac] - UAPI: Removing all allowedips\n"}
{"Time":"2023-03-29T13:37:27.640688925Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.640 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [uWfac] - UAPI: Adding allowedip\n"}
{"Time":"2023-03-29T13:37:27.640721293Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.640 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [uWfac] - UAPI: Updating persistent keepalive interval\n"}
{"Time":"2023-03-29T13:37:27.640745599Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.640 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [uWfac] - Starting\n"}
{"Time":"2023-03-29T13:37:27.640964666Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.640 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [uWfac] - Received handshake initiation\n"}
{"Time":"2023-03-29T13:37:27.640987155Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.640 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [uWfac] - Sending handshake response\n"}
{"Time":"2023-03-29T13:37:27.641427103Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.641 [DEBUG]\t(agent.tailnet)\t\u003cgithub.com/coder/coder/tailnet/conn.go:225\u003e\tNewConn.func6\twireguard status\t{\"status\": \"\\u0026{AsOf:2023-03-29 13:37:27.641327519 +0000 UTC m=+4.280934743 Peers:[{TxBytes:92 RxBytes:148 LastHandshake:1970-01-01 00:00:00 +0000 UTC NodeKey:nodekey:b967da7372e7aa1e4ed1fc6f032437dfe7a6e1a0d465cd04c9adf77d69ee2a1e}] LocalAddrs:[{Addr:127.0.0.1:35595 Type:stun} {Addr:172.20.0.2:35595 Type:local}] DERPs:1}\", \"err\": null}\n"}
{"Time":"2023-03-29T13:37:27.642337602Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.642 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [Xlu3R] - Received handshake response\n"}
{"Time":"2023-03-29T13:37:27.642405776Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.642 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:4387\u003e\t(*endpoint).handlePongConnLocked\tmagicsock: disco: node [uWfac] d:c7f1bea9d6ff269c now using 172.20.0.2:51685\n"}
{"Time":"2023-03-29T13:37:27.642612703Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.642 [DEBUG]\t(client)\t\u003cgithub.com/coder/coder/tailnet/conn.go:225\u003e\tNewConn.func6\twireguard status\t{\"status\": \"\\u0026{AsOf:2023-03-29 13:37:27.64250087 +0000 UTC m=+4.282108085 Peers:[{TxBytes:148 RxBytes:92 LastHandshake:2023-03-29 13:37:27.642336966 +0000 UTC NodeKey:nodekey:5e5bb74471183bca142348628f8e5cb431c9b3367f0fe15605a03a1721343e56}] LocalAddrs:[{Addr:127.0.0.1:51685 Type:stun} {Addr:172.20.0.2:51685 Type:local}] DERPs:1}\", \"err\": null}\n"}
{"Time":"2023-03-29T13:37:27.64326778Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.643 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:4387\u003e\t(*endpoint).handlePongConnLocked\tmagicsock: disco: node [Xlu3R] d:59083cba13956f00 now using 127.0.0.1:35595\n"}
{"Time":"2023-03-29T13:37:27.648583243Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    agent_test.go:400: \n"}
{"Time":"2023-03-29T13:37:27.648599647Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"        \tError Trace:\t/home/mafredri/src/coder/coder/agent/agent_test.go:400\n"}
{"Time":"2023-03-29T13:37:27.648605577Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"        \t            \t\t\t\t/home/mafredri/src/coder/coder/agent/agent_test.go:401\n"}
{"Time":"2023-03-29T13:37:27.648610117Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"        \tError:      \t\"\" does not contain \"wazzup\"\n"}
{"Time":"2023-03-29T13:37:27.648616547Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"        \tTest:       \tTestAgent_Session_TTY_FastCommandHasOutput\n"}
{"Time":"2023-03-29T13:37:27.648621257Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"        \tMessages:   \tshould output greeting\n"}
{"Time":"2023-03-29T13:37:27.648628226Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    ptytest.go:83: 2023-03-29 13:37:27.648: cmd: closing tpty: close\n"}
{"Time":"2023-03-29T13:37:27.648632598Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    ptytest.go:74: 2023-03-29 13:37:27.648: cmd: closing pty\n"}
{"Time":"2023-03-29T13:37:27.648669381Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    ptytest.go:110: 2023-03-29 13:37:27.648: cmd: copy done: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:37:27.648676209Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    ptytest.go:111: 2023-03-29 13:37:27.648: cmd: closing out\n"}
{"Time":"2023-03-29T13:37:27.64868565Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    ptytest.go:113: 2023-03-29 13:37:27.648: cmd: closed out: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:37:27.648725455Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    ptytest.go:76: 2023-03-29 13:37:27.648: cmd: closed pty: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:27.648735417Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    ptytest.go:74: 2023-03-29 13:37:27.648: cmd: closing logw\n"}
{"Time":"2023-03-29T13:37:27.648742887Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    ptytest.go:76: 2023-03-29 13:37:27.648: cmd: closed logw: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:27.648755628Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    ptytest.go:74: 2023-03-29 13:37:27.648: cmd: closing logr\n"}
{"Time":"2023-03-29T13:37:27.648763111Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    ptytest.go:76: 2023-03-29 13:37:27.648: cmd: closed logr: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:27.648781723Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    ptytest.go:102: 2023-03-29 13:37:27.648: cmd: closed tpty\n"}
{"Time":"2023-03-29T13:37:27.64898407Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.648 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2736\u003e\t(*Conn).closeDerpLocked\tmagicsock: closing connection to derp-1 (conn-close), age 0s\n"}
{"Time":"2023-03-29T13:37:27.64901264Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.648 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2747\u003e\t(*Conn).logActiveDerpLocked\tmagicsock: 0 active derp conns\n"}
{"Time":"2023-03-29T13:37:27.649065867Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.649 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:31\u003e\tfakeRouter.Close\t[v1] warning: fakeRouter.Close: not implemented.\n"}
{"Time":"2023-03-29T13:37:27.649092046Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.649 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Device closing\n"}
{"Time":"2023-03-29T13:37:27.649138332Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.649 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming receiveDERP - stopped\n"}
{"Time":"2023-03-29T13:37:27.649234264Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.649 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v6 - stopped\n"}
{"Time":"2023-03-29T13:37:27.649272903Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.649 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v4 - stopped\n"}
{"Time":"2023-03-29T13:37:27.649300503Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.649 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [5WitN] - Stopping\n"}
{"Time":"2023-03-29T13:37:27.649378408Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.649 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Device closed\n"}
{"Time":"2023-03-29T13:37:27.649434677Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.649 [INFO]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:201\u003e\t(*agent).runLoop\tdisconnected from coderd\n"}
{"Time":"2023-03-29T13:37:27.649514069Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.649 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:263\u003e\t(*agent).setLifecycle\tset lifecycle state\t{\"state\": \"shutting_down\", \"last\": \"ready\"}\n"}
{"Time":"2023-03-29T13:37:27.649551066Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.649 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:263\u003e\t(*agent).setLifecycle\tset lifecycle state\t{\"state\": \"off\", \"last\": \"shutting_down\"}\n"}
{"Time":"2023-03-29T13:37:27.649591609Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.649 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:229\u003e\t(*agent).reportLifecycleLoop\treporting lifecycle state\t{\"state\": \"off\"}\n"}
{"Time":"2023-03-29T13:37:27.649899898Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.649 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2736\u003e\t(*Conn).closeDerpLocked\tmagicsock: closing connection to derp-1 (conn-close), age 0s\n"}
{"Time":"2023-03-29T13:37:27.649921785Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.649 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2747\u003e\t(*Conn).logActiveDerpLocked\tmagicsock: 0 active derp conns\n"}
{"Time":"2023-03-29T13:37:27.649976578Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.649 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:31\u003e\tfakeRouter.Close\t[v1] warning: fakeRouter.Close: not implemented.\n"}
{"Time":"2023-03-29T13:37:27.650005597Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.649 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Device closing\n"}
{"Time":"2023-03-29T13:37:27.650053977Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.650 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming receiveDERP - stopped\n"}
{"Time":"2023-03-29T13:37:27.650112159Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.650 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1254\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:4d67:9e5c:abb:531:b55d): sending disco ping to [5EOvJ]  ...\n"}
{"Time":"2023-03-29T13:37:27.650212974Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.650 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v6 - stopped\n"}
{"Time":"2023-03-29T13:37:27.650252149Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.650 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v4 - stopped\n"}
{"Time":"2023-03-29T13:37:27.650280078Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.650 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [5EOvJ] - Stopping\n"}
{"Time":"2023-03-29T13:37:27.650357784Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    t.go:81: 2023-03-29 13:37:27.650 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Device closed\n"}
{"Time":"2023-03-29T13:37:27.650618927Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"    stuntest.go:63: STUN server shutdown\n"}
{"Time":"2023-03-29T13:37:27.650634125Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Output":"--- FAIL: TestAgent_Session_TTY_FastCommandHasOutput (0.95s)\n"}
{"Time":"2023-03-29T13:37:27.674793681Z","Action":"fail","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_Session_TTY_FastCommandHasOutput","Elapsed":0.95}
{"Time":"2023-03-29T13:37:27.674817479Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.674 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1254\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:4341:84c0:6b1c:81d1:5805): sending disco ping to [uWfac]  ...\n"}
{"Time":"2023-03-29T13:37:27.675734168Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    agent_test.go:235: 2023-03-29 13:37:27.675: cmd: peeked 1/1 bytes = \"$\"\n"}
{"Time":"2023-03-29T13:37:27.675774216Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    agent_test.go:236: 2023-03-29 13:37:27.675: cmd: stdin: \"echo test\\r\"\n"}
{"Time":"2023-03-29T13:37:27.676191344Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    ptytest.go:121: 2023-03-29 13:37:27.676: cmd: \"$ echo test\"\n"}
{"Time":"2023-03-29T13:37:27.676273026Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    agent_test.go:237: 2023-03-29 13:37:27.676: cmd: matched \"test\" = \"$ echo test\"\n"}
{"Time":"2023-03-29T13:37:27.676308536Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    agent_test.go:238: 2023-03-29 13:37:27.676: cmd: stdin: \"exit\\r\"\n"}
{"Time":"2023-03-29T13:37:27.676642013Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    ptytest.go:121: 2023-03-29 13:37:27.676: cmd: \"exit\"\n"}
{"Time":"2023-03-29T13:37:27.67773278Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    ptytest.go:121: 2023-03-29 13:37:27.677: cmd: \"echo test\\r\"\n"}
{"Time":"2023-03-29T13:37:27.677752958Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    ptytest.go:121: 2023-03-29 13:37:27.677: cmd: \"exit\\r\"\n"}
{"Time":"2023-03-29T13:37:27.67778936Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    ptytest.go:121: 2023-03-29 13:37:27.677: cmd: \"test\\r\"\n"}
{"Time":"2023-03-29T13:37:27.678126711Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    ptytest.go:83: 2023-03-29 13:37:27.678: cmd: closing tpty: close\n"}
{"Time":"2023-03-29T13:37:27.678143306Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    ptytest.go:74: 2023-03-29 13:37:27.678: cmd: closing pty\n"}
{"Time":"2023-03-29T13:37:27.678200486Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    ptytest.go:110: 2023-03-29 13:37:27.678: cmd: copy done: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:37:27.678223246Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    ptytest.go:111: 2023-03-29 13:37:27.678: cmd: closing out\n"}
{"Time":"2023-03-29T13:37:27.678238993Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    ptytest.go:113: 2023-03-29 13:37:27.678: cmd: closed out: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:37:27.678305772Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    ptytest.go:76: 2023-03-29 13:37:27.678: cmd: closed pty: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:27.678359399Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    ptytest.go:74: 2023-03-29 13:37:27.678: cmd: closing logw\n"}
{"Time":"2023-03-29T13:37:27.678373082Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    ptytest.go:76: 2023-03-29 13:37:27.678: cmd: closed logw: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:27.678387877Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    ptytest.go:74: 2023-03-29 13:37:27.678: cmd: closing logr\n"}
{"Time":"2023-03-29T13:37:27.678398091Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    ptytest.go:76: 2023-03-29 13:37:27.678: cmd: closed logr: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:27.678444105Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    ptytest.go:121: 2023-03-29 13:37:27.678: cmd: \"$ \"\n"}
{"Time":"2023-03-29T13:37:27.67847139Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    ptytest.go:102: 2023-03-29 13:37:27.678: cmd: closed tpty\n"}
{"Time":"2023-03-29T13:37:27.67876363Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.678 [INFO]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:201\u003e\t(*agent).runLoop\tdisconnected from coderd\n"}
{"Time":"2023-03-29T13:37:27.678920913Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.678 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2736\u003e\t(*Conn).closeDerpLocked\tmagicsock: closing connection to derp-1 (conn-close), age 0s\n"}
{"Time":"2023-03-29T13:37:27.678978615Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.678 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2747\u003e\t(*Conn).logActiveDerpLocked\tmagicsock: 0 active derp conns\n"}
{"Time":"2023-03-29T13:37:27.679093854Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.679 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:31\u003e\tfakeRouter.Close\t[v1] warning: fakeRouter.Close: not implemented.\n"}
{"Time":"2023-03-29T13:37:27.67916374Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.679 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Device closing\n"}
{"Time":"2023-03-29T13:37:27.679261738Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.679 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming receiveDERP - stopped\n"}
{"Time":"2023-03-29T13:37:27.679498576Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.679 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v6 - stopped\n"}
{"Time":"2023-03-29T13:37:27.679558488Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.679 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v4 - stopped\n"}
{"Time":"2023-03-29T13:37:27.679635937Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.679 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [Xlu3R] - Stopping\n"}
{"Time":"2023-03-29T13:37:27.679772893Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.679 [DEBUG]\t(client.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Device closed\n"}
{"Time":"2023-03-29T13:37:27.679951878Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.679 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:263\u003e\t(*agent).setLifecycle\tset lifecycle state\t{\"state\": \"shutting_down\", \"last\": \"ready\"}\n"}
{"Time":"2023-03-29T13:37:27.680029583Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.679 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:263\u003e\t(*agent).setLifecycle\tset lifecycle state\t{\"state\": \"off\", \"last\": \"shutting_down\"}\n"}
{"Time":"2023-03-29T13:37:27.680147794Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.680 [DEBUG]\t(agent)\t\u003cgithub.com/coder/coder/v2/agent/agent.go:229\u003e\t(*agent).reportLifecycleLoop\treporting lifecycle state\t{\"state\": \"off\"}\n"}
{"Time":"2023-03-29T13:37:27.680759898Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.680 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2736\u003e\t(*Conn).closeDerpLocked\tmagicsock: closing connection to derp-1 (conn-close), age 0s\n"}
{"Time":"2023-03-29T13:37:27.68081749Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.680 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/magicsock/magicsock.go:2747\u003e\t(*Conn).logActiveDerpLocked\tmagicsock: 0 active derp conns\n"}
{"Time":"2023-03-29T13:37:27.680933631Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.680 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/router/router_fake.go:31\u003e\tfakeRouter.Close\t[v1] warning: fakeRouter.Close: not implemented.\n"}
{"Time":"2023-03-29T13:37:27.681009542Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.680 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Device closing\n"}
{"Time":"2023-03-29T13:37:27.681106332Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.681 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming receiveDERP - stopped\n"}
{"Time":"2023-03-29T13:37:27.681249372Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.681 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/userspace.go:1254\u003e\t(*userspaceEngine).Ping\tping(fd7a:115c:a1e0:4341:84c0:6b1c:81d1:5805): sending disco ping to [uWfac]  ...\n"}
{"Time":"2023-03-29T13:37:27.681454735Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.681 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v6 - stopped\n"}
{"Time":"2023-03-29T13:37:27.681540218Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.681 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Routine: receive incoming v4 - stopped\n"}
{"Time":"2023-03-29T13:37:27.68161487Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.681 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] [uWfac] - Stopping\n"}
{"Time":"2023-03-29T13:37:27.681781085Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    t.go:81: 2023-03-29 13:37:27.681 [DEBUG]\t(agent.tailnet.wgengine)\t\u003ctailscale.com/wgengine/wglog/wglog.go:81\u003e\tNewLogger.func1\twg: [v2] Device closed\n"}
{"Time":"2023-03-29T13:37:27.682219467Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"    stuntest.go:63: STUN server shutdown\n"}
{"Time":"2023-03-29T13:37:27.682247508Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Output":"--- PASS: TestAgent_SessionTTYShell (0.94s)\n"}
{"Time":"2023-03-29T13:37:27.682263381Z","Action":"pass","Package":"github.com/coder/coder/v2/agent","Test":"TestAgent_SessionTTYShell","Elapsed":0.94}
{"Time":"2023-03-29T13:37:27.682278577Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Output":"FAIL\n"}
{"Time":"2023-03-29T13:37:27.696326667Z","Action":"output","Package":"github.com/coder/coder/v2/agent","Output":"FAIL\tgithub.com/coder/coder/v2/agent\t4.341s\n"}
{"Time":"2023-03-29T13:37:27.696360103Z","Action":"fail","Package":"github.com/coder/coder/v2/agent","Elapsed":4.341}
{"Time":"2023-03-29T13:37:32.643934624Z","Action":"start","Package":"github.com/coder/coder/v2/cli"}
{"Time":"2023-03-29T13:37:32.790842698Z","Action":"run","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser"}
{"Time":"2023-03-29T13:37:32.79088125Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser","Output":"=== RUN   TestServerCreateAdminUser\n"}
{"Time":"2023-03-29T13:37:32.792730073Z","Action":"run","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/OK"}
{"Time":"2023-03-29T13:37:32.792739078Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/OK","Output":"=== RUN   TestServerCreateAdminUser/OK\n"}
{"Time":"2023-03-29T13:37:32.792745576Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/OK","Output":"=== PAUSE TestServerCreateAdminUser/OK\n"}
{"Time":"2023-03-29T13:37:32.79274818Z","Action":"pause","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/OK"}
{"Time":"2023-03-29T13:37:32.79275173Z","Action":"run","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Env"}
{"Time":"2023-03-29T13:37:32.792754236Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Env","Output":"=== RUN   TestServerCreateAdminUser/Env\n"}
{"Time":"2023-03-29T13:37:32.792759492Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Env","Output":"=== PAUSE TestServerCreateAdminUser/Env\n"}
{"Time":"2023-03-29T13:37:32.792763227Z","Action":"pause","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Env"}
{"Time":"2023-03-29T13:37:32.792767605Z","Action":"run","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Stdin"}
{"Time":"2023-03-29T13:37:32.792772306Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Stdin","Output":"=== RUN   TestServerCreateAdminUser/Stdin\n"}
{"Time":"2023-03-29T13:37:32.792778719Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Stdin","Output":"=== PAUSE TestServerCreateAdminUser/Stdin\n"}
{"Time":"2023-03-29T13:37:32.792781324Z","Action":"pause","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Stdin"}
{"Time":"2023-03-29T13:37:32.792785642Z","Action":"run","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Validates"}
{"Time":"2023-03-29T13:37:32.792788132Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Validates","Output":"=== RUN   TestServerCreateAdminUser/Validates\n"}
{"Time":"2023-03-29T13:37:32.792833072Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Validates","Output":"=== PAUSE TestServerCreateAdminUser/Validates\n"}
{"Time":"2023-03-29T13:37:32.792839332Z","Action":"pause","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Validates"}
{"Time":"2023-03-29T13:37:32.792849881Z","Action":"cont","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/OK"}
{"Time":"2023-03-29T13:37:32.79285277Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/OK","Output":"=== CONT  TestServerCreateAdminUser/OK\n"}
{"Time":"2023-03-29T13:37:32.794003473Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/OK","Output":"    server_createadminuser_test.go:87: \n"}
{"Time":"2023-03-29T13:37:32.794008803Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/OK","Output":"        \tError Trace:\t/home/mafredri/src/coder/coder/cli/server_createadminuser_test.go:87\n"}
{"Time":"2023-03-29T13:37:32.794012119Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/OK","Output":"        \tError:      \tReceived unexpected error:\n"}
{"Time":"2023-03-29T13:37:32.794014928Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/OK","Output":"        \t            \tcould not start resource:\n"}
{"Time":"2023-03-29T13:37:32.794017745Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/OK","Output":"        \t            \t    github.com/coder/coder/v2/coderd/database/postgres.Open\n"}
{"Time":"2023-03-29T13:37:32.794020968Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/OK","Output":"        \t            \t        /home/mafredri/src/coder/coder/coderd/database/postgres/postgres.go:113\n"}
{"Time":"2023-03-29T13:37:32.794025025Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/OK","Output":"        \t            \t  - dial unix /var/run/docker.sock: connect: no such file or directory\n"}
{"Time":"2023-03-29T13:37:32.794028396Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/OK","Output":"        \t            \t    \n"}
{"Time":"2023-03-29T13:37:32.794031694Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/OK","Output":"        \t            \t    github.com/ory/dockertest/v3.(*Pool).RunWithOptions\n"}
{"Time":"2023-03-29T13:37:32.794034996Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/OK","Output":"        \t            \t    \t/home/mafredri/.local/go/pkg/mod/github.com/ory/dockertest/v3@v3.9.1/dockertest.go:413\n"}
{"Time":"2023-03-29T13:37:32.794038934Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/OK","Output":"        \t            \t    github.com/coder/coder/v2/coderd/database/postgres.Open\n"}
{"Time":"2023-03-29T13:37:32.794042353Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/OK","Output":"        \t            \t    \t/home/mafredri/src/coder/coder/coderd/database/postgres/postgres.go:77\n"}
{"Time":"2023-03-29T13:37:32.794045324Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/OK","Output":"        \t            \t    github.com/coder/coder/v2/cli_test.TestServerCreateAdminUser.func2\n"}
{"Time":"2023-03-29T13:37:32.794048191Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/OK","Output":"        \t            \t    \t/home/mafredri/src/coder/coder/cli/server_createadminuser_test.go:86\n"}
{"Time":"2023-03-29T13:37:32.794051013Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/OK","Output":"        \t            \t    testing.tRunner\n"}
{"Time":"2023-03-29T13:37:32.794053771Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/OK","Output":"        \t            \t    \t/usr/local/go/src/testing/testing.go:1576\n"}
{"Time":"2023-03-29T13:37:32.794056664Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/OK","Output":"        \t            \t    runtime.goexit\n"}
{"Time":"2023-03-29T13:37:32.794060193Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/OK","Output":"        \t            \t    \t/usr/local/go/src/runtime/asm_amd64.s:1598\n"}
{"Time":"2023-03-29T13:37:32.79406303Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/OK","Output":"        \tTest:       \tTestServerCreateAdminUser/OK\n"}
{"Time":"2023-03-29T13:37:32.79407275Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/OK","Output":"--- FAIL: TestServerCreateAdminUser/OK (0.00s)\n"}
{"Time":"2023-03-29T13:37:32.794075922Z","Action":"fail","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/OK","Elapsed":0}
{"Time":"2023-03-29T13:37:32.794079842Z","Action":"cont","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Validates"}
{"Time":"2023-03-29T13:37:32.794082413Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Validates","Output":"=== CONT  TestServerCreateAdminUser/Validates\n"}
{"Time":"2023-03-29T13:37:32.795185256Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Validates","Output":"    server_createadminuser_test.go:227: \n"}
{"Time":"2023-03-29T13:37:32.795189907Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Validates","Output":"        \tError Trace:\t/home/mafredri/src/coder/coder/cli/server_createadminuser_test.go:227\n"}
{"Time":"2023-03-29T13:37:32.795192879Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Validates","Output":"        \tError:      \tReceived unexpected error:\n"}
{"Time":"2023-03-29T13:37:32.795195707Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Validates","Output":"        \t            \tcould not start resource:\n"}
{"Time":"2023-03-29T13:37:32.795198569Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Validates","Output":"        \t            \t    github.com/coder/coder/v2/coderd/database/postgres.Open\n"}
{"Time":"2023-03-29T13:37:32.795203724Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Validates","Output":"        \t            \t        /home/mafredri/src/coder/coder/coderd/database/postgres/postgres.go:113\n"}
{"Time":"2023-03-29T13:37:32.795206991Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Validates","Output":"        \t            \t  - dial unix /var/run/docker.sock: connect: no such file or directory\n"}
{"Time":"2023-03-29T13:37:32.795209975Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Validates","Output":"        \t            \t    \n"}
{"Time":"2023-03-29T13:37:32.795212879Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Validates","Output":"        \t            \t    github.com/ory/dockertest/v3.(*Pool).RunWithOptions\n"}
{"Time":"2023-03-29T13:37:32.79521788Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Validates","Output":"        \t            \t    \t/home/mafredri/.local/go/pkg/mod/github.com/ory/dockertest/v3@v3.9.1/dockertest.go:413\n"}
{"Time":"2023-03-29T13:37:32.795223388Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Validates","Output":"        \t            \t    github.com/coder/coder/v2/coderd/database/postgres.Open\n"}
{"Time":"2023-03-29T13:37:32.795228236Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Validates","Output":"        \t            \t    \t/home/mafredri/src/coder/coder/coderd/database/postgres/postgres.go:77\n"}
{"Time":"2023-03-29T13:37:32.795231388Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Validates","Output":"        \t            \t    github.com/coder/coder/v2/cli_test.TestServerCreateAdminUser.func5\n"}
{"Time":"2023-03-29T13:37:32.795234339Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Validates","Output":"        \t            \t    \t/home/mafredri/src/coder/coder/cli/server_createadminuser_test.go:226\n"}
{"Time":"2023-03-29T13:37:32.795237524Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Validates","Output":"        \t            \t    testing.tRunner\n"}
{"Time":"2023-03-29T13:37:32.795240439Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Validates","Output":"        \t            \t    \t/usr/local/go/src/testing/testing.go:1576\n"}
{"Time":"2023-03-29T13:37:32.795243318Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Validates","Output":"        \t            \t    runtime.goexit\n"}
{"Time":"2023-03-29T13:37:32.795246653Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Validates","Output":"        \t            \t    \t/usr/local/go/src/runtime/asm_amd64.s:1598\n"}
{"Time":"2023-03-29T13:37:32.795249486Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Validates","Output":"        \tTest:       \tTestServerCreateAdminUser/Validates\n"}
{"Time":"2023-03-29T13:37:32.795256993Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Validates","Output":"--- FAIL: TestServerCreateAdminUser/Validates (0.00s)\n"}
{"Time":"2023-03-29T13:37:32.795260148Z","Action":"fail","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Validates","Elapsed":0}
{"Time":"2023-03-29T13:37:32.795262834Z","Action":"cont","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Stdin"}
{"Time":"2023-03-29T13:37:32.795265403Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Stdin","Output":"=== CONT  TestServerCreateAdminUser/Stdin\n"}
{"Time":"2023-03-29T13:37:32.795769577Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Stdin","Output":"    server_createadminuser_test.go:187: \n"}
{"Time":"2023-03-29T13:37:32.795774301Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Stdin","Output":"        \tError Trace:\t/home/mafredri/src/coder/coder/cli/server_createadminuser_test.go:187\n"}
{"Time":"2023-03-29T13:37:32.795777433Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Stdin","Output":"        \tError:      \tReceived unexpected error:\n"}
{"Time":"2023-03-29T13:37:32.795782206Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Stdin","Output":"        \t            \tcould not start resource:\n"}
{"Time":"2023-03-29T13:37:32.795787591Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Stdin","Output":"        \t            \t    github.com/coder/coder/v2/coderd/database/postgres.Open\n"}
{"Time":"2023-03-29T13:37:32.795793763Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Stdin","Output":"        \t            \t        /home/mafredri/src/coder/coder/coderd/database/postgres/postgres.go:113\n"}
{"Time":"2023-03-29T13:37:32.795796926Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Stdin","Output":"        \t            \t  - dial unix /var/run/docker.sock: connect: no such file or directory\n"}
{"Time":"2023-03-29T13:37:32.795799647Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Stdin","Output":"        \t            \t    \n"}
{"Time":"2023-03-29T13:37:32.795802415Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Stdin","Output":"        \t            \t    github.com/ory/dockertest/v3.(*Pool).RunWithOptions\n"}
{"Time":"2023-03-29T13:37:32.795805244Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Stdin","Output":"        \t            \t    \t/home/mafredri/.local/go/pkg/mod/github.com/ory/dockertest/v3@v3.9.1/dockertest.go:413\n"}
{"Time":"2023-03-29T13:37:32.795808186Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Stdin","Output":"        \t            \t    github.com/coder/coder/v2/coderd/database/postgres.Open\n"}
{"Time":"2023-03-29T13:37:32.79581094Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Stdin","Output":"        \t            \t    \t/home/mafredri/src/coder/coder/coderd/database/postgres/postgres.go:77\n"}
{"Time":"2023-03-29T13:37:32.795813828Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Stdin","Output":"        \t            \t    github.com/coder/coder/v2/cli_test.TestServerCreateAdminUser.func4\n"}
{"Time":"2023-03-29T13:37:32.79581676Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Stdin","Output":"        \t            \t    \t/home/mafredri/src/coder/coder/cli/server_createadminuser_test.go:186\n"}
{"Time":"2023-03-29T13:37:32.795819484Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Stdin","Output":"        \t            \t    testing.tRunner\n"}
{"Time":"2023-03-29T13:37:32.795822305Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Stdin","Output":"        \t            \t    \t/usr/local/go/src/testing/testing.go:1576\n"}
{"Time":"2023-03-29T13:37:32.795826355Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Stdin","Output":"        \t            \t    runtime.goexit\n"}
{"Time":"2023-03-29T13:37:32.795829152Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Stdin","Output":"        \t            \t    \t/usr/local/go/src/runtime/asm_amd64.s:1598\n"}
{"Time":"2023-03-29T13:37:32.795832058Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Stdin","Output":"        \tTest:       \tTestServerCreateAdminUser/Stdin\n"}
{"Time":"2023-03-29T13:37:32.795846761Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Stdin","Output":"--- FAIL: TestServerCreateAdminUser/Stdin (0.00s)\n"}
{"Time":"2023-03-29T13:37:32.79585045Z","Action":"fail","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Stdin","Elapsed":0}
{"Time":"2023-03-29T13:37:32.795853001Z","Action":"cont","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Env"}
{"Time":"2023-03-29T13:37:32.795855433Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Env","Output":"=== CONT  TestServerCreateAdminUser/Env\n"}
{"Time":"2023-03-29T13:37:32.796339444Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Env","Output":"    server_createadminuser_test.go:153: \n"}
{"Time":"2023-03-29T13:37:32.796345738Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Env","Output":"        \tError Trace:\t/home/mafredri/src/coder/coder/cli/server_createadminuser_test.go:153\n"}
{"Time":"2023-03-29T13:37:32.796349118Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Env","Output":"        \tError:      \tReceived unexpected error:\n"}
{"Time":"2023-03-29T13:37:32.796351839Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Env","Output":"        \t            \tcould not start resource:\n"}
{"Time":"2023-03-29T13:37:32.796354772Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Env","Output":"        \t            \t    github.com/coder/coder/v2/coderd/database/postgres.Open\n"}
{"Time":"2023-03-29T13:37:32.796357683Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Env","Output":"        \t            \t        /home/mafredri/src/coder/coder/coderd/database/postgres/postgres.go:113\n"}
{"Time":"2023-03-29T13:37:32.796360546Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Env","Output":"        \t            \t  - dial unix /var/run/docker.sock: connect: no such file or directory\n"}
{"Time":"2023-03-29T13:37:32.79636323Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Env","Output":"        \t            \t    \n"}
{"Time":"2023-03-29T13:37:32.796366079Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Env","Output":"        \t            \t    github.com/ory/dockertest/v3.(*Pool).RunWithOptions\n"}
{"Time":"2023-03-29T13:37:32.796368987Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Env","Output":"        \t            \t    \t/home/mafredri/.local/go/pkg/mod/github.com/ory/dockertest/v3@v3.9.1/dockertest.go:413\n"}
{"Time":"2023-03-29T13:37:32.79637254Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Env","Output":"        \t            \t    github.com/coder/coder/v2/coderd/database/postgres.Open\n"}
{"Time":"2023-03-29T13:37:32.79637535Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Env","Output":"        \t            \t    \t/home/mafredri/src/coder/coder/coderd/database/postgres/postgres.go:77\n"}
{"Time":"2023-03-29T13:37:32.796378207Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Env","Output":"        \t            \t    github.com/coder/coder/v2/cli_test.TestServerCreateAdminUser.func3\n"}
{"Time":"2023-03-29T13:37:32.796381015Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Env","Output":"        \t            \t    \t/home/mafredri/src/coder/coder/cli/server_createadminuser_test.go:152\n"}
{"Time":"2023-03-29T13:37:32.796383831Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Env","Output":"        \t            \t    testing.tRunner\n"}
{"Time":"2023-03-29T13:37:32.796386544Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Env","Output":"        \t            \t    \t/usr/local/go/src/testing/testing.go:1576\n"}
{"Time":"2023-03-29T13:37:32.796389783Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Env","Output":"        \t            \t    runtime.goexit\n"}
{"Time":"2023-03-29T13:37:32.796394885Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Env","Output":"        \t            \t    \t/usr/local/go/src/runtime/asm_amd64.s:1598\n"}
{"Time":"2023-03-29T13:37:32.796400461Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Env","Output":"        \tTest:       \tTestServerCreateAdminUser/Env\n"}
{"Time":"2023-03-29T13:37:32.796405793Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Env","Output":"--- FAIL: TestServerCreateAdminUser/Env (0.00s)\n"}
{"Time":"2023-03-29T13:37:32.796409018Z","Action":"fail","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser/Env","Elapsed":0}
{"Time":"2023-03-29T13:37:32.796411751Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser","Output":"--- FAIL: TestServerCreateAdminUser (0.00s)\n"}
{"Time":"2023-03-29T13:37:32.796414761Z","Action":"fail","Package":"github.com/coder/coder/v2/cli","Test":"TestServerCreateAdminUser","Elapsed":0}
{"Time":"2023-03-29T13:37:32.796417599Z","Action":"run","Package":"github.com/coder/coder/v2/cli","Test":"TestServer"}
{"Time":"2023-03-29T13:37:32.796420175Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer","Output":"=== RUN   TestServer\n"}
{"Time":"2023-03-29T13:37:32.796424448Z","Action":"run","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Production"}
{"Time":"2023-03-29T13:37:32.796426853Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Production","Output":"=== RUN   TestServer/Production\n"}
{"Time":"2023-03-29T13:37:32.797198344Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Production","Output":"    server_test.go:109: \n"}
{"Time":"2023-03-29T13:37:32.797204437Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Production","Output":"        \tError Trace:\t/home/mafredri/src/coder/coder/cli/server_test.go:109\n"}
{"Time":"2023-03-29T13:37:32.797207471Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Production","Output":"        \tError:      \tReceived unexpected error:\n"}
{"Time":"2023-03-29T13:37:32.797210203Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Production","Output":"        \t            \tcould not start resource:\n"}
{"Time":"2023-03-29T13:37:32.797213234Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Production","Output":"        \t            \t    github.com/coder/coder/v2/coderd/database/postgres.Open\n"}
{"Time":"2023-03-29T13:37:32.797216169Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Production","Output":"        \t            \t        /home/mafredri/src/coder/coder/coderd/database/postgres/postgres.go:113\n"}
{"Time":"2023-03-29T13:37:32.797219132Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Production","Output":"        \t            \t  - dial unix /var/run/docker.sock: connect: no such file or directory\n"}
{"Time":"2023-03-29T13:37:32.797221978Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Production","Output":"        \t            \t    \n"}
{"Time":"2023-03-29T13:37:32.797224749Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Production","Output":"        \t            \t    github.com/ory/dockertest/v3.(*Pool).RunWithOptions\n"}
{"Time":"2023-03-29T13:37:32.797227673Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Production","Output":"        \t            \t    \t/home/mafredri/.local/go/pkg/mod/github.com/ory/dockertest/v3@v3.9.1/dockertest.go:413\n"}
{"Time":"2023-03-29T13:37:32.797230597Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Production","Output":"        \t            \t    github.com/coder/coder/v2/coderd/database/postgres.Open\n"}
{"Time":"2023-03-29T13:37:32.797234931Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Production","Output":"        \t            \t    \t/home/mafredri/src/coder/coder/coderd/database/postgres/postgres.go:77\n"}
{"Time":"2023-03-29T13:37:32.797243511Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Production","Output":"        \t            \t    github.com/coder/coder/v2/cli_test.TestServer.func1\n"}
{"Time":"2023-03-29T13:37:32.797248163Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Production","Output":"        \t            \t    \t/home/mafredri/src/coder/coder/cli/server_test.go:108\n"}
{"Time":"2023-03-29T13:37:32.79725113Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Production","Output":"        \t            \t    testing.tRunner\n"}
{"Time":"2023-03-29T13:37:32.797253983Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Production","Output":"        \t            \t    \t/usr/local/go/src/testing/testing.go:1576\n"}
{"Time":"2023-03-29T13:37:32.797257318Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Production","Output":"        \t            \t    runtime.goexit\n"}
{"Time":"2023-03-29T13:37:32.797261252Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Production","Output":"        \t            \t    \t/usr/local/go/src/runtime/asm_amd64.s:1598\n"}
{"Time":"2023-03-29T13:37:32.797266495Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Production","Output":"        \tTest:       \tTestServer/Production\n"}
{"Time":"2023-03-29T13:37:32.797274297Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Production","Output":"--- FAIL: TestServer/Production (0.00s)\n"}
{"Time":"2023-03-29T13:37:32.797277522Z","Action":"fail","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Production","Elapsed":0}
{"Time":"2023-03-29T13:37:32.797280535Z","Action":"run","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgres"}
{"Time":"2023-03-29T13:37:32.797283019Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgres","Output":"=== RUN   TestServer/BuiltinPostgres\n"}
{"Time":"2023-03-29T13:37:32.797286137Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgres","Output":"=== PAUSE TestServer/BuiltinPostgres\n"}
{"Time":"2023-03-29T13:37:32.797288614Z","Action":"pause","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgres"}
{"Time":"2023-03-29T13:37:32.797294343Z","Action":"run","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgresURL"}
{"Time":"2023-03-29T13:37:32.797296802Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgresURL","Output":"=== RUN   TestServer/BuiltinPostgresURL\n"}
{"Time":"2023-03-29T13:37:32.797299815Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgresURL","Output":"=== PAUSE TestServer/BuiltinPostgresURL\n"}
{"Time":"2023-03-29T13:37:32.797302293Z","Action":"pause","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgresURL"}
{"Time":"2023-03-29T13:37:32.797306699Z","Action":"run","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgresURLRaw"}
{"Time":"2023-03-29T13:37:32.797309403Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgresURLRaw","Output":"=== RUN   TestServer/BuiltinPostgresURLRaw\n"}
{"Time":"2023-03-29T13:37:32.79731478Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgresURLRaw","Output":"=== PAUSE TestServer/BuiltinPostgresURLRaw\n"}
{"Time":"2023-03-29T13:37:32.797319293Z","Action":"pause","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgresURLRaw"}
{"Time":"2023-03-29T13:37:32.797324667Z","Action":"run","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/LocalAccessURL"}
{"Time":"2023-03-29T13:37:32.797328467Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/LocalAccessURL","Output":"=== RUN   TestServer/LocalAccessURL\n"}
{"Time":"2023-03-29T13:37:32.797331431Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/LocalAccessURL","Output":"=== PAUSE TestServer/LocalAccessURL\n"}
{"Time":"2023-03-29T13:37:32.797333768Z","Action":"pause","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/LocalAccessURL"}
{"Time":"2023-03-29T13:37:32.797341584Z","Action":"run","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RemoteAccessURL"}
{"Time":"2023-03-29T13:37:32.797345334Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RemoteAccessURL","Output":"=== RUN   TestServer/RemoteAccessURL\n"}
{"Time":"2023-03-29T13:37:32.79737723Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RemoteAccessURL","Output":"=== PAUSE TestServer/RemoteAccessURL\n"}
{"Time":"2023-03-29T13:37:32.797380853Z","Action":"pause","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RemoteAccessURL"}
{"Time":"2023-03-29T13:37:32.797385247Z","Action":"run","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/NoWarningWithRemoteAccessURL"}
{"Time":"2023-03-29T13:37:32.797387813Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/NoWarningWithRemoteAccessURL","Output":"=== RUN   TestServer/NoWarningWithRemoteAccessURL\n"}
{"Time":"2023-03-29T13:37:32.797405636Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/NoWarningWithRemoteAccessURL","Output":"=== PAUSE TestServer/NoWarningWithRemoteAccessURL\n"}
{"Time":"2023-03-29T13:37:32.797408839Z","Action":"pause","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/NoWarningWithRemoteAccessURL"}
{"Time":"2023-03-29T13:37:32.797426981Z","Action":"run","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/NoSchemeAccessURL"}
{"Time":"2023-03-29T13:37:32.797430439Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/NoSchemeAccessURL","Output":"=== RUN   TestServer/NoSchemeAccessURL\n"}
{"Time":"2023-03-29T13:37:32.797434847Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/NoSchemeAccessURL","Output":"=== PAUSE TestServer/NoSchemeAccessURL\n"}
{"Time":"2023-03-29T13:37:32.797437343Z","Action":"pause","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/NoSchemeAccessURL"}
{"Time":"2023-03-29T13:37:32.797445885Z","Action":"run","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSBadVersion"}
{"Time":"2023-03-29T13:37:32.797448325Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSBadVersion","Output":"=== RUN   TestServer/TLSBadVersion\n"}
{"Time":"2023-03-29T13:37:32.797466497Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSBadVersion","Output":"=== PAUSE TestServer/TLSBadVersion\n"}
{"Time":"2023-03-29T13:37:32.797471662Z","Action":"pause","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSBadVersion"}
{"Time":"2023-03-29T13:37:32.797476114Z","Action":"run","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSBadClientAuth"}
{"Time":"2023-03-29T13:37:32.797478506Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSBadClientAuth","Output":"=== RUN   TestServer/TLSBadClientAuth\n"}
{"Time":"2023-03-29T13:37:32.797495642Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSBadClientAuth","Output":"=== PAUSE TestServer/TLSBadClientAuth\n"}
{"Time":"2023-03-29T13:37:32.79750134Z","Action":"pause","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSBadClientAuth"}
{"Time":"2023-03-29T13:37:32.797508036Z","Action":"run","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSInvalid"}
{"Time":"2023-03-29T13:37:32.797510579Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSInvalid","Output":"=== RUN   TestServer/TLSInvalid\n"}
{"Time":"2023-03-29T13:37:32.797525872Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSInvalid","Output":"=== PAUSE TestServer/TLSInvalid\n"}
{"Time":"2023-03-29T13:37:32.797528971Z","Action":"pause","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSInvalid"}
{"Time":"2023-03-29T13:37:32.797533231Z","Action":"run","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSValid"}
{"Time":"2023-03-29T13:37:32.797535658Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSValid","Output":"=== RUN   TestServer/TLSValid\n"}
{"Time":"2023-03-29T13:37:32.797552494Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSValid","Output":"=== PAUSE TestServer/TLSValid\n"}
{"Time":"2023-03-29T13:37:32.797556455Z","Action":"pause","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSValid"}
{"Time":"2023-03-29T13:37:32.797560606Z","Action":"run","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSValidMultiple"}
{"Time":"2023-03-29T13:37:32.797563041Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSValidMultiple","Output":"=== RUN   TestServer/TLSValidMultiple\n"}
{"Time":"2023-03-29T13:37:32.797579028Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSValidMultiple","Output":"=== PAUSE TestServer/TLSValidMultiple\n"}
{"Time":"2023-03-29T13:37:32.797582214Z","Action":"pause","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSValidMultiple"}
{"Time":"2023-03-29T13:37:32.797586334Z","Action":"run","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSAndHTTP"}
{"Time":"2023-03-29T13:37:32.797588893Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSAndHTTP","Output":"=== RUN   TestServer/TLSAndHTTP\n"}
{"Time":"2023-03-29T13:37:32.797623711Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSAndHTTP","Output":"=== PAUSE TestServer/TLSAndHTTP\n"}
{"Time":"2023-03-29T13:37:32.797626474Z","Action":"pause","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSAndHTTP"}
{"Time":"2023-03-29T13:37:32.797631971Z","Action":"run","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect"}
{"Time":"2023-03-29T13:37:32.797634471Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect","Output":"=== RUN   TestServer/TLSRedirect\n"}
{"Time":"2023-03-29T13:37:32.797650491Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect","Output":"=== PAUSE TestServer/TLSRedirect\n"}
{"Time":"2023-03-29T13:37:32.797654521Z","Action":"pause","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect"}
{"Time":"2023-03-29T13:37:32.797659191Z","Action":"run","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv4"}
{"Time":"2023-03-29T13:37:32.797661727Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv4","Output":"=== RUN   TestServer/CanListenUnspecifiedv4\n"}
{"Time":"2023-03-29T13:37:32.797677081Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv4","Output":"=== PAUSE TestServer/CanListenUnspecifiedv4\n"}
{"Time":"2023-03-29T13:37:32.797679898Z","Action":"pause","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv4"}
{"Time":"2023-03-29T13:37:32.797685398Z","Action":"run","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv6"}
{"Time":"2023-03-29T13:37:32.797688055Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv6","Output":"=== RUN   TestServer/CanListenUnspecifiedv6\n"}
{"Time":"2023-03-29T13:37:32.797706704Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv6","Output":"=== PAUSE TestServer/CanListenUnspecifiedv6\n"}
{"Time":"2023-03-29T13:37:32.797710667Z","Action":"pause","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv6"}
{"Time":"2023-03-29T13:37:32.797714823Z","Action":"run","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/NoAddress"}
{"Time":"2023-03-29T13:37:32.797717235Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/NoAddress","Output":"=== RUN   TestServer/NoAddress\n"}
{"Time":"2023-03-29T13:37:32.797732629Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/NoAddress","Output":"=== PAUSE TestServer/NoAddress\n"}
{"Time":"2023-03-29T13:37:32.797735715Z","Action":"pause","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/NoAddress"}
{"Time":"2023-03-29T13:37:32.797739744Z","Action":"run","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/NoTLSAddress"}
{"Time":"2023-03-29T13:37:32.797742309Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/NoTLSAddress","Output":"=== RUN   TestServer/NoTLSAddress\n"}
{"Time":"2023-03-29T13:37:32.797754504Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/NoTLSAddress","Output":"=== PAUSE TestServer/NoTLSAddress\n"}
{"Time":"2023-03-29T13:37:32.797757251Z","Action":"pause","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/NoTLSAddress"}
{"Time":"2023-03-29T13:37:32.797762513Z","Action":"run","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress"}
{"Time":"2023-03-29T13:37:32.797764941Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress","Output":"=== RUN   TestServer/DeprecatedAddress\n"}
{"Time":"2023-03-29T13:37:32.797791112Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress","Output":"=== PAUSE TestServer/DeprecatedAddress\n"}
{"Time":"2023-03-29T13:37:32.797794156Z","Action":"pause","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress"}
{"Time":"2023-03-29T13:37:32.797818478Z","Action":"run","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Shutdown"}
{"Time":"2023-03-29T13:37:32.797821565Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Shutdown","Output":"=== RUN   TestServer/Shutdown\n"}
{"Time":"2023-03-29T13:37:32.799148069Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Shutdown","Output":"    clitest.go:67: invoking command: coder --global-config /tmp/TestServerShutdown1335635398/002 server --in-memory --http-address :0 --access-url http://example.com --provisioner-daemons 1 --cache-dir /tmp/TestServerShutdown1335635398/001\n"}
{"Time":"2023-03-29T13:37:32.799996289Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Shutdown","Output":"    clitest.go:50: stdout: Started HTTP listener at http://[::]:39611\n"}
{"Time":"2023-03-29T13:37:32.803857037Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Shutdown","Output":"    clitest.go:50: stdout: View the Web UI: http://example.com\n"}
{"Time":"2023-03-29T13:37:32.820483862Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Shutdown","Output":"    clitest.go:50: stdout: ==\u003e Logs will stream in below (press ctrl+c to gracefully exit):\n"}
{"Time":"2023-03-29T13:37:32.840616097Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Shutdown","Output":"    clitest.go:50: stdout: \u001b[1mInterrupt caught, gracefully exiting. Use ctrl+\\ to force quit\u001b[0m\n"}
{"Time":"2023-03-29T13:37:32.840652908Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Shutdown","Output":"    clitest.go:50: stdout: Shutting down API server...\n"}
{"Time":"2023-03-29T13:37:32.840837548Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Shutdown","Output":"    clitest.go:50: stdout: Gracefully shut down API server\n"}
{"Time":"2023-03-29T13:37:32.840996757Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Shutdown","Output":"    clitest.go:50: stdout: Waiting for WebSocket connections to close...\n"}
{"Time":"2023-03-29T13:37:32.841130055Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Shutdown","Output":"    clitest.go:50: stdout: Done waiting for WebSocket connections\n"}
{"Time":"2023-03-29T13:37:32.843139909Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Shutdown","Output":"--- PASS: TestServer/Shutdown (0.05s)\n"}
{"Time":"2023-03-29T13:37:32.843152696Z","Action":"pass","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Shutdown","Elapsed":0.05}
{"Time":"2023-03-29T13:37:32.843181686Z","Action":"run","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TracerNoLeak"}
{"Time":"2023-03-29T13:37:32.843185961Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TracerNoLeak","Output":"=== RUN   TestServer/TracerNoLeak\n"}
{"Time":"2023-03-29T13:37:32.84324137Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TracerNoLeak","Output":"=== PAUSE TestServer/TracerNoLeak\n"}
{"Time":"2023-03-29T13:37:32.843248162Z","Action":"pause","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TracerNoLeak"}
{"Time":"2023-03-29T13:37:32.84327344Z","Action":"run","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Telemetry"}
{"Time":"2023-03-29T13:37:32.843276473Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Telemetry","Output":"=== RUN   TestServer/Telemetry\n"}
{"Time":"2023-03-29T13:37:32.843298273Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Telemetry","Output":"=== PAUSE TestServer/Telemetry\n"}
{"Time":"2023-03-29T13:37:32.843301329Z","Action":"pause","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Telemetry"}
{"Time":"2023-03-29T13:37:32.843328619Z","Action":"run","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus"}
{"Time":"2023-03-29T13:37:32.843332448Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"=== RUN   TestServer/Prometheus\n"}
{"Time":"2023-03-29T13:37:32.843360436Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"=== PAUSE TestServer/Prometheus\n"}
{"Time":"2023-03-29T13:37:32.843363322Z","Action":"pause","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus"}
{"Time":"2023-03-29T13:37:32.843393432Z","Action":"run","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/GitHubOAuth"}
{"Time":"2023-03-29T13:37:32.843398556Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/GitHubOAuth","Output":"=== RUN   TestServer/GitHubOAuth\n"}
{"Time":"2023-03-29T13:37:32.843457011Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/GitHubOAuth","Output":"=== PAUSE TestServer/GitHubOAuth\n"}
{"Time":"2023-03-29T13:37:32.843461316Z","Action":"pause","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/GitHubOAuth"}
{"Time":"2023-03-29T13:37:32.843486876Z","Action":"run","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit"}
{"Time":"2023-03-29T13:37:32.84349017Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit","Output":"=== RUN   TestServer/RateLimit\n"}
{"Time":"2023-03-29T13:37:32.843512128Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit","Output":"=== PAUSE TestServer/RateLimit\n"}
{"Time":"2023-03-29T13:37:32.843515107Z","Action":"pause","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit"}
{"Time":"2023-03-29T13:37:32.843530012Z","Action":"run","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging"}
{"Time":"2023-03-29T13:37:32.843532716Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging","Output":"=== RUN   TestServer/Logging\n"}
{"Time":"2023-03-29T13:37:32.843562048Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging","Output":"=== PAUSE TestServer/Logging\n"}
{"Time":"2023-03-29T13:37:32.843565639Z","Action":"pause","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging"}
{"Time":"2023-03-29T13:37:32.843591297Z","Action":"cont","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgres"}
{"Time":"2023-03-29T13:37:32.843594335Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgres","Output":"=== CONT  TestServer/BuiltinPostgres\n"}
{"Time":"2023-03-29T13:37:32.845419328Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgres","Output":"    clitest.go:67: invoking command: coder --global-config /tmp/TestServerBuiltinPostgres1969653008/002 server --http-address :0 --access-url http://example.com --cache-dir /tmp/TestServerBuiltinPostgres1969653008/001\n"}
{"Time":"2023-03-29T13:37:32.846522439Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgres","Output":"    clitest.go:50: stdout: Using built-in PostgreSQL (/tmp/TestServerBuiltinPostgres1969653008/002/postgres)\n"}
{"Time":"2023-03-29T13:37:32.847782539Z","Action":"cont","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging"}
{"Time":"2023-03-29T13:37:32.847787939Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging","Output":"=== CONT  TestServer/Logging\n"}
{"Time":"2023-03-29T13:37:32.847793104Z","Action":"run","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/CreatesFile"}
{"Time":"2023-03-29T13:37:32.847797472Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/CreatesFile","Output":"=== RUN   TestServer/Logging/CreatesFile\n"}
{"Time":"2023-03-29T13:37:32.847809954Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/CreatesFile","Output":"=== PAUSE TestServer/Logging/CreatesFile\n"}
{"Time":"2023-03-29T13:37:32.847814894Z","Action":"pause","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/CreatesFile"}
{"Time":"2023-03-29T13:37:32.847821007Z","Action":"run","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Human"}
{"Time":"2023-03-29T13:37:32.847823557Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Human","Output":"=== RUN   TestServer/Logging/Human\n"}
{"Time":"2023-03-29T13:37:32.847827971Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Human","Output":"=== PAUSE TestServer/Logging/Human\n"}
{"Time":"2023-03-29T13:37:32.847830572Z","Action":"pause","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Human"}
{"Time":"2023-03-29T13:37:32.847846314Z","Action":"run","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/JSON"}
{"Time":"2023-03-29T13:37:32.847849769Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/JSON","Output":"=== RUN   TestServer/Logging/JSON\n"}
{"Time":"2023-03-29T13:37:32.847855516Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/JSON","Output":"=== PAUSE TestServer/Logging/JSON\n"}
{"Time":"2023-03-29T13:37:32.847858116Z","Action":"pause","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/JSON"}
{"Time":"2023-03-29T13:37:32.847862399Z","Action":"run","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver"}
{"Time":"2023-03-29T13:37:32.847864919Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver","Output":"=== RUN   TestServer/Logging/Stackdriver\n"}
{"Time":"2023-03-29T13:37:32.847879575Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver","Output":"=== PAUSE TestServer/Logging/Stackdriver\n"}
{"Time":"2023-03-29T13:37:32.847884818Z","Action":"pause","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver"}
{"Time":"2023-03-29T13:37:32.847891759Z","Action":"run","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Multiple"}
{"Time":"2023-03-29T13:37:32.847894796Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Multiple","Output":"=== RUN   TestServer/Logging/Multiple\n"}
{"Time":"2023-03-29T13:37:32.847919729Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Multiple","Output":"=== PAUSE TestServer/Logging/Multiple\n"}
{"Time":"2023-03-29T13:37:32.847922769Z","Action":"pause","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Multiple"}
{"Time":"2023-03-29T13:37:32.847927067Z","Action":"cont","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/CreatesFile"}
{"Time":"2023-03-29T13:37:32.847929708Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/CreatesFile","Output":"=== CONT  TestServer/Logging/CreatesFile\n"}
{"Time":"2023-03-29T13:37:32.848797106Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/CreatesFile","Output":"    clitest.go:67: invoking command: coder --global-config /tmp/TestServerLoggingCreatesFile2700332728/002 server --verbose --in-memory --http-address :0 --access-url http://example.com --log-human /tmp/TestServerLoggingCreatesFile2700332728/001/coder-logging-test-2490710733\n"}
{"Time":"2023-03-29T13:37:32.849489309Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/CreatesFile","Output":"    clitest.go:50: stdout: Started HTTP listener at http://[::]:46231\n"}
{"Time":"2023-03-29T13:37:32.849644524Z","Action":"cont","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit"}
{"Time":"2023-03-29T13:37:32.849648931Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit","Output":"=== CONT  TestServer/RateLimit\n"}
{"Time":"2023-03-29T13:37:32.849654201Z","Action":"run","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit/Default"}
{"Time":"2023-03-29T13:37:32.849658963Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit/Default","Output":"=== RUN   TestServer/RateLimit/Default\n"}
{"Time":"2023-03-29T13:37:32.849673813Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit/Default","Output":"=== PAUSE TestServer/RateLimit/Default\n"}
{"Time":"2023-03-29T13:37:32.849676949Z","Action":"pause","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit/Default"}
{"Time":"2023-03-29T13:37:32.849690853Z","Action":"run","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit/Changed"}
{"Time":"2023-03-29T13:37:32.849694907Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit/Changed","Output":"=== RUN   TestServer/RateLimit/Changed\n"}
{"Time":"2023-03-29T13:37:32.849700056Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit/Changed","Output":"=== PAUSE TestServer/RateLimit/Changed\n"}
{"Time":"2023-03-29T13:37:32.849702697Z","Action":"pause","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit/Changed"}
{"Time":"2023-03-29T13:37:32.849706931Z","Action":"run","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit/Disabled"}
{"Time":"2023-03-29T13:37:32.849709323Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit/Disabled","Output":"=== RUN   TestServer/RateLimit/Disabled\n"}
{"Time":"2023-03-29T13:37:32.849713561Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit/Disabled","Output":"=== PAUSE TestServer/RateLimit/Disabled\n"}
{"Time":"2023-03-29T13:37:32.849716093Z","Action":"pause","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit/Disabled"}
{"Time":"2023-03-29T13:37:32.849720102Z","Action":"cont","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit/Default"}
{"Time":"2023-03-29T13:37:32.849722411Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit/Default","Output":"=== CONT  TestServer/RateLimit/Default\n"}
{"Time":"2023-03-29T13:37:32.850485755Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit/Default","Output":"    clitest.go:67: invoking command: coder --global-config /tmp/TestServerRateLimitDefault1881118474/001 server --in-memory --http-address :0 --access-url http://example.com\n"}
{"Time":"2023-03-29T13:37:32.851011889Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit/Default","Output":"    clitest.go:50: stdout: Started HTTP listener at http://[::]:38127\n"}
{"Time":"2023-03-29T13:37:32.851175576Z","Action":"cont","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/GitHubOAuth"}
{"Time":"2023-03-29T13:37:32.851180015Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/GitHubOAuth","Output":"=== CONT  TestServer/GitHubOAuth\n"}
{"Time":"2023-03-29T13:37:32.851983967Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/GitHubOAuth","Output":"    clitest.go:67: invoking command: coder --global-config /tmp/TestServerGitHubOAuth724593823/001 server --in-memory --http-address :0 --access-url http://example.com --oauth2-github-allow-everyone --oauth2-github-client-id fake --oauth2-github-client-secret fake --oauth2-github-enterprise-base-url https://fake-url.com\n"}
{"Time":"2023-03-29T13:37:32.852521551Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/GitHubOAuth","Output":"    clitest.go:50: stdout: Started HTTP listener at http://[::]:33313\n"}
{"Time":"2023-03-29T13:37:32.852663734Z","Action":"cont","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus"}
{"Time":"2023-03-29T13:37:32.852668353Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"=== CONT  TestServer/Prometheus\n"}
{"Time":"2023-03-29T13:37:32.853556318Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    clitest.go:67: invoking command: coder --global-config /tmp/TestServerPrometheus2050744846/002 server --in-memory --http-address :0 --access-url http://example.com --provisioner-daemons 1 --prometheus-enable --prometheus-address :37569 --cache-dir /tmp/TestServerPrometheus2050744846/001\n"}
{"Time":"2023-03-29T13:37:32.854050354Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    clitest.go:50: stdout: Started HTTP listener at http://[::]:38381\n"}
{"Time":"2023-03-29T13:37:32.854220704Z","Action":"cont","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Telemetry"}
{"Time":"2023-03-29T13:37:32.854225473Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Telemetry","Output":"=== CONT  TestServer/Telemetry\n"}
{"Time":"2023-03-29T13:37:32.855113604Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Telemetry","Output":"    clitest.go:67: invoking command: coder --global-config /tmp/TestServerTelemetry4206954660/002 server --in-memory --http-address :0 --access-url http://example.com --telemetry --telemetry-url http://127.0.0.1:46805 --cache-dir /tmp/TestServerTelemetry4206954660/001\n"}
{"Time":"2023-03-29T13:37:32.855607409Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Telemetry","Output":"    clitest.go:50: stdout: Started HTTP listener at http://[::]:46851\n"}
{"Time":"2023-03-29T13:37:32.855759635Z","Action":"cont","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TracerNoLeak"}
{"Time":"2023-03-29T13:37:32.85576445Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TracerNoLeak","Output":"=== CONT  TestServer/TracerNoLeak\n"}
{"Time":"2023-03-29T13:37:32.856575033Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TracerNoLeak","Output":"    clitest.go:67: invoking command: coder --global-config /tmp/TestServerTracerNoLeak127485117/002 server --in-memory --http-address :0 --access-url http://example.com --trace=true --cache-dir /tmp/TestServerTracerNoLeak127485117/001\n"}
{"Time":"2023-03-29T13:37:32.859583574Z","Action":"cont","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress"}
{"Time":"2023-03-29T13:37:32.859590623Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress","Output":"=== CONT  TestServer/DeprecatedAddress\n"}
{"Time":"2023-03-29T13:37:32.859595635Z","Action":"run","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/HTTP"}
{"Time":"2023-03-29T13:37:32.859598523Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/HTTP","Output":"=== RUN   TestServer/DeprecatedAddress/HTTP\n"}
{"Time":"2023-03-29T13:37:32.860822192Z","Action":"cont","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/NoTLSAddress"}
{"Time":"2023-03-29T13:37:32.860826569Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/NoTLSAddress","Output":"=== CONT  TestServer/NoTLSAddress\n"}
{"Time":"2023-03-29T13:37:32.861575027Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/NoTLSAddress","Output":"    clitest.go:67: invoking command: coder --global-config /tmp/TestServerNoTLSAddress2369561878/001 server --in-memory --tls-enable=true --tls-address \n"}
{"Time":"2023-03-29T13:37:32.861999568Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/NoTLSAddress","Output":"--- PASS: TestServer/NoTLSAddress (0.00s)\n"}
{"Time":"2023-03-29T13:37:32.863329199Z","Action":"pass","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/NoTLSAddress","Elapsed":0}
{"Time":"2023-03-29T13:37:32.863344025Z","Action":"cont","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/NoAddress"}
{"Time":"2023-03-29T13:37:32.863348554Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/NoAddress","Output":"=== CONT  TestServer/NoAddress\n"}
{"Time":"2023-03-29T13:37:32.864056037Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/NoAddress","Output":"    clitest.go:67: invoking command: coder --global-config /tmp/TestServerNoAddress3728350894/001 server --in-memory --http-address :80 --tls-enable=false --tls-address \n"}
{"Time":"2023-03-29T13:37:32.864465815Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/NoAddress","Output":"--- PASS: TestServer/NoAddress (0.00s)\n"}
{"Time":"2023-03-29T13:37:32.865769258Z","Action":"pass","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/NoAddress","Elapsed":0}
{"Time":"2023-03-29T13:37:32.865776672Z","Action":"cont","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv6"}
{"Time":"2023-03-29T13:37:32.865779982Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv6","Output":"=== CONT  TestServer/CanListenUnspecifiedv6\n"}
{"Time":"2023-03-29T13:37:32.866452947Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv6","Output":"    clitest.go:67: invoking command: coder --global-config /tmp/TestServerCanListenUnspecifiedv63515544106/001 server --in-memory --http-address [::]:0 --access-url http://example.com\n"}
{"Time":"2023-03-29T13:37:32.86788654Z","Action":"cont","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv4"}
{"Time":"2023-03-29T13:37:32.867892077Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv4","Output":"=== CONT  TestServer/CanListenUnspecifiedv4\n"}
{"Time":"2023-03-29T13:37:32.868594181Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv4","Output":"    clitest.go:67: invoking command: coder --global-config /tmp/TestServerCanListenUnspecifiedv43698525072/001 server --in-memory --http-address 0.0.0.0:0 --access-url http://example.com\n"}
{"Time":"2023-03-29T13:37:32.87981375Z","Action":"cont","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect"}
{"Time":"2023-03-29T13:37:32.879832688Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect","Output":"=== CONT  TestServer/TLSRedirect\n"}
{"Time":"2023-03-29T13:37:32.879840427Z","Action":"run","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/OK"}
{"Time":"2023-03-29T13:37:32.879843579Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/OK","Output":"=== RUN   TestServer/TLSRedirect/OK\n"}
{"Time":"2023-03-29T13:37:32.879847493Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/OK","Output":"=== PAUSE TestServer/TLSRedirect/OK\n"}
{"Time":"2023-03-29T13:37:32.879850007Z","Action":"pause","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/OK"}
{"Time":"2023-03-29T13:37:32.879858919Z","Action":"run","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirect"}
{"Time":"2023-03-29T13:37:32.87986153Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirect","Output":"=== RUN   TestServer/TLSRedirect/NoRedirect\n"}
{"Time":"2023-03-29T13:37:32.879868217Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirect","Output":"=== PAUSE TestServer/TLSRedirect/NoRedirect\n"}
{"Time":"2023-03-29T13:37:32.879871031Z","Action":"pause","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirect"}
{"Time":"2023-03-29T13:37:32.879882319Z","Action":"run","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirectWithWildcard"}
{"Time":"2023-03-29T13:37:32.879885302Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirectWithWildcard","Output":"=== RUN   TestServer/TLSRedirect/NoRedirectWithWildcard\n"}
{"Time":"2023-03-29T13:37:32.879901278Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirectWithWildcard","Output":"=== PAUSE TestServer/TLSRedirect/NoRedirectWithWildcard\n"}
{"Time":"2023-03-29T13:37:32.879904339Z","Action":"pause","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirectWithWildcard"}
{"Time":"2023-03-29T13:37:32.879917091Z","Action":"run","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoTLSListener"}
{"Time":"2023-03-29T13:37:32.879920112Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoTLSListener","Output":"=== RUN   TestServer/TLSRedirect/NoTLSListener\n"}
{"Time":"2023-03-29T13:37:32.881385273Z","Action":"cont","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSAndHTTP"}
{"Time":"2023-03-29T13:37:32.881392419Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSAndHTTP","Output":"=== CONT  TestServer/TLSAndHTTP\n"}
{"Time":"2023-03-29T13:37:32.883317205Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSAndHTTP","Output":"    clitest.go:67: invoking command: coder --global-config /tmp/TestServerTLSAndHTTP1565439063/003 server --in-memory --http-address :0 --access-url https://example.com --tls-enable --tls-redirect-http-to-https=false --tls-address :0 --tls-cert-file /tmp/TestServerTLSAndHTTP1565439063/001/1540336369 --tls-key-file /tmp/TestServerTLSAndHTTP1565439063/001/228555534 --cache-dir /tmp/TestServerTLSAndHTTP1565439063/002\n"}
{"Time":"2023-03-29T13:37:32.886709195Z","Action":"cont","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSValidMultiple"}
{"Time":"2023-03-29T13:37:32.886720913Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSValidMultiple","Output":"=== CONT  TestServer/TLSValidMultiple\n"}
{"Time":"2023-03-29T13:37:32.888650035Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSValidMultiple","Output":"    clitest.go:67: invoking command: coder --global-config /tmp/TestServerTLSValidMultiple3077156975/004 server --in-memory --http-address  --access-url https://example.com --tls-enable --tls-address :0 --tls-cert-file /tmp/TestServerTLSValidMultiple3077156975/001/3448842699 --tls-key-file /tmp/TestServerTLSValidMultiple3077156975/001/3382329005 --tls-cert-file /tmp/TestServerTLSValidMultiple3077156975/002/610618616 --tls-key-file /tmp/TestServerTLSValidMultiple3077156975/002/3728409390 --cache-dir /tmp/TestServerTLSValidMultiple3077156975/003\n"}
{"Time":"2023-03-29T13:37:32.889032741Z","Action":"cont","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSValid"}
{"Time":"2023-03-29T13:37:32.889040091Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSValid","Output":"=== CONT  TestServer/TLSValid\n"}
{"Time":"2023-03-29T13:37:32.890094104Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSValid","Output":"    clitest.go:67: invoking command: coder --global-config /tmp/TestServerTLSValid1911968885/003 server --in-memory --http-address  --access-url https://example.com --tls-enable --tls-address :0 --tls-cert-file /tmp/TestServerTLSValid1911968885/001/91528180 --tls-key-file /tmp/TestServerTLSValid1911968885/001/1223943395 --cache-dir /tmp/TestServerTLSValid1911968885/002\n"}
{"Time":"2023-03-29T13:37:32.890711151Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSValid","Output":"    clitest.go:50: stdout: Started TLS/HTTPS listener at https://[::]:38747\n"}
{"Time":"2023-03-29T13:37:32.893432414Z","Action":"cont","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSInvalid"}
{"Time":"2023-03-29T13:37:32.893439577Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSInvalid","Output":"=== CONT  TestServer/TLSInvalid\n"}
{"Time":"2023-03-29T13:37:32.895534213Z","Action":"run","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSInvalid/NoCert"}
{"Time":"2023-03-29T13:37:32.895540534Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSInvalid/NoCert","Output":"=== RUN   TestServer/TLSInvalid/NoCert\n"}
{"Time":"2023-03-29T13:37:32.895545749Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSInvalid/NoCert","Output":"=== PAUSE TestServer/TLSInvalid/NoCert\n"}
{"Time":"2023-03-29T13:37:32.895548511Z","Action":"pause","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSInvalid/NoCert"}
{"Time":"2023-03-29T13:37:32.89555469Z","Action":"run","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSInvalid/NoKey"}
{"Time":"2023-03-29T13:37:32.895559989Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSInvalid/NoKey","Output":"=== RUN   TestServer/TLSInvalid/NoKey\n"}
{"Time":"2023-03-29T13:37:32.895564748Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSInvalid/NoKey","Output":"=== PAUSE TestServer/TLSInvalid/NoKey\n"}
{"Time":"2023-03-29T13:37:32.895567562Z","Action":"pause","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSInvalid/NoKey"}
{"Time":"2023-03-29T13:37:32.895571832Z","Action":"run","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSInvalid/MismatchedCount"}
{"Time":"2023-03-29T13:37:32.895574371Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSInvalid/MismatchedCount","Output":"=== RUN   TestServer/TLSInvalid/MismatchedCount\n"}
{"Time":"2023-03-29T13:37:32.895579082Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSInvalid/MismatchedCount","Output":"=== PAUSE TestServer/TLSInvalid/MismatchedCount\n"}
{"Time":"2023-03-29T13:37:32.895581688Z","Action":"pause","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSInvalid/MismatchedCount"}
{"Time":"2023-03-29T13:37:32.895586121Z","Action":"run","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSInvalid/MismatchedCertAndKey"}
{"Time":"2023-03-29T13:37:32.895588766Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSInvalid/MismatchedCertAndKey","Output":"=== RUN   TestServer/TLSInvalid/MismatchedCertAndKey\n"}
{"Time":"2023-03-29T13:37:32.895593302Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSInvalid/MismatchedCertAndKey","Output":"=== PAUSE TestServer/TLSInvalid/MismatchedCertAndKey\n"}
{"Time":"2023-03-29T13:37:32.895595797Z","Action":"pause","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSInvalid/MismatchedCertAndKey"}
{"Time":"2023-03-29T13:37:32.895598709Z","Action":"cont","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSInvalid/NoCert"}
{"Time":"2023-03-29T13:37:32.895601189Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSInvalid/NoCert","Output":"=== CONT  TestServer/TLSInvalid/NoCert\n"}
{"Time":"2023-03-29T13:37:32.896383938Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSInvalid/NoCert","Output":"    clitest.go:67: invoking command: coder --global-config /tmp/TestServerTLSInvalidNoCert155343146/002 server --in-memory --http-address :0 --access-url http://example.com --cache-dir /tmp/TestServerTLSInvalidNoCert155343146/001 --tls-enable --tls-key-file /tmp/TestServerTLSInvalid1610620518/001/1816833089\n"}
{"Time":"2023-03-29T13:37:32.896712838Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSInvalid/NoCert","Output":"    clitest.go:50: stdout: Started HTTP listener at http://[::]:41521\n"}
{"Time":"2023-03-29T13:37:32.896777738Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSInvalid/NoCert","Output":"    server_test.go:344: args: [server --in-memory --http-address :0 --access-url http://example.com --cache-dir /tmp/TestServerTLSInvalidNoCert155343146/001 --tls-enable --tls-key-file /tmp/TestServerTLSInvalid1610620518/001/1816833089]\n"}
{"Time":"2023-03-29T13:37:32.896926023Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSInvalid/NoCert","Output":"--- PASS: TestServer/TLSInvalid/NoCert (0.00s)\n"}
{"Time":"2023-03-29T13:37:32.896932574Z","Action":"pass","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSInvalid/NoCert","Elapsed":0}
{"Time":"2023-03-29T13:37:32.896936656Z","Action":"cont","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSBadClientAuth"}
{"Time":"2023-03-29T13:37:32.896939204Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSBadClientAuth","Output":"=== CONT  TestServer/TLSBadClientAuth\n"}
{"Time":"2023-03-29T13:37:32.897600801Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSBadClientAuth","Output":"    clitest.go:67: invoking command: coder --global-config /tmp/TestServerTLSBadClientAuth2976087810/002 server --in-memory --http-address  --access-url http://example.com --tls-enable --tls-address :0 --tls-client-auth something --cache-dir /tmp/TestServerTLSBadClientAuth2976087810/001\n"}
{"Time":"2023-03-29T13:37:32.897994004Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSBadClientAuth","Output":"--- PASS: TestServer/TLSBadClientAuth (0.00s)\n"}
{"Time":"2023-03-29T13:37:32.898002196Z","Action":"pass","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSBadClientAuth","Elapsed":0}
{"Time":"2023-03-29T13:37:32.89800515Z","Action":"cont","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSBadVersion"}
{"Time":"2023-03-29T13:37:32.898008134Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSBadVersion","Output":"=== CONT  TestServer/TLSBadVersion\n"}
{"Time":"2023-03-29T13:37:32.898635976Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSBadVersion","Output":"    clitest.go:67: invoking command: coder --global-config /tmp/TestServerTLSBadVersion2460276843/002 server --in-memory --http-address  --access-url http://example.com --tls-enable --tls-address :0 --tls-min-version tls9 --cache-dir /tmp/TestServerTLSBadVersion2460276843/001\n"}
{"Time":"2023-03-29T13:37:32.899017393Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSBadVersion","Output":"--- PASS: TestServer/TLSBadVersion (0.00s)\n"}
{"Time":"2023-03-29T13:37:32.899025249Z","Action":"pass","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSBadVersion","Elapsed":0}
{"Time":"2023-03-29T13:37:32.899028489Z","Action":"cont","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/NoSchemeAccessURL"}
{"Time":"2023-03-29T13:37:32.899031117Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/NoSchemeAccessURL","Output":"=== CONT  TestServer/NoSchemeAccessURL\n"}
{"Time":"2023-03-29T13:37:32.899735022Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/NoSchemeAccessURL","Output":"    clitest.go:67: invoking command: coder --global-config /tmp/TestServerNoSchemeAccessURL3227162288/002 server --in-memory --http-address :0 --access-url google.com --cache-dir /tmp/TestServerNoSchemeAccessURL3227162288/001\n"}
{"Time":"2023-03-29T13:37:32.900078052Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/NoSchemeAccessURL","Output":"--- PASS: TestServer/NoSchemeAccessURL (0.00s)\n"}
{"Time":"2023-03-29T13:37:32.900133291Z","Action":"pass","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/NoSchemeAccessURL","Elapsed":0}
{"Time":"2023-03-29T13:37:32.900136928Z","Action":"cont","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/NoWarningWithRemoteAccessURL"}
{"Time":"2023-03-29T13:37:32.900139387Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/NoWarningWithRemoteAccessURL","Output":"=== CONT  TestServer/NoWarningWithRemoteAccessURL\n"}
{"Time":"2023-03-29T13:37:32.900802695Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/NoWarningWithRemoteAccessURL","Output":"    clitest.go:67: invoking command: coder --global-config /tmp/TestServerNoWarningWithRemoteAccessURL2261451002/002 server --in-memory --http-address :0 --access-url https://google.com --cache-dir /tmp/TestServerNoWarningWithRemoteAccessURL2261451002/001\n"}
{"Time":"2023-03-29T13:37:32.901428258Z","Action":"cont","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RemoteAccessURL"}
{"Time":"2023-03-29T13:37:32.901434866Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RemoteAccessURL","Output":"=== CONT  TestServer/RemoteAccessURL\n"}
{"Time":"2023-03-29T13:37:32.902088159Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RemoteAccessURL","Output":"    clitest.go:67: invoking command: coder --global-config /tmp/TestServerRemoteAccessURL917985260/002 server --in-memory --http-address :0 --access-url https://foobarbaz.mydomain --cache-dir /tmp/TestServerRemoteAccessURL917985260/001\n"}
{"Time":"2023-03-29T13:37:32.904875871Z","Action":"cont","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/LocalAccessURL"}
{"Time":"2023-03-29T13:37:32.90488445Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/LocalAccessURL","Output":"=== CONT  TestServer/LocalAccessURL\n"}
{"Time":"2023-03-29T13:37:32.905523425Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/LocalAccessURL","Output":"    clitest.go:67: invoking command: coder --global-config /tmp/TestServerLocalAccessURL3554694382/002 server --in-memory --http-address :0 --access-url http://localhost:3000/ --cache-dir /tmp/TestServerLocalAccessURL3554694382/001\n"}
{"Time":"2023-03-29T13:37:32.909203431Z","Action":"cont","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgresURLRaw"}
{"Time":"2023-03-29T13:37:32.909214782Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgresURLRaw","Output":"=== CONT  TestServer/BuiltinPostgresURLRaw\n"}
{"Time":"2023-03-29T13:37:32.90987112Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgresURLRaw","Output":"    clitest.go:67: invoking command: coder --global-config /tmp/TestServerBuiltinPostgresURLRaw2301128244/001 server postgres-builtin-url --raw-url\n"}
{"Time":"2023-03-29T13:37:32.910387857Z","Action":"cont","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgresURL"}
{"Time":"2023-03-29T13:37:32.910393909Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgresURL","Output":"=== CONT  TestServer/BuiltinPostgresURL\n"}
{"Time":"2023-03-29T13:37:32.911031385Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgresURL","Output":"    clitest.go:67: invoking command: coder --global-config /tmp/TestServerBuiltinPostgresURL2022412164/001 server postgres-builtin-url\n"}
{"Time":"2023-03-29T13:37:32.911696996Z","Action":"cont","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Multiple"}
{"Time":"2023-03-29T13:37:32.911705024Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Multiple","Output":"=== CONT  TestServer/Logging/Multiple\n"}
{"Time":"2023-03-29T13:37:32.912435053Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Multiple","Output":"    clitest.go:67: invoking command: coder --global-config /tmp/TestServerLoggingMultiple1018156314/004 server --verbose --in-memory --http-address :0 --access-url http://example.com --log-human /tmp/TestServerLoggingMultiple1018156314/001/coder-logging-test-2240709984 --log-json /tmp/TestServerLoggingMultiple1018156314/002/coder-logging-test-2164710923 --log-stackdriver /tmp/TestServerLoggingMultiple1018156314/003/coder-logging-test-3557853095\n"}
{"Time":"2023-03-29T13:37:32.912514796Z","Action":"cont","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver"}
{"Time":"2023-03-29T13:37:32.912520309Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver","Output":"=== CONT  TestServer/Logging/Stackdriver\n"}
{"Time":"2023-03-29T13:37:32.913204422Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver","Output":"    clitest.go:67: invoking command: coder --global-config /tmp/TestServerLoggingStackdriver1654522233/002 server --verbose --in-memory --http-address :0 --access-url http://example.com --log-stackdriver /tmp/TestServerLoggingStackdriver1654522233/001/coder-logging-test-3531177805\n"}
{"Time":"2023-03-29T13:37:32.913286393Z","Action":"cont","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/JSON"}
{"Time":"2023-03-29T13:37:32.913292549Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/JSON","Output":"=== CONT  TestServer/Logging/JSON\n"}
{"Time":"2023-03-29T13:37:32.913937207Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/JSON","Output":"    clitest.go:67: invoking command: coder --global-config /tmp/TestServerLoggingJSON1509288451/002 server --verbose --in-memory --http-address :0 --access-url http://example.com --log-json /tmp/TestServerLoggingJSON1509288451/001/coder-logging-test-115410787\n"}
{"Time":"2023-03-29T13:37:32.913982029Z","Action":"cont","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Human"}
{"Time":"2023-03-29T13:37:32.913985447Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Human","Output":"=== CONT  TestServer/Logging/Human\n"}
{"Time":"2023-03-29T13:37:32.914664441Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Human","Output":"    clitest.go:67: invoking command: coder --global-config /tmp/TestServerLoggingHuman1910502850/002 server --verbose --in-memory --http-address :0 --access-url http://example.com --log-human /tmp/TestServerLoggingHuman1910502850/001/coder-logging-test-2040592756\n"}
{"Time":"2023-03-29T13:37:32.915201663Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Human","Output":"    clitest.go:50: stdout: Started HTTP listener at http://[::]:42891\n"}
{"Time":"2023-03-29T13:37:32.915334373Z","Action":"cont","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit/Disabled"}
{"Time":"2023-03-29T13:37:32.91533902Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit/Disabled","Output":"=== CONT  TestServer/RateLimit/Disabled\n"}
{"Time":"2023-03-29T13:37:32.915962046Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit/Disabled","Output":"    clitest.go:67: invoking command: coder --global-config /tmp/TestServerRateLimitDisabled1912095220/001 server --in-memory --http-address :0 --access-url http://example.com --api-rate-limit -1\n"}
{"Time":"2023-03-29T13:37:32.916390927Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit/Disabled","Output":"    clitest.go:50: stdout: Started HTTP listener at http://[::]:35065\n"}
{"Time":"2023-03-29T13:37:32.917528951Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TracerNoLeak","Output":"    clitest.go:50: stderr: 2023-03-29 13:37:32.917 [WARN]\t\u003cgithub.com/coder/coder/v2/cli/server.go:310\u003e\t(*RootCmd).Server.func1\tstart telemetry exporter ...\n"}
{"Time":"2023-03-29T13:37:32.917535354Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TracerNoLeak","Output":"          \"error\": default exporter:\n"}
{"Time":"2023-03-29T13:37:32.917538568Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TracerNoLeak","Output":"                       github.com/coder/coder/v2/coderd/tracing.TracerProvider\n"}
{"Time":"2023-03-29T13:37:32.917543903Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TracerNoLeak","Output":"                           /home/mafredri/src/coder/coder/coderd/tracing/exporter.go:51\n"}
{"Time":"2023-03-29T13:37:32.917547458Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TracerNoLeak","Output":"                     - create otlp exporter:\n"}
{"Time":"2023-03-29T13:37:32.917552386Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TracerNoLeak","Output":"                       github.com/coder/coder/v2/coderd/tracing.DefaultExporter\n"}
{"Time":"2023-03-29T13:37:32.917557328Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TracerNoLeak","Output":"                           /home/mafredri/src/coder/coder/coderd/tracing/exporter.go:109\n"}
{"Time":"2023-03-29T13:37:32.917562236Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TracerNoLeak","Output":"                     - context canceled\n"}
{"Time":"2023-03-29T13:37:32.917576569Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TracerNoLeak","Output":"    clitest.go:50: stdout: Started HTTP listener at http://[::]:42093\n"}
{"Time":"2023-03-29T13:37:32.917619611Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TracerNoLeak","Output":"    clitest.go:50: stderr: \u001b[1;mWARN: \u001b[0mThe access URL  \u001b[;mhttp://example.com\u001b[0m  could not be resolved, this may cause unexpected problems when creating workspaces. Generate a unique *.try.coder.app URL by not specifying an access URL.\n"}
{"Time":"2023-03-29T13:37:32.917642615Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TracerNoLeak","Output":"    clitest.go:50: stdout: View the Web UI: http://example.com\n"}
{"Time":"2023-03-29T13:37:32.920130044Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TracerNoLeak","Output":"    clitest.go:50: stdout: ==\u003e Logs will stream in below (press ctrl+c to gracefully exit):\n"}
{"Time":"2023-03-29T13:37:32.920155751Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TracerNoLeak","Output":"    clitest.go:50: stdout: \u001b[1mInterrupt caught, gracefully exiting. Use ctrl+\\ to force quit\u001b[0m\n"}
{"Time":"2023-03-29T13:37:32.920178993Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TracerNoLeak","Output":"    clitest.go:50: stdout: Shutting down API server...\n"}
{"Time":"2023-03-29T13:37:32.920200709Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TracerNoLeak","Output":"    clitest.go:50: stdout: Gracefully shut down API server\n"}
{"Time":"2023-03-29T13:37:32.920249847Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/HTTP","Output":"=== PAUSE TestServer/DeprecatedAddress/HTTP\n"}
{"Time":"2023-03-29T13:37:32.92025399Z","Action":"pause","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/HTTP"}
{"Time":"2023-03-29T13:37:32.920269801Z","Action":"run","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/TLS"}
{"Time":"2023-03-29T13:37:32.920274896Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/TLS","Output":"=== RUN   TestServer/DeprecatedAddress/TLS\n"}
{"Time":"2023-03-29T13:37:32.920279669Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/TLS","Output":"=== PAUSE TestServer/DeprecatedAddress/TLS\n"}
{"Time":"2023-03-29T13:37:32.920282197Z","Action":"pause","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/TLS"}
{"Time":"2023-03-29T13:37:32.92570047Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoTLSListener","Output":"=== PAUSE TestServer/TLSRedirect/NoTLSListener\n"}
{"Time":"2023-03-29T13:37:32.92570807Z","Action":"pause","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoTLSListener"}
{"Time":"2023-03-29T13:37:32.925713393Z","Action":"run","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoHTTPListener"}
{"Time":"2023-03-29T13:37:32.92571595Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoHTTPListener","Output":"=== RUN   TestServer/TLSRedirect/NoHTTPListener\n"}
{"Time":"2023-03-29T13:37:32.925720434Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoHTTPListener","Output":"=== PAUSE TestServer/TLSRedirect/NoHTTPListener\n"}
{"Time":"2023-03-29T13:37:32.925722986Z","Action":"pause","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoHTTPListener"}
{"Time":"2023-03-29T13:37:32.92724642Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/NoWarningWithRemoteAccessURL","Output":"    ptytest.go:121: 2023-03-29 13:37:32.927: cmd: \"Started HTTP listener at http://[::]:39671\"\n"}
{"Time":"2023-03-29T13:37:32.927965116Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/LocalAccessURL","Output":"    ptytest.go:121: 2023-03-29 13:37:32.927: cmd: \"Started HTTP listener at http://[::]:42445\"\n"}
{"Time":"2023-03-29T13:37:32.928006932Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/LocalAccessURL","Output":"    ptytest.go:121: 2023-03-29 13:37:32.927: cmd: \"WARN: The access URL  http://localhost:3000/  isn't externally reachable, this may cause unexpected problems when creating workspaces. Generate a unique *.try.coder.app URL by not specifying an access URL.\"\n"}
{"Time":"2023-03-29T13:37:32.928023919Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/LocalAccessURL","Output":"    ptytest.go:121: 2023-03-29 13:37:32.928: cmd: \"                                                                                                                                                                                                       \\r\"\n"}
{"Time":"2023-03-29T13:37:32.92802928Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/LocalAccessURL","Output":"    ptytest.go:121: 2023-03-29 13:37:32.928: cmd: \"                                       \"\n"}
{"Time":"2023-03-29T13:37:32.928042009Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/LocalAccessURL","Output":"    ptytest.go:121: 2023-03-29 13:37:32.928: cmd: \"View the Web UI: http://localhost:3000/\\r\"\n"}
{"Time":"2023-03-29T13:37:32.928061275Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/LocalAccessURL","Output":"    ptytest.go:121: 2023-03-29 13:37:32.928: cmd: \"                                                                \"\n"}
{"Time":"2023-03-29T13:37:32.928077795Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/LocalAccessURL","Output":"    ptytest.go:121: 2023-03-29 13:37:32.928: cmd: \"==\u003e Logs will stream in below (press ctrl+c to gracefully exit):\\r\"\n"}
{"Time":"2023-03-29T13:37:32.973554406Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgresURLRaw","Output":"    server_test.go:173: 2023-03-29 13:37:32.973: cmd: matched newline = \"postgres://coder@localhost:43211/coder?sslmode=disable\u0026password=Xha7Pt7Mcuv0IlkT\"\n"}
{"Time":"2023-03-29T13:37:32.973585539Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgresURLRaw","Output":"    ptytest.go:83: 2023-03-29 13:37:32.973: cmd: closing tpty: close\n"}
{"Time":"2023-03-29T13:37:32.973602051Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgresURLRaw","Output":"    ptytest.go:74: 2023-03-29 13:37:32.973: cmd: closing pty\n"}
{"Time":"2023-03-29T13:37:32.973653232Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgresURLRaw","Output":"    ptytest.go:110: 2023-03-29 13:37:32.973: cmd: copy done: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:37:32.973673734Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgresURLRaw","Output":"    ptytest.go:111: 2023-03-29 13:37:32.973: cmd: closing out\n"}
{"Time":"2023-03-29T13:37:32.973681952Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgresURLRaw","Output":"    ptytest.go:113: 2023-03-29 13:37:32.973: cmd: closed out: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:37:32.973745487Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgresURLRaw","Output":"    ptytest.go:76: 2023-03-29 13:37:32.973: cmd: closed pty: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:32.973755467Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgresURLRaw","Output":"    ptytest.go:74: 2023-03-29 13:37:32.973: cmd: closing logw\n"}
{"Time":"2023-03-29T13:37:32.973767632Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgresURLRaw","Output":"    ptytest.go:76: 2023-03-29 13:37:32.973: cmd: closed logw: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:32.973787295Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgresURLRaw","Output":"    ptytest.go:74: 2023-03-29 13:37:32.973: cmd: closing logr\n"}
{"Time":"2023-03-29T13:37:32.973794335Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgresURLRaw","Output":"    ptytest.go:76: 2023-03-29 13:37:32.973: cmd: closed logr: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:32.973897477Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgresURL","Output":"    server_test.go:161: 2023-03-29 13:37:32.973: cmd: matched \"psql\" = \" psql\"\n"}
{"Time":"2023-03-29T13:37:32.973911816Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgresURL","Output":"    ptytest.go:83: 2023-03-29 13:37:32.973: cmd: closing tpty: close\n"}
{"Time":"2023-03-29T13:37:32.97395369Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgresURL","Output":"    ptytest.go:74: 2023-03-29 13:37:32.973: cmd: closing pty\n"}
{"Time":"2023-03-29T13:37:32.973977688Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgresURL","Output":"    ptytest.go:110: 2023-03-29 13:37:32.973: cmd: copy done: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:37:32.973985059Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgresURL","Output":"    ptytest.go:111: 2023-03-29 13:37:32.973: cmd: closing out\n"}
{"Time":"2023-03-29T13:37:32.974011895Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgresURL","Output":"    ptytest.go:113: 2023-03-29 13:37:32.973: cmd: closed out: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:37:32.974059281Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgresURL","Output":"    ptytest.go:76: 2023-03-29 13:37:32.974: cmd: closed pty: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:32.974066822Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgresURL","Output":"    ptytest.go:74: 2023-03-29 13:37:32.974: cmd: closing logw\n"}
{"Time":"2023-03-29T13:37:32.974073474Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgresURL","Output":"    ptytest.go:76: 2023-03-29 13:37:32.974: cmd: closed logw: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:32.974079891Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgresURL","Output":"    ptytest.go:74: 2023-03-29 13:37:32.974: cmd: closing logr\n"}
{"Time":"2023-03-29T13:37:32.974111815Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgresURL","Output":"    ptytest.go:76: 2023-03-29 13:37:32.974: cmd: closed logr: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:32.976190183Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/JSON","Output":"    clitest.go:50: stderr: 2023-03-29 13:37:32.976 [DEBUG]\t\u003cgithub.com/coder/coder/v2/cli/server.go:260\u003e\t(*RootCmd).Server.func1\tstarted debug logging\n"}
{"Time":"2023-03-29T13:37:32.976499482Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/JSON","Output":"    clitest.go:50: stdout: Started HTTP listener at http://[::]:45725\n"}
{"Time":"2023-03-29T13:37:32.977583615Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TracerNoLeak","Output":"    clitest.go:50: stdout: Waiting for WebSocket connections to close...\n"}
{"Time":"2023-03-29T13:37:32.977594677Z","Action":"cont","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit/Changed"}
{"Time":"2023-03-29T13:37:32.977598319Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit/Changed","Output":"=== CONT  TestServer/RateLimit/Changed\n"}
{"Time":"2023-03-29T13:37:32.979536902Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit/Changed","Output":"    clitest.go:67: invoking command: coder --global-config /tmp/TestServerRateLimitChanged2140102987/001 server --in-memory --http-address :0 --access-url http://example.com --api-rate-limit 100\n"}
{"Time":"2023-03-29T13:37:32.981248381Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit/Changed","Output":"    clitest.go:50: stdout: Started HTTP listener at http://[::]:45133\n"}
{"Time":"2023-03-29T13:37:32.982290561Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv4","Output":"    ptytest.go:121: 2023-03-29 13:37:32.982: cmd: \"Started HTTP listener at http://0.0.0.0:37181\"\n"}
{"Time":"2023-03-29T13:37:32.982961159Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv4","Output":"    server_test.go:718: 2023-03-29 13:37:32.982: cmd: matched \"Started HTTP listener\" = \"Started HTTP listener\"\n"}
{"Time":"2023-03-29T13:37:32.983105329Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv4","Output":"    server_test.go:719: 2023-03-29 13:37:32.983: cmd: matched \"http://0.0.0.0:\" = \" at http://0.0.0.0:\"\n"}
{"Time":"2023-03-29T13:37:32.983250515Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv6","Output":"    ptytest.go:121: 2023-03-29 13:37:32.983: cmd: \"Started HTTP listener at http://[::]:33561\"\n"}
{"Time":"2023-03-29T13:37:32.984671213Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv6","Output":"    server_test.go:738: 2023-03-29 13:37:32.983: cmd: matched \"Started HTTP listener at\" = \"Started HTTP listener at\"\n"}
{"Time":"2023-03-29T13:37:32.984712571Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv6","Output":"    server_test.go:739: 2023-03-29 13:37:32.983: cmd: matched \"http://[::]:\" = \" http://[::]:\"\n"}
{"Time":"2023-03-29T13:37:32.984733017Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Telemetry","Output":"    clitest.go:50: stdout: View the Web UI: http://example.com\n"}
{"Time":"2023-03-29T13:37:32.996108891Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Telemetry","Output":"    clitest.go:50: stdout: ==\u003e Logs will stream in below (press ctrl+c to gracefully exit):\n"}
{"Time":"2023-03-29T13:37:32.996314264Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    clitest.go:50: stdout: View the Web UI: http://example.com\n"}
{"Time":"2023-03-29T13:37:33.00125555Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    clitest.go:50: stdout: ==\u003e Logs will stream in below (press ctrl+c to gracefully exit):\n"}
{"Time":"2023-03-29T13:37:33.001437292Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/GitHubOAuth","Output":"    clitest.go:50: stdout: View the Web UI: http://example.com\n"}
{"Time":"2023-03-29T13:37:33.002347544Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit/Default","Output":"    clitest.go:50: stdout: View the Web UI: http://example.com\n"}
{"Time":"2023-03-29T13:37:33.00471704Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit/Default","Output":"    clitest.go:50: stdout: ==\u003e Logs will stream in below (press ctrl+c to gracefully exit):\n"}
{"Time":"2023-03-29T13:37:33.004816922Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/CreatesFile","Output":"    clitest.go:50: stderr: \u001b[1;mWARN: \u001b[0mThe access URL  \u001b[;mhttp://example.com\u001b[0m  could not be resolved, this may cause unexpected problems when creating workspaces. Generate a unique *.try.coder.app URL by not specifying an access URL.\n"}
{"Time":"2023-03-29T13:37:33.004828798Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/CreatesFile","Output":"    clitest.go:50: stdout: View the Web UI: http://example.com\n"}
{"Time":"2023-03-29T13:37:33.008304441Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/CreatesFile","Output":"    clitest.go:50: stdout: ==\u003e Logs will stream in below (press ctrl+c to gracefully exit):\n"}
{"Time":"2023-03-29T13:37:33.008334151Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/CreatesFile","Output":"    clitest.go:50: stdout: \u001b[1mInterrupt caught, gracefully exiting. Use ctrl+\\ to force quit\u001b[0m\n"}
{"Time":"2023-03-29T13:37:33.008344183Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/CreatesFile","Output":"    clitest.go:50: stdout: Shutting down API server...\n"}
{"Time":"2023-03-29T13:37:33.008351448Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/CreatesFile","Output":"    clitest.go:50: stdout: Gracefully shut down API server\n"}
{"Time":"2023-03-29T13:37:33.008401366Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/CreatesFile","Output":"    clitest.go:50: stdout: Shutting down provisioner daemon 3...\n"}
{"Time":"2023-03-29T13:37:33.00852168Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/CreatesFile","Output":"    clitest.go:50: stdout: Gracefully shut down provisioner daemon 3\n"}
{"Time":"2023-03-29T13:37:33.008558749Z","Action":"cont","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/HTTP"}
{"Time":"2023-03-29T13:37:33.008572474Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/HTTP","Output":"=== CONT  TestServer/DeprecatedAddress/HTTP\n"}
{"Time":"2023-03-29T13:37:33.009297224Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/HTTP","Output":"    clitest.go:67: invoking command: coder --global-config /tmp/TestServerDeprecatedAddressHTTP1174595269/002 server --in-memory --address :0 --access-url http://example.com --cache-dir /tmp/TestServerDeprecatedAddressHTTP1174595269/001\n"}
{"Time":"2023-03-29T13:37:33.011200842Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/LocalAccessURL","Output":"    server_test.go:196: 2023-03-29 13:37:33.011: cmd: matched \"this may cause unexpected problems when creating workspaces\" = \"Started HTTP listener at http://[::]:42445\\r\\nWARN: The access URL  http://localhost:3000/  isn't externally reachable, this may cause unexpected problems when creating workspaces\"\n"}
{"Time":"2023-03-29T13:37:33.011256139Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/LocalAccessURL","Output":"    server_test.go:197: 2023-03-29 13:37:33.011: cmd: matched \"View the Web UI: http://localhost:3000/\" = \". Generate a unique *.try.coder.app URL by not specifying an access URL.\\r\\n                                                                                                                                                                                                       \\r\\r\\n                                       \\r\\nView the Web UI: http://localhost:3000/\"\n"}
{"Time":"2023-03-29T13:37:33.011375838Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/JSON","Output":"    clitest.go:50: stderr: \u001b[1;mWARN: \u001b[0mThe access URL  \u001b[;mhttp://example.com\u001b[0m  could not be resolved, this may cause unexpected problems when creating workspaces. Generate a unique *.try.coder.app URL by not specifying an access URL.\n"}
{"Time":"2023-03-29T13:37:33.01139606Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/JSON","Output":"    clitest.go:50: stdout: View the Web UI: http://example.com\n"}
{"Time":"2023-03-29T13:37:33.013674142Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/JSON","Output":"    clitest.go:50: stdout: ==\u003e Logs will stream in below (press ctrl+c to gracefully exit):\n"}
{"Time":"2023-03-29T13:37:33.013696745Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/JSON","Output":"    clitest.go:50: stdout: \u001b[1mInterrupt caught, gracefully exiting. Use ctrl+\\ to force quit\u001b[0m\n"}
{"Time":"2023-03-29T13:37:33.013708678Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/JSON","Output":"    clitest.go:50: stdout: Shutting down API server...\n"}
{"Time":"2023-03-29T13:37:33.013717271Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/JSON","Output":"    clitest.go:50: stdout: Gracefully shut down API server\n"}
{"Time":"2023-03-29T13:37:33.013756177Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/JSON","Output":"    clitest.go:50: stdout: Shutting down provisioner daemon 3...\n"}
{"Time":"2023-03-29T13:37:33.013807024Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/JSON","Output":"    clitest.go:50: stderr: 2023-03-29 13:37:33.013 [DEBUG]\t\u003cgithub.com/coder/coder/provisionerd/provisionerd.go:553\u003e\t(*Server).closeWithError\tclosing server with error\t{\"error\": null}\n"}
{"Time":"2023-03-29T13:37:33.013861318Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/JSON","Output":"    clitest.go:50: stdout: Gracefully shut down provisioner daemon 3\n"}
{"Time":"2023-03-29T13:37:33.014354405Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgresURLRaw","Output":"    ptytest.go:121: 2023-03-29 13:37:33.014: cmd: \"postgres://coder@localhost:43211/coder?sslmode=disable\u0026password=Xha7Pt7Mcuv0IlkT\"\n"}
{"Time":"2023-03-29T13:37:33.014367303Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgresURLRaw","Output":"    ptytest.go:102: 2023-03-29 13:37:33.014: cmd: closed tpty\n"}
{"Time":"2023-03-29T13:37:33.01451535Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgresURLRaw","Output":"--- PASS: TestServer/BuiltinPostgresURLRaw (0.11s)\n"}
{"Time":"2023-03-29T13:37:33.014525519Z","Action":"pass","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgresURLRaw","Elapsed":0.11}
{"Time":"2023-03-29T13:37:33.014534922Z","Action":"cont","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/OK"}
{"Time":"2023-03-29T13:37:33.014543883Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/OK","Output":"=== CONT  TestServer/TLSRedirect/OK\n"}
{"Time":"2023-03-29T13:37:33.01571179Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/OK","Output":"    clitest.go:67: invoking command: coder --global-config /tmp/TestServerTLSRedirectOK4195649967/003 server --in-memory --cache-dir /tmp/TestServerTLSRedirectOK4195649967/002 --http-address :0 --tls-enable --tls-address :0 --tls-cert-file /tmp/TestServerTLSRedirectOK4195649967/001/1898764516 --tls-key-file /tmp/TestServerTLSRedirectOK4195649967/001/3656697468 --wildcard-access-url *.example.com --access-url https://example.com --redirect-to-access-url\n"}
{"Time":"2023-03-29T13:37:33.015887089Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgresURL","Output":"    ptytest.go:121: 2023-03-29 13:37:33.015: cmd: \" psql \\\"postgres://coder@localhost:43265/coder?sslmode=disable\u0026password=qZX0YVm9trLHmHzY\\\" \"\n"}
{"Time":"2023-03-29T13:37:33.015903823Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgresURL","Output":"    ptytest.go:102: 2023-03-29 13:37:33.015: cmd: closed tpty\n"}
{"Time":"2023-03-29T13:37:33.016045291Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgresURL","Output":"--- PASS: TestServer/BuiltinPostgresURL (0.11s)\n"}
{"Time":"2023-03-29T13:37:33.01632566Z","Action":"pass","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgresURL","Elapsed":0.11}
{"Time":"2023-03-29T13:37:33.016345189Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TracerNoLeak","Output":"    clitest.go:50: stdout: Done waiting for WebSocket connections\n"}
{"Time":"2023-03-29T13:37:33.022419375Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit/Disabled","Output":"    clitest.go:50: stdout: View the Web UI: http://example.com\n"}
{"Time":"2023-03-29T13:37:33.099478164Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/GitHubOAuth","Output":"    clitest.go:50: stdout: ==\u003e Logs will stream in below (press ctrl+c to gracefully exit):\n"}
{"Time":"2023-03-29T13:37:33.138846249Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSValidMultiple","Output":"    ptytest.go:121: 2023-03-29 13:37:33.137: cmd: \"Started TLS/HTTPS listener at https://[::]:46747\"\n"}
{"Time":"2023-03-29T13:37:33.138887737Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/CreatesFile","Output":"    clitest.go:50: stdout: Shutting down provisioner daemon 1...\n"}
{"Time":"2023-03-29T13:37:33.138894754Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/CreatesFile","Output":"    clitest.go:50: stdout: Gracefully shut down provisioner daemon 1\n"}
{"Time":"2023-03-29T13:37:33.138900199Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/CreatesFile","Output":"    clitest.go:50: stdout: Shutting down provisioner daemon 2...\n"}
{"Time":"2023-03-29T13:37:33.138905607Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/CreatesFile","Output":"    clitest.go:50: stdout: Gracefully shut down provisioner daemon 2\n"}
{"Time":"2023-03-29T13:37:33.138911333Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/CreatesFile","Output":"    clitest.go:50: stdout: Waiting for WebSocket connections to close...\n"}
{"Time":"2023-03-29T13:37:33.141820899Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/JSON","Output":"    clitest.go:50: stderr: 2023-03-29 13:37:33.140 [DEBUG]\t(coderd.metrics_cache)\t\u003cgithub.com/coder/coder/v2/coderd/metricscache/metricscache.go:272\u003e\t(*Cache).run\tdeployment stats metrics refreshed\t{\"took\": \"23.786µs\", \"interval\": \"30s\"}\n"}
{"Time":"2023-03-29T13:37:33.141862791Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/JSON","Output":"    clitest.go:50: stderr: 2023-03-29 13:37:33.141 [DEBUG]\t\u003cgithub.com/coder/coder/provisionerd/provisionerd.go:200\u003e\t(*Server).connect\tconnected\n"}
{"Time":"2023-03-29T13:37:33.141871378Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/JSON","Output":"    clitest.go:50: stderr: 2023-03-29 13:37:33.141 [DEBUG]\t\u003cgithub.com/coder/coder/provisionerd/provisionerd.go:200\u003e\t(*Server).connect\tconnected\n"}
{"Time":"2023-03-29T13:37:33.14187713Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/JSON","Output":"    clitest.go:50: stdout: Shutting down provisioner daemon 1...\n"}
{"Time":"2023-03-29T13:37:33.141883292Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/JSON","Output":"    clitest.go:50: stderr: 2023-03-29 13:37:33.141 [DEBUG]\t\u003cgithub.com/coder/coder/provisionerd/provisionerd.go:553\u003e\t(*Server).closeWithError\tclosing server with error\t{\"error\": null}\n"}
{"Time":"2023-03-29T13:37:33.141893432Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/JSON","Output":"    clitest.go:50: stdout: Gracefully shut down provisioner daemon 1\n"}
{"Time":"2023-03-29T13:37:33.141898548Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/JSON","Output":"    clitest.go:50: stdout: Shutting down provisioner daemon 2...\n"}
{"Time":"2023-03-29T13:37:33.141959656Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/JSON","Output":"    clitest.go:50: stderr: 2023-03-29 13:37:33.141 [DEBUG]\t\u003cgithub.com/coder/coder/provisionerd/provisionerd.go:553\u003e\t(*Server).closeWithError\tclosing server with error\t{\"error\": null}\n"}
{"Time":"2023-03-29T13:37:33.142091685Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/JSON","Output":"    clitest.go:50: stdout: Gracefully shut down provisioner daemon 2\n"}
{"Time":"2023-03-29T13:37:33.142184362Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/JSON","Output":"    clitest.go:50: stdout: Waiting for WebSocket connections to close...\n"}
{"Time":"2023-03-29T13:37:33.142408919Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Human","Output":"    clitest.go:50: stderr: \u001b[1;mWARN: \u001b[0mThe access URL  \u001b[;mhttp://example.com\u001b[0m  could not be resolved, this may cause unexpected problems when creating workspaces. Generate a unique *.try.coder.app URL by not specifying an access URL.\n"}
{"Time":"2023-03-29T13:37:33.142501883Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Human","Output":"    clitest.go:50: stdout: View the Web UI: http://example.com\n"}
{"Time":"2023-03-29T13:37:33.147218812Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Human","Output":"    clitest.go:50: stdout: ==\u003e Logs will stream in below (press ctrl+c to gracefully exit):\n"}
{"Time":"2023-03-29T13:37:33.147251166Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Human","Output":"    clitest.go:50: stdout: \u001b[1mInterrupt caught, gracefully exiting. Use ctrl+\\ to force quit\u001b[0m\n"}
{"Time":"2023-03-29T13:37:33.14725864Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Human","Output":"    clitest.go:50: stdout: Shutting down API server...\n"}
{"Time":"2023-03-29T13:37:33.147298554Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Human","Output":"    clitest.go:50: stdout: Gracefully shut down API server\n"}
{"Time":"2023-03-29T13:37:33.147355456Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Human","Output":"    clitest.go:50: stdout: Shutting down provisioner daemon 3...\n"}
{"Time":"2023-03-29T13:37:33.14745485Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Human","Output":"    clitest.go:50: stdout: Gracefully shut down provisioner daemon 3\n"}
{"Time":"2023-03-29T13:37:33.148482198Z","Action":"cont","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSInvalid/MismatchedCertAndKey"}
{"Time":"2023-03-29T13:37:33.148502985Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSInvalid/MismatchedCertAndKey","Output":"=== CONT  TestServer/TLSInvalid/MismatchedCertAndKey\n"}
{"Time":"2023-03-29T13:37:33.149452866Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSInvalid/MismatchedCertAndKey","Output":"    clitest.go:67: invoking command: coder --global-config /tmp/TestServerTLSInvalidMismatchedCertAndKey978167281/002 server --in-memory --http-address :0 --access-url http://example.com --cache-dir /tmp/TestServerTLSInvalidMismatchedCertAndKey978167281/001 --tls-enable --tls-cert-file /tmp/TestServerTLSInvalid1610620518/001/3088514081 --tls-key-file /tmp/TestServerTLSInvalid1610620518/002/2775674587\n"}
{"Time":"2023-03-29T13:37:33.149984351Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSInvalid/MismatchedCertAndKey","Output":"    clitest.go:50: stdout: Started HTTP listener at http://[::]:38873\n"}
{"Time":"2023-03-29T13:37:33.150363114Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSInvalid/MismatchedCertAndKey","Output":"    server_test.go:344: args: [server --in-memory --http-address :0 --access-url http://example.com --cache-dir /tmp/TestServerTLSInvalidMismatchedCertAndKey978167281/001 --tls-enable --tls-cert-file /tmp/TestServerTLSInvalid1610620518/001/3088514081 --tls-key-file /tmp/TestServerTLSInvalid1610620518/002/2775674587]\n"}
{"Time":"2023-03-29T13:37:33.150581402Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSInvalid/MismatchedCertAndKey","Output":"--- PASS: TestServer/TLSInvalid/MismatchedCertAndKey (0.00s)\n"}
{"Time":"2023-03-29T13:37:33.15059771Z","Action":"pass","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSInvalid/MismatchedCertAndKey","Elapsed":0}
{"Time":"2023-03-29T13:37:33.150605526Z","Action":"cont","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSInvalid/MismatchedCount"}
{"Time":"2023-03-29T13:37:33.150609996Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSInvalid/MismatchedCount","Output":"=== CONT  TestServer/TLSInvalid/MismatchedCount\n"}
{"Time":"2023-03-29T13:37:33.151854633Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSInvalid/MismatchedCount","Output":"    clitest.go:67: invoking command: coder --global-config /tmp/TestServerTLSInvalidMismatchedCount803880522/002 server --in-memory --http-address :0 --access-url http://example.com --cache-dir /tmp/TestServerTLSInvalidMismatchedCount803880522/001 --tls-enable --tls-cert-file /tmp/TestServerTLSInvalid1610620518/001/3088514081 --tls-key-file /tmp/TestServerTLSInvalid1610620518/001/1816833089 --tls-cert-file /tmp/TestServerTLSInvalid1610620518/002/3269350839\n"}
{"Time":"2023-03-29T13:37:33.152410162Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSInvalid/MismatchedCount","Output":"    clitest.go:50: stdout: Started HTTP listener at http://[::]:37839\n"}
{"Time":"2023-03-29T13:37:33.15252017Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSInvalid/MismatchedCount","Output":"    server_test.go:344: args: [server --in-memory --http-address :0 --access-url http://example.com --cache-dir /tmp/TestServerTLSInvalidMismatchedCount803880522/001 --tls-enable --tls-cert-file /tmp/TestServerTLSInvalid1610620518/001/3088514081 --tls-key-file /tmp/TestServerTLSInvalid1610620518/001/1816833089 --tls-cert-file /tmp/TestServerTLSInvalid1610620518/002/3269350839]\n"}
{"Time":"2023-03-29T13:37:33.152732054Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSInvalid/MismatchedCount","Output":"--- PASS: TestServer/TLSInvalid/MismatchedCount (0.00s)\n"}
{"Time":"2023-03-29T13:37:33.152746399Z","Action":"pass","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSInvalid/MismatchedCount","Elapsed":0}
{"Time":"2023-03-29T13:37:33.152754347Z","Action":"cont","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSInvalid/NoKey"}
{"Time":"2023-03-29T13:37:33.152758935Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSInvalid/NoKey","Output":"=== CONT  TestServer/TLSInvalid/NoKey\n"}
{"Time":"2023-03-29T13:37:33.153794977Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSInvalid/NoKey","Output":"    clitest.go:67: invoking command: coder --global-config /tmp/TestServerTLSInvalidNoKey281486761/002 server --in-memory --http-address :0 --access-url http://example.com --cache-dir /tmp/TestServerTLSInvalidNoKey281486761/001 --tls-enable --tls-cert-file /tmp/TestServerTLSInvalid1610620518/001/3088514081\n"}
{"Time":"2023-03-29T13:37:33.154207106Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSInvalid/NoKey","Output":"    clitest.go:50: stdout: Started HTTP listener at http://[::]:43607\n"}
{"Time":"2023-03-29T13:37:33.15427222Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSInvalid/NoKey","Output":"    server_test.go:344: args: [server --in-memory --http-address :0 --access-url http://example.com --cache-dir /tmp/TestServerTLSInvalidNoKey281486761/001 --tls-enable --tls-cert-file /tmp/TestServerTLSInvalid1610620518/001/3088514081]\n"}
{"Time":"2023-03-29T13:37:33.154468443Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSInvalid/NoKey","Output":"--- PASS: TestServer/TLSInvalid/NoKey (0.00s)\n"}
{"Time":"2023-03-29T13:37:33.154623549Z","Action":"pass","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSInvalid/NoKey","Elapsed":0}
{"Time":"2023-03-29T13:37:33.154633176Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSInvalid","Output":"--- PASS: TestServer/TLSInvalid (0.00s)\n"}
{"Time":"2023-03-29T13:37:33.154761857Z","Action":"pass","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSInvalid","Elapsed":0}
{"Time":"2023-03-29T13:37:33.154770493Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv4","Output":"    ptytest.go:121: 2023-03-29 13:37:33.154: cmd: \"WARN: The access URL  http://example.com  could not be resolved, this may cause unexpected problems when creating workspaces. Generate a unique *.try.coder.app URL by not specifying an access URL.\"\n"}
{"Time":"2023-03-29T13:37:33.439719632Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv4","Output":"    ptytest.go:121: 2023-03-29 13:37:33.439: cmd: \"                                                                                                                                                                                              \\r\"\n"}
{"Time":"2023-03-29T13:37:33.43976961Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv4","Output":"    ptytest.go:121: 2023-03-29 13:37:33.439: cmd: \"                                   \"\n"}
{"Time":"2023-03-29T13:37:33.439791036Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv4","Output":"    ptytest.go:121: 2023-03-29 13:37:33.439: cmd: \"View the Web UI: http://example.com\\r\"\n"}
{"Time":"2023-03-29T13:37:33.439807711Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv4","Output":"    ptytest.go:121: 2023-03-29 13:37:33.439: cmd: \"                                                                \"\n"}
{"Time":"2023-03-29T13:37:33.43982432Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv4","Output":"    ptytest.go:121: 2023-03-29 13:37:33.439: cmd: \"==\u003e Logs will stream in below (press ctrl+c to gracefully exit):\\r\"\n"}
{"Time":"2023-03-29T13:37:33.439851264Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv4","Output":"    ptytest.go:121: 2023-03-29 13:37:33.439: cmd: \"Interrupt caught, gracefully exiting. Use ctrl+\\\\ to force quit\"\n"}
{"Time":"2023-03-29T13:37:33.439869598Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv4","Output":"    ptytest.go:121: 2023-03-29 13:37:33.439: cmd: \"Shutting down API server...\"\n"}
{"Time":"2023-03-29T13:37:33.439886994Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv4","Output":"    ptytest.go:121: 2023-03-29 13:37:33.439: cmd: \"                           \\r\"\n"}
{"Time":"2023-03-29T13:37:33.439905518Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv4","Output":"    ptytest.go:121: 2023-03-29 13:37:33.439: cmd: \"Gracefully shut down API server\"\n"}
{"Time":"2023-03-29T13:37:33.439924649Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv4","Output":"    ptytest.go:121: 2023-03-29 13:37:33.439: cmd: \"                               \\r\"\n"}
{"Time":"2023-03-29T13:37:33.439941905Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv4","Output":"    ptytest.go:83: 2023-03-29 13:37:33.439: cmd: closing tpty: close\n"}
{"Time":"2023-03-29T13:37:33.4399588Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv4","Output":"    ptytest.go:74: 2023-03-29 13:37:33.439: cmd: closing pty\n"}
{"Time":"2023-03-29T13:37:33.440230934Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/OK","Output":"    ptytest.go:121: 2023-03-29 13:37:33.440: cmd: \"Started HTTP listener at http://[::]:45645\"\n"}
{"Time":"2023-03-29T13:37:33.440246712Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/OK","Output":"    ptytest.go:121: 2023-03-29 13:37:33.440: cmd: \"Started TLS/HTTPS listener at https://[::]:33779\"\n"}
{"Time":"2023-03-29T13:37:33.440251896Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/OK","Output":"    server_test.go:634: 2023-03-29 13:37:33.440: cmd: matched \"Started HTTP listener at\" = \"Started HTTP listener at\"\n"}
{"Time":"2023-03-29T13:37:33.440278535Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/OK","Output":"    server_test.go:635: 2023-03-29 13:37:33.440: cmd: ReadLine ctx has no deadline, using 10s\n"}
{"Time":"2023-03-29T13:37:33.440295931Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/OK","Output":"    server_test.go:635: 2023-03-29 13:37:33.440: cmd: matched newline = \" http://[::]:45645\"\n"}
{"Time":"2023-03-29T13:37:33.440327613Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/OK","Output":"    server_test.go:641: 2023-03-29 13:37:33.440: cmd: matched \"Started TLS/HTTPS listener at\" = \"Started TLS/HTTPS listener at\"\n"}
{"Time":"2023-03-29T13:37:33.440339171Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/OK","Output":"    server_test.go:642: 2023-03-29 13:37:33.440: cmd: ReadLine ctx has no deadline, using 10s\n"}
{"Time":"2023-03-29T13:37:33.440353544Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/OK","Output":"    server_test.go:642: 2023-03-29 13:37:33.440: cmd: matched newline = \" https://[::]:33779\"\n"}
{"Time":"2023-03-29T13:37:33.462318671Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSAndHTTP","Output":"    ptytest.go:121: 2023-03-29 13:37:33.155: cmd: \"WARN: Redirect HTTP to HTTPS is deprecated, please use Redirect to Access URL instead.\"\n"}
{"Time":"2023-03-29T13:37:33.462349606Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSAndHTTP","Output":"    ptytest.go:121: 2023-03-29 13:37:33.462: cmd: \"                                                                                \\r\"\n"}
{"Time":"2023-03-29T13:37:33.462356521Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSAndHTTP","Output":"    ptytest.go:121: 2023-03-29 13:37:33.462: cmd: \"Started HTTP listener at http://[::]:38281\"\n"}
{"Time":"2023-03-29T13:37:33.462372929Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSAndHTTP","Output":"    ptytest.go:121: 2023-03-29 13:37:33.462: cmd: \"WARN: --tls-redirect-http-to-https is deprecated, please use --redirect-to-access-url instead\\r\"\n"}
{"Time":"2023-03-29T13:37:33.462395287Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSAndHTTP","Output":"    ptytest.go:121: 2023-03-29 13:37:33.462: cmd: \"Started TLS/HTTPS listener at https://[::]:37895\"\n"}
{"Time":"2023-03-29T13:37:33.46242925Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSAndHTTP","Output":"    ptytest.go:121: 2023-03-29 13:37:33.462: cmd: \"                                    \"\n"}
{"Time":"2023-03-29T13:37:33.462438148Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSAndHTTP","Output":"    ptytest.go:121: 2023-03-29 13:37:33.462: cmd: \"View the Web UI: https://example.com\\r\"\n"}
{"Time":"2023-03-29T13:37:33.462469497Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSAndHTTP","Output":"    ptytest.go:121: 2023-03-29 13:37:33.462: cmd: \"                                                                \"\n"}
{"Time":"2023-03-29T13:37:33.462484536Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSAndHTTP","Output":"    ptytest.go:121: 2023-03-29 13:37:33.462: cmd: \"==\u003e Logs will stream in below (press ctrl+c to gracefully exit):\\r\"\n"}
{"Time":"2023-03-29T13:37:33.462637037Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv4","Output":"    ptytest.go:76: 2023-03-29 13:37:33.462: cmd: closed pty: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:33.462649797Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv4","Output":"    ptytest.go:121: 2023-03-29 13:37:33.462: cmd: \"Waiting for WebSocket connections to close...\"\n"}
{"Time":"2023-03-29T13:37:33.462659463Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv4","Output":"    ptytest.go:121: 2023-03-29 13:37:33.462: cmd: \"                                             \\r\"\n"}
{"Time":"2023-03-29T13:37:33.462670357Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv4","Output":"    ptytest.go:121: 2023-03-29 13:37:33.462: cmd: \"Done waiting for WebSocket connections\"\n"}
{"Time":"2023-03-29T13:37:33.462694313Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv4","Output":"    ptytest.go:121: 2023-03-29 13:37:33.462: cmd: \"                                      \\r\"\n"}
{"Time":"2023-03-29T13:37:33.462718576Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv4","Output":"    ptytest.go:110: 2023-03-29 13:37:33.462: cmd: copy done: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:37:33.46272687Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv4","Output":"    ptytest.go:111: 2023-03-29 13:37:33.462: cmd: closing out\n"}
{"Time":"2023-03-29T13:37:33.462736639Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv4","Output":"    ptytest.go:113: 2023-03-29 13:37:33.462: cmd: closed out: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:37:33.462758116Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv4","Output":"    ptytest.go:74: 2023-03-29 13:37:33.462: cmd: closing logw\n"}
{"Time":"2023-03-29T13:37:33.462768617Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv4","Output":"    ptytest.go:76: 2023-03-29 13:37:33.462: cmd: closed logw: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:33.462788026Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv4","Output":"    ptytest.go:74: 2023-03-29 13:37:33.462: cmd: closing logr\n"}
{"Time":"2023-03-29T13:37:33.462795774Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv4","Output":"    ptytest.go:76: 2023-03-29 13:37:33.462: cmd: closed logr: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:33.462816156Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv4","Output":"    ptytest.go:102: 2023-03-29 13:37:33.462: cmd: closed tpty\n"}
{"Time":"2023-03-29T13:37:33.462931778Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv4","Output":"--- PASS: TestServer/CanListenUnspecifiedv4 (0.60s)\n"}
{"Time":"2023-03-29T13:37:33.462940935Z","Action":"pass","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv4","Elapsed":0.6}
{"Time":"2023-03-29T13:37:33.462948149Z","Action":"cont","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoHTTPListener"}
{"Time":"2023-03-29T13:37:33.462952114Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoHTTPListener","Output":"=== CONT  TestServer/TLSRedirect/NoHTTPListener\n"}
{"Time":"2023-03-29T13:37:33.464080755Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoHTTPListener","Output":"    clitest.go:67: invoking command: coder --global-config /tmp/TestServerTLSRedirectNoHTTPListener857312755/003 server --in-memory --cache-dir /tmp/TestServerTLSRedirectNoHTTPListener857312755/002 --http-address  --tls-enable --tls-address :0 --tls-cert-file /tmp/TestServerTLSRedirectNoHTTPListener857312755/001/774178655 --tls-key-file /tmp/TestServerTLSRedirectNoHTTPListener857312755/001/2109956146 --wildcard-access-url *.example.com --access-url https://example.com\n"}
{"Time":"2023-03-29T13:37:33.464227163Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/OK","Output":"    ptytest.go:121: 2023-03-29 13:37:33.464: cmd: \"                                    \"\n"}
{"Time":"2023-03-29T13:37:33.464240384Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/OK","Output":"    ptytest.go:121: 2023-03-29 13:37:33.464: cmd: \"View the Web UI: https://example.com\\r\"\n"}
{"Time":"2023-03-29T13:37:33.464252515Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/OK","Output":"    ptytest.go:121: 2023-03-29 13:37:33.464: cmd: \"                                                                \"\n"}
{"Time":"2023-03-29T13:37:33.46428589Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/OK","Output":"    ptytest.go:121: 2023-03-29 13:37:33.464: cmd: \"==\u003e Logs will stream in below (press ctrl+c to gracefully exit):\\r\"\n"}
{"Time":"2023-03-29T13:37:33.472563896Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv6","Output":"    ptytest.go:121: 2023-03-29 13:37:33.155: cmd: \"WARN: The access URL  http://example.com  could not be resolved, this may cause unexpected problems when creating workspaces. Generate a unique *.try.coder.app URL by not specifying an access URL.\"\n"}
{"Time":"2023-03-29T13:37:33.472612391Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv6","Output":"    ptytest.go:121: 2023-03-29 13:37:33.472: cmd: \"                                                                                                                                                                                              \\r\"\n"}
{"Time":"2023-03-29T13:37:33.47263698Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv6","Output":"    ptytest.go:121: 2023-03-29 13:37:33.472: cmd: \"                                   \"\n"}
{"Time":"2023-03-29T13:37:33.472648847Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv6","Output":"    ptytest.go:121: 2023-03-29 13:37:33.472: cmd: \"View the Web UI: http://example.com\\r\"\n"}
{"Time":"2023-03-29T13:37:33.472703374Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv6","Output":"    ptytest.go:121: 2023-03-29 13:37:33.472: cmd: \"                                                                \"\n"}
{"Time":"2023-03-29T13:37:33.472714667Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv6","Output":"    ptytest.go:121: 2023-03-29 13:37:33.472: cmd: \"==\u003e Logs will stream in below (press ctrl+c to gracefully exit):\\r\"\n"}
{"Time":"2023-03-29T13:37:33.473028818Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv6","Output":"    ptytest.go:121: 2023-03-29 13:37:33.472: cmd: \"Interrupt caught, gracefully exiting. Use ctrl+\\\\ to force quit\"\n"}
{"Time":"2023-03-29T13:37:33.473041801Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv6","Output":"    ptytest.go:121: 2023-03-29 13:37:33.472: cmd: \"Shutting down API server...\"\n"}
{"Time":"2023-03-29T13:37:33.473048085Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv6","Output":"    ptytest.go:121: 2023-03-29 13:37:33.472: cmd: \"                           \\r\"\n"}
{"Time":"2023-03-29T13:37:33.473053454Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv6","Output":"    ptytest.go:121: 2023-03-29 13:37:33.472: cmd: \"Gracefully shut down API server\"\n"}
{"Time":"2023-03-29T13:37:33.47305943Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv6","Output":"    ptytest.go:121: 2023-03-29 13:37:33.472: cmd: \"                               \\r\"\n"}
{"Time":"2023-03-29T13:37:33.473064898Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv6","Output":"    ptytest.go:121: 2023-03-29 13:37:33.472: cmd: \"Waiting for WebSocket connections to close...\"\n"}
{"Time":"2023-03-29T13:37:33.473070019Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv6","Output":"    ptytest.go:121: 2023-03-29 13:37:33.472: cmd: \"                                             \\r\"\n"}
{"Time":"2023-03-29T13:37:33.473075028Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv6","Output":"    ptytest.go:121: 2023-03-29 13:37:33.472: cmd: \"Done waiting for WebSocket connections\"\n"}
{"Time":"2023-03-29T13:37:33.473080237Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv6","Output":"    ptytest.go:121: 2023-03-29 13:37:33.472: cmd: \"                                      \\r\"\n"}
{"Time":"2023-03-29T13:37:33.47308794Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSAndHTTP","Output":"    server_test.go:488: 2023-03-29 13:37:33.472: cmd: matched \"Started HTTP listener at\" = \"WARN: Redirect HTTP to HTTPS is deprecated, please use Redirect to Access URL instead.\\r\\n                                                                                \\r\\r\\nStarted HTTP listener at\"\n"}
{"Time":"2023-03-29T13:37:33.473094939Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSAndHTTP","Output":"    server_test.go:489: 2023-03-29 13:37:33.472: cmd: ReadLine ctx has no deadline, using 10s\n"}
{"Time":"2023-03-29T13:37:33.473099786Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSAndHTTP","Output":"    server_test.go:489: 2023-03-29 13:37:33.472: cmd: matched newline = \" http://[::]:38281\"\n"}
{"Time":"2023-03-29T13:37:33.473628418Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSAndHTTP","Output":"    server_test.go:493: 2023-03-29 13:37:33.473: cmd: matched \"Started TLS/HTTPS listener at \" = \"WARN: --tls-redirect-http-to-https is deprecated, please use --redirect-to-access-url instead\\r\\r\\nStarted TLS/HTTPS listener at \"\n"}
{"Time":"2023-03-29T13:37:33.473644808Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSAndHTTP","Output":"    server_test.go:494: 2023-03-29 13:37:33.473: cmd: ReadLine ctx has no deadline, using 10s\n"}
{"Time":"2023-03-29T13:37:33.47365119Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSAndHTTP","Output":"    server_test.go:494: 2023-03-29 13:37:33.473: cmd: matched newline = \"https://[::]:37895\"\n"}
{"Time":"2023-03-29T13:37:33.475250161Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit/Default","Output":"    clitest.go:50: stdout: \u001b[1mInterrupt caught, gracefully exiting. Use ctrl+\\ to force quit\u001b[0m\n"}
{"Time":"2023-03-29T13:37:33.475281933Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit/Default","Output":"    clitest.go:50: stdout: Shutting down API server...\n"}
{"Time":"2023-03-29T13:37:33.490892952Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit/Changed","Output":"    clitest.go:50: stdout: View the Web UI: http://example.com\n"}
{"Time":"2023-03-29T13:37:33.492145943Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv6","Output":"    ptytest.go:83: 2023-03-29 13:37:33.491: cmd: closing tpty: close\n"}
{"Time":"2023-03-29T13:37:33.492183748Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv6","Output":"    ptytest.go:74: 2023-03-29 13:37:33.491: cmd: closing pty\n"}
{"Time":"2023-03-29T13:37:33.492192673Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv6","Output":"    ptytest.go:110: 2023-03-29 13:37:33.492: cmd: copy done: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:37:33.492199945Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv6","Output":"    ptytest.go:111: 2023-03-29 13:37:33.492: cmd: closing out\n"}
{"Time":"2023-03-29T13:37:33.492206118Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv6","Output":"    ptytest.go:113: 2023-03-29 13:37:33.492: cmd: closed out: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:37:33.492296422Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv6","Output":"    ptytest.go:76: 2023-03-29 13:37:33.492: cmd: closed pty: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:33.492316694Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv6","Output":"    ptytest.go:74: 2023-03-29 13:37:33.492: cmd: closing logw\n"}
{"Time":"2023-03-29T13:37:33.49232562Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv6","Output":"    ptytest.go:76: 2023-03-29 13:37:33.492: cmd: closed logw: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:33.492355439Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv6","Output":"    ptytest.go:74: 2023-03-29 13:37:33.492: cmd: closing logr\n"}
{"Time":"2023-03-29T13:37:33.492364574Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv6","Output":"    ptytest.go:76: 2023-03-29 13:37:33.492: cmd: closed logr: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:33.49240481Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv6","Output":"    ptytest.go:102: 2023-03-29 13:37:33.492: cmd: closed tpty\n"}
{"Time":"2023-03-29T13:37:33.495511552Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv6","Output":"--- PASS: TestServer/CanListenUnspecifiedv6 (0.63s)\n"}
{"Time":"2023-03-29T13:37:33.495557907Z","Action":"pass","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/CanListenUnspecifiedv6","Elapsed":0.63}
{"Time":"2023-03-29T13:37:33.495569713Z","Action":"cont","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoTLSListener"}
{"Time":"2023-03-29T13:37:33.495575692Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoTLSListener","Output":"=== CONT  TestServer/TLSRedirect/NoTLSListener\n"}
{"Time":"2023-03-29T13:37:33.495582515Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoTLSListener","Output":"    clitest.go:67: invoking command: coder --global-config /tmp/TestServerTLSRedirectNoTLSListener2050465310/003 server --in-memory --cache-dir /tmp/TestServerTLSRedirectNoTLSListener2050465310/002 --http-address :0 --access-url https://example.com\n"}
{"Time":"2023-03-29T13:37:33.514163923Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit/Disabled","Output":"    clitest.go:50: stdout: ==\u003e Logs will stream in below (press ctrl+c to gracefully exit):\n"}
{"Time":"2023-03-29T13:37:33.51646695Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSValid","Output":"    clitest.go:50: stdout: View the Web UI: https://example.com\n"}
{"Time":"2023-03-29T13:37:33.532093856Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/CreatesFile","Output":"    clitest.go:50: stdout: Done waiting for WebSocket connections\n"}
{"Time":"2023-03-29T13:37:33.532820236Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSValid","Output":"    clitest.go:50: stdout: ==\u003e Logs will stream in below (press ctrl+c to gracefully exit):\n"}
{"Time":"2023-03-29T13:37:33.533254024Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/JSON","Output":"    clitest.go:50: stdout: Done waiting for WebSocket connections\n"}
{"Time":"2023-03-29T13:37:33.533887464Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/CreatesFile","Output":"--- PASS: TestServer/Logging/CreatesFile (0.69s)\n"}
{"Time":"2023-03-29T13:37:33.580391994Z","Action":"pass","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/CreatesFile","Elapsed":0.69}
{"Time":"2023-03-29T13:37:33.580437708Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/LocalAccessURL","Output":"    ptytest.go:121: 2023-03-29 13:37:33.194: cmd: \"Interrupt caught, gracefully exiting. Use ctrl+\\\\ to force quit\"\n"}
{"Time":"2023-03-29T13:37:33.580458446Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/LocalAccessURL","Output":"    ptytest.go:121: 2023-03-29 13:37:33.580: cmd: \"Shutting down API server...\"\n"}
{"Time":"2023-03-29T13:37:33.580471806Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/LocalAccessURL","Output":"    ptytest.go:121: 2023-03-29 13:37:33.580: cmd: \"                           \\r\"\n"}
{"Time":"2023-03-29T13:37:33.58048911Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/LocalAccessURL","Output":"    ptytest.go:121: 2023-03-29 13:37:33.580: cmd: \"Gracefully shut down API server\"\n"}
{"Time":"2023-03-29T13:37:33.580504524Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/LocalAccessURL","Output":"    ptytest.go:121: 2023-03-29 13:37:33.580: cmd: \"                               \\r\"\n"}
{"Time":"2023-03-29T13:37:33.580522972Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/LocalAccessURL","Output":"    ptytest.go:121: 2023-03-29 13:37:33.580: cmd: \"Waiting for WebSocket connections to close...\"\n"}
{"Time":"2023-03-29T13:37:33.5805328Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/LocalAccessURL","Output":"    ptytest.go:121: 2023-03-29 13:37:33.580: cmd: \"                                             \\r\"\n"}
{"Time":"2023-03-29T13:37:33.580555757Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/LocalAccessURL","Output":"    ptytest.go:121: 2023-03-29 13:37:33.580: cmd: \"Done waiting for WebSocket connections\"\n"}
{"Time":"2023-03-29T13:37:33.580587561Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/LocalAccessURL","Output":"    ptytest.go:121: 2023-03-29 13:37:33.580: cmd: \"                                      \\r\"\n"}
{"Time":"2023-03-29T13:37:33.580846451Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/JSON","Output":"--- PASS: TestServer/Logging/JSON (0.67s)\n"}
{"Time":"2023-03-29T13:37:33.580862096Z","Action":"pass","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/JSON","Elapsed":0.67}
{"Time":"2023-03-29T13:37:33.580868926Z","Action":"cont","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirect"}
{"Time":"2023-03-29T13:37:33.580873653Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirect","Output":"=== CONT  TestServer/TLSRedirect/NoRedirect\n"}
{"Time":"2023-03-29T13:37:33.582048889Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirect","Output":"    clitest.go:67: invoking command: coder --global-config /tmp/TestServerTLSRedirectNoRedirect2668740580/003 server --in-memory --cache-dir /tmp/TestServerTLSRedirectNoRedirect2668740580/002 --http-address :0 --tls-enable --tls-address :0 --tls-cert-file /tmp/TestServerTLSRedirectNoRedirect2668740580/001/1517171254 --tls-key-file /tmp/TestServerTLSRedirectNoRedirect2668740580/001/1491051903 --wildcard-access-url *.example.com --access-url https://example.com\n"}
{"Time":"2023-03-29T13:37:33.582187252Z","Action":"cont","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirectWithWildcard"}
{"Time":"2023-03-29T13:37:33.582197387Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirectWithWildcard","Output":"=== CONT  TestServer/TLSRedirect/NoRedirectWithWildcard\n"}
{"Time":"2023-03-29T13:37:33.583144917Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirectWithWildcard","Output":"    clitest.go:67: invoking command: coder --global-config /tmp/TestServerTLSRedirectNoRedirectWithWildcard3241718280/003 server --in-memory --cache-dir /tmp/TestServerTLSRedirectNoRedirectWithWildcard3241718280/002 --http-address  --tls-enable --tls-address :0 --tls-cert-file /tmp/TestServerTLSRedirectNoRedirectWithWildcard3241718280/001/2297363344 --tls-key-file /tmp/TestServerTLSRedirectNoRedirectWithWildcard3241718280/001/3868867528 --wildcard-access-url *.example.com --access-url https://example.com --redirect-to-access-url\n"}
{"Time":"2023-03-29T13:37:33.609797366Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TracerNoLeak","Output":"--- PASS: TestServer/TracerNoLeak (0.75s)\n"}
{"Time":"2023-03-29T13:37:33.610858133Z","Action":"pass","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TracerNoLeak","Elapsed":0.75}
{"Time":"2023-03-29T13:37:33.6108818Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/HTTP","Output":"    ptytest.go:121: 2023-03-29 13:37:33.202: cmd: \"WARN: Address is deprecated, please use HTTP Address and TLS Address instead.\"\n"}
{"Time":"2023-03-29T13:37:33.610892881Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/HTTP","Output":"    ptytest.go:121: 2023-03-29 13:37:33.610: cmd: \"                                                                       \\r\"\n"}
{"Time":"2023-03-29T13:37:33.610900074Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/HTTP","Output":"    ptytest.go:121: 2023-03-29 13:37:33.610: cmd: \"Started HTTP listener at http://[::]:32777\"\n"}
{"Time":"2023-03-29T13:37:33.610935322Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/HTTP","Output":"    ptytest.go:121: 2023-03-29 13:37:33.610: cmd: \"                                   \"\n"}
{"Time":"2023-03-29T13:37:33.610944309Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/HTTP","Output":"    ptytest.go:121: 2023-03-29 13:37:33.610: cmd: \"View the Web UI: http://example.com\\r\"\n"}
{"Time":"2023-03-29T13:37:33.610972945Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/HTTP","Output":"    ptytest.go:121: 2023-03-29 13:37:33.610: cmd: \"                                                                \"\n"}
{"Time":"2023-03-29T13:37:33.610991889Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/HTTP","Output":"    ptytest.go:121: 2023-03-29 13:37:33.610: cmd: \"==\u003e Logs will stream in below (press ctrl+c to gracefully exit):\\r\"\n"}
{"Time":"2023-03-29T13:37:33.61104088Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/LocalAccessURL","Output":"    ptytest.go:83: 2023-03-29 13:37:33.611: cmd: closing tpty: close\n"}
{"Time":"2023-03-29T13:37:33.611050128Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/LocalAccessURL","Output":"    ptytest.go:74: 2023-03-29 13:37:33.611: cmd: closing pty\n"}
{"Time":"2023-03-29T13:37:33.611098802Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/LocalAccessURL","Output":"    ptytest.go:110: 2023-03-29 13:37:33.611: cmd: copy done: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:37:33.611114878Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/LocalAccessURL","Output":"    ptytest.go:111: 2023-03-29 13:37:33.611: cmd: closing out\n"}
{"Time":"2023-03-29T13:37:33.611120793Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/LocalAccessURL","Output":"    ptytest.go:113: 2023-03-29 13:37:33.611: cmd: closed out: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:37:33.611180989Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/LocalAccessURL","Output":"    ptytest.go:76: 2023-03-29 13:37:33.611: cmd: closed pty: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:33.611193294Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/LocalAccessURL","Output":"    ptytest.go:74: 2023-03-29 13:37:33.611: cmd: closing logw\n"}
{"Time":"2023-03-29T13:37:33.611200866Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/LocalAccessURL","Output":"    ptytest.go:76: 2023-03-29 13:37:33.611: cmd: closed logw: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:33.611204553Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/LocalAccessURL","Output":"    ptytest.go:74: 2023-03-29 13:37:33.611: cmd: closing logr\n"}
{"Time":"2023-03-29T13:37:33.611207462Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/LocalAccessURL","Output":"    ptytest.go:76: 2023-03-29 13:37:33.611: cmd: closed logr: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:33.611215565Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/LocalAccessURL","Output":"    ptytest.go:102: 2023-03-29 13:37:33.611: cmd: closed tpty\n"}
{"Time":"2023-03-29T13:37:33.611336071Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/LocalAccessURL","Output":"--- PASS: TestServer/LocalAccessURL (0.71s)\n"}
{"Time":"2023-03-29T13:37:33.613044416Z","Action":"pass","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/LocalAccessURL","Elapsed":0.71}
{"Time":"2023-03-29T13:37:33.613054355Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Human","Output":"    clitest.go:50: stdout: Shutting down provisioner daemon 1...\n"}
{"Time":"2023-03-29T13:37:33.613144221Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Human","Output":"    clitest.go:50: stdout: Gracefully shut down provisioner daemon 1\n"}
{"Time":"2023-03-29T13:37:33.613176406Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/HTTP","Output":"    server_test.go:799: 2023-03-29 13:37:33.613: cmd: matched \"is deprecated\" = \"WARN: Address is deprecated\"\n"}
{"Time":"2023-03-29T13:37:33.613666866Z","Action":"cont","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/TLS"}
{"Time":"2023-03-29T13:37:33.613682333Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/TLS","Output":"=== CONT  TestServer/DeprecatedAddress/TLS\n"}
{"Time":"2023-03-29T13:37:33.614665673Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/TLS","Output":"    clitest.go:67: invoking command: coder --global-config /tmp/TestServerDeprecatedAddressTLS1194868532/003 server --in-memory --address :0 --access-url https://example.com --tls-enable --tls-cert-file /tmp/TestServerDeprecatedAddressTLS1194868532/001/3357512070 --tls-key-file /tmp/TestServerDeprecatedAddressTLS1194868532/001/2886385591 --cache-dir /tmp/TestServerDeprecatedAddressTLS1194868532/002\n"}
{"Time":"2023-03-29T13:37:33.614774341Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Human","Output":"    clitest.go:50: stdout: Shutting down provisioner daemon 2...\n"}
{"Time":"2023-03-29T13:37:33.614835489Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Human","Output":"    clitest.go:50: stdout: Gracefully shut down provisioner daemon 2\n"}
{"Time":"2023-03-29T13:37:33.614847064Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Human","Output":"    clitest.go:50: stdout: Waiting for WebSocket connections to close...\n"}
{"Time":"2023-03-29T13:37:33.615151651Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RemoteAccessURL","Output":"    ptytest.go:121: 2023-03-29 13:37:33.251: cmd: \"Started HTTP listener at http://[::]:46789\"\n"}
{"Time":"2023-03-29T13:37:33.615187666Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RemoteAccessURL","Output":"    ptytest.go:121: 2023-03-29 13:37:33.615: cmd: \"WARN: The access URL  https://foobarbaz.mydomain  could not be resolved, this may cause unexpected problems when creating workspaces. Generate a unique *.try.coder.app URL by not specifying an access URL.\"\n"}
{"Time":"2023-03-29T13:37:33.615200461Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RemoteAccessURL","Output":"    ptytest.go:121: 2023-03-29 13:37:33.615: cmd: \"                                                                                                                                                                                                      \\r\"\n"}
{"Time":"2023-03-29T13:37:33.615214043Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RemoteAccessURL","Output":"    ptytest.go:121: 2023-03-29 13:37:33.615: cmd: \"                                           \"\n"}
{"Time":"2023-03-29T13:37:33.615230151Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RemoteAccessURL","Output":"    ptytest.go:121: 2023-03-29 13:37:33.615: cmd: \"View the Web UI: https://foobarbaz.mydomain\\r\"\n"}
{"Time":"2023-03-29T13:37:33.615243576Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RemoteAccessURL","Output":"    ptytest.go:121: 2023-03-29 13:37:33.615: cmd: \"                                                                \"\n"}
{"Time":"2023-03-29T13:37:33.61525094Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RemoteAccessURL","Output":"    ptytest.go:121: 2023-03-29 13:37:33.615: cmd: \"==\u003e Logs will stream in below (press ctrl+c to gracefully exit):\\r\"\n"}
{"Time":"2023-03-29T13:37:33.616015109Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Human","Output":"    clitest.go:50: stdout: Done waiting for WebSocket connections\n"}
{"Time":"2023-03-29T13:37:33.617106937Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSValidMultiple","Output":"    ptytest.go:121: 2023-03-29 13:37:33.251: cmd: \"                                    \"\n"}
{"Time":"2023-03-29T13:37:33.617129585Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSValidMultiple","Output":"    ptytest.go:121: 2023-03-29 13:37:33.617: cmd: \"View the Web UI: https://example.com\\r\"\n"}
{"Time":"2023-03-29T13:37:33.617140564Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSValidMultiple","Output":"    ptytest.go:121: 2023-03-29 13:37:33.617: cmd: \"                                                                \"\n"}
{"Time":"2023-03-29T13:37:33.617159456Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSValidMultiple","Output":"    ptytest.go:121: 2023-03-29 13:37:33.617: cmd: \"==\u003e Logs will stream in below (press ctrl+c to gracefully exit):\\r\"\n"}
{"Time":"2023-03-29T13:37:33.617293213Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RemoteAccessURL","Output":"    server_test.go:219: 2023-03-29 13:37:33.617: cmd: matched \"this may cause unexpected problems when creating workspaces\" = \"Started HTTP listener at http://[::]:46789\\r\\nWARN: The access URL  https://foobarbaz.mydomain  could not be resolved, this may cause unexpected problems when creating workspaces\"\n"}
{"Time":"2023-03-29T13:37:33.617419153Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RemoteAccessURL","Output":"    server_test.go:220: 2023-03-29 13:37:33.617: cmd: matched \"View the Web UI: https://foobarbaz.mydomain\" = \". Generate a unique *.try.coder.app URL by not specifying an access URL.\\r\\n                                                                                                                                                                                                      \\r\\r\\n                                           \\r\\nView the Web UI: https://foobarbaz.mydomain\"\n"}
{"Time":"2023-03-29T13:37:33.617702539Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Human","Output":"--- PASS: TestServer/Logging/Human (0.70s)\n"}
{"Time":"2023-03-29T13:37:33.617717314Z","Action":"pass","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Human","Elapsed":0.7}
{"Time":"2023-03-29T13:37:33.617728397Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/NoWarningWithRemoteAccessURL","Output":"    ptytest.go:121: 2023-03-29 13:37:33.346: cmd: \"                                   \"\n"}
{"Time":"2023-03-29T13:37:33.617738582Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/NoWarningWithRemoteAccessURL","Output":"    ptytest.go:121: 2023-03-29 13:37:33.617: cmd: \"View the Web UI: https://google.com\\r\"\n"}
{"Time":"2023-03-29T13:37:33.617745792Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/NoWarningWithRemoteAccessURL","Output":"    ptytest.go:121: 2023-03-29 13:37:33.617: cmd: \"                                                                \"\n"}
{"Time":"2023-03-29T13:37:33.617755568Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/NoWarningWithRemoteAccessURL","Output":"    ptytest.go:121: 2023-03-29 13:37:33.617: cmd: \"==\u003e Logs will stream in below (press ctrl+c to gracefully exit):\\r\"\n"}
{"Time":"2023-03-29T13:37:33.617776141Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/NoWarningWithRemoteAccessURL","Output":"    server_test.go:238: 2023-03-29 13:37:33.617: cmd: matched \"View the Web UI: https://google.com\" = \"Started HTTP listener at http://[::]:39671\\r\\n                                   \\r\\nView the Web UI: https://google.com\"\n"}
{"Time":"2023-03-29T13:37:33.618700109Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/NoWarningWithRemoteAccessURL","Output":"    ptytest.go:83: 2023-03-29 13:37:33.618: cmd: closing tpty: close\n"}
{"Time":"2023-03-29T13:37:33.618717448Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/NoWarningWithRemoteAccessURL","Output":"    ptytest.go:74: 2023-03-29 13:37:33.618: cmd: closing pty\n"}
{"Time":"2023-03-29T13:37:33.618729015Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/NoWarningWithRemoteAccessURL","Output":"    ptytest.go:110: 2023-03-29 13:37:33.618: cmd: copy done: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:37:33.618738942Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/NoWarningWithRemoteAccessURL","Output":"    ptytest.go:111: 2023-03-29 13:37:33.618: cmd: closing out\n"}
{"Time":"2023-03-29T13:37:33.618748331Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/NoWarningWithRemoteAccessURL","Output":"    ptytest.go:113: 2023-03-29 13:37:33.618: cmd: closed out: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:37:33.618809556Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/NoWarningWithRemoteAccessURL","Output":"    ptytest.go:76: 2023-03-29 13:37:33.618: cmd: closed pty: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:33.618823389Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/NoWarningWithRemoteAccessURL","Output":"    ptytest.go:74: 2023-03-29 13:37:33.618: cmd: closing logw\n"}
{"Time":"2023-03-29T13:37:33.618833326Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/NoWarningWithRemoteAccessURL","Output":"    ptytest.go:76: 2023-03-29 13:37:33.618: cmd: closed logw: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:33.618840112Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/NoWarningWithRemoteAccessURL","Output":"    ptytest.go:74: 2023-03-29 13:37:33.618: cmd: closing logr\n"}
{"Time":"2023-03-29T13:37:33.61884905Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/NoWarningWithRemoteAccessURL","Output":"    ptytest.go:76: 2023-03-29 13:37:33.618: cmd: closed logr: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:33.618860551Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/NoWarningWithRemoteAccessURL","Output":"    ptytest.go:102: 2023-03-29 13:37:33.618: cmd: closed tpty\n"}
{"Time":"2023-03-29T13:37:33.618993236Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/NoWarningWithRemoteAccessURL","Output":"--- PASS: TestServer/NoWarningWithRemoteAccessURL (0.72s)\n"}
{"Time":"2023-03-29T13:37:33.620193889Z","Action":"pass","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/NoWarningWithRemoteAccessURL","Elapsed":0.72}
{"Time":"2023-03-29T13:37:33.620216262Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit/Default","Output":"    clitest.go:50: stdout: Gracefully shut down API server\n"}
{"Time":"2023-03-29T13:37:33.620558208Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoHTTPListener","Output":"    ptytest.go:121: 2023-03-29 13:37:33.620: cmd: \"Started TLS/HTTPS listener at https://[::]:40599\"\n"}
{"Time":"2023-03-29T13:37:33.62057844Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoHTTPListener","Output":"    ptytest.go:121: 2023-03-29 13:37:33.620: cmd: \"                                    \"\n"}
{"Time":"2023-03-29T13:37:33.620586258Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoHTTPListener","Output":"    ptytest.go:121: 2023-03-29 13:37:33.620: cmd: \"View the Web UI: https://example.com\\r\"\n"}
{"Time":"2023-03-29T13:37:33.620613734Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoHTTPListener","Output":"    server_test.go:641: 2023-03-29 13:37:33.620: cmd: matched \"Started TLS/HTTPS listener at\" = \"Started TLS/HTTPS listener at\"\n"}
{"Time":"2023-03-29T13:37:33.620652863Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoHTTPListener","Output":"    server_test.go:642: 2023-03-29 13:37:33.620: cmd: ReadLine ctx has no deadline, using 10s\n"}
{"Time":"2023-03-29T13:37:33.620669386Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoHTTPListener","Output":"    server_test.go:642: 2023-03-29 13:37:33.620: cmd: matched newline = \" https://[::]:40599\"\n"}
{"Time":"2023-03-29T13:37:33.623941782Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit/Changed","Output":"    clitest.go:50: stdout: ==\u003e Logs will stream in below (press ctrl+c to gracefully exit):\n"}
{"Time":"2023-03-29T13:37:33.634109465Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoTLSListener","Output":"    ptytest.go:121: 2023-03-29 13:37:33.634: cmd: \"Started HTTP listener at http://[::]:44615\"\n"}
{"Time":"2023-03-29T13:37:33.6341392Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoTLSListener","Output":"    server_test.go:634: 2023-03-29 13:37:33.634: cmd: matched \"Started HTTP listener at\" = \"Started HTTP listener at\"\n"}
{"Time":"2023-03-29T13:37:33.634159059Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoTLSListener","Output":"    server_test.go:635: 2023-03-29 13:37:33.634: cmd: ReadLine ctx has no deadline, using 10s\n"}
{"Time":"2023-03-29T13:37:33.634168084Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoTLSListener","Output":"    server_test.go:635: 2023-03-29 13:37:33.634: cmd: matched newline = \" http://[::]:44615\"\n"}
{"Time":"2023-03-29T13:37:33.639592274Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/TLS","Output":"    ptytest.go:121: 2023-03-29 13:37:33.639: cmd: \"WARN: Address is deprecated, please use HTTP Address and TLS Address instead.\"\n"}
{"Time":"2023-03-29T13:37:33.639622715Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/TLS","Output":"    ptytest.go:121: 2023-03-29 13:37:33.639: cmd: \"                                                                       \\r\"\n"}
{"Time":"2023-03-29T13:37:33.639633384Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/TLS","Output":"    ptytest.go:121: 2023-03-29 13:37:33.639: cmd: \"Started TLS/HTTPS listener at https://[::]:44869\"\n"}
{"Time":"2023-03-29T13:37:33.642427153Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirectWithWildcard","Output":"    ptytest.go:121: 2023-03-29 13:37:33.642: cmd: \"Started TLS/HTTPS listener at https://[::]:43889\"\n"}
{"Time":"2023-03-29T13:37:33.642448651Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirectWithWildcard","Output":"    ptytest.go:121: 2023-03-29 13:37:33.642: cmd: \"                                    \"\n"}
{"Time":"2023-03-29T13:37:33.642456925Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirectWithWildcard","Output":"    ptytest.go:121: 2023-03-29 13:37:33.642: cmd: \"View the Web UI: https://example.com\\r\"\n"}
{"Time":"2023-03-29T13:37:33.642468331Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirectWithWildcard","Output":"    server_test.go:641: 2023-03-29 13:37:33.642: cmd: matched \"Started TLS/HTTPS listener at\" = \"Started TLS/HTTPS listener at\"\n"}
{"Time":"2023-03-29T13:37:33.642477804Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirectWithWildcard","Output":"    server_test.go:642: 2023-03-29 13:37:33.642: cmd: ReadLine ctx has no deadline, using 10s\n"}
{"Time":"2023-03-29T13:37:33.642487898Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirectWithWildcard","Output":"    server_test.go:642: 2023-03-29 13:37:33.642: cmd: matched newline = \" https://[::]:43889\"\n"}
{"Time":"2023-03-29T13:37:33.646526946Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirect","Output":"    ptytest.go:121: 2023-03-29 13:37:33.646: cmd: \"Started HTTP listener at http://[::]:33323\"\n"}
{"Time":"2023-03-29T13:37:33.646552176Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirect","Output":"    ptytest.go:121: 2023-03-29 13:37:33.646: cmd: \"Started TLS/HTTPS listener at https://[::]:36951\"\n"}
{"Time":"2023-03-29T13:37:33.64656429Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirect","Output":"    ptytest.go:121: 2023-03-29 13:37:33.646: cmd: \"                                    \"\n"}
{"Time":"2023-03-29T13:37:33.646572476Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirect","Output":"    ptytest.go:121: 2023-03-29 13:37:33.646: cmd: \"View the Web UI: https://example.com\\r\"\n"}
{"Time":"2023-03-29T13:37:33.646580011Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirect","Output":"    server_test.go:634: 2023-03-29 13:37:33.646: cmd: matched \"Started HTTP listener at\" = \"Started HTTP listener at\"\n"}
{"Time":"2023-03-29T13:37:33.646591361Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirect","Output":"    server_test.go:635: 2023-03-29 13:37:33.646: cmd: ReadLine ctx has no deadline, using 10s\n"}
{"Time":"2023-03-29T13:37:33.646616475Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirect","Output":"    server_test.go:635: 2023-03-29 13:37:33.646: cmd: matched newline = \" http://[::]:33323\"\n"}
{"Time":"2023-03-29T13:37:33.646662584Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirect","Output":"    server_test.go:641: 2023-03-29 13:37:33.646: cmd: matched \"Started TLS/HTTPS listener at\" = \"Started TLS/HTTPS listener at\"\n"}
{"Time":"2023-03-29T13:37:33.646681881Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirect","Output":"    server_test.go:642: 2023-03-29 13:37:33.646: cmd: ReadLine ctx has no deadline, using 10s\n"}
{"Time":"2023-03-29T13:37:33.646699362Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirect","Output":"    server_test.go:642: 2023-03-29 13:37:33.646: cmd: matched newline = \" https://[::]:36951\"\n"}
{"Time":"2023-03-29T13:37:33.648933788Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # HELP coderd_api_active_users_duration_hour The number of users that have been active within the last hour.\n"}
{"Time":"2023-03-29T13:37:33.648967031Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # TYPE coderd_api_active_users_duration_hour gauge\n"}
{"Time":"2023-03-29T13:37:33.648980231Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # HELP coderd_api_concurrent_requests The number of concurrent API requests.\n"}
{"Time":"2023-03-29T13:37:33.649053919Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # TYPE coderd_api_concurrent_requests gauge\n"}
{"Time":"2023-03-29T13:37:33.649069592Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned coderd_api_concurrent_requests 0\n"}
{"Time":"2023-03-29T13:37:33.649078578Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # HELP coderd_api_concurrent_websockets The total number of concurrent API websockets.\n"}
{"Time":"2023-03-29T13:37:33.64908451Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # TYPE coderd_api_concurrent_websockets gauge\n"}
{"Time":"2023-03-29T13:37:33.64908947Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned coderd_api_concurrent_websockets 0\n"}
{"Time":"2023-03-29T13:37:33.649096688Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # HELP coderd_api_workspace_latest_build_total The latest workspace builds with a status.\n"}
{"Time":"2023-03-29T13:37:33.649103792Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # TYPE coderd_api_workspace_latest_build_total gauge\n"}
{"Time":"2023-03-29T13:37:33.649110998Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # HELP coderd_authz_authorize_duration_seconds Duration of the 'Authorize' call in seconds. Only counts calls that succeed.\n"}
{"Time":"2023-03-29T13:37:33.649125082Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # TYPE coderd_authz_authorize_duration_seconds histogram\n"}
{"Time":"2023-03-29T13:37:33.649136372Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned coderd_authz_authorize_duration_seconds_bucket{allowed=\"true\",le=\"0.0005\"} 0\n"}
{"Time":"2023-03-29T13:37:33.649158836Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned coderd_authz_authorize_duration_seconds_bucket{allowed=\"true\",le=\"0.001\"} 0\n"}
{"Time":"2023-03-29T13:37:33.649167411Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned coderd_authz_authorize_duration_seconds_bucket{allowed=\"true\",le=\"0.002\"} 2\n"}
{"Time":"2023-03-29T13:37:33.649174438Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned coderd_authz_authorize_duration_seconds_bucket{allowed=\"true\",le=\"0.003\"} 2\n"}
{"Time":"2023-03-29T13:37:33.649184378Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned coderd_authz_authorize_duration_seconds_bucket{allowed=\"true\",le=\"0.005\"} 2\n"}
{"Time":"2023-03-29T13:37:33.649205265Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned coderd_authz_authorize_duration_seconds_bucket{allowed=\"true\",le=\"0.01\"} 2\n"}
{"Time":"2023-03-29T13:37:33.649213251Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned coderd_authz_authorize_duration_seconds_bucket{allowed=\"true\",le=\"0.02\"} 2\n"}
{"Time":"2023-03-29T13:37:33.649222908Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned coderd_authz_authorize_duration_seconds_bucket{allowed=\"true\",le=\"0.035\"} 2\n"}
{"Time":"2023-03-29T13:37:33.649235415Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned coderd_authz_authorize_duration_seconds_bucket{allowed=\"true\",le=\"0.05\"} 2\n"}
{"Time":"2023-03-29T13:37:33.649253778Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned coderd_authz_authorize_duration_seconds_bucket{allowed=\"true\",le=\"0.075\"} 2\n"}
{"Time":"2023-03-29T13:37:33.649261752Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned coderd_authz_authorize_duration_seconds_bucket{allowed=\"true\",le=\"0.1\"} 2\n"}
{"Time":"2023-03-29T13:37:33.649271274Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned coderd_authz_authorize_duration_seconds_bucket{allowed=\"true\",le=\"0.25\"} 2\n"}
{"Time":"2023-03-29T13:37:33.649292314Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned coderd_authz_authorize_duration_seconds_bucket{allowed=\"true\",le=\"0.75\"} 2\n"}
{"Time":"2023-03-29T13:37:33.649300333Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned coderd_authz_authorize_duration_seconds_bucket{allowed=\"true\",le=\"1\"} 2\n"}
{"Time":"2023-03-29T13:37:33.649310057Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned coderd_authz_authorize_duration_seconds_bucket{allowed=\"true\",le=\"+Inf\"} 2\n"}
{"Time":"2023-03-29T13:37:33.649320729Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned coderd_authz_authorize_duration_seconds_sum{allowed=\"true\"} 0.002876051\n"}
{"Time":"2023-03-29T13:37:33.649345041Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned coderd_authz_authorize_duration_seconds_count{allowed=\"true\"} 2\n"}
{"Time":"2023-03-29T13:37:33.649356377Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # HELP coderd_authz_prepare_authorize_duration_seconds Duration of the 'PrepareAuthorize' call in seconds.\n"}
{"Time":"2023-03-29T13:37:33.649363746Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # TYPE coderd_authz_prepare_authorize_duration_seconds histogram\n"}
{"Time":"2023-03-29T13:37:33.649370497Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned coderd_authz_prepare_authorize_duration_seconds_bucket{le=\"0.0005\"} 0\n"}
{"Time":"2023-03-29T13:37:33.649391953Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned coderd_authz_prepare_authorize_duration_seconds_bucket{le=\"0.001\"} 0\n"}
{"Time":"2023-03-29T13:37:33.649399779Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned coderd_authz_prepare_authorize_duration_seconds_bucket{le=\"0.002\"} 0\n"}
{"Time":"2023-03-29T13:37:33.649410888Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned coderd_authz_prepare_authorize_duration_seconds_bucket{le=\"0.003\"} 0\n"}
{"Time":"2023-03-29T13:37:33.649428841Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned coderd_authz_prepare_authorize_duration_seconds_bucket{le=\"0.005\"} 0\n"}
{"Time":"2023-03-29T13:37:33.649438526Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned coderd_authz_prepare_authorize_duration_seconds_bucket{le=\"0.01\"} 0\n"}
{"Time":"2023-03-29T13:37:33.649445746Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned coderd_authz_prepare_authorize_duration_seconds_bucket{le=\"0.02\"} 0\n"}
{"Time":"2023-03-29T13:37:33.64947999Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned coderd_authz_prepare_authorize_duration_seconds_bucket{le=\"0.035\"} 0\n"}
{"Time":"2023-03-29T13:37:33.649486523Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned coderd_authz_prepare_authorize_duration_seconds_bucket{le=\"0.05\"} 0\n"}
{"Time":"2023-03-29T13:37:33.649643599Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned coderd_authz_prepare_authorize_duration_seconds_bucket{le=\"0.075\"} 0\n"}
{"Time":"2023-03-29T13:37:33.649652811Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned coderd_authz_prepare_authorize_duration_seconds_bucket{le=\"0.1\"} 0\n"}
{"Time":"2023-03-29T13:37:33.649659776Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned coderd_authz_prepare_authorize_duration_seconds_bucket{le=\"0.25\"} 0\n"}
{"Time":"2023-03-29T13:37:33.649677202Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned coderd_authz_prepare_authorize_duration_seconds_bucket{le=\"0.75\"} 0\n"}
{"Time":"2023-03-29T13:37:33.649684812Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned coderd_authz_prepare_authorize_duration_seconds_bucket{le=\"1\"} 0\n"}
{"Time":"2023-03-29T13:37:33.64970109Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned coderd_authz_prepare_authorize_duration_seconds_bucket{le=\"+Inf\"} 0\n"}
{"Time":"2023-03-29T13:37:33.64971819Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned coderd_authz_prepare_authorize_duration_seconds_sum 0\n"}
{"Time":"2023-03-29T13:37:33.649725513Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned coderd_authz_prepare_authorize_duration_seconds_count 0\n"}
{"Time":"2023-03-29T13:37:33.649741363Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # HELP go_gc_duration_seconds A summary of the pause duration of garbage collection cycles.\n"}
{"Time":"2023-03-29T13:37:33.649751815Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # TYPE go_gc_duration_seconds summary\n"}
{"Time":"2023-03-29T13:37:33.649770366Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned go_gc_duration_seconds{quantile=\"0\"} 1.6651e-05\n"}
{"Time":"2023-03-29T13:37:33.649779436Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned go_gc_duration_seconds{quantile=\"0.25\"} 3.0073e-05\n"}
{"Time":"2023-03-29T13:37:33.649795479Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned go_gc_duration_seconds{quantile=\"0.5\"} 3.3851e-05\n"}
{"Time":"2023-03-29T13:37:33.649803042Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned go_gc_duration_seconds{quantile=\"0.75\"} 5.0874e-05\n"}
{"Time":"2023-03-29T13:37:33.649822842Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned go_gc_duration_seconds{quantile=\"1\"} 0.000164674\n"}
{"Time":"2023-03-29T13:37:33.649830516Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned go_gc_duration_seconds_sum 0.000461803\n"}
{"Time":"2023-03-29T13:37:33.64984149Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned go_gc_duration_seconds_count 9\n"}
{"Time":"2023-03-29T13:37:33.649859074Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # HELP go_goroutines Number of goroutines that currently exist.\n"}
{"Time":"2023-03-29T13:37:33.649876364Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # TYPE go_goroutines gauge\n"}
{"Time":"2023-03-29T13:37:33.649883909Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned go_goroutines 400\n"}
{"Time":"2023-03-29T13:37:33.649893852Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # HELP go_info Information about the Go environment.\n"}
{"Time":"2023-03-29T13:37:33.649915539Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # TYPE go_info gauge\n"}
{"Time":"2023-03-29T13:37:33.649923065Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned go_info{version=\"go1.20\"} 1\n"}
{"Time":"2023-03-29T13:37:33.649934513Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # HELP go_memstats_alloc_bytes Number of bytes allocated and still in use.\n"}
{"Time":"2023-03-29T13:37:33.64994537Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # TYPE go_memstats_alloc_bytes gauge\n"}
{"Time":"2023-03-29T13:37:33.649964236Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned go_memstats_alloc_bytes 4.4139992e+07\n"}
{"Time":"2023-03-29T13:37:33.649974501Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # HELP go_memstats_alloc_bytes_total Total number of bytes allocated, even if freed.\n"}
{"Time":"2023-03-29T13:37:33.649985399Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # TYPE go_memstats_alloc_bytes_total counter\n"}
{"Time":"2023-03-29T13:37:33.650002195Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned go_memstats_alloc_bytes_total 1.07033304e+08\n"}
{"Time":"2023-03-29T13:37:33.650019066Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # HELP go_memstats_buck_hash_sys_bytes Number of bytes used by the profiling bucket hash table.\n"}
{"Time":"2023-03-29T13:37:33.650026662Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # TYPE go_memstats_buck_hash_sys_bytes gauge\n"}
{"Time":"2023-03-29T13:37:33.650037208Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned go_memstats_buck_hash_sys_bytes 1.487772e+06\n"}
{"Time":"2023-03-29T13:37:33.650056379Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # HELP go_memstats_frees_total Total number of frees.\n"}
{"Time":"2023-03-29T13:37:33.650063678Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # TYPE go_memstats_frees_total counter\n"}
{"Time":"2023-03-29T13:37:33.650079718Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned go_memstats_frees_total 341416\n"}
{"Time":"2023-03-29T13:37:33.650087192Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # HELP go_memstats_gc_sys_bytes Number of bytes used for garbage collection system metadata.\n"}
{"Time":"2023-03-29T13:37:33.65010648Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # TYPE go_memstats_gc_sys_bytes gauge\n"}
{"Time":"2023-03-29T13:37:33.650113893Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned go_memstats_gc_sys_bytes 9.376592e+06\n"}
{"Time":"2023-03-29T13:37:33.650132561Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # HELP go_memstats_heap_alloc_bytes Number of heap bytes allocated and still in use.\n"}
{"Time":"2023-03-29T13:37:33.650140278Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # TYPE go_memstats_heap_alloc_bytes gauge\n"}
{"Time":"2023-03-29T13:37:33.650152649Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned go_memstats_heap_alloc_bytes 4.4139992e+07\n"}
{"Time":"2023-03-29T13:37:33.650314526Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # HELP go_memstats_heap_idle_bytes Number of heap bytes waiting to be used.\n"}
{"Time":"2023-03-29T13:37:33.650323426Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # TYPE go_memstats_heap_idle_bytes gauge\n"}
{"Time":"2023-03-29T13:37:33.650332952Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned go_memstats_heap_idle_bytes 4.481024e+06\n"}
{"Time":"2023-03-29T13:37:33.65035073Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # HELP go_memstats_heap_inuse_bytes Number of heap bytes that are in use.\n"}
{"Time":"2023-03-29T13:37:33.650358078Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # TYPE go_memstats_heap_inuse_bytes gauge\n"}
{"Time":"2023-03-29T13:37:33.650374519Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned go_memstats_heap_inuse_bytes 4.6473216e+07\n"}
{"Time":"2023-03-29T13:37:33.650392405Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # HELP go_memstats_heap_objects Number of allocated objects.\n"}
{"Time":"2023-03-29T13:37:33.650400167Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # TYPE go_memstats_heap_objects gauge\n"}
{"Time":"2023-03-29T13:37:33.650411Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned go_memstats_heap_objects 198877\n"}
{"Time":"2023-03-29T13:37:33.650427198Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # HELP go_memstats_heap_released_bytes Number of heap bytes released to OS.\n"}
{"Time":"2023-03-29T13:37:33.650443875Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # TYPE go_memstats_heap_released_bytes gauge\n"}
{"Time":"2023-03-29T13:37:33.6504512Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned go_memstats_heap_released_bytes 172032\n"}
{"Time":"2023-03-29T13:37:33.650466769Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # HELP go_memstats_heap_sys_bytes Number of heap bytes obtained from system.\n"}
{"Time":"2023-03-29T13:37:33.650476593Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # TYPE go_memstats_heap_sys_bytes gauge\n"}
{"Time":"2023-03-29T13:37:33.650493555Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned go_memstats_heap_sys_bytes 5.095424e+07\n"}
{"Time":"2023-03-29T13:37:33.650501064Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # HELP go_memstats_last_gc_time_seconds Number of seconds since 1970 of last garbage collection.\n"}
{"Time":"2023-03-29T13:37:33.650517983Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # TYPE go_memstats_last_gc_time_seconds gauge\n"}
{"Time":"2023-03-29T13:37:33.650530998Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned go_memstats_last_gc_time_seconds 1.680097053302355e+09\n"}
{"Time":"2023-03-29T13:37:33.65054228Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # HELP go_memstats_lookups_total Total number of pointer lookups.\n"}
{"Time":"2023-03-29T13:37:33.650552934Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # TYPE go_memstats_lookups_total counter\n"}
{"Time":"2023-03-29T13:37:33.650563901Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned go_memstats_lookups_total 0\n"}
{"Time":"2023-03-29T13:37:33.650584173Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # HELP go_memstats_mallocs_total Total number of mallocs.\n"}
{"Time":"2023-03-29T13:37:33.650591833Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # TYPE go_memstats_mallocs_total counter\n"}
{"Time":"2023-03-29T13:37:33.650607986Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned go_memstats_mallocs_total 540293\n"}
{"Time":"2023-03-29T13:37:33.650615529Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # HELP go_memstats_mcache_inuse_bytes Number of bytes in use by mcache structures.\n"}
{"Time":"2023-03-29T13:37:33.650641182Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # TYPE go_memstats_mcache_inuse_bytes gauge\n"}
{"Time":"2023-03-29T13:37:33.650649185Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned go_memstats_mcache_inuse_bytes 1200\n"}
{"Time":"2023-03-29T13:37:33.650655792Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # HELP go_memstats_mcache_sys_bytes Number of bytes used for mcache structures obtained from system.\n"}
{"Time":"2023-03-29T13:37:33.650675584Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # TYPE go_memstats_mcache_sys_bytes gauge\n"}
{"Time":"2023-03-29T13:37:33.650682964Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned go_memstats_mcache_sys_bytes 15600\n"}
{"Time":"2023-03-29T13:37:33.650699492Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # HELP go_memstats_mspan_inuse_bytes Number of bytes in use by mspan structures.\n"}
{"Time":"2023-03-29T13:37:33.65070695Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # TYPE go_memstats_mspan_inuse_bytes gauge\n"}
{"Time":"2023-03-29T13:37:33.650725284Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned go_memstats_mspan_inuse_bytes 415680\n"}
{"Time":"2023-03-29T13:37:33.650732919Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # HELP go_memstats_mspan_sys_bytes Number of bytes used for mspan structures obtained from system.\n"}
{"Time":"2023-03-29T13:37:33.650742233Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # TYPE go_memstats_mspan_sys_bytes gauge\n"}
{"Time":"2023-03-29T13:37:33.650753796Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned go_memstats_mspan_sys_bytes 440640\n"}
{"Time":"2023-03-29T13:37:33.650773086Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # HELP go_memstats_next_gc_bytes Number of heap bytes when next garbage collection will take place.\n"}
{"Time":"2023-03-29T13:37:33.650780844Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # TYPE go_memstats_next_gc_bytes gauge\n"}
{"Time":"2023-03-29T13:37:33.650791619Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned go_memstats_next_gc_bytes 5.744056e+07\n"}
{"Time":"2023-03-29T13:37:33.650939729Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # HELP go_memstats_other_sys_bytes Number of bytes used for other system allocations.\n"}
{"Time":"2023-03-29T13:37:33.650948462Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # TYPE go_memstats_other_sys_bytes gauge\n"}
{"Time":"2023-03-29T13:37:33.650960125Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned go_memstats_other_sys_bytes 407532\n"}
{"Time":"2023-03-29T13:37:33.65097098Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # HELP go_memstats_stack_inuse_bytes Number of bytes in use by the stack allocator.\n"}
{"Time":"2023-03-29T13:37:33.650989112Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # TYPE go_memstats_stack_inuse_bytes gauge\n"}
{"Time":"2023-03-29T13:37:33.650999328Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned go_memstats_stack_inuse_bytes 3.506176e+06\n"}
{"Time":"2023-03-29T13:37:33.651015975Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # HELP go_memstats_stack_sys_bytes Number of bytes obtained from system for stack allocator.\n"}
{"Time":"2023-03-29T13:37:33.651023745Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # TYPE go_memstats_stack_sys_bytes gauge\n"}
{"Time":"2023-03-29T13:37:33.651042622Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned go_memstats_stack_sys_bytes 3.506176e+06\n"}
{"Time":"2023-03-29T13:37:33.651050141Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # HELP go_memstats_sys_bytes Number of bytes obtained from system.\n"}
{"Time":"2023-03-29T13:37:33.651066559Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # TYPE go_memstats_sys_bytes gauge\n"}
{"Time":"2023-03-29T13:37:33.65107676Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned go_memstats_sys_bytes 6.6188552e+07\n"}
{"Time":"2023-03-29T13:37:33.651096334Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # HELP go_threads Number of OS threads created.\n"}
{"Time":"2023-03-29T13:37:33.651104041Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # TYPE go_threads gauge\n"}
{"Time":"2023-03-29T13:37:33.651114838Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned go_threads 11\n"}
{"Time":"2023-03-29T13:37:33.651133818Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # HELP process_cpu_seconds_total Total user and system CPU time spent in seconds.\n"}
{"Time":"2023-03-29T13:37:33.651141836Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # TYPE process_cpu_seconds_total counter\n"}
{"Time":"2023-03-29T13:37:33.651152615Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned process_cpu_seconds_total 0.47\n"}
{"Time":"2023-03-29T13:37:33.651169215Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # HELP process_max_fds Maximum number of open file descriptors.\n"}
{"Time":"2023-03-29T13:37:33.651188139Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # TYPE process_max_fds gauge\n"}
{"Time":"2023-03-29T13:37:33.651196288Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned process_max_fds 1.048576e+06\n"}
{"Time":"2023-03-29T13:37:33.651207299Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # HELP process_open_fds Number of open file descriptors.\n"}
{"Time":"2023-03-29T13:37:33.651218057Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # TYPE process_open_fds gauge\n"}
{"Time":"2023-03-29T13:37:33.651236861Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned process_open_fds 144\n"}
{"Time":"2023-03-29T13:37:33.651248494Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # HELP process_resident_memory_bytes Resident memory size in bytes.\n"}
{"Time":"2023-03-29T13:37:33.651257364Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # TYPE process_resident_memory_bytes gauge\n"}
{"Time":"2023-03-29T13:37:33.651280196Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned process_resident_memory_bytes 1.14364416e+08\n"}
{"Time":"2023-03-29T13:37:33.65128834Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # HELP process_start_time_seconds Start time of the process since unix epoch in seconds.\n"}
{"Time":"2023-03-29T13:37:33.651296824Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # TYPE process_start_time_seconds gauge\n"}
{"Time":"2023-03-29T13:37:33.651307674Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned process_start_time_seconds 1.68009705209e+09\n"}
{"Time":"2023-03-29T13:37:33.651326547Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # HELP process_virtual_memory_bytes Virtual memory size in bytes.\n"}
{"Time":"2023-03-29T13:37:33.651334348Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # TYPE process_virtual_memory_bytes gauge\n"}
{"Time":"2023-03-29T13:37:33.651345305Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned process_virtual_memory_bytes 1.4835712e+09\n"}
{"Time":"2023-03-29T13:37:33.651361504Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # HELP process_virtual_memory_max_bytes Maximum amount of virtual memory available in bytes.\n"}
{"Time":"2023-03-29T13:37:33.651378854Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # TYPE process_virtual_memory_max_bytes gauge\n"}
{"Time":"2023-03-29T13:37:33.651386339Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned process_virtual_memory_max_bytes 1.8446744073709552e+19\n"}
{"Time":"2023-03-29T13:37:33.651397458Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # HELP promhttp_metric_handler_requests_in_flight Current number of scrapes being served.\n"}
{"Time":"2023-03-29T13:37:33.65149956Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # TYPE promhttp_metric_handler_requests_in_flight gauge\n"}
{"Time":"2023-03-29T13:37:33.65150712Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned promhttp_metric_handler_requests_in_flight 1\n"}
{"Time":"2023-03-29T13:37:33.651512875Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # HELP promhttp_metric_handler_requests_total Total number of scrapes by HTTP status code.\n"}
{"Time":"2023-03-29T13:37:33.651517405Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned # TYPE promhttp_metric_handler_requests_total counter\n"}
{"Time":"2023-03-29T13:37:33.651608377Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned promhttp_metric_handler_requests_total{code=\"200\"} 0\n"}
{"Time":"2023-03-29T13:37:33.651617771Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned promhttp_metric_handler_requests_total{code=\"500\"} 0\n"}
{"Time":"2023-03-29T13:37:33.651624722Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    server_test.go:981: scanned promhttp_metric_handler_requests_total{code=\"503\"} 0\n"}
{"Time":"2023-03-29T13:37:33.653302095Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit/Default","Output":"    clitest.go:50: stdout: Waiting for WebSocket connections to close...\n"}
{"Time":"2023-03-29T13:37:33.687811194Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoTLSListener","Output":"    ptytest.go:121: 2023-03-29 13:37:33.687: cmd: \"                                    \"\n"}
{"Time":"2023-03-29T13:37:33.68784324Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoTLSListener","Output":"    ptytest.go:121: 2023-03-29 13:37:33.687: cmd: \"View the Web UI: https://example.com\\r\"\n"}
{"Time":"2023-03-29T13:37:33.687847743Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoTLSListener","Output":"    ptytest.go:121: 2023-03-29 13:37:33.687: cmd: \"                                                                \"\n"}
{"Time":"2023-03-29T13:37:33.687859388Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoTLSListener","Output":"    ptytest.go:121: 2023-03-29 13:37:33.687: cmd: \"==\u003e Logs will stream in below (press ctrl+c to gracefully exit):\\r\"\n"}
{"Time":"2023-03-29T13:37:33.69314768Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/TLS","Output":"    server_test.go:829: 2023-03-29 13:37:33.690: cmd: matched \"is deprecated\" = \"WARN: Address is deprecated\"\n"}
{"Time":"2023-03-29T13:37:33.699837388Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    clitest.go:50: stdout: \u001b[1mInterrupt caught, gracefully exiting. Use ctrl+\\ to force quit\u001b[0m\n"}
{"Time":"2023-03-29T13:37:33.700125946Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    clitest.go:50: stdout: Shutting down API server...\n"}
{"Time":"2023-03-29T13:37:33.700416667Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit/Default","Output":"    clitest.go:50: stdout: Done waiting for WebSocket connections\n"}
{"Time":"2023-03-29T13:37:33.701833349Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit/Default","Output":"--- PASS: TestServer/RateLimit/Default (0.85s)\n"}
{"Time":"2023-03-29T13:37:33.792395824Z","Action":"pass","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit/Default","Elapsed":0.85}
{"Time":"2023-03-29T13:37:33.792432021Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    clitest.go:50: stdout: Gracefully shut down API server\n"}
{"Time":"2023-03-29T13:37:33.792443805Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    clitest.go:50: stdout: Waiting for WebSocket connections to close...\n"}
{"Time":"2023-03-29T13:37:33.796165422Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RemoteAccessURL","Output":"    ptytest.go:83: 2023-03-29 13:37:33.795: cmd: closing tpty: close\n"}
{"Time":"2023-03-29T13:37:33.796198633Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RemoteAccessURL","Output":"    ptytest.go:74: 2023-03-29 13:37:33.796: cmd: closing pty\n"}
{"Time":"2023-03-29T13:37:33.797173408Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"    clitest.go:50: stdout: Done waiting for WebSocket connections\n"}
{"Time":"2023-03-29T13:37:33.797427041Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Telemetry","Output":"    clitest.go:50: stdout: \u001b[1mInterrupt caught, gracefully exiting. Use ctrl+\\ to force quit\u001b[0m\n"}
{"Time":"2023-03-29T13:37:33.79757722Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Telemetry","Output":"    clitest.go:50: stdout: Shutting down API server...\n"}
{"Time":"2023-03-29T13:37:33.797913033Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Telemetry","Output":"    clitest.go:50: stdout: Gracefully shut down API server\n"}
{"Time":"2023-03-29T13:37:33.797928952Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Telemetry","Output":"    clitest.go:50: stdout: Waiting for WebSocket connections to close...\n"}
{"Time":"2023-03-29T13:37:33.803483718Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Telemetry","Output":"    clitest.go:50: stdout: Done waiting for WebSocket connections\n"}
{"Time":"2023-03-29T13:37:33.803533703Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RemoteAccessURL","Output":"    ptytest.go:121: 2023-03-29 13:37:33.799: cmd: \"Interrupt caught, gracefully exiting. Use ctrl+\\\\ to force quit\"\n"}
{"Time":"2023-03-29T13:37:33.803541349Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RemoteAccessURL","Output":"    ptytest.go:121: 2023-03-29 13:37:33.799: cmd: \"Shutting down API server...\"\n"}
{"Time":"2023-03-29T13:37:33.803549183Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RemoteAccessURL","Output":"    ptytest.go:121: 2023-03-29 13:37:33.799: cmd: \"                           \\r\"\n"}
{"Time":"2023-03-29T13:37:33.80355496Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RemoteAccessURL","Output":"    ptytest.go:121: 2023-03-29 13:37:33.799: cmd: \"Gracefully shut down API server\"\n"}
{"Time":"2023-03-29T13:37:33.803560722Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RemoteAccessURL","Output":"    ptytest.go:121: 2023-03-29 13:37:33.799: cmd: \"                               \\r\"\n"}
{"Time":"2023-03-29T13:37:33.803565907Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RemoteAccessURL","Output":"    ptytest.go:121: 2023-03-29 13:37:33.799: cmd: \"Waiting for WebSocket connections to close...\"\n"}
{"Time":"2023-03-29T13:37:33.803571719Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RemoteAccessURL","Output":"    ptytest.go:121: 2023-03-29 13:37:33.799: cmd: \"                                             \\r\"\n"}
{"Time":"2023-03-29T13:37:33.803577128Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RemoteAccessURL","Output":"    ptytest.go:121: 2023-03-29 13:37:33.799: cmd: \"Done waiting for WebSocket connections\"\n"}
{"Time":"2023-03-29T13:37:33.803582995Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RemoteAccessURL","Output":"    ptytest.go:121: 2023-03-29 13:37:33.799: cmd: \"                                      \\r\"\n"}
{"Time":"2023-03-29T13:37:33.803588238Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RemoteAccessURL","Output":"    ptytest.go:110: 2023-03-29 13:37:33.799: cmd: copy done: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:37:33.803593211Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RemoteAccessURL","Output":"    ptytest.go:111: 2023-03-29 13:37:33.799: cmd: closing out\n"}
{"Time":"2023-03-29T13:37:33.803598107Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RemoteAccessURL","Output":"    ptytest.go:113: 2023-03-29 13:37:33.799: cmd: closed out: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:37:33.807382663Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoHTTPListener","Output":"    ptytest.go:121: 2023-03-29 13:37:33.807: cmd: \"                                                                \"\n"}
{"Time":"2023-03-29T13:37:33.807425699Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoHTTPListener","Output":"    ptytest.go:121: 2023-03-29 13:37:33.807: cmd: \"==\u003e Logs will stream in below (press ctrl+c to gracefully exit):\\r\"\n"}
{"Time":"2023-03-29T13:37:33.812449918Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirect","Output":"    ptytest.go:121: 2023-03-29 13:37:33.812: cmd: \"                                                                \"\n"}
{"Time":"2023-03-29T13:37:33.812479278Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirect","Output":"    ptytest.go:121: 2023-03-29 13:37:33.812: cmd: \"==\u003e Logs will stream in below (press ctrl+c to gracefully exit):\\r\"\n"}
{"Time":"2023-03-29T13:37:33.81249279Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirectWithWildcard","Output":"    ptytest.go:121: 2023-03-29 13:37:33.812: cmd: \"                                                                \"\n"}
{"Time":"2023-03-29T13:37:33.812540743Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirectWithWildcard","Output":"    ptytest.go:121: 2023-03-29 13:37:33.812: cmd: \"==\u003e Logs will stream in below (press ctrl+c to gracefully exit):\\r\"\n"}
{"Time":"2023-03-29T13:37:33.81937956Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RemoteAccessURL","Output":"    ptytest.go:76: 2023-03-29 13:37:33.819: cmd: closed pty: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:33.819501503Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RemoteAccessURL","Output":"    ptytest.go:74: 2023-03-29 13:37:33.819: cmd: closing logw\n"}
{"Time":"2023-03-29T13:37:33.819519256Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RemoteAccessURL","Output":"    ptytest.go:76: 2023-03-29 13:37:33.819: cmd: closed logw: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:33.819527309Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RemoteAccessURL","Output":"    ptytest.go:74: 2023-03-29 13:37:33.819: cmd: closing logr\n"}
{"Time":"2023-03-29T13:37:33.819534022Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RemoteAccessURL","Output":"    ptytest.go:76: 2023-03-29 13:37:33.819: cmd: closed logr: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:33.819605916Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RemoteAccessURL","Output":"    ptytest.go:102: 2023-03-29 13:37:33.819: cmd: closed tpty\n"}
{"Time":"2023-03-29T13:37:33.819682321Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RemoteAccessURL","Output":"--- PASS: TestServer/RemoteAccessURL (0.92s)\n"}
{"Time":"2023-03-29T13:37:33.819757496Z","Action":"pass","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RemoteAccessURL","Elapsed":0.92}
{"Time":"2023-03-29T13:37:33.819772079Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/TLS","Output":"    ptytest.go:121: 2023-03-29 13:37:33.819: cmd: \"                                    \"\n"}
{"Time":"2023-03-29T13:37:33.819781749Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/TLS","Output":"    ptytest.go:121: 2023-03-29 13:37:33.819: cmd: \"View the Web UI: https://example.com\\r\"\n"}
{"Time":"2023-03-29T13:37:33.819797518Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/TLS","Output":"    ptytest.go:121: 2023-03-29 13:37:33.819: cmd: \"                                                                \"\n"}
{"Time":"2023-03-29T13:37:33.819813792Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/TLS","Output":"    ptytest.go:121: 2023-03-29 13:37:33.819: cmd: \"==\u003e Logs will stream in below (press ctrl+c to gracefully exit):\\r\"\n"}
{"Time":"2023-03-29T13:37:33.851914311Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/GitHubOAuth","Output":"    clitest.go:50: stdout: \u001b[1mInterrupt caught, gracefully exiting. Use ctrl+\\ to force quit\u001b[0m\n"}
{"Time":"2023-03-29T13:37:33.85194979Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/GitHubOAuth","Output":"    clitest.go:50: stdout: Shutting down API server...\n"}
{"Time":"2023-03-29T13:37:33.852148613Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Output":"--- PASS: TestServer/Prometheus (1.00s)\n"}
{"Time":"2023-03-29T13:37:33.855235903Z","Action":"pass","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Prometheus","Elapsed":1}
{"Time":"2023-03-29T13:37:33.855263447Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/GitHubOAuth","Output":"    clitest.go:50: stdout: Gracefully shut down API server\n"}
{"Time":"2023-03-29T13:37:33.855284404Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/GitHubOAuth","Output":"    clitest.go:50: stdout: Waiting for WebSocket connections to close...\n"}
{"Time":"2023-03-29T13:37:33.855351311Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/GitHubOAuth","Output":"    clitest.go:50: stdout: Done waiting for WebSocket connections\n"}
{"Time":"2023-03-29T13:37:33.85648797Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/GitHubOAuth","Output":"--- PASS: TestServer/GitHubOAuth (1.01s)\n"}
{"Time":"2023-03-29T13:37:33.898898347Z","Action":"pass","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/GitHubOAuth","Elapsed":1.01}
{"Time":"2023-03-29T13:37:33.898943644Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit/Disabled","Output":"    clitest.go:50: stdout: \u001b[1mInterrupt caught, gracefully exiting. Use ctrl+\\ to force quit\u001b[0m\n"}
{"Time":"2023-03-29T13:37:33.898966965Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit/Disabled","Output":"    clitest.go:50: stdout: Shutting down API server...\n"}
{"Time":"2023-03-29T13:37:33.899910542Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit/Disabled","Output":"    clitest.go:50: stdout: Gracefully shut down API server\n"}
{"Time":"2023-03-29T13:37:33.899951915Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSValid","Output":"    clitest.go:50: stdout: \u001b[1mInterrupt caught, gracefully exiting. Use ctrl+\\ to force quit\u001b[0m\n"}
{"Time":"2023-03-29T13:37:33.899979591Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSValid","Output":"    clitest.go:50: stdout: Shutting down API server...\n"}
{"Time":"2023-03-29T13:37:33.931576217Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit/Disabled","Output":"    clitest.go:50: stdout: Waiting for WebSocket connections to close...\n"}
{"Time":"2023-03-29T13:37:33.931632315Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit/Disabled","Output":"    clitest.go:50: stdout: Done waiting for WebSocket connections\n"}
{"Time":"2023-03-29T13:37:33.932359012Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit/Disabled","Output":"--- PASS: TestServer/RateLimit/Disabled (1.02s)\n"}
{"Time":"2023-03-29T13:37:33.932605839Z","Action":"pass","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit/Disabled","Elapsed":1.02}
{"Time":"2023-03-29T13:37:33.932638521Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSValid","Output":"    clitest.go:50: stdout: Gracefully shut down API server\n"}
{"Time":"2023-03-29T13:37:33.944423479Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/HTTP","Output":"    ptytest.go:121: 2023-03-29 13:37:33.944: cmd: \"Interrupt caught, gracefully exiting. Use ctrl+\\\\ to force quit\"\n"}
{"Time":"2023-03-29T13:37:33.944456273Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/HTTP","Output":"    ptytest.go:121: 2023-03-29 13:37:33.944: cmd: \"Shutting down API server...\"\n"}
{"Time":"2023-03-29T13:37:33.944471028Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/HTTP","Output":"    ptytest.go:121: 2023-03-29 13:37:33.944: cmd: \"                           \\r\"\n"}
{"Time":"2023-03-29T13:37:33.944486505Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/HTTP","Output":"    ptytest.go:121: 2023-03-29 13:37:33.944: cmd: \"Gracefully shut down API server\"\n"}
{"Time":"2023-03-29T13:37:33.944506728Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/HTTP","Output":"    ptytest.go:121: 2023-03-29 13:37:33.944: cmd: \"                               \\r\"\n"}
{"Time":"2023-03-29T13:37:33.948894392Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSValid","Output":"    clitest.go:50: stdout: Waiting for WebSocket connections to close...\n"}
{"Time":"2023-03-29T13:37:33.949085454Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Telemetry","Output":"--- PASS: TestServer/Telemetry (1.09s)\n"}
{"Time":"2023-03-29T13:37:33.973592223Z","Action":"pass","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Telemetry","Elapsed":1.09}
{"Time":"2023-03-29T13:37:33.973627583Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSValid","Output":"    clitest.go:50: stdout: Done waiting for WebSocket connections\n"}
{"Time":"2023-03-29T13:37:33.982109361Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSValid","Output":"--- PASS: TestServer/TLSValid (1.09s)\n"}
{"Time":"2023-03-29T13:37:33.982145968Z","Action":"pass","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSValid","Elapsed":1.09}
{"Time":"2023-03-29T13:37:33.982166462Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/HTTP","Output":"    ptytest.go:83: 2023-03-29 13:37:33.982: cmd: closing tpty: close\n"}
{"Time":"2023-03-29T13:37:33.982185903Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/HTTP","Output":"    ptytest.go:74: 2023-03-29 13:37:33.982: cmd: closing pty\n"}
{"Time":"2023-03-29T13:37:33.983908041Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/HTTP","Output":"    ptytest.go:121: 2023-03-29 13:37:33.983: cmd: \"Waiting for WebSocket connections to close...\"\n"}
{"Time":"2023-03-29T13:37:33.983932298Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/HTTP","Output":"    ptytest.go:121: 2023-03-29 13:37:33.983: cmd: \"                                             \\r\"\n"}
{"Time":"2023-03-29T13:37:33.983950164Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/HTTP","Output":"    ptytest.go:121: 2023-03-29 13:37:33.983: cmd: \"Done waiting for WebSocket connections\"\n"}
{"Time":"2023-03-29T13:37:33.983971383Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/HTTP","Output":"    ptytest.go:121: 2023-03-29 13:37:33.983: cmd: \"                                      \\r\"\n"}
{"Time":"2023-03-29T13:37:33.983987252Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/HTTP","Output":"    ptytest.go:110: 2023-03-29 13:37:33.983: cmd: copy done: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:37:33.984001811Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/HTTP","Output":"    ptytest.go:111: 2023-03-29 13:37:33.983: cmd: closing out\n"}
{"Time":"2023-03-29T13:37:33.984029981Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/HTTP","Output":"    ptytest.go:113: 2023-03-29 13:37:33.983: cmd: closed out: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:37:33.999767444Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirectWithWildcard","Output":"    ptytest.go:121: 2023-03-29 13:37:33.999: cmd: \"Interrupt caught, gracefully exiting. Use ctrl+\\\\ to force quit\"\n"}
{"Time":"2023-03-29T13:37:33.999792066Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirectWithWildcard","Output":"    ptytest.go:121: 2023-03-29 13:37:33.999: cmd: \"Shutting down API server...\"\n"}
{"Time":"2023-03-29T13:37:33.999806103Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirectWithWildcard","Output":"    ptytest.go:121: 2023-03-29 13:37:33.999: cmd: \"                           \\r\"\n"}
{"Time":"2023-03-29T13:37:33.999825199Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirectWithWildcard","Output":"    ptytest.go:121: 2023-03-29 13:37:33.999: cmd: \"Gracefully shut down API server\"\n"}
{"Time":"2023-03-29T13:37:33.999838052Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirectWithWildcard","Output":"    ptytest.go:121: 2023-03-29 13:37:33.999: cmd: \"                               \\r\"\n"}
{"Time":"2023-03-29T13:37:34.000132942Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit/Changed","Output":"    clitest.go:50: stdout: \u001b[1mInterrupt caught, gracefully exiting. Use ctrl+\\ to force quit\u001b[0m\n"}
{"Time":"2023-03-29T13:37:34.000152725Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit/Changed","Output":"    clitest.go:50: stdout: Shutting down API server...\n"}
{"Time":"2023-03-29T13:37:34.013522575Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/HTTP","Output":"    ptytest.go:76: 2023-03-29 13:37:34.013: cmd: closed pty: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:34.013539719Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/HTTP","Output":"    ptytest.go:74: 2023-03-29 13:37:34.013: cmd: closing logw\n"}
{"Time":"2023-03-29T13:37:34.013545396Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/HTTP","Output":"    ptytest.go:76: 2023-03-29 13:37:34.013: cmd: closed logw: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:34.013549166Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/HTTP","Output":"    ptytest.go:74: 2023-03-29 13:37:34.013: cmd: closing logr\n"}
{"Time":"2023-03-29T13:37:34.013552799Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/HTTP","Output":"    ptytest.go:76: 2023-03-29 13:37:34.013: cmd: closed logr: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:34.013557098Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/HTTP","Output":"    ptytest.go:102: 2023-03-29 13:37:34.013: cmd: closed tpty\n"}
{"Time":"2023-03-29T13:37:34.013685528Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/HTTP","Output":"--- PASS: TestServer/DeprecatedAddress/HTTP (1.01s)\n"}
{"Time":"2023-03-29T13:37:34.024907745Z","Action":"pass","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/HTTP","Elapsed":1.01}
{"Time":"2023-03-29T13:37:34.024925201Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirectWithWildcard","Output":"    ptytest.go:83: 2023-03-29 13:37:34.024: cmd: closing tpty: close\n"}
{"Time":"2023-03-29T13:37:34.024929754Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirectWithWildcard","Output":"    ptytest.go:74: 2023-03-29 13:37:34.024: cmd: closing pty\n"}
{"Time":"2023-03-29T13:37:34.037436741Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit/Changed","Output":"    clitest.go:50: stdout: Gracefully shut down API server\n"}
{"Time":"2023-03-29T13:37:34.046649783Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirectWithWildcard","Output":"    ptytest.go:121: 2023-03-29 13:37:34.046: cmd: \"Waiting for WebSocket connections to close...\"\n"}
{"Time":"2023-03-29T13:37:34.04666228Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirectWithWildcard","Output":"    ptytest.go:121: 2023-03-29 13:37:34.046: cmd: \"                                             \\r\"\n"}
{"Time":"2023-03-29T13:37:34.046671065Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirectWithWildcard","Output":"    ptytest.go:121: 2023-03-29 13:37:34.046: cmd: \"Done waiting for WebSocket connections\"\n"}
{"Time":"2023-03-29T13:37:34.046674499Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirectWithWildcard","Output":"    ptytest.go:121: 2023-03-29 13:37:34.046: cmd: \"                                      \\r\"\n"}
{"Time":"2023-03-29T13:37:34.046678741Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirectWithWildcard","Output":"    ptytest.go:110: 2023-03-29 13:37:34.046: cmd: copy done: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:37:34.046682976Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirectWithWildcard","Output":"    ptytest.go:111: 2023-03-29 13:37:34.046: cmd: closing out\n"}
{"Time":"2023-03-29T13:37:34.046687631Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirectWithWildcard","Output":"    ptytest.go:113: 2023-03-29 13:37:34.046: cmd: closed out: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:37:34.048234545Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit/Changed","Output":"    clitest.go:50: stdout: Waiting for WebSocket connections to close...\n"}
{"Time":"2023-03-29T13:37:34.048465929Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirectWithWildcard","Output":"    ptytest.go:76: 2023-03-29 13:37:34.048: cmd: closed pty: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:34.048473751Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirectWithWildcard","Output":"    ptytest.go:74: 2023-03-29 13:37:34.048: cmd: closing logw\n"}
{"Time":"2023-03-29T13:37:34.04848652Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirectWithWildcard","Output":"    ptytest.go:76: 2023-03-29 13:37:34.048: cmd: closed logw: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:34.048494431Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirectWithWildcard","Output":"    ptytest.go:74: 2023-03-29 13:37:34.048: cmd: closing logr\n"}
{"Time":"2023-03-29T13:37:34.0485018Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirectWithWildcard","Output":"    ptytest.go:76: 2023-03-29 13:37:34.048: cmd: closed logr: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:34.048515549Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirectWithWildcard","Output":"    ptytest.go:102: 2023-03-29 13:37:34.048: cmd: closed tpty\n"}
{"Time":"2023-03-29T13:37:34.048685756Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirectWithWildcard","Output":"--- PASS: TestServer/TLSRedirect/NoRedirectWithWildcard (0.47s)\n"}
{"Time":"2023-03-29T13:37:34.049232577Z","Action":"pass","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirectWithWildcard","Elapsed":0.47}
{"Time":"2023-03-29T13:37:34.049241005Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit/Changed","Output":"    clitest.go:50: stdout: Done waiting for WebSocket connections\n"}
{"Time":"2023-03-29T13:37:34.049926527Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit/Changed","Output":"--- PASS: TestServer/RateLimit/Changed (1.07s)\n"}
{"Time":"2023-03-29T13:37:34.049934686Z","Action":"pass","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit/Changed","Elapsed":1.07}
{"Time":"2023-03-29T13:37:34.049940803Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit","Output":"--- PASS: TestServer/RateLimit (0.00s)\n"}
{"Time":"2023-03-29T13:37:34.050192839Z","Action":"pass","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/RateLimit","Elapsed":0}
{"Time":"2023-03-29T13:37:34.05020025Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoTLSListener","Output":"    ptytest.go:83: 2023-03-29 13:37:34.050: cmd: closing tpty: close\n"}
{"Time":"2023-03-29T13:37:34.050204931Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoTLSListener","Output":"    ptytest.go:74: 2023-03-29 13:37:34.050: cmd: closing pty\n"}
{"Time":"2023-03-29T13:37:34.050237731Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoHTTPListener","Output":"    ptytest.go:83: 2023-03-29 13:37:34.050: cmd: closing tpty: close\n"}
{"Time":"2023-03-29T13:37:34.050243867Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoHTTPListener","Output":"    ptytest.go:74: 2023-03-29 13:37:34.050: cmd: closing pty\n"}
{"Time":"2023-03-29T13:37:34.05027121Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/OK","Output":"    ptytest.go:83: 2023-03-29 13:37:34.050: cmd: closing tpty: close\n"}
{"Time":"2023-03-29T13:37:34.050278957Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/OK","Output":"    ptytest.go:74: 2023-03-29 13:37:34.050: cmd: closing pty\n"}
{"Time":"2023-03-29T13:37:34.051736931Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/OK","Output":"    ptytest.go:121: 2023-03-29 13:37:34.051: cmd: \"Interrupt caught, gracefully exiting. Use ctrl+\\\\ to force quit\"\n"}
{"Time":"2023-03-29T13:37:34.05174611Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/OK","Output":"    ptytest.go:121: 2023-03-29 13:37:34.051: cmd: \"Shutting down API server...\"\n"}
{"Time":"2023-03-29T13:37:34.051751453Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/OK","Output":"    ptytest.go:121: 2023-03-29 13:37:34.051: cmd: \"                           \\r\"\n"}
{"Time":"2023-03-29T13:37:34.051758881Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/OK","Output":"    ptytest.go:121: 2023-03-29 13:37:34.051: cmd: \"Gracefully shut down API server\"\n"}
{"Time":"2023-03-29T13:37:34.051780431Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/OK","Output":"    ptytest.go:121: 2023-03-29 13:37:34.051: cmd: \"                               \\r\"\n"}
{"Time":"2023-03-29T13:37:34.05178826Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/OK","Output":"    ptytest.go:121: 2023-03-29 13:37:34.051: cmd: \"Waiting for WebSocket connections to close...\"\n"}
{"Time":"2023-03-29T13:37:34.051870799Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/OK","Output":"    ptytest.go:121: 2023-03-29 13:37:34.051: cmd: \"                                             \\r\"\n"}
{"Time":"2023-03-29T13:37:34.051881957Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/OK","Output":"    ptytest.go:121: 2023-03-29 13:37:34.051: cmd: \"Done waiting for WebSocket connections\"\n"}
{"Time":"2023-03-29T13:37:34.051887542Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/OK","Output":"    ptytest.go:121: 2023-03-29 13:37:34.051: cmd: \"                                      \\r\"\n"}
{"Time":"2023-03-29T13:37:34.05189248Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/OK","Output":"    ptytest.go:110: 2023-03-29 13:37:34.051: cmd: copy done: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:37:34.05189708Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/OK","Output":"    ptytest.go:111: 2023-03-29 13:37:34.051: cmd: closing out\n"}
{"Time":"2023-03-29T13:37:34.05190198Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/OK","Output":"    ptytest.go:113: 2023-03-29 13:37:34.051: cmd: closed out: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:37:34.051911515Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoHTTPListener","Output":"    ptytest.go:121: 2023-03-29 13:37:34.051: cmd: \"Interrupt caught, gracefully exiting. Use ctrl+\\\\ to force quit\"\n"}
{"Time":"2023-03-29T13:37:34.051922383Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoHTTPListener","Output":"    ptytest.go:121: 2023-03-29 13:37:34.051: cmd: \"Shutting down API server...\"\n"}
{"Time":"2023-03-29T13:37:34.051927984Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoHTTPListener","Output":"    ptytest.go:121: 2023-03-29 13:37:34.051: cmd: \"                           \\r\"\n"}
{"Time":"2023-03-29T13:37:34.051938866Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoHTTPListener","Output":"    ptytest.go:121: 2023-03-29 13:37:34.051: cmd: \"Gracefully shut down API server\"\n"}
{"Time":"2023-03-29T13:37:34.051946554Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoHTTPListener","Output":"    ptytest.go:121: 2023-03-29 13:37:34.051: cmd: \"                               \\r\"\n"}
{"Time":"2023-03-29T13:37:34.051962503Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoHTTPListener","Output":"    ptytest.go:121: 2023-03-29 13:37:34.051: cmd: \"Waiting for WebSocket connections to close...\"\n"}
{"Time":"2023-03-29T13:37:34.051971415Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoHTTPListener","Output":"    ptytest.go:121: 2023-03-29 13:37:34.051: cmd: \"                                             \\r\"\n"}
{"Time":"2023-03-29T13:37:34.0519782Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoHTTPListener","Output":"    ptytest.go:121: 2023-03-29 13:37:34.051: cmd: \"Done waiting for WebSocket connections\"\n"}
{"Time":"2023-03-29T13:37:34.051987362Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoHTTPListener","Output":"    ptytest.go:121: 2023-03-29 13:37:34.051: cmd: \"                                      \\r\"\n"}
{"Time":"2023-03-29T13:37:34.052007059Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoHTTPListener","Output":"    ptytest.go:110: 2023-03-29 13:37:34.051: cmd: copy done: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:37:34.052015346Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoHTTPListener","Output":"    ptytest.go:111: 2023-03-29 13:37:34.052: cmd: closing out\n"}
{"Time":"2023-03-29T13:37:34.052021784Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoHTTPListener","Output":"    ptytest.go:113: 2023-03-29 13:37:34.052: cmd: closed out: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:37:34.052400141Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoTLSListener","Output":"    ptytest.go:121: 2023-03-29 13:37:34.052: cmd: \"Interrupt caught, gracefully exiting. Use ctrl+\\\\ to force quit\"\n"}
{"Time":"2023-03-29T13:37:34.052410137Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoTLSListener","Output":"    ptytest.go:121: 2023-03-29 13:37:34.052: cmd: \"Shutting down API server...\"\n"}
{"Time":"2023-03-29T13:37:34.052420866Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoTLSListener","Output":"    ptytest.go:121: 2023-03-29 13:37:34.052: cmd: \"                           \\r\"\n"}
{"Time":"2023-03-29T13:37:34.052427625Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoTLSListener","Output":"    ptytest.go:121: 2023-03-29 13:37:34.052: cmd: \"Gracefully shut down API server\"\n"}
{"Time":"2023-03-29T13:37:34.052440372Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoTLSListener","Output":"    ptytest.go:121: 2023-03-29 13:37:34.052: cmd: \"                               \\r\"\n"}
{"Time":"2023-03-29T13:37:34.052448298Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoTLSListener","Output":"    ptytest.go:121: 2023-03-29 13:37:34.052: cmd: \"Waiting for WebSocket connections to close...\"\n"}
{"Time":"2023-03-29T13:37:34.052457892Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoTLSListener","Output":"    ptytest.go:121: 2023-03-29 13:37:34.052: cmd: \"                                             \\r\"\n"}
{"Time":"2023-03-29T13:37:34.052465595Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoTLSListener","Output":"    ptytest.go:121: 2023-03-29 13:37:34.052: cmd: \"Done waiting for WebSocket connections\"\n"}
{"Time":"2023-03-29T13:37:34.052483713Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoTLSListener","Output":"    ptytest.go:121: 2023-03-29 13:37:34.052: cmd: \"                                      \\r\"\n"}
{"Time":"2023-03-29T13:37:34.052491345Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoTLSListener","Output":"    ptytest.go:110: 2023-03-29 13:37:34.052: cmd: copy done: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:37:34.052498064Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoTLSListener","Output":"    ptytest.go:111: 2023-03-29 13:37:34.052: cmd: closing out\n"}
{"Time":"2023-03-29T13:37:34.052506921Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoTLSListener","Output":"    ptytest.go:113: 2023-03-29 13:37:34.052: cmd: closed out: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:37:34.078632301Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/OK","Output":"    ptytest.go:76: 2023-03-29 13:37:34.078: cmd: closed pty: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:34.07865445Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/OK","Output":"    ptytest.go:74: 2023-03-29 13:37:34.078: cmd: closing logw\n"}
{"Time":"2023-03-29T13:37:34.078658395Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/OK","Output":"    ptytest.go:76: 2023-03-29 13:37:34.078: cmd: closed logw: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:34.078664194Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/OK","Output":"    ptytest.go:74: 2023-03-29 13:37:34.078: cmd: closing logr\n"}
{"Time":"2023-03-29T13:37:34.078667573Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/OK","Output":"    ptytest.go:76: 2023-03-29 13:37:34.078: cmd: closed logr: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:34.078670569Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/OK","Output":"    ptytest.go:102: 2023-03-29 13:37:34.078: cmd: closed tpty\n"}
{"Time":"2023-03-29T13:37:34.078838607Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/OK","Output":"--- PASS: TestServer/TLSRedirect/OK (1.06s)\n"}
{"Time":"2023-03-29T13:37:34.078885902Z","Action":"pass","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/OK","Elapsed":1.06}
{"Time":"2023-03-29T13:37:34.078892321Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoHTTPListener","Output":"    ptytest.go:76: 2023-03-29 13:37:34.078: cmd: closed pty: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:34.078897167Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoHTTPListener","Output":"    ptytest.go:74: 2023-03-29 13:37:34.078: cmd: closing logw\n"}
{"Time":"2023-03-29T13:37:34.078901364Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoHTTPListener","Output":"    ptytest.go:76: 2023-03-29 13:37:34.078: cmd: closed logw: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:34.078912845Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoHTTPListener","Output":"    ptytest.go:74: 2023-03-29 13:37:34.078: cmd: closing logr\n"}
{"Time":"2023-03-29T13:37:34.078917725Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoHTTPListener","Output":"    ptytest.go:76: 2023-03-29 13:37:34.078: cmd: closed logr: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:34.07894293Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoHTTPListener","Output":"    ptytest.go:102: 2023-03-29 13:37:34.078: cmd: closed tpty\n"}
{"Time":"2023-03-29T13:37:34.079092731Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoHTTPListener","Output":"--- PASS: TestServer/TLSRedirect/NoHTTPListener (0.62s)\n"}
{"Time":"2023-03-29T13:37:34.079144047Z","Action":"pass","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoHTTPListener","Elapsed":0.62}
{"Time":"2023-03-29T13:37:34.079152217Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoTLSListener","Output":"    ptytest.go:76: 2023-03-29 13:37:34.079: cmd: closed pty: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:34.079158662Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoTLSListener","Output":"    ptytest.go:74: 2023-03-29 13:37:34.079: cmd: closing logw\n"}
{"Time":"2023-03-29T13:37:34.079162915Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoTLSListener","Output":"    ptytest.go:76: 2023-03-29 13:37:34.079: cmd: closed logw: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:34.079168988Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoTLSListener","Output":"    ptytest.go:74: 2023-03-29 13:37:34.079: cmd: closing logr\n"}
{"Time":"2023-03-29T13:37:34.079178829Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoTLSListener","Output":"    ptytest.go:76: 2023-03-29 13:37:34.079: cmd: closed logr: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:34.079196269Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoTLSListener","Output":"    ptytest.go:102: 2023-03-29 13:37:34.079: cmd: closed tpty\n"}
{"Time":"2023-03-29T13:37:34.079336643Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoTLSListener","Output":"--- PASS: TestServer/TLSRedirect/NoTLSListener (0.59s)\n"}
{"Time":"2023-03-29T13:37:34.091089368Z","Action":"pass","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoTLSListener","Elapsed":0.59}
{"Time":"2023-03-29T13:37:34.091112345Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSAndHTTP","Output":"    ptytest.go:83: 2023-03-29 13:37:34.091: cmd: closing tpty: close\n"}
{"Time":"2023-03-29T13:37:34.091119428Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSAndHTTP","Output":"    ptytest.go:74: 2023-03-29 13:37:34.091: cmd: closing pty\n"}
{"Time":"2023-03-29T13:37:34.115772917Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSAndHTTP","Output":"    ptytest.go:121: 2023-03-29 13:37:34.115: cmd: \"Interrupt caught, gracefully exiting. Use ctrl+\\\\ to force quit\"\n"}
{"Time":"2023-03-29T13:37:34.115801947Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSAndHTTP","Output":"    ptytest.go:121: 2023-03-29 13:37:34.115: cmd: \"Shutting down API server...\"\n"}
{"Time":"2023-03-29T13:37:34.11581297Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSAndHTTP","Output":"    ptytest.go:121: 2023-03-29 13:37:34.115: cmd: \"                           \\r\"\n"}
{"Time":"2023-03-29T13:37:34.115819506Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSAndHTTP","Output":"    ptytest.go:121: 2023-03-29 13:37:34.115: cmd: \"Gracefully shut down API server\"\n"}
{"Time":"2023-03-29T13:37:34.115824758Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSAndHTTP","Output":"    ptytest.go:121: 2023-03-29 13:37:34.115: cmd: \"                               \\r\"\n"}
{"Time":"2023-03-29T13:37:34.115830066Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSAndHTTP","Output":"    ptytest.go:121: 2023-03-29 13:37:34.115: cmd: \"Waiting for WebSocket connections to close...\"\n"}
{"Time":"2023-03-29T13:37:34.11583724Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSAndHTTP","Output":"    ptytest.go:121: 2023-03-29 13:37:34.115: cmd: \"                                             \\r\"\n"}
{"Time":"2023-03-29T13:37:34.115844144Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSAndHTTP","Output":"    ptytest.go:121: 2023-03-29 13:37:34.115: cmd: \"Done waiting for WebSocket connections\"\n"}
{"Time":"2023-03-29T13:37:34.115860103Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSAndHTTP","Output":"    ptytest.go:121: 2023-03-29 13:37:34.115: cmd: \"                                      \\r\"\n"}
{"Time":"2023-03-29T13:37:34.115888103Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSAndHTTP","Output":"    ptytest.go:110: 2023-03-29 13:37:34.115: cmd: copy done: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:37:34.115903904Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSAndHTTP","Output":"    ptytest.go:111: 2023-03-29 13:37:34.115: cmd: closing out\n"}
{"Time":"2023-03-29T13:37:34.115919206Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSAndHTTP","Output":"    ptytest.go:113: 2023-03-29 13:37:34.115: cmd: closed out: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:37:34.115976431Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/TLS","Output":"    ptytest.go:121: 2023-03-29 13:37:34.115: cmd: \"Interrupt caught, gracefully exiting. Use ctrl+\\\\ to force quit\"\n"}
{"Time":"2023-03-29T13:37:34.115986313Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/TLS","Output":"    ptytest.go:121: 2023-03-29 13:37:34.115: cmd: \"Shutting down API server...\"\n"}
{"Time":"2023-03-29T13:37:34.115997881Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/TLS","Output":"    ptytest.go:121: 2023-03-29 13:37:34.115: cmd: \"                           \\r\"\n"}
{"Time":"2023-03-29T13:37:34.11602101Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/TLS","Output":"    ptytest.go:121: 2023-03-29 13:37:34.115: cmd: \"Gracefully shut down API server\"\n"}
{"Time":"2023-03-29T13:37:34.116029108Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/TLS","Output":"    ptytest.go:121: 2023-03-29 13:37:34.116: cmd: \"                               \\r\"\n"}
{"Time":"2023-03-29T13:37:34.116476692Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSAndHTTP","Output":"    ptytest.go:76: 2023-03-29 13:37:34.116: cmd: closed pty: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:34.116491796Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSAndHTTP","Output":"    ptytest.go:74: 2023-03-29 13:37:34.116: cmd: closing logw\n"}
{"Time":"2023-03-29T13:37:34.116497774Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSAndHTTP","Output":"    ptytest.go:76: 2023-03-29 13:37:34.116: cmd: closed logw: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:34.116504918Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSAndHTTP","Output":"    ptytest.go:74: 2023-03-29 13:37:34.116: cmd: closing logr\n"}
{"Time":"2023-03-29T13:37:34.1165175Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSAndHTTP","Output":"    ptytest.go:76: 2023-03-29 13:37:34.116: cmd: closed logr: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:34.116539123Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSAndHTTP","Output":"    ptytest.go:102: 2023-03-29 13:37:34.116: cmd: closed tpty\n"}
{"Time":"2023-03-29T13:37:34.116717402Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSAndHTTP","Output":"--- PASS: TestServer/TLSAndHTTP (1.24s)\n"}
{"Time":"2023-03-29T13:37:34.117404728Z","Action":"pass","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSAndHTTP","Elapsed":1.24}
{"Time":"2023-03-29T13:37:34.117418357Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/TLS","Output":"    ptytest.go:83: 2023-03-29 13:37:34.117: cmd: closing tpty: close\n"}
{"Time":"2023-03-29T13:37:34.117441857Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/TLS","Output":"    ptytest.go:74: 2023-03-29 13:37:34.117: cmd: closing pty\n"}
{"Time":"2023-03-29T13:37:34.117475322Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/TLS","Output":"    ptytest.go:110: 2023-03-29 13:37:34.117: cmd: copy done: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:37:34.117484444Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/TLS","Output":"    ptytest.go:111: 2023-03-29 13:37:34.117: cmd: closing out\n"}
{"Time":"2023-03-29T13:37:34.117494423Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/TLS","Output":"    ptytest.go:113: 2023-03-29 13:37:34.117: cmd: closed out: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:37:34.11754208Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/TLS","Output":"    ptytest.go:76: 2023-03-29 13:37:34.117: cmd: closed pty: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:34.117551844Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/TLS","Output":"    ptytest.go:74: 2023-03-29 13:37:34.117: cmd: closing logw\n"}
{"Time":"2023-03-29T13:37:34.117570608Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/TLS","Output":"    ptytest.go:76: 2023-03-29 13:37:34.117: cmd: closed logw: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:34.117578465Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/TLS","Output":"    ptytest.go:74: 2023-03-29 13:37:34.117: cmd: closing logr\n"}
{"Time":"2023-03-29T13:37:34.117597311Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/TLS","Output":"    ptytest.go:76: 2023-03-29 13:37:34.117: cmd: closed logr: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:34.117616074Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/TLS","Output":"    ptytest.go:102: 2023-03-29 13:37:34.117: cmd: closed tpty\n"}
{"Time":"2023-03-29T13:37:34.11776518Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/TLS","Output":"--- PASS: TestServer/DeprecatedAddress/TLS (0.50s)\n"}
{"Time":"2023-03-29T13:37:34.117776019Z","Action":"pass","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress/TLS","Elapsed":0.5}
{"Time":"2023-03-29T13:37:34.117782763Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress","Output":"--- PASS: TestServer/DeprecatedAddress (0.06s)\n"}
{"Time":"2023-03-29T13:37:34.117841805Z","Action":"pass","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/DeprecatedAddress","Elapsed":0.06}
{"Time":"2023-03-29T13:37:34.117849931Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirect","Output":"    ptytest.go:83: 2023-03-29 13:37:34.117: cmd: closing tpty: close\n"}
{"Time":"2023-03-29T13:37:34.117859828Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirect","Output":"    ptytest.go:74: 2023-03-29 13:37:34.117: cmd: closing pty\n"}
{"Time":"2023-03-29T13:37:34.118127485Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSValidMultiple","Output":"    ptytest.go:83: 2023-03-29 13:37:34.118: cmd: closing tpty: close\n"}
{"Time":"2023-03-29T13:37:34.118138813Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSValidMultiple","Output":"    ptytest.go:74: 2023-03-29 13:37:34.118: cmd: closing pty\n"}
{"Time":"2023-03-29T13:37:34.118170526Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSValidMultiple","Output":"    ptytest.go:110: 2023-03-29 13:37:34.118: cmd: copy done: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:37:34.11817918Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSValidMultiple","Output":"    ptytest.go:111: 2023-03-29 13:37:34.118: cmd: closing out\n"}
{"Time":"2023-03-29T13:37:34.118194579Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSValidMultiple","Output":"    ptytest.go:113: 2023-03-29 13:37:34.118: cmd: closed out: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:37:34.11825734Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSValidMultiple","Output":"    ptytest.go:76: 2023-03-29 13:37:34.118: cmd: closed pty: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:34.118277979Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSValidMultiple","Output":"    ptytest.go:74: 2023-03-29 13:37:34.118: cmd: closing logw\n"}
{"Time":"2023-03-29T13:37:34.118286381Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSValidMultiple","Output":"    ptytest.go:76: 2023-03-29 13:37:34.118: cmd: closed logw: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:34.118291513Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSValidMultiple","Output":"    ptytest.go:74: 2023-03-29 13:37:34.118: cmd: closing logr\n"}
{"Time":"2023-03-29T13:37:34.118295899Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSValidMultiple","Output":"    ptytest.go:76: 2023-03-29 13:37:34.118: cmd: closed logr: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:34.11830286Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSValidMultiple","Output":"    ptytest.go:102: 2023-03-29 13:37:34.118: cmd: closed tpty\n"}
{"Time":"2023-03-29T13:37:34.118448813Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSValidMultiple","Output":"--- PASS: TestServer/TLSValidMultiple (1.23s)\n"}
{"Time":"2023-03-29T13:37:34.118485143Z","Action":"pass","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSValidMultiple","Elapsed":1.23}
{"Time":"2023-03-29T13:37:34.118492964Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirect","Output":"    ptytest.go:121: 2023-03-29 13:37:34.118: cmd: \"Interrupt caught, gracefully exiting. Use ctrl+\\\\ to force quit\"\n"}
{"Time":"2023-03-29T13:37:34.118500337Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirect","Output":"    ptytest.go:121: 2023-03-29 13:37:34.118: cmd: \"Shutting down API server...\"\n"}
{"Time":"2023-03-29T13:37:34.118505085Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirect","Output":"    ptytest.go:121: 2023-03-29 13:37:34.118: cmd: \"                           \\r\"\n"}
{"Time":"2023-03-29T13:37:34.118511668Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirect","Output":"    ptytest.go:121: 2023-03-29 13:37:34.118: cmd: \"Gracefully shut down API server\"\n"}
{"Time":"2023-03-29T13:37:34.118536832Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirect","Output":"    ptytest.go:121: 2023-03-29 13:37:34.118: cmd: \"                               \\r\"\n"}
{"Time":"2023-03-29T13:37:34.118542137Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirect","Output":"    ptytest.go:121: 2023-03-29 13:37:34.118: cmd: \"Waiting for WebSocket connections to close...\"\n"}
{"Time":"2023-03-29T13:37:34.118548654Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirect","Output":"    ptytest.go:121: 2023-03-29 13:37:34.118: cmd: \"                                             \\r\"\n"}
{"Time":"2023-03-29T13:37:34.118562305Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirect","Output":"    ptytest.go:121: 2023-03-29 13:37:34.118: cmd: \"Done waiting for WebSocket connections\"\n"}
{"Time":"2023-03-29T13:37:34.118568736Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirect","Output":"    ptytest.go:121: 2023-03-29 13:37:34.118: cmd: \"                                      \\r\"\n"}
{"Time":"2023-03-29T13:37:34.1185733Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirect","Output":"    ptytest.go:110: 2023-03-29 13:37:34.118: cmd: copy done: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:37:34.118577677Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirect","Output":"    ptytest.go:111: 2023-03-29 13:37:34.118: cmd: closing out\n"}
{"Time":"2023-03-29T13:37:34.118583972Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirect","Output":"    ptytest.go:113: 2023-03-29 13:37:34.118: cmd: closed out: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:37:34.347394026Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirect","Output":"    ptytest.go:76: 2023-03-29 13:37:34.347: cmd: closed pty: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:34.347481519Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirect","Output":"    ptytest.go:74: 2023-03-29 13:37:34.347: cmd: closing logw\n"}
{"Time":"2023-03-29T13:37:34.347503045Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirect","Output":"    ptytest.go:76: 2023-03-29 13:37:34.347: cmd: closed logw: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:34.347521875Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirect","Output":"    ptytest.go:74: 2023-03-29 13:37:34.347: cmd: closing logr\n"}
{"Time":"2023-03-29T13:37:34.347538956Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirect","Output":"    ptytest.go:76: 2023-03-29 13:37:34.347: cmd: closed logr: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:34.347563965Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirect","Output":"    ptytest.go:102: 2023-03-29 13:37:34.347: cmd: closed tpty\n"}
{"Time":"2023-03-29T13:37:34.347597239Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirect","Output":"--- PASS: TestServer/TLSRedirect/NoRedirect (0.77s)\n"}
{"Time":"2023-03-29T13:37:34.347618369Z","Action":"pass","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect/NoRedirect","Elapsed":0.77}
{"Time":"2023-03-29T13:37:34.347639094Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect","Output":"--- PASS: TestServer/TLSRedirect (0.05s)\n"}
{"Time":"2023-03-29T13:37:37.495996215Z","Action":"pass","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/TLSRedirect","Elapsed":0.05}
{"Time":"2023-03-29T13:37:37.496041088Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgres","Output":"    clitest.go:50: stdout: Started HTTP listener at http://[::]:42403\n"}
{"Time":"2023-03-29T13:37:37.497561163Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgres","Output":"    clitest.go:50: stdout: View the Web UI: http://example.com\n"}
{"Time":"2023-03-29T13:37:37.854158017Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgres","Output":"    clitest.go:50: stdout: ==\u003e Logs will stream in below (press ctrl+c to gracefully exit):\n"}
{"Time":"2023-03-29T13:37:37.871207973Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgres","Output":"    clitest.go:50: stdout: \u001b[1mInterrupt caught, gracefully exiting. Use ctrl+\\ to force quit\u001b[0m\n"}
{"Time":"2023-03-29T13:37:37.871239014Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgres","Output":"    clitest.go:50: stdout: Shutting down API server...\n"}
{"Time":"2023-03-29T13:37:37.871296925Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgres","Output":"    clitest.go:50: stdout: Gracefully shut down API server\n"}
{"Time":"2023-03-29T13:37:37.871384307Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgres","Output":"    clitest.go:50: stdout: Waiting for WebSocket connections to close...\n"}
{"Time":"2023-03-29T13:37:37.871872118Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgres","Output":"    clitest.go:50: stdout: Done waiting for WebSocket connections\n"}
{"Time":"2023-03-29T13:37:37.872659674Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgres","Output":"    clitest.go:50: stdout: Stopping built-in PostgreSQL...\n"}
{"Time":"2023-03-29T13:37:37.974547475Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgres","Output":"    clitest.go:50: stdout: Stopped built-in PostgreSQL\n"}
{"Time":"2023-03-29T13:37:38.01812179Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgres","Output":"--- PASS: TestServer/BuiltinPostgres (5.17s)\n"}
{"Time":"2023-03-29T13:37:46.072262917Z","Action":"pass","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/BuiltinPostgres","Elapsed":5.17}
{"Time":"2023-03-29T13:37:46.072311252Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Multiple","Output":"    ptytest.go:121: 2023-03-29 13:37:46.072: cmd: \"Started HTTP listener at http://[::]:35645\"\n"}
{"Time":"2023-03-29T13:37:46.072335279Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Multiple","Output":"    ptytest.go:121: 2023-03-29 13:37:46.072: cmd: \"WARN: The access URL  http://example.com  could not be resolved, this may cause unexpected problems when creating workspaces. Generate a unique *.try.coder.app URL by not specifying an access URL.\"\n"}
{"Time":"2023-03-29T13:37:46.07241558Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Multiple","Output":"    ptytest.go:121: 2023-03-29 13:37:46.072: cmd: \"                                                                                                                                                                                              \\r\"\n"}
{"Time":"2023-03-29T13:37:46.072459905Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Multiple","Output":"    ptytest.go:121: 2023-03-29 13:37:46.072: cmd: \"                                   \"\n"}
{"Time":"2023-03-29T13:37:46.07251014Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Multiple","Output":"    ptytest.go:121: 2023-03-29 13:37:46.072: cmd: \"View the Web UI: http://example.com\\r\"\n"}
{"Time":"2023-03-29T13:37:46.072679873Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Multiple","Output":"    server_test.go:1240: 2023-03-29 13:37:46.072: cmd: matched \"Started HTTP listener at\" = \"Started HTTP listener at\"\n"}
{"Time":"2023-03-29T13:37:46.078543671Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Multiple","Output":"    ptytest.go:121: 2023-03-29 13:37:46.078: cmd: \"                                                                \"\n"}
{"Time":"2023-03-29T13:37:46.078573522Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Multiple","Output":"    ptytest.go:121: 2023-03-29 13:37:46.078: cmd: \"==\u003e Logs will stream in below (press ctrl+c to gracefully exit):\\r\"\n"}
{"Time":"2023-03-29T13:37:46.07859364Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Multiple","Output":"    ptytest.go:121: 2023-03-29 13:37:46.078: cmd: \"Interrupt caught, gracefully exiting. Use ctrl+\\\\ to force quit\"\n"}
{"Time":"2023-03-29T13:37:46.07861453Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Multiple","Output":"    ptytest.go:121: 2023-03-29 13:37:46.078: cmd: \"ERROR: Unexpected error, shutting down server: context deadline exceeded\"\n"}
{"Time":"2023-03-29T13:37:46.078631014Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Multiple","Output":"    ptytest.go:121: 2023-03-29 13:37:46.078: cmd: \"                                                                 \\r\"\n"}
{"Time":"2023-03-29T13:37:46.078647037Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Multiple","Output":"    ptytest.go:121: 2023-03-29 13:37:46.078: cmd: \"Shutting down API server...\"\n"}
{"Time":"2023-03-29T13:37:46.078658003Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Multiple","Output":"    ptytest.go:121: 2023-03-29 13:37:46.078: cmd: \"                           \\r\"\n"}
{"Time":"2023-03-29T13:37:46.078668373Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Multiple","Output":"    ptytest.go:121: 2023-03-29 13:37:46.078: cmd: \"Gracefully shut down API server\"\n"}
{"Time":"2023-03-29T13:37:46.078678662Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Multiple","Output":"    ptytest.go:121: 2023-03-29 13:37:46.078: cmd: \"                               \\r\"\n"}
{"Time":"2023-03-29T13:37:46.078702364Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Multiple","Output":"    ptytest.go:121: 2023-03-29 13:37:46.078: cmd: \"Shutting down provisioner daemon 3...\"\n"}
{"Time":"2023-03-29T13:37:46.078719655Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Multiple","Output":"    ptytest.go:121: 2023-03-29 13:37:46.078: cmd: \"                                     \\r\"\n"}
{"Time":"2023-03-29T13:37:46.078730465Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Multiple","Output":"    ptytest.go:121: 2023-03-29 13:37:46.078: cmd: \"Gracefully shut down provisioner daemon 3\"\n"}
{"Time":"2023-03-29T13:37:46.078744589Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Multiple","Output":"    ptytest.go:121: 2023-03-29 13:37:46.078: cmd: \"                                         \\r\"\n"}
{"Time":"2023-03-29T13:37:46.078763734Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Multiple","Output":"    ptytest.go:121: 2023-03-29 13:37:46.078: cmd: \"Shutting down provisioner daemon 1...\"\n"}
{"Time":"2023-03-29T13:37:46.07878276Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Multiple","Output":"    ptytest.go:121: 2023-03-29 13:37:46.078: cmd: \"                                     \\r\"\n"}
{"Time":"2023-03-29T13:37:46.078801865Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Multiple","Output":"    ptytest.go:121: 2023-03-29 13:37:46.078: cmd: \"Gracefully shut down provisioner daemon 1\"\n"}
{"Time":"2023-03-29T13:37:46.07881665Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Multiple","Output":"    ptytest.go:121: 2023-03-29 13:37:46.078: cmd: \"                                         \\r\"\n"}
{"Time":"2023-03-29T13:37:46.078826759Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Multiple","Output":"    ptytest.go:121: 2023-03-29 13:37:46.078: cmd: \"Shutting down provisioner daemon 2...\"\n"}
{"Time":"2023-03-29T13:37:46.078840612Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Multiple","Output":"    ptytest.go:121: 2023-03-29 13:37:46.078: cmd: \"                                     \\r\"\n"}
{"Time":"2023-03-29T13:37:46.07885439Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Multiple","Output":"    ptytest.go:121: 2023-03-29 13:37:46.078: cmd: \"Gracefully shut down provisioner daemon 2\"\n"}
{"Time":"2023-03-29T13:37:46.07887537Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Multiple","Output":"    ptytest.go:121: 2023-03-29 13:37:46.078: cmd: \"                                         \\r\"\n"}
{"Time":"2023-03-29T13:37:46.081392321Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Multiple","Output":"    ptytest.go:121: 2023-03-29 13:37:46.081: cmd: \"Waiting for WebSocket connections to close...\"\n"}
{"Time":"2023-03-29T13:37:46.081408574Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Multiple","Output":"    ptytest.go:121: 2023-03-29 13:37:46.081: cmd: \"                                             \\r\"\n"}
{"Time":"2023-03-29T13:37:46.081421854Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Multiple","Output":"    ptytest.go:121: 2023-03-29 13:37:46.081: cmd: \"Done waiting for WebSocket connections\"\n"}
{"Time":"2023-03-29T13:37:46.081431192Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Multiple","Output":"    ptytest.go:121: 2023-03-29 13:37:46.081: cmd: \"                                      \\r\"\n"}
{"Time":"2023-03-29T13:37:46.081449657Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Multiple","Output":"    ptytest.go:121: 2023-03-29 13:37:46.081: cmd: \"WARN: Graceful shutdown timed out\\r\"\n"}
{"Time":"2023-03-29T13:37:46.14910839Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Multiple","Output":"    ptytest.go:83: 2023-03-29 13:37:46.149: cmd: closing tpty: close\n"}
{"Time":"2023-03-29T13:37:46.149142371Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Multiple","Output":"    ptytest.go:74: 2023-03-29 13:37:46.149: cmd: closing pty\n"}
{"Time":"2023-03-29T13:37:46.149157567Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Multiple","Output":"    ptytest.go:110: 2023-03-29 13:37:46.149: cmd: copy done: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:37:46.149166448Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Multiple","Output":"    ptytest.go:111: 2023-03-29 13:37:46.149: cmd: closing out\n"}
{"Time":"2023-03-29T13:37:46.149175898Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Multiple","Output":"    ptytest.go:113: 2023-03-29 13:37:46.149: cmd: closed out: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:37:46.149187205Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Multiple","Output":"    ptytest.go:76: 2023-03-29 13:37:46.149: cmd: closed pty: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:46.14919623Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Multiple","Output":"    ptytest.go:74: 2023-03-29 13:37:46.149: cmd: closing logw\n"}
{"Time":"2023-03-29T13:37:46.149207373Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Multiple","Output":"    ptytest.go:76: 2023-03-29 13:37:46.149: cmd: closed logw: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:46.149215685Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Multiple","Output":"    ptytest.go:74: 2023-03-29 13:37:46.149: cmd: closing logr\n"}
{"Time":"2023-03-29T13:37:46.149223347Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Multiple","Output":"    ptytest.go:76: 2023-03-29 13:37:46.149: cmd: closed logr: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:46.149234369Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Multiple","Output":"    ptytest.go:102: 2023-03-29 13:37:46.149: cmd: closed tpty\n"}
{"Time":"2023-03-29T13:37:46.149426722Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Multiple","Output":"--- PASS: TestServer/Logging/Multiple (13.24s)\n"}
{"Time":"2023-03-29T13:37:59.1117031Z","Action":"pass","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Multiple","Elapsed":13.24}
{"Time":"2023-03-29T13:37:59.111755068Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver","Output":"    ptytest.go:121: 2023-03-29 13:37:59.111: cmd: \"2023-03-29 13:37:59.110 [DEBUG]\\t\u003cgithub.com/coder/coder/v2/cli/server.go:260\u003e\\t(*RootCmd).Server.func1\\tstarted debug logging\"\n"}
{"Time":"2023-03-29T13:37:59.111775176Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver","Output":"    ptytest.go:121: 2023-03-29 13:37:59.111: cmd: \"Started HTTP listener at http://[::]:40007\"\n"}
{"Time":"2023-03-29T13:37:59.111795675Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver","Output":"    server_test.go:1204: 2023-03-29 13:37:59.111: cmd: matched \"Started HTTP listener at\" = \"2023-03-29 13:37:59.110 [DEBUG]\\t\u003cgithub.com/coder/coder/v2/cli/server.go:260\u003e\\t(*RootCmd).Server.func1\\tstarted debug logging\\r\\nStarted HTTP listener at\"\n"}
{"Time":"2023-03-29T13:37:59.123488003Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver","Output":"    ptytest.go:121: 2023-03-29 13:37:59.123: cmd: \"                                   \"\n"}
{"Time":"2023-03-29T13:37:59.123536759Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver","Output":"    ptytest.go:121: 2023-03-29 13:37:59.123: cmd: \"View the Web UI: http://example.com\\r\"\n"}
{"Time":"2023-03-29T13:37:59.123550652Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver","Output":"    ptytest.go:121: 2023-03-29 13:37:59.123: cmd: \"                                                                \"\n"}
{"Time":"2023-03-29T13:37:59.123559998Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver","Output":"    ptytest.go:121: 2023-03-29 13:37:59.123: cmd: \"==\u003e Logs will stream in below (press ctrl+c to gracefully exit):\\r\"\n"}
{"Time":"2023-03-29T13:37:59.144165093Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver","Output":"    ptytest.go:121: 2023-03-29 13:37:59.144: cmd: \"2023-03-29 13:37:59.123 [DEBUG]\\t(coderd.metrics_cache)\\t\u003cgithub.com/coder/coder/v2/coderd/metricscache/metricscache.go:272\u003e\\t(*Cache).run\\tdeployment stats metrics refreshed\\t{\\\"took\\\": \\\"20.37µs\\\", \\\"interval\\\": \\\"30s\\\"}\"\n"}
{"Time":"2023-03-29T13:37:59.144212142Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver","Output":"    ptytest.go:121: 2023-03-29 13:37:59.144: cmd: \"2023-03-29 13:37:59.139 [DEBUG]\\t\u003cgithub.com/coder/coder/provisionerd/provisionerd.go:200\u003e\\t(*Server).connect\\tconnected\"\n"}
{"Time":"2023-03-29T13:37:59.1442281Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver","Output":"    ptytest.go:121: 2023-03-29 13:37:59.144: cmd: \"2023-03-29 13:37:59.139 [DEBUG]\\t\u003cgithub.com/coder/coder/provisionerd/provisionerd.go:200\u003e\\t(*Server).connect\\tconnected\"\n"}
{"Time":"2023-03-29T13:37:59.14427036Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver","Output":"    ptytest.go:121: 2023-03-29 13:37:59.144: cmd: \"2023-03-29 13:37:59.139 [DEBUG]\\t\u003cgithub.com/coder/coder/provisionerd/provisionerd.go:200\u003e\\t(*Server).connect\\tconnected\"\n"}
{"Time":"2023-03-29T13:37:59.14428344Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver","Output":"    ptytest.go:121: 2023-03-29 13:37:59.144: cmd: \"2023-03-29 13:37:59.143 [DEBUG]\\t(coderd.metrics_cache)\\t\u003cgithub.com/coder/coder/v2/coderd/metricscache/metricscache.go:272\u003e\\t(*Cache).run\\ttemplate daus metrics refreshed\\t{\\\"took\\\": \\\"3.61474ms\\\", \\\"interval\\\": \\\"1h0m0s\\\"}\"\n"}
{"Time":"2023-03-29T13:37:59.14429578Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver","Output":"    ptytest.go:121: 2023-03-29 13:37:59.144: cmd: \"Interrupt caught, gracefully exiting. Use ctrl+\\\\ to force quit\"\n"}
{"Time":"2023-03-29T13:37:59.14430588Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver","Output":"    ptytest.go:121: 2023-03-29 13:37:59.144: cmd: \"Shutting down API server...\"\n"}
{"Time":"2023-03-29T13:37:59.144315009Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver","Output":"    ptytest.go:121: 2023-03-29 13:37:59.144: cmd: \"                           \\r\"\n"}
{"Time":"2023-03-29T13:37:59.144324164Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver","Output":"    ptytest.go:121: 2023-03-29 13:37:59.144: cmd: \"Gracefully shut down API server\"\n"}
{"Time":"2023-03-29T13:37:59.144339556Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver","Output":"    ptytest.go:121: 2023-03-29 13:37:59.144: cmd: \"                               \\r\"\n"}
{"Time":"2023-03-29T13:37:59.144624294Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver","Output":"    ptytest.go:121: 2023-03-29 13:37:59.144: cmd: \"Shutting down provisioner daemon 1...\"\n"}
{"Time":"2023-03-29T13:37:59.144639861Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver","Output":"    ptytest.go:121: 2023-03-29 13:37:59.144: cmd: \"                                     \\r\"\n"}
{"Time":"2023-03-29T13:37:59.14465833Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver","Output":"    ptytest.go:121: 2023-03-29 13:37:59.144: cmd: \"2023-03-29 13:37:59.144 [DEBUG]\\t\u003cgithub.com/coder/coder/provisionerd/provisionerd.go:553\u003e\\t(*Server).closeWithError\\tclosing server with error\\t{\\\"error\\\": null}\"\n"}
{"Time":"2023-03-29T13:37:59.14468626Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver","Output":"    ptytest.go:121: 2023-03-29 13:37:59.144: cmd: \"Gracefully shut down provisioner daemon 1\"\n"}
{"Time":"2023-03-29T13:37:59.144695878Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver","Output":"    ptytest.go:121: 2023-03-29 13:37:59.144: cmd: \"                                         \\r\"\n"}
{"Time":"2023-03-29T13:37:59.144705145Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver","Output":"    ptytest.go:121: 2023-03-29 13:37:59.144: cmd: \"Shutting down provisioner daemon 2...\"\n"}
{"Time":"2023-03-29T13:37:59.144718072Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver","Output":"    ptytest.go:121: 2023-03-29 13:37:59.144: cmd: \"                                     \\r\"\n"}
{"Time":"2023-03-29T13:37:59.144727731Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver","Output":"    ptytest.go:121: 2023-03-29 13:37:59.144: cmd: \"2023-03-29 13:37:59.144 [DEBUG]\\t\u003cgithub.com/coder/coder/provisionerd/provisionerd.go:553\u003e\\t(*Server).closeWithError\\tclosing server with error\\t{\\\"error\\\": null}\"\n"}
{"Time":"2023-03-29T13:37:59.144750279Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver","Output":"    ptytest.go:121: 2023-03-29 13:37:59.144: cmd: \"Gracefully shut down provisioner daemon 2\"\n"}
{"Time":"2023-03-29T13:37:59.144764838Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver","Output":"    ptytest.go:121: 2023-03-29 13:37:59.144: cmd: \"                                         \\r\"\n"}
{"Time":"2023-03-29T13:37:59.14477793Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver","Output":"    ptytest.go:121: 2023-03-29 13:37:59.144: cmd: \"Shutting down provisioner daemon 3...\"\n"}
{"Time":"2023-03-29T13:37:59.144787313Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver","Output":"    ptytest.go:121: 2023-03-29 13:37:59.144: cmd: \"                                     \\r\"\n"}
{"Time":"2023-03-29T13:37:59.144797136Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver","Output":"    ptytest.go:121: 2023-03-29 13:37:59.144: cmd: \"2023-03-29 13:37:59.144 [DEBUG]\\t\u003cgithub.com/coder/coder/provisionerd/provisionerd.go:553\u003e\\t(*Server).closeWithError\\tclosing server with error\\t{\\\"error\\\": null}\"\n"}
{"Time":"2023-03-29T13:37:59.144810893Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver","Output":"    ptytest.go:121: 2023-03-29 13:37:59.144: cmd: \"Gracefully shut down provisioner daemon 3\"\n"}
{"Time":"2023-03-29T13:37:59.144821417Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver","Output":"    ptytest.go:121: 2023-03-29 13:37:59.144: cmd: \"                                         \\r\"\n"}
{"Time":"2023-03-29T13:37:59.144842079Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver","Output":"    ptytest.go:121: 2023-03-29 13:37:59.144: cmd: \"Waiting for WebSocket connections to close...\"\n"}
{"Time":"2023-03-29T13:37:59.144855916Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver","Output":"    ptytest.go:121: 2023-03-29 13:37:59.144: cmd: \"                                             \\r\"\n"}
{"Time":"2023-03-29T13:37:59.144867744Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver","Output":"    ptytest.go:121: 2023-03-29 13:37:59.144: cmd: \"Done waiting for WebSocket connections\"\n"}
{"Time":"2023-03-29T13:37:59.14488065Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver","Output":"    ptytest.go:121: 2023-03-29 13:37:59.144: cmd: \"                                      \\r\"\n"}
{"Time":"2023-03-29T13:37:59.146012139Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver","Output":"    ptytest.go:83: 2023-03-29 13:37:59.145: cmd: closing tpty: close\n"}
{"Time":"2023-03-29T13:37:59.146025303Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver","Output":"    ptytest.go:74: 2023-03-29 13:37:59.145: cmd: closing pty\n"}
{"Time":"2023-03-29T13:37:59.14606956Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver","Output":"    ptytest.go:110: 2023-03-29 13:37:59.146: cmd: copy done: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:37:59.146083103Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver","Output":"    ptytest.go:111: 2023-03-29 13:37:59.146: cmd: closing out\n"}
{"Time":"2023-03-29T13:37:59.146095911Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver","Output":"    ptytest.go:113: 2023-03-29 13:37:59.146: cmd: closed out: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:37:59.146143558Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver","Output":"    ptytest.go:76: 2023-03-29 13:37:59.146: cmd: closed pty: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:59.146156843Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver","Output":"    ptytest.go:74: 2023-03-29 13:37:59.146: cmd: closing logw\n"}
{"Time":"2023-03-29T13:37:59.146169893Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver","Output":"    ptytest.go:76: 2023-03-29 13:37:59.146: cmd: closed logw: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:59.146182763Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver","Output":"    ptytest.go:74: 2023-03-29 13:37:59.146: cmd: closing logr\n"}
{"Time":"2023-03-29T13:37:59.146191645Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver","Output":"    ptytest.go:76: 2023-03-29 13:37:59.146: cmd: closed logr: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:37:59.146205122Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver","Output":"    ptytest.go:102: 2023-03-29 13:37:59.146: cmd: closed tpty\n"}
{"Time":"2023-03-29T13:37:59.146368404Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver","Output":"--- PASS: TestServer/Logging/Stackdriver (26.23s)\n"}
{"Time":"2023-03-29T13:37:59.146391543Z","Action":"pass","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging/Stackdriver","Elapsed":26.23}
{"Time":"2023-03-29T13:37:59.146412558Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging","Output":"--- PASS: TestServer/Logging (0.00s)\n"}
{"Time":"2023-03-29T13:37:59.146438143Z","Action":"pass","Package":"github.com/coder/coder/v2/cli","Test":"TestServer/Logging","Elapsed":0}
{"Time":"2023-03-29T13:37:59.1464552Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Test":"TestServer","Output":"--- FAIL: TestServer (0.05s)\n"}
{"Time":"2023-03-29T13:37:59.146474821Z","Action":"fail","Package":"github.com/coder/coder/v2/cli","Test":"TestServer","Elapsed":0.05}
{"Time":"2023-03-29T13:37:59.146491309Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Output":"FAIL\n"}
{"Time":"2023-03-29T13:37:59.158021068Z","Action":"output","Package":"github.com/coder/coder/v2/cli","Output":"FAIL\tgithub.com/coder/coder/v2/cli\t26.514s\n"}
{"Time":"2023-03-29T13:37:59.158054855Z","Action":"fail","Package":"github.com/coder/coder/v2/cli","Elapsed":26.514}
{"Time":"2023-03-29T13:38:02.724238056Z","Action":"start","Package":"github.com/coder/coder/v2/cli/cliui"}
{"Time":"2023-03-29T13:38:02.754440648Z","Action":"run","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestGitAuth"}
{"Time":"2023-03-29T13:38:02.75448054Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestGitAuth","Output":"=== RUN   TestGitAuth\n"}
{"Time":"2023-03-29T13:38:02.754486705Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestGitAuth","Output":"=== PAUSE TestGitAuth\n"}
{"Time":"2023-03-29T13:38:02.754490044Z","Action":"pause","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestGitAuth"}
{"Time":"2023-03-29T13:38:02.754493443Z","Action":"run","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt"}
{"Time":"2023-03-29T13:38:02.754496272Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt","Output":"=== RUN   TestPrompt\n"}
{"Time":"2023-03-29T13:38:02.754504892Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt","Output":"=== PAUSE TestPrompt\n"}
{"Time":"2023-03-29T13:38:02.754507539Z","Action":"pause","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt"}
{"Time":"2023-03-29T13:38:02.754510534Z","Action":"cont","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestGitAuth"}
{"Time":"2023-03-29T13:38:02.754514471Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestGitAuth","Output":"=== CONT  TestGitAuth\n"}
{"Time":"2023-03-29T13:38:02.754642422Z","Action":"cont","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt"}
{"Time":"2023-03-29T13:38:02.754653067Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt","Output":"=== CONT  TestPrompt\n"}
{"Time":"2023-03-29T13:38:02.754658206Z","Action":"run","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Success"}
{"Time":"2023-03-29T13:38:02.754660941Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Success","Output":"=== RUN   TestPrompt/Success\n"}
{"Time":"2023-03-29T13:38:02.754664503Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Success","Output":"=== PAUSE TestPrompt/Success\n"}
{"Time":"2023-03-29T13:38:02.754666941Z","Action":"pause","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Success"}
{"Time":"2023-03-29T13:38:02.754671476Z","Action":"run","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Confirm"}
{"Time":"2023-03-29T13:38:02.754673908Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Confirm","Output":"=== RUN   TestPrompt/Confirm\n"}
{"Time":"2023-03-29T13:38:02.754676919Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Confirm","Output":"=== PAUSE TestPrompt/Confirm\n"}
{"Time":"2023-03-29T13:38:02.754683157Z","Action":"pause","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Confirm"}
{"Time":"2023-03-29T13:38:02.754688172Z","Action":"run","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Skip"}
{"Time":"2023-03-29T13:38:02.754690617Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Skip","Output":"=== RUN   TestPrompt/Skip\n"}
{"Time":"2023-03-29T13:38:02.754693754Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Skip","Output":"=== PAUSE TestPrompt/Skip\n"}
{"Time":"2023-03-29T13:38:02.754696128Z","Action":"pause","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Skip"}
{"Time":"2023-03-29T13:38:02.754700672Z","Action":"run","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/JSON"}
{"Time":"2023-03-29T13:38:02.754703008Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/JSON","Output":"=== RUN   TestPrompt/JSON\n"}
{"Time":"2023-03-29T13:38:02.754718094Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/JSON","Output":"=== PAUSE TestPrompt/JSON\n"}
{"Time":"2023-03-29T13:38:02.754723349Z","Action":"pause","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/JSON"}
{"Time":"2023-03-29T13:38:02.754728958Z","Action":"run","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/BadJSON"}
{"Time":"2023-03-29T13:38:02.754731492Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/BadJSON","Output":"=== RUN   TestPrompt/BadJSON\n"}
{"Time":"2023-03-29T13:38:02.754734435Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/BadJSON","Output":"=== PAUSE TestPrompt/BadJSON\n"}
{"Time":"2023-03-29T13:38:02.754736902Z","Action":"pause","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/BadJSON"}
{"Time":"2023-03-29T13:38:02.754748953Z","Action":"run","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/MultilineJSON"}
{"Time":"2023-03-29T13:38:02.754751439Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/MultilineJSON","Output":"=== RUN   TestPrompt/MultilineJSON\n"}
{"Time":"2023-03-29T13:38:02.754755982Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/MultilineJSON","Output":"=== PAUSE TestPrompt/MultilineJSON\n"}
{"Time":"2023-03-29T13:38:02.754760728Z","Action":"pause","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/MultilineJSON"}
{"Time":"2023-03-29T13:38:02.754764892Z","Action":"cont","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Success"}
{"Time":"2023-03-29T13:38:02.754767252Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Success","Output":"=== CONT  TestPrompt/Success\n"}
{"Time":"2023-03-29T13:38:02.754976869Z","Action":"cont","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/MultilineJSON"}
{"Time":"2023-03-29T13:38:02.754982653Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/MultilineJSON","Output":"=== CONT  TestPrompt/MultilineJSON\n"}
{"Time":"2023-03-29T13:38:02.755108229Z","Action":"cont","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/BadJSON"}
{"Time":"2023-03-29T13:38:02.755113844Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/BadJSON","Output":"=== CONT  TestPrompt/BadJSON\n"}
{"Time":"2023-03-29T13:38:02.755212757Z","Action":"cont","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/JSON"}
{"Time":"2023-03-29T13:38:02.755218041Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/JSON","Output":"=== CONT  TestPrompt/JSON\n"}
{"Time":"2023-03-29T13:38:02.755315155Z","Action":"cont","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Skip"}
{"Time":"2023-03-29T13:38:02.755318778Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Skip","Output":"=== CONT  TestPrompt/Skip\n"}
{"Time":"2023-03-29T13:38:02.755513491Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Skip","Output":"    ptytest.go:83: 2023-03-29 13:38:02.755: cmd: closing tpty: close\n"}
{"Time":"2023-03-29T13:38:02.755529621Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Skip","Output":"    ptytest.go:74: 2023-03-29 13:38:02.755: cmd: closing pty\n"}
{"Time":"2023-03-29T13:38:02.755596722Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Skip","Output":"    ptytest.go:76: 2023-03-29 13:38:02.755: cmd: closed pty: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:38:02.755601928Z","Action":"cont","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Confirm"}
{"Time":"2023-03-29T13:38:02.755604522Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Confirm","Output":"=== CONT  TestPrompt/Confirm\n"}
{"Time":"2023-03-29T13:38:02.756154509Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Skip","Output":"    ptytest.go:110: 2023-03-29 13:38:02.756: cmd: copy done: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:38:02.756161274Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Skip","Output":"    ptytest.go:111: 2023-03-29 13:38:02.756: cmd: closing out\n"}
{"Time":"2023-03-29T13:38:02.756179269Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Skip","Output":"    ptytest.go:113: 2023-03-29 13:38:02.756: cmd: closed out: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:38:02.756195571Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Skip","Output":"    ptytest.go:74: 2023-03-29 13:38:02.756: cmd: closing logw\n"}
{"Time":"2023-03-29T13:38:02.75620977Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Skip","Output":"    ptytest.go:76: 2023-03-29 13:38:02.756: cmd: closed logw: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:38:02.756222494Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Skip","Output":"    ptytest.go:74: 2023-03-29 13:38:02.756: cmd: closing logr\n"}
{"Time":"2023-03-29T13:38:02.756250235Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Skip","Output":"    ptytest.go:76: 2023-03-29 13:38:02.756: cmd: closed logr: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:38:02.756263435Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Skip","Output":"    ptytest.go:102: 2023-03-29 13:38:02.756: cmd: closed tpty\n"}
{"Time":"2023-03-29T13:38:02.75631973Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Skip","Output":"    ptytest.go:83: 2023-03-29 13:38:02.756: cmd: closing tpty: close\n"}
{"Time":"2023-03-29T13:38:02.756334455Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Skip","Output":"    ptytest.go:74: 2023-03-29 13:38:02.756: cmd: closing pty\n"}
{"Time":"2023-03-29T13:38:02.756398184Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Skip","Output":"    ptytest.go:76: 2023-03-29 13:38:02.756: cmd: closed pty: pty: closed\n"}
{"Time":"2023-03-29T13:38:02.75641208Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Skip","Output":"    ptytest.go:74: 2023-03-29 13:38:02.756: cmd: closing logw\n"}
{"Time":"2023-03-29T13:38:02.756425561Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Skip","Output":"    ptytest.go:76: 2023-03-29 13:38:02.756: cmd: closed logw: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:38:02.756442572Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Skip","Output":"    ptytest.go:74: 2023-03-29 13:38:02.756: cmd: closing logr\n"}
{"Time":"2023-03-29T13:38:02.756457245Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Skip","Output":"    ptytest.go:76: 2023-03-29 13:38:02.756: cmd: closed logr: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:38:02.756473084Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Skip","Output":"    ptytest.go:102: 2023-03-29 13:38:02.756: cmd: closed tpty\n"}
{"Time":"2023-03-29T13:38:02.756487964Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Skip","Output":"--- PASS: TestPrompt/Skip (0.00s)\n"}
{"Time":"2023-03-29T13:38:02.756674486Z","Action":"pass","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Skip","Elapsed":0}
{"Time":"2023-03-29T13:38:02.756683362Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Confirm","Output":"    prompt_test.go:51: 2023-03-29 13:38:02.756: cmd: matched \"Example\" = \"\u003e Example\"\n"}
{"Time":"2023-03-29T13:38:02.756700414Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Confirm","Output":"    prompt_test.go:52: 2023-03-29 13:38:02.756: cmd: stdin: \"yes\\r\"\n"}
{"Time":"2023-03-29T13:38:02.756759525Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/JSON","Output":"    prompt_test.go:108: 2023-03-29 13:38:02.756: cmd: matched \"Example\" = \"\u003e Example\"\n"}
{"Time":"2023-03-29T13:38:02.75678767Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/JSON","Output":"    prompt_test.go:109: 2023-03-29 13:38:02.756: cmd: stdin: \"{}\\r\"\n"}
{"Time":"2023-03-29T13:38:02.756838147Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/BadJSON","Output":"    prompt_test.go:124: 2023-03-29 13:38:02.756: cmd: matched \"Example\" = \"\u003e Example\"\n"}
{"Time":"2023-03-29T13:38:02.756862647Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/BadJSON","Output":"    prompt_test.go:125: 2023-03-29 13:38:02.756: cmd: stdin: \"{a\\r\"\n"}
{"Time":"2023-03-29T13:38:02.756932142Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/MultilineJSON","Output":"    prompt_test.go:140: 2023-03-29 13:38:02.756: cmd: matched \"Example\" = \"\u003e Example\"\n"}
{"Time":"2023-03-29T13:38:02.756958031Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/MultilineJSON","Output":"    prompt_test.go:141: 2023-03-29 13:38:02.756: cmd: stdin: \"{\\n\\\"test\\\": \\\"wow\\\"\\n}\\r\"\n"}
{"Time":"2023-03-29T13:38:02.757013878Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestGitAuth","Output":"    ptytest.go:121: 2023-03-29 13:38:02.756: cmd: \"You must authenticate with GitHub to create a workspace with this template. Visit:\"\n"}
{"Time":"2023-03-29T13:38:02.757025551Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestGitAuth","Output":"    ptytest.go:121: 2023-03-29 13:38:02.757: cmd: \"\"\n"}
{"Time":"2023-03-29T13:38:02.757047114Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestGitAuth","Output":"    ptytest.go:121: 2023-03-29 13:38:02.757: cmd: \"\\thttps://example.com/gitauth/github?redirect=%2Fgitauth%3Fnotify\"\n"}
{"Time":"2023-03-29T13:38:02.757065197Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestGitAuth","Output":"    ptytest.go:121: 2023-03-29 13:38:02.757: cmd: \"\"\n"}
{"Time":"2023-03-29T13:38:02.757096029Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestGitAuth","Output":"    ptytest.go:121: 2023-03-29 13:38:02.757: cmd: \"\\r\\r⠈⠁ Waiting for Git authentication...\\rSuccessfully authenticated with GitHub!\"\n"}
{"Time":"2023-03-29T13:38:02.757108294Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestGitAuth","Output":"    ptytest.go:121: 2023-03-29 13:38:02.757: cmd: \"\"\n"}
{"Time":"2023-03-29T13:38:02.757140128Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestGitAuth","Output":"    gitauth_test.go:53: 2023-03-29 13:38:02.757: cmd: matched \"You must authenticate with\" = \"You must authenticate with\"\n"}
{"Time":"2023-03-29T13:38:02.757190596Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestGitAuth","Output":"    gitauth_test.go:54: 2023-03-29 13:38:02.757: cmd: matched \"https://example.com/gitauth/github\" = \" GitHub to create a workspace with this template. Visit:\\r\\n\\r\\n\\thttps://example.com/gitauth/github\"\n"}
{"Time":"2023-03-29T13:38:02.757264811Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestGitAuth","Output":"    gitauth_test.go:55: 2023-03-29 13:38:02.757: cmd: matched \"Successfully authenticated with GitHub\" = \"?redirect=%2Fgitauth%3Fnotify\\r\\n\\r\\n\\r\\r⠈⠁ Waiting for Git authentication...\\rSuccessfully authenticated with GitHub\"\n"}
{"Time":"2023-03-29T13:38:02.757294284Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestGitAuth","Output":"    ptytest.go:83: 2023-03-29 13:38:02.757: cmd: closing tpty: close\n"}
{"Time":"2023-03-29T13:38:02.757307619Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestGitAuth","Output":"    ptytest.go:74: 2023-03-29 13:38:02.757: cmd: closing pty\n"}
{"Time":"2023-03-29T13:38:02.757350699Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestGitAuth","Output":"    ptytest.go:110: 2023-03-29 13:38:02.757: cmd: copy done: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:38:02.757369646Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestGitAuth","Output":"    ptytest.go:111: 2023-03-29 13:38:02.757: cmd: closing out\n"}
{"Time":"2023-03-29T13:38:02.757388269Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestGitAuth","Output":"    ptytest.go:113: 2023-03-29 13:38:02.757: cmd: closed out: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:38:02.757437516Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestGitAuth","Output":"    ptytest.go:76: 2023-03-29 13:38:02.757: cmd: closed pty: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:38:02.7574545Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestGitAuth","Output":"    ptytest.go:74: 2023-03-29 13:38:02.757: cmd: closing logw\n"}
{"Time":"2023-03-29T13:38:02.757468757Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestGitAuth","Output":"    ptytest.go:76: 2023-03-29 13:38:02.757: cmd: closed logw: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:38:02.757483649Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestGitAuth","Output":"    ptytest.go:74: 2023-03-29 13:38:02.757: cmd: closing logr\n"}
{"Time":"2023-03-29T13:38:02.757496041Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestGitAuth","Output":"    ptytest.go:76: 2023-03-29 13:38:02.757: cmd: closed logr: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:38:02.757513203Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestGitAuth","Output":"    ptytest.go:102: 2023-03-29 13:38:02.757: cmd: closed tpty\n"}
{"Time":"2023-03-29T13:38:02.757518992Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestGitAuth","Output":"--- PASS: TestGitAuth (0.00s)\n"}
{"Time":"2023-03-29T13:38:02.75757314Z","Action":"pass","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestGitAuth","Elapsed":0}
{"Time":"2023-03-29T13:38:02.757576987Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Success","Output":"    prompt_test.go:34: 2023-03-29 13:38:02.757: cmd: matched \"Example\" = \"\u003e Example\"\n"}
{"Time":"2023-03-29T13:38:02.757605985Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Success","Output":"    prompt_test.go:35: 2023-03-29 13:38:02.757: cmd: stdin: \"hello\\r\"\n"}
{"Time":"2023-03-29T13:38:02.757679461Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Success","Output":"    ptytest.go:121: 2023-03-29 13:38:02.757: cmd: \"\u003e Example hello\"\n"}
{"Time":"2023-03-29T13:38:02.757731096Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Success","Output":"    ptytest.go:83: 2023-03-29 13:38:02.757: cmd: closing tpty: close\n"}
{"Time":"2023-03-29T13:38:02.757745488Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Success","Output":"    ptytest.go:74: 2023-03-29 13:38:02.757: cmd: closing pty\n"}
{"Time":"2023-03-29T13:38:02.757786052Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Success","Output":"    ptytest.go:110: 2023-03-29 13:38:02.757: cmd: copy done: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:38:02.757793961Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Success","Output":"    ptytest.go:111: 2023-03-29 13:38:02.757: cmd: closing out\n"}
{"Time":"2023-03-29T13:38:02.757809024Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Success","Output":"    ptytest.go:113: 2023-03-29 13:38:02.757: cmd: closed out: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:38:02.757853587Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Success","Output":"    ptytest.go:76: 2023-03-29 13:38:02.757: cmd: closed pty: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:38:02.757869751Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Success","Output":"    ptytest.go:74: 2023-03-29 13:38:02.757: cmd: closing logw\n"}
{"Time":"2023-03-29T13:38:02.757888281Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Success","Output":"    ptytest.go:76: 2023-03-29 13:38:02.757: cmd: closed logw: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:38:02.757896143Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Success","Output":"    ptytest.go:74: 2023-03-29 13:38:02.757: cmd: closing logr\n"}
{"Time":"2023-03-29T13:38:02.757912615Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Success","Output":"    ptytest.go:76: 2023-03-29 13:38:02.757: cmd: closed logr: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:38:02.757929309Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Success","Output":"    ptytest.go:102: 2023-03-29 13:38:02.757: cmd: closed tpty\n"}
{"Time":"2023-03-29T13:38:02.757934794Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Success","Output":"--- PASS: TestPrompt/Success (0.00s)\n"}
{"Time":"2023-03-29T13:38:02.757963355Z","Action":"pass","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Success","Elapsed":0}
{"Time":"2023-03-29T13:38:02.757966707Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/MultilineJSON","Output":"    ptytest.go:121: 2023-03-29 13:38:02.757: cmd: \"\u003e Example {\"\n"}
{"Time":"2023-03-29T13:38:02.757981822Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/MultilineJSON","Output":"    ptytest.go:121: 2023-03-29 13:38:02.757: cmd: \"\\\"test\\\": \\\"wow\\\"\"\n"}
{"Time":"2023-03-29T13:38:02.757994456Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/MultilineJSON","Output":"    ptytest.go:121: 2023-03-29 13:38:02.757: cmd: \"}\"\n"}
{"Time":"2023-03-29T13:38:02.75807554Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/MultilineJSON","Output":"    ptytest.go:83: 2023-03-29 13:38:02.758: cmd: closing tpty: close\n"}
{"Time":"2023-03-29T13:38:02.758091845Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/MultilineJSON","Output":"    ptytest.go:74: 2023-03-29 13:38:02.758: cmd: closing pty\n"}
{"Time":"2023-03-29T13:38:02.758122927Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/MultilineJSON","Output":"    ptytest.go:110: 2023-03-29 13:38:02.758: cmd: copy done: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:38:02.758135875Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/MultilineJSON","Output":"    ptytest.go:111: 2023-03-29 13:38:02.758: cmd: closing out\n"}
{"Time":"2023-03-29T13:38:02.758148587Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/MultilineJSON","Output":"    ptytest.go:113: 2023-03-29 13:38:02.758: cmd: closed out: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:38:02.758193703Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/MultilineJSON","Output":"    ptytest.go:76: 2023-03-29 13:38:02.758: cmd: closed pty: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:38:02.758208689Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/MultilineJSON","Output":"    ptytest.go:74: 2023-03-29 13:38:02.758: cmd: closing logw\n"}
{"Time":"2023-03-29T13:38:02.75822251Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/MultilineJSON","Output":"    ptytest.go:76: 2023-03-29 13:38:02.758: cmd: closed logw: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:38:02.758236906Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/MultilineJSON","Output":"    ptytest.go:74: 2023-03-29 13:38:02.758: cmd: closing logr\n"}
{"Time":"2023-03-29T13:38:02.758250264Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/MultilineJSON","Output":"    ptytest.go:76: 2023-03-29 13:38:02.758: cmd: closed logr: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:38:02.758266392Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/MultilineJSON","Output":"    ptytest.go:102: 2023-03-29 13:38:02.758: cmd: closed tpty\n"}
{"Time":"2023-03-29T13:38:02.758271916Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/MultilineJSON","Output":"--- PASS: TestPrompt/MultilineJSON (0.00s)\n"}
{"Time":"2023-03-29T13:38:02.758311206Z","Action":"pass","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/MultilineJSON","Elapsed":0}
{"Time":"2023-03-29T13:38:02.758314623Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/BadJSON","Output":"    ptytest.go:121: 2023-03-29 13:38:02.758: cmd: \"\u003e Example {a\"\n"}
{"Time":"2023-03-29T13:38:02.75836333Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/BadJSON","Output":"    ptytest.go:83: 2023-03-29 13:38:02.758: cmd: closing tpty: close\n"}
{"Time":"2023-03-29T13:38:02.758378803Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/BadJSON","Output":"    ptytest.go:74: 2023-03-29 13:38:02.758: cmd: closing pty\n"}
{"Time":"2023-03-29T13:38:02.758418274Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/BadJSON","Output":"    ptytest.go:110: 2023-03-29 13:38:02.758: cmd: copy done: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:38:02.758425803Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/BadJSON","Output":"    ptytest.go:111: 2023-03-29 13:38:02.758: cmd: closing out\n"}
{"Time":"2023-03-29T13:38:02.75844102Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/BadJSON","Output":"    ptytest.go:113: 2023-03-29 13:38:02.758: cmd: closed out: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:38:02.758482492Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/BadJSON","Output":"    ptytest.go:76: 2023-03-29 13:38:02.758: cmd: closed pty: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:38:02.758498572Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/BadJSON","Output":"    ptytest.go:74: 2023-03-29 13:38:02.758: cmd: closing logw\n"}
{"Time":"2023-03-29T13:38:02.758513045Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/BadJSON","Output":"    ptytest.go:76: 2023-03-29 13:38:02.758: cmd: closed logw: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:38:02.758526569Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/BadJSON","Output":"    ptytest.go:74: 2023-03-29 13:38:02.758: cmd: closing logr\n"}
{"Time":"2023-03-29T13:38:02.75853994Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/BadJSON","Output":"    ptytest.go:76: 2023-03-29 13:38:02.758: cmd: closed logr: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:38:02.758557098Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/BadJSON","Output":"    ptytest.go:102: 2023-03-29 13:38:02.758: cmd: closed tpty\n"}
{"Time":"2023-03-29T13:38:02.758562364Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/BadJSON","Output":"--- PASS: TestPrompt/BadJSON (0.00s)\n"}
{"Time":"2023-03-29T13:38:02.758589722Z","Action":"pass","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/BadJSON","Elapsed":0}
{"Time":"2023-03-29T13:38:02.758593068Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/JSON","Output":"    ptytest.go:121: 2023-03-29 13:38:02.758: cmd: \"\u003e Example {}\"\n"}
{"Time":"2023-03-29T13:38:02.758640512Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/JSON","Output":"    ptytest.go:83: 2023-03-29 13:38:02.758: cmd: closing tpty: close\n"}
{"Time":"2023-03-29T13:38:02.75865573Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/JSON","Output":"    ptytest.go:74: 2023-03-29 13:38:02.758: cmd: closing pty\n"}
{"Time":"2023-03-29T13:38:02.75868581Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/JSON","Output":"    ptytest.go:110: 2023-03-29 13:38:02.758: cmd: copy done: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:38:02.758697594Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/JSON","Output":"    ptytest.go:111: 2023-03-29 13:38:02.758: cmd: closing out\n"}
{"Time":"2023-03-29T13:38:02.758712004Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/JSON","Output":"    ptytest.go:113: 2023-03-29 13:38:02.758: cmd: closed out: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:38:02.758753059Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/JSON","Output":"    ptytest.go:76: 2023-03-29 13:38:02.758: cmd: closed pty: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:38:02.758789238Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/JSON","Output":"    ptytest.go:74: 2023-03-29 13:38:02.758: cmd: closing logw\n"}
{"Time":"2023-03-29T13:38:02.75880265Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/JSON","Output":"    ptytest.go:76: 2023-03-29 13:38:02.758: cmd: closed logw: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:38:02.758821412Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/JSON","Output":"    ptytest.go:74: 2023-03-29 13:38:02.758: cmd: closing logr\n"}
{"Time":"2023-03-29T13:38:02.758835398Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/JSON","Output":"    ptytest.go:76: 2023-03-29 13:38:02.758: cmd: closed logr: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:38:02.758851842Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/JSON","Output":"    ptytest.go:102: 2023-03-29 13:38:02.758: cmd: closed tpty\n"}
{"Time":"2023-03-29T13:38:02.758857116Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/JSON","Output":"--- PASS: TestPrompt/JSON (0.00s)\n"}
{"Time":"2023-03-29T13:38:02.758897163Z","Action":"pass","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/JSON","Elapsed":0}
{"Time":"2023-03-29T13:38:02.758900525Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Confirm","Output":"    ptytest.go:121: 2023-03-29 13:38:02.758: cmd: \"\u003e Example (yes/no) yes\"\n"}
{"Time":"2023-03-29T13:38:02.758967291Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Confirm","Output":"    ptytest.go:83: 2023-03-29 13:38:02.758: cmd: closing tpty: close\n"}
{"Time":"2023-03-29T13:38:02.758981151Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Confirm","Output":"    ptytest.go:74: 2023-03-29 13:38:02.758: cmd: closing pty\n"}
{"Time":"2023-03-29T13:38:02.759023005Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Confirm","Output":"    ptytest.go:110: 2023-03-29 13:38:02.758: cmd: copy done: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:38:02.759035878Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Confirm","Output":"    ptytest.go:111: 2023-03-29 13:38:02.759: cmd: closing out\n"}
{"Time":"2023-03-29T13:38:02.759048644Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Confirm","Output":"    ptytest.go:113: 2023-03-29 13:38:02.759: cmd: closed out: read /dev/ptmx: file already closed\n"}
{"Time":"2023-03-29T13:38:02.759094323Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Confirm","Output":"    ptytest.go:76: 2023-03-29 13:38:02.759: cmd: closed pty: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:38:02.759115364Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Confirm","Output":"    ptytest.go:74: 2023-03-29 13:38:02.759: cmd: closing logw\n"}
{"Time":"2023-03-29T13:38:02.75913071Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Confirm","Output":"    ptytest.go:76: 2023-03-29 13:38:02.759: cmd: closed logw: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:38:02.759144071Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Confirm","Output":"    ptytest.go:74: 2023-03-29 13:38:02.759: cmd: closing logr\n"}
{"Time":"2023-03-29T13:38:02.75915741Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Confirm","Output":"    ptytest.go:76: 2023-03-29 13:38:02.759: cmd: closed logr: \u003cnil\u003e\n"}
{"Time":"2023-03-29T13:38:02.759174685Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Confirm","Output":"    ptytest.go:102: 2023-03-29 13:38:02.759: cmd: closed tpty\n"}
{"Time":"2023-03-29T13:38:02.759180019Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Confirm","Output":"--- PASS: TestPrompt/Confirm (0.00s)\n"}
{"Time":"2023-03-29T13:38:02.759187539Z","Action":"pass","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt/Confirm","Elapsed":0}
{"Time":"2023-03-29T13:38:02.75919072Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt","Output":"--- PASS: TestPrompt (0.00s)\n"}
{"Time":"2023-03-29T13:38:02.759194742Z","Action":"pass","Package":"github.com/coder/coder/v2/cli/cliui","Test":"TestPrompt","Elapsed":0}
{"Time":"2023-03-29T13:38:02.759198362Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Output":"PASS\n"}
{"Time":"2023-03-29T13:38:02.761021961Z","Action":"output","Package":"github.com/coder/coder/v2/cli/cliui","Output":"ok  \tgithub.com/coder/coder/v2/cli/cliui\t0.037s\n"}
{"Time":"2023-03-29T13:38:02.761046557Z","Action":"pass","Package":"github.com/coder/coder/v2/cli/cliui","Elapsed":0.037}
