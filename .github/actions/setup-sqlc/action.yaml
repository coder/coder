name: Setup sqlc
description: |
  Sets up the sqlc environment for tests, builds, etc.
runs:
  using: "composite"
  steps:
    - name: Setup sqlc
      # uses: sqlc-dev/setup-sqlc@c0209b9199cd1cce6a14fc27cabcec491b651761 # v4.0.0
      # with:
      #   sqlc-version: "1.30.0"

      # Switched to coder/sqlc fork to fix ambiguous column bug, see:
      # - https://github.com/coder/sqlc/pull/1
      # - https://github.com/sqlc-dev/sqlc/pull/4159
      shell: bash
      run: |
        CGO_ENABLED=1 go install github.com/coder/sqlc/cmd/sqlc@aab4e865a51df0c43e1839f81a9d349b41d14f05
