name: "Setup Go"
description: |
  Sets up the Go environment for tests, builds, etc.
runs:
  using: "composite"
  steps:
    - shell: bash
      run: |
        # Aids in debugging
        go env
    - uses: buildjet/setup-go@v4
      with:
        cache: true
        go-version: "1.20.5"
    - name: Install gotestsum
      uses: jaxxstorm/action-install-gh-release@v1.10.0
      with:
        repo: gotestyourself/gotestsum
        tag: v1.9.0

    - uses: buildjet/cache@v3
      with:
        # This cache includes $GOCACHE, which is used for
        # test caching.
        path: ~/.cache
        key: buildjet-gocache-${{ hashFiles('**/*.go') }}
        restore-keys: |
          buildjet-gocache-
