{
	"__inputs": [
		{
			"name": "DS_PROMETHEUS",
			"label": "Prometheus",
			"description": "",
			"type": "datasource",
			"pluginId": "prometheus",
			"pluginName": "Prometheus"
		},
		{
			"name": "DS_GOOGLE_CLOUD MONITORING",
			"label": "Google Cloud Monitoring",
			"description": "",
			"type": "datasource",
			"pluginId": "stackdriver",
			"pluginName": "Google Cloud Monitoring"
		},
		{
			"name": "DS_GOOGLE_CLOUD LOGGING :: V2-LOADTEST",
			"label": "Google Cloud Logging :: v2-loadtest",
			"description": "",
			"type": "datasource",
			"pluginId": "googlecloud-logging-datasource",
			"pluginName": "Google Cloud Logging"
		}
	],
	"__elements": {},
	"__requires": [
		{
			"type": "panel",
			"id": "barchart",
			"name": "Bar chart",
			"version": ""
		},
		{
			"type": "datasource",
			"id": "googlecloud-logging-datasource",
			"name": "Google Cloud Logging",
			"version": "1.3.0"
		},
		{
			"type": "grafana",
			"id": "grafana",
			"name": "Grafana",
			"version": "11.1.0"
		},
		{
			"type": "panel",
			"id": "heatmap",
			"name": "Heatmap",
			"version": ""
		},
		{
			"type": "panel",
			"id": "logs",
			"name": "Logs",
			"version": ""
		},
		{
			"type": "datasource",
			"id": "prometheus",
			"name": "Prometheus",
			"version": "1.0.0"
		},
		{
			"type": "datasource",
			"id": "stackdriver",
			"name": "Google Cloud Monitoring",
			"version": "11.1.0"
		},
		{
			"type": "panel",
			"id": "timeseries",
			"name": "Time series",
			"version": ""
		}
	],
	"annotations": {
		"list": [
			{
				"builtIn": 1,
				"datasource": {
					"type": "grafana",
					"uid": "-- Grafana --"
				},
				"enable": true,
				"hide": true,
				"iconColor": "rgba(0, 211, 255, 1)",
				"name": "Annotations & Alerts",
				"target": {
					"limit": 100,
					"matchAny": false,
					"tags": [],
					"type": "dashboard"
				},
				"type": "dashboard"
			},
			{
				"datasource": {
					"type": "datasource",
					"uid": "grafana"
				},
				"enable": true,
				"iconColor": "red",
				"name": "Scaletest Error",
				"target": {
					"refId": "Anno",
					"tags": ["scaletest", "runner", "error"],
					"type": "tags"
				}
			},
			{
				"datasource": {
					"type": "datasource",
					"uid": "grafana"
				},
				"enable": true,
				"iconColor": "green",
				"name": "Scaletest Phase",
				"target": {
					"refId": "Anno",
					"tags": ["scaletest", "runner", "phase-default"],
					"type": "tags"
				}
			},
			{
				"datasource": {
					"type": "datasource",
					"uid": "grafana"
				},
				"enable": true,
				"iconColor": "transparent",
				"name": "Scaletest Phase (Wait)",
				"target": {
					"refId": "Anno",
					"tags": ["scaletest", "runner", "phase-wait"],
					"type": "tags"
				}
			},
			{
				"datasource": {
					"type": "datasource",
					"uid": "grafana"
				},
				"enable": true,
				"iconColor": "blue",
				"name": "Scaletest Status",
				"target": {
					"refId": "Anno",
					"tags": ["scaletest", "runner", "status"],
					"type": "tags"
				}
			},
			{
				"datasource": {
					"type": "datasource",
					"uid": "grafana"
				},
				"enable": true,
				"iconColor": "dark-green",
				"name": "Concurrent Scenarios",
				"target": {
					"refId": "Anno",
					"tags": ["scaletest", "runner", "scenario"],
					"type": "tags"
				}
			},
			{
				"datasource": {
					"type": "datasource",
					"uid": "grafana"
				},
				"enable": true,
				"iconColor": "semi-dark-orange",
				"name": "Greedy agent",
				"target": {
					"refId": "Anno",
					"tags": ["scaletest", "runner", "greedy_agent"],
					"type": "tags"
				}
			},
			{
				"datasource": {
					"type": "datasource",
					"uid": "grafana"
				},
				"enable": false,
				"iconColor": "super-light-purple",
				"name": "Scaletest Runner Workspace",
				"target": {
					"refId": "Anno",
					"tags": ["scaletest", "runner", "workspace"],
					"type": "tags"
				}
			},
			{
				"datasource": {
					"type": "datasource",
					"uid": "grafana"
				},
				"enable": false,
				"iconColor": "super-light-orange",
				"name": "Pprof",
				"target": {
					"limit": 100,
					"matchAny": false,
					"tags": ["scaletest", "runner", "pprof"],
					"type": "tags"
				}
			}
		]
	},
	"editable": true,
	"fiscalYearStartMonth": 0,
	"graphTooltip": 1,
	"id": null,
	"links": [],
	"liveNow": false,
	"panels": [
		{
			"collapsed": false,
			"gridPos": {
				"h": 1,
				"w": 24,
				"x": 0,
				"y": 0
			},
			"id": 15,
			"panels": [],
			"title": "Control Plane Resources",
			"type": "row"
		},
		{
			"datasource": {
				"type": "prometheus",
				"uid": "${DS_PROMETHEUS}"
			},
			"fieldConfig": {
				"defaults": {
					"color": {
						"mode": "palette-classic"
					},
					"custom": {
						"axisBorderShow": false,
						"axisCenteredZero": false,
						"axisColorMode": "text",
						"axisLabel": "",
						"axisPlacement": "auto",
						"barAlignment": 0,
						"drawStyle": "line",
						"fillOpacity": 0,
						"gradientMode": "none",
						"hideFrom": {
							"legend": false,
							"tooltip": false,
							"viz": false
						},
						"insertNulls": false,
						"lineInterpolation": "linear",
						"lineWidth": 1,
						"pointSize": 5,
						"scaleDistribution": {
							"type": "linear"
						},
						"showPoints": "auto",
						"spanNulls": 60000,
						"stacking": {
							"group": "A",
							"mode": "none"
						},
						"thresholdsStyle": {
							"mode": "off"
						}
					},
					"mappings": [],
					"thresholds": {
						"mode": "absolute",
						"steps": [
							{
								"color": "green",
								"value": null
							}
						]
					}
				},
				"overrides": [
					{
						"matcher": {
							"id": "byName",
							"options": "requests"
						},
						"properties": [
							{
								"id": "custom.spanNulls",
								"value": true
							},
							{
								"id": "custom.lineStyle",
								"value": {
									"dash": [10, 10],
									"fill": "dash"
								}
							}
						]
					},
					{
						"matcher": {
							"id": "byName",
							"options": "limit"
						},
						"properties": [
							{
								"id": "custom.spanNulls",
								"value": true
							},
							{
								"id": "custom.lineStyle",
								"value": {
									"dash": [10, 10],
									"fill": "dash"
								}
							}
						]
					}
				]
			},
			"gridPos": {
				"h": 8,
				"w": 12,
				"x": 0,
				"y": 1
			},
			"id": 9,
			"options": {
				"legend": {
					"calcs": [],
					"displayMode": "list",
					"placement": "bottom",
					"showLegend": true
				},
				"tooltip": {
					"mode": "single",
					"sort": "none"
				}
			},
			"targets": [
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "code",
					"expr": "sum by(pod) (rate(container_cpu_usage_seconds_total{cluster=~\"$cluster\", namespace=~\"$namespace\", container=~\"^(coder|provisionerd)$\"}[$__rate_interval])) ",
					"hide": false,
					"legendFormat": "{{label_name}}",
					"range": true,
					"refId": "A"
				},
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "code",
					"exemplar": false,
					"expr": "max (kube_pod_container_resource_requests{cluster=~\"$cluster\", namespace=~\"$namespace\", resource=\"cpu\", container=~\"^(coder|provisionerd)$\"})",
					"hide": false,
					"instant": false,
					"legendFormat": "requests",
					"range": true,
					"refId": "B"
				},
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "code",
					"exemplar": false,
					"expr": "max (kube_pod_container_resource_limits{cluster=~\"$cluster\", namespace=~\"$namespace\", resource=\"cpu\", container=~\"^(coder|provisionerd)$\"})",
					"hide": false,
					"instant": false,
					"legendFormat": "limit",
					"range": true,
					"refId": "C"
				}
			],
			"title": "Coder CPU usage",
			"type": "timeseries"
		},
		{
			"datasource": {
				"type": "prometheus",
				"uid": "${DS_PROMETHEUS}"
			},
			"fieldConfig": {
				"defaults": {
					"color": {
						"mode": "palette-classic"
					},
					"custom": {
						"axisBorderShow": false,
						"axisCenteredZero": false,
						"axisColorMode": "text",
						"axisLabel": "",
						"axisPlacement": "auto",
						"axisSoftMin": 0,
						"barAlignment": 0,
						"drawStyle": "line",
						"fillOpacity": 0,
						"gradientMode": "none",
						"hideFrom": {
							"legend": false,
							"tooltip": false,
							"viz": false
						},
						"insertNulls": false,
						"lineInterpolation": "linear",
						"lineWidth": 1,
						"pointSize": 5,
						"scaleDistribution": {
							"type": "linear"
						},
						"showPoints": "auto",
						"spanNulls": 60000,
						"stacking": {
							"group": "A",
							"mode": "none"
						},
						"thresholdsStyle": {
							"mode": "off"
						}
					},
					"mappings": [],
					"thresholds": {
						"mode": "absolute",
						"steps": [
							{
								"color": "green",
								"value": null
							}
						]
					},
					"unit": "bytes"
				},
				"overrides": [
					{
						"matcher": {
							"id": "byName",
							"options": "requests"
						},
						"properties": [
							{
								"id": "custom.spanNulls",
								"value": true
							},
							{
								"id": "custom.lineStyle",
								"value": {
									"dash": [10, 10],
									"fill": "dash"
								}
							}
						]
					},
					{
						"matcher": {
							"id": "byName",
							"options": "limit"
						},
						"properties": [
							{
								"id": "custom.spanNulls",
								"value": true
							},
							{
								"id": "custom.lineStyle",
								"value": {
									"dash": [10, 10],
									"fill": "dash"
								}
							}
						]
					}
				]
			},
			"gridPos": {
				"h": 8,
				"w": 12,
				"x": 12,
				"y": 1
			},
			"id": 10,
			"options": {
				"legend": {
					"calcs": [],
					"displayMode": "list",
					"placement": "bottom",
					"showLegend": true
				},
				"tooltip": {
					"mode": "single",
					"sort": "none"
				}
			},
			"targets": [
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "code",
					"expr": "sum by(pod) (container_memory_working_set_bytes{cluster=~\"$cluster\", namespace=~\"$namespace\", container=~\"^(coder|provisionerd)$\"})",
					"hide": false,
					"legendFormat": "__auto",
					"range": true,
					"refId": "A"
				},
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "code",
					"expr": "max (kube_pod_container_resource_requests{cluster=~\"$cluster\", namespace=~\"$namespace\", resource=\"memory\", container=~\"^(coder|provisionerd)$\"})",
					"hide": false,
					"legendFormat": "requests",
					"range": true,
					"refId": "B"
				},
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "code",
					"expr": "max (kube_pod_container_resource_limits{cluster=~\"$cluster\", namespace=~\"$namespace\", resource=\"memory\", container=~\"^(coder|provisionerd)$\"})",
					"hide": false,
					"legendFormat": "limit",
					"range": true,
					"refId": "C"
				}
			],
			"title": "Coder memory usage",
			"type": "timeseries"
		},
		{
			"datasource": {
				"type": "prometheus",
				"uid": "${DS_PROMETHEUS}"
			},
			"fieldConfig": {
				"defaults": {
					"color": {
						"mode": "palette-classic"
					},
					"custom": {
						"axisBorderShow": false,
						"axisCenteredZero": true,
						"axisColorMode": "text",
						"axisLabel": "",
						"axisPlacement": "auto",
						"barAlignment": 0,
						"drawStyle": "bars",
						"fillOpacity": 56,
						"gradientMode": "none",
						"hideFrom": {
							"legend": false,
							"tooltip": false,
							"viz": false
						},
						"insertNulls": false,
						"lineInterpolation": "linear",
						"lineWidth": 1,
						"pointSize": 5,
						"scaleDistribution": {
							"type": "linear"
						},
						"showPoints": "auto",
						"spanNulls": 60000,
						"stacking": {
							"group": "A",
							"mode": "none"
						},
						"thresholdsStyle": {
							"mode": "off"
						}
					},
					"mappings": [],
					"thresholds": {
						"mode": "absolute",
						"steps": [
							{
								"color": "green",
								"value": null
							}
						]
					},
					"unit": "bytes"
				},
				"overrides": [
					{
						"matcher": {
							"id": "byName",
							"options": "requests"
						},
						"properties": [
							{
								"id": "custom.spanNulls",
								"value": true
							},
							{
								"id": "custom.lineStyle",
								"value": {
									"dash": [10, 10],
									"fill": "dash"
								}
							}
						]
					},
					{
						"matcher": {
							"id": "byName",
							"options": "limit"
						},
						"properties": [
							{
								"id": "custom.spanNulls",
								"value": true
							},
							{
								"id": "custom.lineStyle",
								"value": {
									"dash": [10, 10],
									"fill": "dash"
								}
							}
						]
					}
				]
			},
			"gridPos": {
				"h": 8,
				"w": 12,
				"x": 0,
				"y": 9
			},
			"id": 24,
			"options": {
				"legend": {
					"calcs": [],
					"displayMode": "list",
					"placement": "bottom",
					"showLegend": true
				},
				"tooltip": {
					"mode": "single",
					"sort": "none"
				}
			},
			"targets": [
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "code",
					"expr": "sum by(pod) (-rate(container_network_transmit_bytes_total{cluster=~\"$cluster\", namespace=~\"$namespace\", pod=~\"^coder-(provisioner-)?[a-z0-9]+-[a-z0-9]+$\"}[$__rate_interval]))",
					"hide": false,
					"legendFormat": "tx {{pod}}",
					"range": true,
					"refId": "A"
				},
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "code",
					"expr": "sum by(pod) (rate(container_network_receive_bytes_total{cluster=~\"$cluster\", namespace=~\"$namespace\", pod=~\"^coder-(provisioner-)?[a-z0-9]+-[a-z0-9]+$\"}[$__rate_interval]))",
					"hide": false,
					"legendFormat": "rx {{pod}}",
					"range": true,
					"refId": "B"
				}
			],
			"title": "Coder Network TX/RX",
			"type": "timeseries"
		},
		{
			"datasource": {
				"type": "prometheus",
				"uid": "${DS_PROMETHEUS}"
			},
			"fieldConfig": {
				"defaults": {
					"color": {
						"mode": "palette-classic"
					},
					"custom": {
						"axisBorderShow": false,
						"axisCenteredZero": false,
						"axisColorMode": "text",
						"axisLabel": "",
						"axisPlacement": "auto",
						"axisSoftMin": 0,
						"barAlignment": 0,
						"drawStyle": "line",
						"fillOpacity": 0,
						"gradientMode": "none",
						"hideFrom": {
							"legend": false,
							"tooltip": false,
							"viz": false
						},
						"insertNulls": false,
						"lineInterpolation": "linear",
						"lineWidth": 1,
						"pointSize": 5,
						"scaleDistribution": {
							"type": "linear"
						},
						"showPoints": "auto",
						"spanNulls": false,
						"stacking": {
							"group": "A",
							"mode": "none"
						},
						"thresholdsStyle": {
							"mode": "off"
						}
					},
					"mappings": [],
					"thresholds": {
						"mode": "absolute",
						"steps": [
							{
								"color": "green",
								"value": null
							}
						]
					},
					"unit": "none"
				},
				"overrides": [
					{
						"matcher": {
							"id": "byName",
							"options": "requests"
						},
						"properties": [
							{
								"id": "custom.spanNulls",
								"value": true
							},
							{
								"id": "custom.lineStyle",
								"value": {
									"dash": [10, 10],
									"fill": "dash"
								}
							}
						]
					},
					{
						"matcher": {
							"id": "byName",
							"options": "limit"
						},
						"properties": [
							{
								"id": "custom.spanNulls",
								"value": true
							},
							{
								"id": "custom.lineStyle",
								"value": {
									"dash": [10, 10],
									"fill": "dash"
								}
							}
						]
					}
				]
			},
			"gridPos": {
				"h": 8,
				"w": 12,
				"x": 12,
				"y": 9
			},
			"id": 25,
			"options": {
				"legend": {
					"calcs": [],
					"displayMode": "list",
					"placement": "bottom",
					"showLegend": true
				},
				"tooltip": {
					"mode": "single",
					"sort": "none"
				}
			},
			"targets": [
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "code",
					"expr": "sum by(pod) (delta(kube_pod_container_status_restarts_total{cluster=~\"$cluster\", namespace=~\"$namespace\", container=~\"^(coder|provisionerd)$\"}[1m]))",
					"hide": false,
					"legendFormat": "__auto",
					"range": true,
					"refId": "A"
				}
			],
			"title": "Coder pod restarts",
			"type": "timeseries"
		},
		{
			"datasource": {
				"type": "stackdriver",
				"uid": "${DS_GOOGLE_CLOUD MONITORING}"
			},
			"description": "",
			"fieldConfig": {
				"defaults": {
					"color": {
						"fixedColor": "#989898",
						"mode": "fixed"
					},
					"custom": {
						"axisBorderShow": false,
						"axisCenteredZero": false,
						"axisColorMode": "text",
						"axisLabel": "",
						"axisPlacement": "auto",
						"fillOpacity": 80,
						"gradientMode": "none",
						"hideFrom": {
							"legend": false,
							"tooltip": false,
							"viz": false
						},
						"lineWidth": 1,
						"scaleDistribution": {
							"type": "linear"
						},
						"thresholdsStyle": {
							"mode": "off"
						}
					},
					"mappings": [],
					"thresholds": {
						"mode": "absolute",
						"steps": [
							{
								"color": "blue",
								"value": null
							}
						]
					},
					"unit": "none"
				},
				"overrides": []
			},
			"gridPos": {
				"h": 8,
				"w": 12,
				"x": 0,
				"y": 17
			},
			"id": 50,
			"options": {
				"barRadius": 0,
				"barWidth": 0.97,
				"fullHighlight": false,
				"groupWidth": 0.7,
				"legend": {
					"calcs": [],
					"displayMode": "list",
					"placement": "bottom",
					"showLegend": true
				},
				"orientation": "auto",
				"showValue": "auto",
				"stacking": "none",
				"tooltip": {
					"mode": "multi",
					"sort": "none"
				},
				"xTickLabelRotation": 0,
				"xTickLabelSpacing": 200
			},
			"pluginVersion": "9.5.2",
			"targets": [
				{
					"datasource": {
						"type": "stackdriver",
						"uid": "${DS_GOOGLE_CLOUD MONITORING}"
					},
					"queryType": "timeSeriesList",
					"refId": "A",
					"timeSeriesList": {
						"alignmentPeriod": "+300s",
						"crossSeriesReducer": "REDUCE_NONE",
						"filters": [
							"resource.label.project_id",
							"=",
							"v2-loadtest",
							"AND",
							"resource.label.namespace_name",
							"=",
							"coder-big",
							"AND",
							"resource.label.container_name",
							"=",
							"coder",
							"AND",
							"resource.label.cluster_name",
							"=",
							"big",
							"AND",
							"resource.type",
							"=",
							"k8s_container",
							"AND",
							"resource.label.pod_name",
							"!=~",
							"coder-scaletest-.*",
							"AND",
							"resource.label.pod_name",
							"=~",
							"coder-.*",
							"AND",
							"metric.type",
							"=",
							"logging.googleapis.com/log_entry_count"
						],
						"groupBys": [],
						"perSeriesAligner": "ALIGN_SUM",
						"preprocessor": "none",
						"projectName": "v2-loadtest"
					}
				}
			],
			"title": "Coder Logs Entries (All Levels)",
			"type": "barchart"
		},
		{
			"datasource": {
				"type": "googlecloud-logging-datasource",
				"uid": "${DS_GOOGLE_CLOUD LOGGING :: V2-LOADTEST}"
			},
			"gridPos": {
				"h": 8,
				"w": 12,
				"x": 12,
				"y": 17
			},
			"id": 51,
			"options": {
				"dedupStrategy": "none",
				"enableLogDetails": true,
				"prettifyLogMessage": false,
				"showCommonLabels": false,
				"showLabels": false,
				"showTime": true,
				"sortOrder": "Descending",
				"wrapLogMessage": false
			},
			"targets": [
				{
					"datasource": {
						"type": "googlecloud-logging-datasource",
						"uid": "${DS_GOOGLE_CLOUD LOGGING :: V2-LOADTEST}"
					},
					"projectId": "v2-loadtest",
					"queryText": "resource.type=\"k8s_container\" AND\nresource.labels.cluster_name=\"big\" AND\nresource.labels.namespace_name=\"coder-big\" AND\nresource.labels.location=\"us-central1-a\" AND\nresource.labels.project_id=\"v2-loadtest\" AND\n(resource.labels.container_name=\"coder\" OR resource.labels.container_name=\"coder-provisionerd\") AND\njsonPayload.message!=\"\" AND\nseverity=\"ERROR\"",
					"refId": "Error"
				},
				{
					"datasource": {
						"type": "googlecloud-logging-datasource",
						"uid": "${DS_GOOGLE_CLOUD LOGGING :: V2-LOADTEST}"
					},
					"hide": false,
					"projectId": "v2-loadtest",
					"queryText": "resource.type=\"k8s_container\" AND\nresource.labels.cluster_name=\"big\" AND\nresource.labels.namespace_name=\"coder-big\" AND\nresource.labels.location=\"us-central1-a\" AND\nresource.labels.project_id=\"v2-loadtest\" AND\ntextPayload=~\"panic:.*\"",
					"refId": "Panic"
				}
			],
			"title": "Coder Error Logs",
			"type": "logs"
		},
		{
			"collapsed": false,
			"gridPos": {
				"h": 1,
				"w": 24,
				"x": 0,
				"y": 25
			},
			"id": 29,
			"panels": [],
			"title": "Database",
			"type": "row"
		},
		{
			"datasource": {
				"type": "stackdriver",
				"uid": "${DS_GOOGLE_CLOUD MONITORING}"
			},
			"fieldConfig": {
				"defaults": {
					"color": {
						"mode": "palette-classic"
					},
					"custom": {
						"axisBorderShow": false,
						"axisCenteredZero": false,
						"axisColorMode": "text",
						"axisLabel": "",
						"axisPlacement": "auto",
						"barAlignment": 0,
						"drawStyle": "line",
						"fillOpacity": 0,
						"gradientMode": "none",
						"hideFrom": {
							"legend": false,
							"tooltip": false,
							"viz": false
						},
						"insertNulls": false,
						"lineInterpolation": "linear",
						"lineWidth": 1,
						"pointSize": 5,
						"scaleDistribution": {
							"type": "linear"
						},
						"showPoints": "auto",
						"spanNulls": false,
						"stacking": {
							"group": "A",
							"mode": "none"
						},
						"thresholdsStyle": {
							"mode": "off"
						}
					},
					"mappings": [],
					"max": 1,
					"min": 0,
					"thresholds": {
						"mode": "absolute",
						"steps": [
							{
								"color": "green",
								"value": null
							},
							{
								"color": "red",
								"value": 80
							}
						]
					},
					"unit": "percentunit"
				},
				"overrides": []
			},
			"gridPos": {
				"h": 8,
				"w": 12,
				"x": 0,
				"y": 26
			},
			"id": 52,
			"options": {
				"legend": {
					"calcs": [],
					"displayMode": "list",
					"placement": "bottom",
					"showLegend": true
				},
				"tooltip": {
					"mode": "single",
					"sort": "none"
				}
			},
			"targets": [
				{
					"datasource": {
						"type": "stackdriver",
						"uid": "${DS_GOOGLE_CLOUD MONITORING}"
					},
					"queryType": "timeSeriesList",
					"refId": "A",
					"timeSeriesList": {
						"alignmentPeriod": "cloud-monitoring-auto",
						"crossSeriesReducer": "REDUCE_NONE",
						"filters": [
							"resource.label.project_id",
							"=",
							"v2-loadtest",
							"AND",
							"metric.type",
							"=",
							"cloudsql.googleapis.com/database/cpu/utilization"
						],
						"groupBys": ["resource.label.database_id"],
						"perSeriesAligner": "ALIGN_NONE",
						"preprocessor": "none",
						"projectName": "v2-loadtest"
					}
				}
			],
			"title": "DB CPU Util%",
			"type": "timeseries"
		},
		{
			"datasource": {
				"type": "stackdriver",
				"uid": "${DS_GOOGLE_CLOUD MONITORING}"
			},
			"fieldConfig": {
				"defaults": {
					"color": {
						"mode": "palette-classic"
					},
					"custom": {
						"axisBorderShow": false,
						"axisCenteredZero": false,
						"axisColorMode": "text",
						"axisLabel": "",
						"axisPlacement": "auto",
						"barAlignment": 0,
						"drawStyle": "line",
						"fillOpacity": 0,
						"gradientMode": "none",
						"hideFrom": {
							"legend": false,
							"tooltip": false,
							"viz": false
						},
						"insertNulls": false,
						"lineInterpolation": "linear",
						"lineWidth": 1,
						"pointSize": 5,
						"scaleDistribution": {
							"type": "linear"
						},
						"showPoints": "auto",
						"spanNulls": false,
						"stacking": {
							"group": "A",
							"mode": "none"
						},
						"thresholdsStyle": {
							"mode": "off"
						}
					},
					"mappings": [],
					"max": 1,
					"min": 0,
					"thresholds": {
						"mode": "absolute",
						"steps": [
							{
								"color": "green",
								"value": null
							},
							{
								"color": "red",
								"value": 80
							}
						]
					},
					"unit": "percentunit"
				},
				"overrides": []
			},
			"gridPos": {
				"h": 8,
				"w": 12,
				"x": 12,
				"y": 26
			},
			"id": 53,
			"options": {
				"legend": {
					"calcs": [],
					"displayMode": "list",
					"placement": "bottom",
					"showLegend": true
				},
				"tooltip": {
					"mode": "single",
					"sort": "none"
				}
			},
			"targets": [
				{
					"datasource": {
						"type": "stackdriver",
						"uid": "${DS_GOOGLE_CLOUD MONITORING}"
					},
					"queryType": "timeSeriesList",
					"refId": "A",
					"timeSeriesList": {
						"alignmentPeriod": "cloud-monitoring-auto",
						"crossSeriesReducer": "REDUCE_NONE",
						"filters": [
							"resource.label.project_id",
							"=",
							"v2-loadtest",
							"AND",
							"metric.type",
							"=",
							"cloudsql.googleapis.com/database/memory/utilization"
						],
						"groupBys": [],
						"perSeriesAligner": "ALIGN_NONE",
						"preprocessor": "none",
						"projectName": "v2-loadtest"
					}
				}
			],
			"title": "DB Mem Util%",
			"type": "timeseries"
		},
		{
			"datasource": {
				"type": "stackdriver",
				"uid": "${DS_GOOGLE_CLOUD MONITORING}"
			},
			"fieldConfig": {
				"defaults": {
					"color": {
						"mode": "palette-classic"
					},
					"custom": {
						"axisBorderShow": false,
						"axisCenteredZero": false,
						"axisColorMode": "text",
						"axisLabel": "",
						"axisPlacement": "auto",
						"barAlignment": 0,
						"drawStyle": "line",
						"fillOpacity": 0,
						"gradientMode": "none",
						"hideFrom": {
							"legend": false,
							"tooltip": false,
							"viz": false
						},
						"insertNulls": false,
						"lineInterpolation": "linear",
						"lineWidth": 1,
						"pointSize": 5,
						"scaleDistribution": {
							"type": "linear"
						},
						"showPoints": "auto",
						"spanNulls": false,
						"stacking": {
							"group": "A",
							"mode": "none"
						},
						"thresholdsStyle": {
							"mode": "off"
						}
					},
					"mappings": [],
					"min": 0,
					"thresholds": {
						"mode": "absolute",
						"steps": [
							{
								"color": "green",
								"value": null
							},
							{
								"color": "red",
								"value": 80
							}
						]
					},
					"unit": "none"
				},
				"overrides": []
			},
			"gridPos": {
				"h": 8,
				"w": 12,
				"x": 0,
				"y": 34
			},
			"id": 54,
			"options": {
				"legend": {
					"calcs": [],
					"displayMode": "list",
					"placement": "bottom",
					"showLegend": true
				},
				"tooltip": {
					"mode": "single",
					"sort": "none"
				}
			},
			"targets": [
				{
					"datasource": {
						"type": "stackdriver",
						"uid": "${DS_GOOGLE_CLOUD MONITORING}"
					},
					"queryType": "timeSeriesList",
					"refId": "A",
					"timeSeriesList": {
						"alignmentPeriod": "+60s",
						"crossSeriesReducer": "REDUCE_NONE",
						"filters": [
							"resource.label.project_id",
							"=",
							"v2-loadtest",
							"AND",
							"metric.type",
							"=",
							"cloudsql.googleapis.com/database/disk/read_ops_count"
						],
						"groupBys": [],
						"perSeriesAligner": "ALIGN_DELTA",
						"preprocessor": "none",
						"projectName": "v2-loadtest"
					}
				}
			],
			"title": "DB Disk Read I/O",
			"type": "timeseries"
		},
		{
			"datasource": {
				"type": "stackdriver",
				"uid": "${DS_GOOGLE_CLOUD MONITORING}"
			},
			"fieldConfig": {
				"defaults": {
					"color": {
						"mode": "palette-classic"
					},
					"custom": {
						"axisBorderShow": false,
						"axisCenteredZero": false,
						"axisColorMode": "text",
						"axisLabel": "",
						"axisPlacement": "auto",
						"barAlignment": 0,
						"drawStyle": "line",
						"fillOpacity": 0,
						"gradientMode": "none",
						"hideFrom": {
							"legend": false,
							"tooltip": false,
							"viz": false
						},
						"insertNulls": false,
						"lineInterpolation": "linear",
						"lineWidth": 1,
						"pointSize": 5,
						"scaleDistribution": {
							"type": "linear"
						},
						"showPoints": "auto",
						"spanNulls": false,
						"stacking": {
							"group": "A",
							"mode": "none"
						},
						"thresholdsStyle": {
							"mode": "off"
						}
					},
					"mappings": [],
					"min": 0,
					"thresholds": {
						"mode": "absolute",
						"steps": [
							{
								"color": "green",
								"value": null
							},
							{
								"color": "red",
								"value": 80
							}
						]
					},
					"unit": "none"
				},
				"overrides": []
			},
			"gridPos": {
				"h": 8,
				"w": 12,
				"x": 12,
				"y": 34
			},
			"id": 55,
			"options": {
				"legend": {
					"calcs": [],
					"displayMode": "list",
					"placement": "bottom",
					"showLegend": true
				},
				"tooltip": {
					"mode": "single",
					"sort": "none"
				}
			},
			"targets": [
				{
					"datasource": {
						"type": "stackdriver",
						"uid": "${DS_GOOGLE_CLOUD MONITORING}"
					},
					"queryType": "timeSeriesList",
					"refId": "A",
					"timeSeriesList": {
						"alignmentPeriod": "cloud-monitoring-auto",
						"crossSeriesReducer": "REDUCE_NONE",
						"filters": [
							"resource.label.project_id",
							"=",
							"v2-loadtest",
							"AND",
							"metric.type",
							"=",
							"cloudsql.googleapis.com/database/disk/write_ops_count"
						],
						"groupBys": [],
						"perSeriesAligner": "ALIGN_NONE",
						"preprocessor": "rate",
						"projectName": "v2-loadtest"
					}
				}
			],
			"title": "DB Disk Write I/O",
			"type": "timeseries"
		},
		{
			"datasource": {
				"type": "prometheus",
				"uid": "${DS_PROMETHEUS}"
			},
			"description": "LOGARITHMIC Y AXIS",
			"fieldConfig": {
				"defaults": {
					"color": {
						"mode": "palette-classic"
					},
					"custom": {
						"axisBorderShow": false,
						"axisCenteredZero": false,
						"axisColorMode": "text",
						"axisLabel": "",
						"axisPlacement": "auto",
						"barAlignment": 0,
						"drawStyle": "bars",
						"fillOpacity": 100,
						"gradientMode": "none",
						"hideFrom": {
							"legend": false,
							"tooltip": false,
							"viz": false
						},
						"insertNulls": false,
						"lineInterpolation": "linear",
						"lineWidth": 1,
						"pointSize": 5,
						"scaleDistribution": {
							"log": 2,
							"type": "log"
						},
						"showPoints": "auto",
						"spanNulls": false,
						"stacking": {
							"group": "A",
							"mode": "normal"
						},
						"thresholdsStyle": {
							"mode": "off"
						}
					},
					"mappings": [],
					"thresholds": {
						"mode": "absolute",
						"steps": [
							{
								"color": "green",
								"value": null
							},
							{
								"color": "red",
								"value": 80
							}
						]
					},
					"unit": "none"
				},
				"overrides": []
			},
			"gridPos": {
				"h": 16,
				"w": 12,
				"x": 0,
				"y": 42
			},
			"id": 36,
			"options": {
				"legend": {
					"calcs": [],
					"displayMode": "list",
					"placement": "bottom",
					"showLegend": true
				},
				"tooltip": {
					"mode": "single",
					"sort": "none"
				}
			},
			"targets": [
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "code",
					"expr": "sum(rate(pg_stat_database_tup_inserted{cluster=~\"$cluster\", datname=\"${cluster}-coder\"}[$__rate_interval]))",
					"hide": false,
					"legendFormat": "INSERT",
					"range": true,
					"refId": "A"
				},
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "code",
					"expr": "sum(rate(pg_stat_database_tup_updated{cluster=~\"$cluster\", datname=\"${cluster}-coder\"}[$__rate_interval]))",
					"hide": false,
					"legendFormat": "UPDATE",
					"range": true,
					"refId": "B"
				},
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "code",
					"expr": "sum(rate(pg_stat_database_tup_deleted{cluster=~\"$cluster\", datname=\"${cluster}-coder\"}[$__rate_interval]))",
					"hide": false,
					"legendFormat": "DELETE",
					"range": true,
					"refId": "C"
				},
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "code",
					"expr": "sum(rate(pg_stat_database_tup_returned{cluster=~\"$cluster\", datname=\"${cluster}-coder\"}[$__rate_interval]))",
					"hide": false,
					"legendFormat": "RETURN",
					"range": true,
					"refId": "D"
				},
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "code",
					"expr": "sum(rate(pg_stat_database_tup_fetched{cluster=~\"$cluster\", datname=\"${cluster}-coder\"}[$__rate_interval]))",
					"hide": false,
					"legendFormat": "FETCH",
					"range": true,
					"refId": "E"
				}
			],
			"title": "DB insert/update/delete/return",
			"type": "timeseries"
		},
		{
			"datasource": {
				"type": "prometheus",
				"uid": "${DS_PROMETHEUS}"
			},
			"fieldConfig": {
				"defaults": {
					"color": {
						"mode": "palette-classic"
					},
					"custom": {
						"axisBorderShow": false,
						"axisCenteredZero": false,
						"axisColorMode": "text",
						"axisLabel": "",
						"axisPlacement": "auto",
						"barAlignment": 0,
						"drawStyle": "bars",
						"fillOpacity": 100,
						"gradientMode": "none",
						"hideFrom": {
							"legend": false,
							"tooltip": false,
							"viz": false
						},
						"insertNulls": false,
						"lineInterpolation": "linear",
						"lineWidth": 1,
						"pointSize": 5,
						"scaleDistribution": {
							"type": "linear"
						},
						"showPoints": "auto",
						"spanNulls": false,
						"stacking": {
							"group": "A",
							"mode": "normal"
						},
						"thresholdsStyle": {
							"mode": "off"
						}
					},
					"mappings": [],
					"thresholds": {
						"mode": "absolute",
						"steps": [
							{
								"color": "green",
								"value": null
							},
							{
								"color": "red",
								"value": 80
							}
						]
					},
					"unit": "none"
				},
				"overrides": []
			},
			"gridPos": {
				"h": 8,
				"w": 12,
				"x": 12,
				"y": 42
			},
			"id": 39,
			"options": {
				"legend": {
					"calcs": [],
					"displayMode": "list",
					"placement": "bottom",
					"showLegend": true
				},
				"tooltip": {
					"mode": "single",
					"sort": "none"
				}
			},
			"targets": [
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "code",
					"expr": "pg_stat_activity_count{datname=~\"${cluster}-coder\", cluster=~\"${cluster}\", state=\"active\"} !=0",
					"hide": false,
					"legendFormat": "active",
					"range": true,
					"refId": "C"
				},
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "code",
					"expr": "pg_stat_activity_count{datname=~\"${cluster}-coder\", cluster=~\"${cluster}\", state=\"idle\"} !=0",
					"hide": false,
					"legendFormat": "idle",
					"range": true,
					"refId": "A"
				},
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "builder",
					"expr": "pg_stat_activity_count{datname=~\"${cluster}-coder\", cluster=~\"${cluster}\", state=\"idle in transaction\"} != 0",
					"hide": false,
					"legendFormat": "idle_tx",
					"range": true,
					"refId": "B"
				},
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "builder",
					"expr": "pg_stat_activity_count{datname=~\"${cluster}-coder\", cluster=~\"${cluster}\", state=\"disabled\"} != 0",
					"hide": false,
					"legendFormat": "disabled",
					"range": true,
					"refId": "D"
				}
			],
			"title": "DB conns",
			"type": "timeseries"
		},
		{
			"datasource": {
				"type": "prometheus",
				"uid": "${DS_PROMETHEUS}"
			},
			"fieldConfig": {
				"defaults": {
					"color": {
						"mode": "palette-classic"
					},
					"custom": {
						"axisBorderShow": false,
						"axisCenteredZero": false,
						"axisColorMode": "text",
						"axisLabel": "",
						"axisPlacement": "auto",
						"barAlignment": 0,
						"drawStyle": "line",
						"fillOpacity": 0,
						"gradientMode": "none",
						"hideFrom": {
							"legend": false,
							"tooltip": false,
							"viz": false
						},
						"insertNulls": false,
						"lineInterpolation": "linear",
						"lineWidth": 1,
						"pointSize": 5,
						"scaleDistribution": {
							"type": "linear"
						},
						"showPoints": "auto",
						"spanNulls": false,
						"stacking": {
							"group": "A",
							"mode": "none"
						},
						"thresholdsStyle": {
							"mode": "off"
						}
					},
					"mappings": [],
					"thresholds": {
						"mode": "absolute",
						"steps": [
							{
								"color": "green",
								"value": null
							},
							{
								"color": "red",
								"value": 80
							}
						]
					},
					"unit": "none"
				},
				"overrides": []
			},
			"gridPos": {
				"h": 8,
				"w": 12,
				"x": 12,
				"y": 50
			},
			"id": 37,
			"options": {
				"legend": {
					"calcs": [],
					"displayMode": "list",
					"placement": "bottom",
					"showLegend": true
				},
				"tooltip": {
					"mode": "single",
					"sort": "none"
				}
			},
			"targets": [
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "builder",
					"expr": "sum(rate(pg_stat_database_xact_commit{cluster=~\"$cluster\", datname=\"${cluster}-coder\"}[$__rate_interval]))",
					"hide": false,
					"legendFormat": "commit",
					"range": true,
					"refId": "B"
				},
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "builder",
					"expr": "sum(rate(pg_stat_database_xact_rollback{cluster=~\"$cluster\", datname=\"${cluster}-coder\"}[$__rate_interval]))",
					"hide": false,
					"legendFormat": "rollback",
					"range": true,
					"refId": "A"
				}
			],
			"title": "DB TX/s",
			"type": "timeseries"
		},
		{
			"datasource": {
				"type": "prometheus",
				"uid": "${DS_PROMETHEUS}"
			},
			"fieldConfig": {
				"defaults": {
					"custom": {
						"hideFrom": {
							"legend": false,
							"tooltip": false,
							"viz": false
						},
						"scaleDistribution": {
							"type": "linear"
						}
					}
				},
				"overrides": []
			},
			"gridPos": {
				"h": 26,
				"w": 12,
				"x": 0,
				"y": 58
			},
			"id": 30,
			"options": {
				"calculate": false,
				"cellGap": 1,
				"cellValues": {
					"unit": "s"
				},
				"color": {
					"exponent": 0.5,
					"fill": "dark-orange",
					"min": 0,
					"mode": "scheme",
					"reverse": false,
					"scale": "exponential",
					"scheme": "Viridis",
					"steps": 64
				},
				"exemplars": {
					"color": "rgba(255,0,255,0.7)"
				},
				"filterValues": {
					"le": 1e-9
				},
				"legend": {
					"show": true
				},
				"rowsFrame": {
					"layout": "auto"
				},
				"tooltip": {
					"mode": "single",
					"showColorScale": false,
					"yHistogram": false
				},
				"yAxis": {
					"axisPlacement": "left",
					"reverse": false
				}
			},
			"pluginVersion": "11.1.0",
			"targets": [
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "code",
					"expr": "histogram_quantile(0.95, sum by(le, query) (rate(coderd_db_query_latencies_seconds_bucket{cluster=\"$cluster\", namespace=\"$namespace\", pod=~\"$pod\"}[$__rate_interval])))",
					"legendFormat": "__auto",
					"range": true,
					"refId": "A"
				}
			],
			"title": "sqlQuerier P95 execution timing",
			"type": "heatmap"
		},
		{
			"datasource": {
				"type": "prometheus",
				"uid": "${DS_PROMETHEUS}"
			},
			"fieldConfig": {
				"defaults": {
					"custom": {
						"hideFrom": {
							"legend": false,
							"tooltip": false,
							"viz": false
						},
						"scaleDistribution": {
							"type": "linear"
						}
					}
				},
				"overrides": []
			},
			"gridPos": {
				"h": 26,
				"w": 12,
				"x": 12,
				"y": 58
			},
			"id": 31,
			"options": {
				"calculate": false,
				"cellGap": 1,
				"cellValues": {
					"unit": "reqps"
				},
				"color": {
					"exponent": 0.5,
					"fill": "dark-orange",
					"min": 0,
					"mode": "scheme",
					"reverse": false,
					"scale": "exponential",
					"scheme": "Viridis",
					"steps": 64
				},
				"exemplars": {
					"color": "rgba(255,0,255,0.7)"
				},
				"filterValues": {
					"le": 1e-9
				},
				"legend": {
					"show": true
				},
				"rowsFrame": {
					"layout": "auto"
				},
				"tooltip": {
					"mode": "single",
					"showColorScale": false,
					"yHistogram": false
				},
				"yAxis": {
					"axisPlacement": "left",
					"reverse": false
				}
			},
			"pluginVersion": "11.1.0",
			"targets": [
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "code",
					"expr": "sum by(le, query) (rate(coderd_db_query_latencies_seconds_count{cluster=\"$cluster\", namespace=\"$namespace\", pod=~\"$pod\"}[$__rate_interval]))",
					"legendFormat": "__auto",
					"range": true,
					"refId": "A"
				}
			],
			"title": "sqlQuerier execution count",
			"type": "heatmap"
		},
		{
			"collapsed": false,
			"gridPos": {
				"h": 1,
				"w": 24,
				"x": 0,
				"y": 84
			},
			"id": 16,
			"panels": [],
			"title": "HTTP Requests",
			"type": "row"
		},
		{
			"datasource": {
				"type": "prometheus",
				"uid": "${DS_PROMETHEUS}"
			},
			"fieldConfig": {
				"defaults": {
					"color": {
						"mode": "palette-classic"
					},
					"custom": {
						"axisCenteredZero": false,
						"axisColorMode": "text",
						"axisLabel": "",
						"axisPlacement": "auto",
						"barAlignment": 0,
						"drawStyle": "line",
						"fillOpacity": 0,
						"gradientMode": "none",
						"hideFrom": {
							"legend": false,
							"tooltip": false,
							"viz": false
						},
						"lineInterpolation": "linear",
						"lineWidth": 1,
						"pointSize": 5,
						"scaleDistribution": {
							"type": "linear"
						},
						"showPoints": "auto",
						"spanNulls": false,
						"stacking": {
							"group": "A",
							"mode": "none"
						},
						"thresholdsStyle": {
							"mode": "off"
						}
					},
					"mappings": [],
					"thresholds": {
						"mode": "absolute",
						"steps": [
							{
								"color": "green"
							},
							{
								"color": "red",
								"value": 80
							}
						]
					},
					"unit": "reqps"
				},
				"overrides": []
			},
			"gridPos": {
				"h": 11,
				"w": 12,
				"x": 0,
				"y": 85
			},
			"id": 45,
			"options": {
				"legend": {
					"calcs": [],
					"displayMode": "list",
					"placement": "bottom",
					"showLegend": true
				},
				"tooltip": {
					"mode": "single",
					"sort": "none"
				}
			},
			"targets": [
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "builder",
					"exemplar": false,
					"expr": "sum by(pod) (rate(coderd_api_requests_processed_total{cluster=\"$cluster\", namespace=~\"$namespace\", pod=~\"$pod\"}[$__rate_interval]))",
					"instant": true,
					"key": "Q-2eb2f8ac-845d-462d-9bb0-b98334fbfd4a-0",
					"legendFormat": "__auto",
					"range": true,
					"refId": "A"
				}
			],
			"title": "API Requests by pod",
			"type": "timeseries"
		},
		{
			"datasource": {
				"type": "prometheus",
				"uid": "${DS_PROMETHEUS}"
			},
			"fieldConfig": {
				"defaults": {
					"color": {
						"mode": "palette-classic"
					},
					"custom": {
						"axisCenteredZero": false,
						"axisColorMode": "text",
						"axisLabel": "",
						"axisPlacement": "auto",
						"barAlignment": 0,
						"drawStyle": "line",
						"fillOpacity": 0,
						"gradientMode": "none",
						"hideFrom": {
							"legend": false,
							"tooltip": false,
							"viz": false
						},
						"lineInterpolation": "linear",
						"lineWidth": 1,
						"pointSize": 5,
						"scaleDistribution": {
							"type": "linear"
						},
						"showPoints": "auto",
						"spanNulls": false,
						"stacking": {
							"group": "A",
							"mode": "none"
						},
						"thresholdsStyle": {
							"mode": "off"
						}
					},
					"mappings": [],
					"thresholds": {
						"mode": "absolute",
						"steps": [
							{
								"color": "green"
							},
							{
								"color": "red",
								"value": 80
							}
						]
					}
				},
				"overrides": []
			},
			"gridPos": {
				"h": 11,
				"w": 12,
				"x": 12,
				"y": 85
			},
			"id": 44,
			"options": {
				"legend": {
					"calcs": [],
					"displayMode": "list",
					"placement": "bottom",
					"showLegend": true
				},
				"tooltip": {
					"mode": "single",
					"sort": "none"
				}
			},
			"targets": [
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "code",
					"exemplar": false,
					"expr": "sum(rate(coderd_api_requests_processed_total{cluster=~\"$cluster\", namespace=~\"$namespace\", pod=~\"$pod\", code=~\"5..\"}[$__rate_interval]))",
					"instant": true,
					"key": "Q-2eb2f8ac-845d-462d-9bb0-b98334fbfd4a-0",
					"legendFormat": "5xx",
					"range": true,
					"refId": "A"
				},
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "code",
					"expr": "sum(rate(coderd_api_requests_processed_total{cluster=~\"$cluster\", namespace=~\"$namespace\", pod=~\"$pod\", code=~\"4..\"}[$__rate_interval]))",
					"instant": true,
					"key": "Q-fe3b7389-28e7-4b2c-90ef-3b1490f99528-1",
					"legendFormat": "4xx",
					"range": true,
					"refId": "B"
				}
			],
			"title": "API Error Rate",
			"type": "timeseries"
		},
		{
			"datasource": {
				"type": "prometheus",
				"uid": "${DS_PROMETHEUS}"
			},
			"fieldConfig": {
				"defaults": {
					"custom": {
						"hideFrom": {
							"legend": false,
							"tooltip": false,
							"viz": false
						},
						"scaleDistribution": {
							"type": "linear"
						}
					}
				},
				"overrides": []
			},
			"gridPos": {
				"h": 10,
				"w": 24,
				"x": 0,
				"y": 96
			},
			"id": 4,
			"options": {
				"calculate": false,
				"cellGap": 1,
				"color": {
					"exponent": 0.5,
					"fill": "dark-orange",
					"min": 0,
					"mode": "scheme",
					"reverse": false,
					"scale": "exponential",
					"scheme": "Viridis",
					"steps": 64
				},
				"exemplars": {
					"color": "rgba(255,0,255,0.7)"
				},
				"filterValues": {
					"le": 1e-9
				},
				"legend": {
					"show": true
				},
				"rowsFrame": {
					"layout": "auto"
				},
				"tooltip": {
					"show": true,
					"yHistogram": false
				},
				"yAxis": {
					"axisPlacement": "left",
					"reverse": false
				}
			},
			"pluginVersion": "9.5.2",
			"targets": [
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "code",
					"expr": "sum by (code,method) (rate(coderd_api_requests_processed_total{cluster=~\"$cluster\",namespace=~\"$namespace\",pod=~\"$pod\",container=\"coder\",code!=\"0\"}[$__rate_interval]))",
					"legendFormat": "{{method}} {{code}}",
					"range": true,
					"refId": "A"
				}
			],
			"title": "API requests/sec by response, method",
			"type": "heatmap"
		},
		{
			"datasource": {
				"type": "prometheus",
				"uid": "${DS_PROMETHEUS}"
			},
			"fieldConfig": {
				"defaults": {
					"custom": {
						"hideFrom": {
							"legend": false,
							"tooltip": false,
							"viz": false
						},
						"scaleDistribution": {
							"type": "linear"
						}
					}
				},
				"overrides": []
			},
			"gridPos": {
				"h": 18,
				"w": 12,
				"x": 0,
				"y": 106
			},
			"id": 33,
			"options": {
				"calculate": false,
				"cellGap": 1,
				"cellValues": {
					"unit": "s"
				},
				"color": {
					"exponent": 0.5,
					"fill": "dark-orange",
					"mode": "scheme",
					"reverse": false,
					"scale": "exponential",
					"scheme": "Viridis",
					"steps": 64
				},
				"exemplars": {
					"color": "rgba(255,0,255,0.7)"
				},
				"filterValues": {
					"le": 1e-9
				},
				"legend": {
					"show": true
				},
				"rowsFrame": {
					"layout": "auto"
				},
				"tooltip": {
					"show": true,
					"yHistogram": false
				},
				"yAxis": {
					"axisPlacement": "left",
					"reverse": false
				}
			},
			"pluginVersion": "9.5.2",
			"targets": [
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "builder",
					"expr": "histogram_quantile(0.95, sum by(le, path) (rate(coderd_api_request_latencies_seconds_bucket{cluster=~\"$cluster\", namespace=~\"$namespace\", pod=~\"$pod\", path=~\"^/api/v2/.*\"}[$__rate_interval])))",
					"interval": "",
					"legendFormat": "{{path}}",
					"range": true,
					"refId": "A"
				}
			],
			"title": "API Request Latency P95",
			"type": "heatmap"
		},
		{
			"datasource": {
				"type": "prometheus",
				"uid": "${DS_PROMETHEUS}"
			},
			"fieldConfig": {
				"defaults": {
					"custom": {
						"hideFrom": {
							"legend": false,
							"tooltip": false,
							"viz": false
						},
						"scaleDistribution": {
							"type": "linear"
						}
					}
				},
				"overrides": []
			},
			"gridPos": {
				"h": 18,
				"w": 12,
				"x": 12,
				"y": 106
			},
			"id": 34,
			"options": {
				"calculate": false,
				"cellGap": 1,
				"color": {
					"exponent": 0.5,
					"fill": "dark-orange",
					"mode": "scheme",
					"reverse": false,
					"scale": "exponential",
					"scheme": "Viridis",
					"steps": 64
				},
				"exemplars": {
					"color": "rgba(255,0,255,0.7)"
				},
				"filterValues": {
					"le": 1e-9
				},
				"legend": {
					"show": true
				},
				"rowsFrame": {
					"layout": "auto"
				},
				"tooltip": {
					"show": true,
					"yHistogram": false
				},
				"yAxis": {
					"axisPlacement": "left",
					"reverse": false
				}
			},
			"pluginVersion": "9.5.2",
			"targets": [
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "builder",
					"expr": "sum by(method, path) (rate(coderd_api_request_latencies_seconds_count{cluster=~\"$cluster\", namespace=~\"$namespace\", pod=~\"$pod\", path=~\"^/api/v2/.*\"}[$__rate_interval]))",
					"interval": "",
					"legendFormat": "{{method}} {{path}}",
					"range": true,
					"refId": "A"
				}
			],
			"title": "API Requests",
			"type": "heatmap"
		},
		{
			"collapsed": false,
			"gridPos": {
				"h": 1,
				"w": 24,
				"x": 0,
				"y": 124
			},
			"id": 40,
			"panels": [],
			"title": "Workspace Resources",
			"type": "row"
		},
		{
			"datasource": {
				"type": "prometheus",
				"uid": "${DS_PROMETHEUS}"
			},
			"fieldConfig": {
				"defaults": {
					"color": {
						"mode": "palette-classic"
					},
					"custom": {
						"axisCenteredZero": false,
						"axisColorMode": "text",
						"axisLabel": "",
						"axisPlacement": "auto",
						"barAlignment": 0,
						"drawStyle": "line",
						"fillOpacity": 0,
						"gradientMode": "none",
						"hideFrom": {
							"legend": false,
							"tooltip": false,
							"viz": false
						},
						"lineInterpolation": "linear",
						"lineWidth": 1,
						"pointSize": 1,
						"scaleDistribution": {
							"type": "linear"
						},
						"showPoints": "auto",
						"spanNulls": false,
						"stacking": {
							"group": "A",
							"mode": "none"
						},
						"thresholdsStyle": {
							"mode": "off"
						}
					},
					"mappings": [],
					"thresholds": {
						"mode": "absolute",
						"steps": [
							{
								"color": "green"
							}
						]
					}
				},
				"overrides": [
					{
						"matcher": {
							"id": "byName",
							"options": "limit"
						},
						"properties": [
							{
								"id": "custom.drawStyle",
								"value": "line"
							},
							{
								"id": "custom.lineStyle",
								"value": {
									"dash": [10, 10],
									"fill": "dash"
								}
							}
						]
					}
				]
			},
			"gridPos": {
				"h": 8,
				"w": 12,
				"x": 0,
				"y": 125
			},
			"id": 41,
			"options": {
				"legend": {
					"calcs": [],
					"displayMode": "list",
					"placement": "bottom",
					"showLegend": true
				},
				"tooltip": {
					"mode": "single",
					"sort": "none"
				}
			},
			"targets": [
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "code",
					"expr": "max(kube_pod_container_resource_limits{cluster=~\"$cluster\", namespace=~\"$namespace\", pod=~\"coder-scaletest-.*-scaletest-.*\", pod!=\"coder-scaletest-runner-scaletest-runner\", resource=\"cpu\"})",
					"legendFormat": "limit",
					"range": true,
					"refId": "A"
				},
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "code",
					"expr": "avg(rate(container_cpu_usage_seconds_total{cluster=~\"$cluster\", namespace=~\"$namespace\", pod=~\"coder-scaletest-.*-scaletest-.*\", pod!=\"coder-scaletest-runner-scaletest-runner\", container=\"dev\"}[$__rate_interval]))",
					"hide": false,
					"legendFormat": "__auto",
					"range": true,
					"refId": "B"
				}
			],
			"title": "Scaletest Workspace CPU Usage (Avg)",
			"type": "timeseries"
		},
		{
			"datasource": {
				"type": "prometheus",
				"uid": "${DS_PROMETHEUS}"
			},
			"fieldConfig": {
				"defaults": {
					"color": {
						"mode": "palette-classic"
					},
					"custom": {
						"axisCenteredZero": true,
						"axisColorMode": "text",
						"axisLabel": "",
						"axisPlacement": "auto",
						"barAlignment": 0,
						"drawStyle": "line",
						"fillOpacity": 0,
						"gradientMode": "none",
						"hideFrom": {
							"legend": false,
							"tooltip": false,
							"viz": false
						},
						"lineInterpolation": "smooth",
						"lineWidth": 1,
						"pointSize": 1,
						"scaleDistribution": {
							"type": "linear"
						},
						"showPoints": "auto",
						"spanNulls": 60000,
						"stacking": {
							"group": "A",
							"mode": "none"
						},
						"thresholdsStyle": {
							"mode": "off"
						}
					},
					"mappings": [],
					"thresholds": {
						"mode": "absolute",
						"steps": [
							{
								"color": "green"
							}
						]
					},
					"unit": "binBps"
				},
				"overrides": [
					{
						"matcher": {
							"id": "byName",
							"options": "limit"
						},
						"properties": [
							{
								"id": "custom.drawStyle",
								"value": "line"
							},
							{
								"id": "custom.lineStyle",
								"value": {
									"dash": [10, 10],
									"fill": "dash"
								}
							}
						]
					}
				]
			},
			"gridPos": {
				"h": 16,
				"w": 12,
				"x": 12,
				"y": 125
			},
			"id": 43,
			"options": {
				"legend": {
					"calcs": [],
					"displayMode": "list",
					"placement": "bottom",
					"showLegend": true
				},
				"tooltip": {
					"mode": "single",
					"sort": "none"
				}
			},
			"targets": [
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "code",
					"expr": "sum(rate(container_network_receive_bytes_total{cluster=~\"${cluster}\", namespace=~\"${namespace}\", pod=~\"coder-scaletest-.*-scaletest-.*\", pod!=\"coder-scaletest-runner-scaletest-runner\"}[$__rate_interval]))",
					"format": "time_series",
					"hide": false,
					"legendFormat": "rx",
					"range": true,
					"refId": "B"
				},
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "code",
					"expr": "sum(rate(container_network_transmit_bytes_total{cluster=~\"${cluster}\", namespace=~\"${namespace}\", pod=~\"coder-scaletest-.*-scaletest-.*\", pod!=\"coder-scaletest-runner-scaletest-runner\"}[$__rate_interval])) * -1",
					"hide": false,
					"legendFormat": "tx {{pod}}",
					"range": true,
					"refId": "A"
				}
			],
			"title": "Scaletest Workspace Network Usage (Sum)",
			"type": "timeseries"
		},
		{
			"datasource": {
				"type": "prometheus",
				"uid": "${DS_PROMETHEUS}"
			},
			"fieldConfig": {
				"defaults": {
					"color": {
						"mode": "palette-classic"
					},
					"custom": {
						"axisCenteredZero": false,
						"axisColorMode": "text",
						"axisLabel": "",
						"axisPlacement": "auto",
						"barAlignment": 0,
						"drawStyle": "line",
						"fillOpacity": 0,
						"gradientMode": "none",
						"hideFrom": {
							"legend": false,
							"tooltip": false,
							"viz": false
						},
						"lineInterpolation": "linear",
						"lineWidth": 1,
						"pointSize": 1,
						"scaleDistribution": {
							"type": "linear"
						},
						"showPoints": "auto",
						"spanNulls": false,
						"stacking": {
							"group": "A",
							"mode": "none"
						},
						"thresholdsStyle": {
							"mode": "off"
						}
					},
					"mappings": [],
					"thresholds": {
						"mode": "absolute",
						"steps": [
							{
								"color": "green"
							}
						]
					},
					"unit": "bytes"
				},
				"overrides": [
					{
						"matcher": {
							"id": "byName",
							"options": "limit"
						},
						"properties": [
							{
								"id": "custom.drawStyle",
								"value": "line"
							},
							{
								"id": "custom.lineStyle",
								"value": {
									"dash": [10, 10],
									"fill": "dash"
								}
							}
						]
					}
				]
			},
			"gridPos": {
				"h": 8,
				"w": 12,
				"x": 0,
				"y": 133
			},
			"id": 42,
			"options": {
				"legend": {
					"calcs": [],
					"displayMode": "list",
					"placement": "bottom",
					"showLegend": true
				},
				"tooltip": {
					"mode": "single",
					"sort": "none"
				}
			},
			"targets": [
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "code",
					"expr": "max(kube_pod_container_resource_limits{cluster=~\"$cluster\", namespace=~\"$namespace\", pod=~\"coder-scaletest-.*-scaletest-.*\", pod!=\"coder-scaletest-runner-scaletest-runner\", resource=\"memory\"})",
					"legendFormat": "limit",
					"range": true,
					"refId": "A"
				},
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "code",
					"expr": "avg(container_memory_usage_bytes{cluster=~\"$cluster\", namespace=~\"$namespace\", pod=~\"coder-scaletest-.*-scaletest-.*\", pod!=\"coder-scaletest-runner-scaletest-runner\", container!=\"\"})",
					"hide": false,
					"legendFormat": "__auto",
					"range": true,
					"refId": "B"
				}
			],
			"title": "Scaletest Workspace Memory Usage (Avg)",
			"type": "timeseries"
		},
		{
			"datasource": {
				"type": "prometheus",
				"uid": "${DS_PROMETHEUS}"
			},
			"fieldConfig": {
				"defaults": {
					"color": {
						"mode": "palette-classic"
					},
					"custom": {
						"axisCenteredZero": true,
						"axisColorMode": "text",
						"axisLabel": "",
						"axisPlacement": "auto",
						"barAlignment": 0,
						"drawStyle": "line",
						"fillOpacity": 0,
						"gradientMode": "none",
						"hideFrom": {
							"legend": false,
							"tooltip": false,
							"viz": false
						},
						"lineInterpolation": "smooth",
						"lineWidth": 1,
						"pointSize": 1,
						"scaleDistribution": {
							"type": "linear"
						},
						"showPoints": "auto",
						"spanNulls": 60000,
						"stacking": {
							"group": "A",
							"mode": "none"
						},
						"thresholdsStyle": {
							"mode": "off"
						}
					},
					"mappings": [],
					"thresholds": {
						"mode": "absolute",
						"steps": [
							{
								"color": "green"
							}
						]
					},
					"unit": "none"
				},
				"overrides": [
					{
						"matcher": {
							"id": "byName",
							"options": "limit"
						},
						"properties": [
							{
								"id": "custom.drawStyle",
								"value": "line"
							},
							{
								"id": "custom.lineStyle",
								"value": {
									"dash": [10, 10],
									"fill": "dash"
								}
							}
						]
					}
				]
			},
			"gridPos": {
				"h": 16,
				"w": 12,
				"x": 12,
				"y": 141
			},
			"id": 56,
			"options": {
				"legend": {
					"calcs": [],
					"displayMode": "list",
					"placement": "bottom",
					"showLegend": true
				},
				"tooltip": {
					"mode": "single",
					"sort": "none"
				}
			},
			"targets": [
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "code",
					"expr": "sum(rate(container_network_receive_errors_total{cluster=~\"${cluster}\", namespace=~\"${namespace}\", pod=~\"coder-scaletest-.*-scaletest-.*\", pod!=\"coder-scaletest-runner-scaletest-runner\"}[$__rate_interval]))",
					"format": "time_series",
					"hide": false,
					"legendFormat": "rx errs {{pod}}",
					"range": true,
					"refId": "B"
				},
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "code",
					"expr": "sum(rate(container_network_transmit_errors_total{cluster=~\"${cluster}\", namespace=~\"${namespace}\", pod=~\"coder-scaletest-.*-scaletest-.*\", pod!=\"coder-scaletest-runner-scaletest-runner\"}[$__rate_interval])) * -1",
					"hide": false,
					"legendFormat": "tx errs {{pod}}",
					"range": true,
					"refId": "A"
				}
			],
			"title": "Scaletest Workspace Network RX/TX errs (Sum)",
			"type": "timeseries"
		},
		{
			"collapsed": false,
			"gridPos": {
				"h": 1,
				"w": 24,
				"x": 0,
				"y": 157
			},
			"id": 18,
			"panels": [],
			"title": "Workspace Agents",
			"type": "row"
		},
		{
			"datasource": {
				"type": "prometheus",
				"uid": "${DS_PROMETHEUS}"
			},
			"fieldConfig": {
				"defaults": {
					"color": {
						"mode": "palette-classic"
					},
					"custom": {
						"axisCenteredZero": true,
						"axisColorMode": "text",
						"axisLabel": "",
						"axisPlacement": "auto",
						"barAlignment": 0,
						"drawStyle": "line",
						"fillOpacity": 0,
						"gradientMode": "none",
						"hideFrom": {
							"legend": false,
							"tooltip": false,
							"viz": false
						},
						"lineInterpolation": "smooth",
						"lineWidth": 1,
						"pointSize": 5,
						"scaleDistribution": {
							"type": "linear"
						},
						"showPoints": "auto",
						"spanNulls": 3600000,
						"stacking": {
							"group": "A",
							"mode": "none"
						},
						"thresholdsStyle": {
							"mode": "off"
						}
					},
					"mappings": [],
					"thresholds": {
						"mode": "absolute",
						"steps": [
							{
								"color": "green"
							},
							{
								"color": "red",
								"value": 80
							}
						]
					},
					"unit": "bytes"
				},
				"overrides": []
			},
			"gridPos": {
				"h": 18,
				"w": 12,
				"x": 0,
				"y": 158
			},
			"id": 20,
			"options": {
				"legend": {
					"calcs": [],
					"displayMode": "list",
					"placement": "bottom",
					"showLegend": true
				},
				"tooltip": {
					"mode": "single",
					"sort": "none"
				}
			},
			"pluginVersion": "9.5.2",
			"targets": [
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "builder",
					"expr": "sum(rate(coderd_agentstats_rx_bytes{cluster=~\"$cluster\", namespace=~\"$namespace\", pod=~\"$pod\"}[$__rate_interval]))",
					"legendFormat": "rx",
					"range": true,
					"refId": "A"
				},
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "builder",
					"expr": "sum(rate(coderd_agentstats_tx_bytes{cluster=~\"$cluster\", namespace=~\"$namespace\", pod=~\"$pod\"}[$__rate_interval])) * -1",
					"hide": false,
					"legendFormat": "tx",
					"range": true,
					"refId": "B"
				}
			],
			"title": "Agent Connection RX/TX",
			"type": "timeseries"
		},
		{
			"datasource": {
				"type": "prometheus",
				"uid": "${DS_PROMETHEUS}"
			},
			"fieldConfig": {
				"defaults": {
					"color": {
						"mode": "palette-classic"
					},
					"custom": {
						"axisCenteredZero": false,
						"axisColorMode": "text",
						"axisLabel": "",
						"axisPlacement": "auto",
						"barAlignment": 0,
						"drawStyle": "line",
						"fillOpacity": 18,
						"gradientMode": "hue",
						"hideFrom": {
							"legend": false,
							"tooltip": false,
							"viz": false
						},
						"lineInterpolation": "linear",
						"lineWidth": 1,
						"pointSize": 3,
						"scaleDistribution": {
							"type": "linear"
						},
						"showPoints": "auto",
						"spanNulls": false,
						"stacking": {
							"group": "A",
							"mode": "none"
						},
						"thresholdsStyle": {
							"mode": "off"
						}
					},
					"mappings": [],
					"thresholds": {
						"mode": "absolute",
						"steps": [
							{
								"color": "green"
							},
							{
								"color": "red",
								"value": 80
							}
						]
					},
					"unit": "s"
				},
				"overrides": []
			},
			"gridPos": {
				"h": 18,
				"w": 12,
				"x": 12,
				"y": 158
			},
			"id": 38,
			"options": {
				"legend": {
					"calcs": [],
					"displayMode": "list",
					"placement": "bottom",
					"showLegend": true
				},
				"tooltip": {
					"mode": "single",
					"sort": "none"
				}
			},
			"pluginVersion": "9.5.2",
			"targets": [
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "builder",
					"expr": "quantile(0.5, coderd_agents_connection_latencies_seconds{cluster=~\"$cluster\", namespace=~\"$namespace\", pod=~\"$pod\"})",
					"legendFormat": "p50",
					"range": true,
					"refId": "A"
				},
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "builder",
					"expr": "quantile(0.95, coderd_agents_connection_latencies_seconds{cluster=~\"$cluster\", namespace=~\"$namespace\", pod=~\"$pod\"})",
					"hide": false,
					"legendFormat": "p95",
					"range": true,
					"refId": "B"
				},
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "builder",
					"expr": "quantile(0.99, coderd_agents_connection_latencies_seconds{cluster=~\"$cluster\", namespace=~\"$namespace\", pod=~\"$pod\"})",
					"hide": false,
					"legendFormat": "p99",
					"range": true,
					"refId": "C"
				}
			],
			"title": "Agent Connection Latency P50/95/99",
			"type": "timeseries"
		},
		{
			"datasource": {
				"type": "prometheus",
				"uid": "${DS_PROMETHEUS}"
			},
			"fieldConfig": {
				"defaults": {
					"color": {
						"mode": "palette-classic"
					},
					"custom": {
						"axisCenteredZero": false,
						"axisColorMode": "text",
						"axisLabel": "",
						"axisPlacement": "auto",
						"barAlignment": 0,
						"drawStyle": "line",
						"fillOpacity": 0,
						"gradientMode": "none",
						"hideFrom": {
							"legend": false,
							"tooltip": false,
							"viz": false
						},
						"lineInterpolation": "linear",
						"lineWidth": 1,
						"pointSize": 5,
						"scaleDistribution": {
							"type": "linear"
						},
						"showPoints": "auto",
						"spanNulls": false,
						"stacking": {
							"group": "A",
							"mode": "none"
						},
						"thresholdsStyle": {
							"mode": "off"
						}
					},
					"mappings": [],
					"thresholds": {
						"mode": "absolute",
						"steps": [
							{
								"color": "green"
							},
							{
								"color": "red",
								"value": 80
							}
						]
					},
					"unit": "none"
				},
				"overrides": []
			},
			"gridPos": {
				"h": 9,
				"w": 12,
				"x": 0,
				"y": 176
			},
			"id": 3,
			"options": {
				"legend": {
					"calcs": [],
					"displayMode": "list",
					"placement": "bottom",
					"showLegend": true
				},
				"tooltip": {
					"mode": "single",
					"sort": "none"
				}
			},
			"targets": [
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "builder",
					"expr": "sum by(pod) (coderd_api_concurrent_websockets{cluster=~\"$cluster\", namespace=~\"$namespace\", pod=~\"$pod\", container=\"coder\"})",
					"format": "time_series",
					"interval": "",
					"legendFormat": "__auto",
					"range": true,
					"refId": "A"
				}
			],
			"title": "Websocket Connections",
			"type": "timeseries"
		},
		{
			"datasource": {
				"type": "prometheus",
				"uid": "${DS_PROMETHEUS}"
			},
			"fieldConfig": {
				"defaults": {
					"color": {
						"mode": "palette-classic"
					},
					"custom": {
						"axisCenteredZero": false,
						"axisColorMode": "text",
						"axisLabel": "",
						"axisPlacement": "auto",
						"barAlignment": 0,
						"drawStyle": "line",
						"fillOpacity": 0,
						"gradientMode": "none",
						"hideFrom": {
							"legend": false,
							"tooltip": false,
							"viz": false
						},
						"lineInterpolation": "linear",
						"lineWidth": 1,
						"pointSize": 5,
						"scaleDistribution": {
							"type": "linear"
						},
						"showPoints": "auto",
						"spanNulls": false,
						"stacking": {
							"group": "A",
							"mode": "none"
						},
						"thresholdsStyle": {
							"mode": "off"
						}
					},
					"mappings": [],
					"thresholds": {
						"mode": "absolute",
						"steps": [
							{
								"color": "green"
							},
							{
								"color": "red",
								"value": 80
							}
						]
					},
					"unit": "none"
				},
				"overrides": []
			},
			"gridPos": {
				"h": 9,
				"w": 12,
				"x": 12,
				"y": 176
			},
			"id": 19,
			"options": {
				"legend": {
					"calcs": [],
					"displayMode": "list",
					"placement": "bottom",
					"showLegend": true
				},
				"tooltip": {
					"mode": "single",
					"sort": "none"
				}
			},
			"targets": [
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "code",
					"expr": "sum by (pod) (coderd_agents_connections{cluster=~\"$cluster\", namespace=~\"$namespace\", pod=~\"$pod\"})",
					"legendFormat": "__auto",
					"range": true,
					"refId": "A"
				}
			],
			"title": "Agent Connections",
			"type": "timeseries"
		},
		{
			"collapsed": false,
			"gridPos": {
				"h": 1,
				"w": 24,
				"x": 0,
				"y": 185
			},
			"id": 14,
			"panels": [],
			"title": "Workspace Traffic",
			"type": "row"
		},
		{
			"datasource": {
				"type": "prometheus",
				"uid": "${DS_PROMETHEUS}"
			},
			"fieldConfig": {
				"defaults": {
					"color": {
						"mode": "palette-classic"
					},
					"custom": {
						"axisCenteredZero": true,
						"axisColorMode": "text",
						"axisLabel": "",
						"axisPlacement": "auto",
						"barAlignment": 0,
						"drawStyle": "line",
						"fillOpacity": 22,
						"gradientMode": "none",
						"hideFrom": {
							"legend": false,
							"tooltip": false,
							"viz": false
						},
						"lineInterpolation": "linear",
						"lineWidth": 1,
						"pointSize": 5,
						"scaleDistribution": {
							"type": "linear"
						},
						"showPoints": "auto",
						"spanNulls": false,
						"stacking": {
							"group": "A",
							"mode": "none"
						},
						"thresholdsStyle": {
							"mode": "off"
						}
					},
					"mappings": [],
					"thresholds": {
						"mode": "absolute",
						"steps": [
							{
								"color": "green"
							},
							{
								"color": "red",
								"value": 80
							}
						]
					},
					"unit": "binBps"
				},
				"overrides": []
			},
			"gridPos": {
				"h": 16,
				"w": 12,
				"x": 0,
				"y": 186
			},
			"id": 11,
			"options": {
				"legend": {
					"calcs": [],
					"displayMode": "table",
					"placement": "right",
					"showLegend": true
				},
				"tooltip": {
					"mode": "single",
					"sort": "none"
				}
			},
			"pluginVersion": "9.5.2",
			"targets": [
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "builder",
					"expr": "sum by(pod) (rate(coderd_scaletest_bytes_written_total{cluster=~\"$cluster\", namespace=~\"$namespace\"}[$__rate_interval])) * -1",
					"legendFormat": "tx inside container",
					"range": true,
					"refId": "A"
				},
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "builder",
					"expr": "sum by(pod) (rate(coderd_scaletest_bytes_read_total{cluster=~\"$cluster\", namespace=~\"$namespace\"}[$__rate_interval]))",
					"hide": false,
					"legendFormat": "rx inside container",
					"range": true,
					"refId": "B"
				},
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "builder",
					"expr": "sum by(pod) (rate(container_network_receive_bytes_total{cluster=~\"$cluster\", namespace=~\"$namespace\", pod=\"coder-scaletest-workspace-traffic\"}[$__rate_interval])) * 1",
					"hide": false,
					"legendFormat": "rx outside container",
					"range": true,
					"refId": "C"
				},
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "builder",
					"expr": "sum by(pod) (rate(container_network_transmit_bytes_total{cluster=~\"$cluster\", namespace=~\"$namespace\", pod=\"coder-scaletest-workspace-traffic\"}[$__rate_interval])) * -1",
					"hide": false,
					"legendFormat": "tx outside container",
					"range": true,
					"refId": "D"
				}
			],
			"title": "Workspace Traffic bytes TX/RX",
			"type": "timeseries"
		},
		{
			"datasource": {
				"type": "prometheus",
				"uid": "${DS_PROMETHEUS}"
			},
			"fieldConfig": {
				"defaults": {
					"color": {
						"mode": "palette-classic"
					},
					"custom": {
						"axisCenteredZero": false,
						"axisColorMode": "text",
						"axisLabel": "",
						"axisPlacement": "auto",
						"barAlignment": 0,
						"drawStyle": "line",
						"fillOpacity": 0,
						"gradientMode": "none",
						"hideFrom": {
							"legend": false,
							"tooltip": false,
							"viz": false
						},
						"lineInterpolation": "linear",
						"lineWidth": 1,
						"pointSize": 3,
						"scaleDistribution": {
							"type": "linear"
						},
						"showPoints": "auto",
						"spanNulls": false,
						"stacking": {
							"group": "A",
							"mode": "none"
						},
						"thresholdsStyle": {
							"mode": "off"
						}
					},
					"mappings": [],
					"thresholds": {
						"mode": "absolute",
						"steps": [
							{
								"color": "green"
							},
							{
								"color": "red",
								"value": 80
							}
						]
					},
					"unit": "s"
				},
				"overrides": []
			},
			"gridPos": {
				"h": 8,
				"w": 12,
				"x": 12,
				"y": 186
			},
			"id": 12,
			"options": {
				"legend": {
					"calcs": [],
					"displayMode": "table",
					"placement": "bottom",
					"showLegend": true
				},
				"tooltip": {
					"mode": "single",
					"sort": "none"
				}
			},
			"pluginVersion": "9.5.2",
			"targets": [
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "builder",
					"expr": "histogram_quantile(0.95, sum by(le, pod) (rate(coderd_scaletest_read_latency_seconds_bucket{cluster=~\"$cluster\", namespace=~\"$namespace\"}[$__rate_interval])))",
					"hide": false,
					"legendFormat": "__auto",
					"range": true,
					"refId": "B"
				}
			],
			"title": "Workspace Traffic read latency P95",
			"type": "timeseries"
		},
		{
			"datasource": {
				"type": "prometheus",
				"uid": "${DS_PROMETHEUS}"
			},
			"fieldConfig": {
				"defaults": {
					"color": {
						"mode": "palette-classic"
					},
					"custom": {
						"axisCenteredZero": false,
						"axisColorMode": "text",
						"axisLabel": "",
						"axisPlacement": "auto",
						"barAlignment": 0,
						"drawStyle": "line",
						"fillOpacity": 0,
						"gradientMode": "none",
						"hideFrom": {
							"legend": false,
							"tooltip": false,
							"viz": false
						},
						"lineInterpolation": "linear",
						"lineWidth": 1,
						"pointSize": 5,
						"scaleDistribution": {
							"type": "linear"
						},
						"showPoints": "auto",
						"spanNulls": false,
						"stacking": {
							"group": "A",
							"mode": "none"
						},
						"thresholdsStyle": {
							"mode": "off"
						}
					},
					"mappings": [],
					"thresholds": {
						"mode": "absolute",
						"steps": [
							{
								"color": "green"
							},
							{
								"color": "red",
								"value": 80
							}
						]
					},
					"unit": "s"
				},
				"overrides": []
			},
			"gridPos": {
				"h": 8,
				"w": 12,
				"x": 12,
				"y": 194
			},
			"id": 32,
			"options": {
				"legend": {
					"calcs": [],
					"displayMode": "table",
					"placement": "bottom",
					"showLegend": true
				},
				"tooltip": {
					"mode": "single",
					"sort": "none"
				}
			},
			"pluginVersion": "9.5.2",
			"targets": [
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "builder",
					"expr": "histogram_quantile(0.95, sum by(le, pod) (rate(coderd_scaletest_write_latency_seconds_bucket{cluster=~\"$cluster\", namespace=~\"$namespace\"}[$__rate_interval])))",
					"hide": false,
					"legendFormat": "__auto",
					"range": true,
					"refId": "A"
				}
			],
			"title": "Workspace Traffic write latency P95",
			"type": "timeseries"
		},
		{
			"datasource": {
				"type": "prometheus",
				"uid": "${DS_PROMETHEUS}"
			},
			"fieldConfig": {
				"defaults": {
					"color": {
						"mode": "palette-classic"
					},
					"custom": {
						"axisCenteredZero": false,
						"axisColorMode": "text",
						"axisLabel": "",
						"axisPlacement": "auto",
						"barAlignment": 0,
						"drawStyle": "line",
						"fillOpacity": 0,
						"gradientMode": "none",
						"hideFrom": {
							"legend": false,
							"tooltip": false,
							"viz": false
						},
						"lineInterpolation": "linear",
						"lineWidth": 1,
						"pointSize": 5,
						"scaleDistribution": {
							"type": "linear"
						},
						"showPoints": "auto",
						"spanNulls": false,
						"stacking": {
							"group": "A",
							"mode": "none"
						},
						"thresholdsStyle": {
							"mode": "off"
						}
					},
					"mappings": [],
					"thresholds": {
						"mode": "absolute",
						"steps": [
							{
								"color": "green"
							},
							{
								"color": "red",
								"value": 80
							}
						]
					}
				},
				"overrides": []
			},
			"gridPos": {
				"h": 8,
				"w": 12,
				"x": 0,
				"y": 202
			},
			"id": 13,
			"options": {
				"legend": {
					"calcs": [],
					"displayMode": "list",
					"placement": "bottom",
					"showLegend": true
				},
				"tooltip": {
					"mode": "single",
					"sort": "none"
				}
			},
			"pluginVersion": "9.5.2",
			"targets": [
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "builder",
					"expr": "sum by(pod) (rate(coderd_scaletest_read_errors_total{cluster=~\"$cluster\", namespace=~\"$namespace\"}[$__rate_interval]))",
					"hide": false,
					"legendFormat": "__auto",
					"range": true,
					"refId": "A"
				}
			],
			"title": "Workspace Traffic Read errors",
			"type": "timeseries"
		},
		{
			"datasource": {
				"type": "prometheus",
				"uid": "${DS_PROMETHEUS}"
			},
			"fieldConfig": {
				"defaults": {
					"color": {
						"mode": "palette-classic"
					},
					"custom": {
						"axisCenteredZero": false,
						"axisColorMode": "text",
						"axisLabel": "",
						"axisPlacement": "auto",
						"barAlignment": 0,
						"drawStyle": "line",
						"fillOpacity": 0,
						"gradientMode": "none",
						"hideFrom": {
							"legend": false,
							"tooltip": false,
							"viz": false
						},
						"lineInterpolation": "linear",
						"lineWidth": 1,
						"pointSize": 5,
						"scaleDistribution": {
							"type": "linear"
						},
						"showPoints": "auto",
						"spanNulls": false,
						"stacking": {
							"group": "A",
							"mode": "none"
						},
						"thresholdsStyle": {
							"mode": "off"
						}
					},
					"mappings": [],
					"thresholds": {
						"mode": "absolute",
						"steps": [
							{
								"color": "green"
							},
							{
								"color": "red",
								"value": 80
							}
						]
					}
				},
				"overrides": []
			},
			"gridPos": {
				"h": 8,
				"w": 12,
				"x": 12,
				"y": 202
			},
			"id": 28,
			"options": {
				"legend": {
					"calcs": [],
					"displayMode": "list",
					"placement": "bottom",
					"showLegend": true
				},
				"tooltip": {
					"mode": "single",
					"sort": "none"
				}
			},
			"pluginVersion": "9.5.2",
			"targets": [
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "builder",
					"expr": "sum by(pod) (rate(coderd_scaletest_write_errors_total{cluster=~\"$cluster\", namespace=~\"$namespace\"}[$__rate_interval]))",
					"hide": false,
					"legendFormat": "__auto",
					"range": true,
					"refId": "A"
				}
			],
			"title": "Workspace Traffic Write errors",
			"type": "timeseries"
		},
		{
			"datasource": {
				"type": "prometheus",
				"uid": "${DS_PROMETHEUS}"
			},
			"fieldConfig": {
				"defaults": {
					"color": {
						"mode": "palette-classic"
					},
					"custom": {
						"axisCenteredZero": false,
						"axisColorMode": "text",
						"axisLabel": "",
						"axisPlacement": "auto",
						"barAlignment": 0,
						"drawStyle": "line",
						"fillOpacity": 0,
						"gradientMode": "none",
						"hideFrom": {
							"legend": false,
							"tooltip": false,
							"viz": false
						},
						"lineInterpolation": "linear",
						"lineWidth": 1,
						"pointSize": 5,
						"scaleDistribution": {
							"type": "linear"
						},
						"showPoints": "auto",
						"spanNulls": false,
						"stacking": {
							"group": "A",
							"mode": "none"
						},
						"thresholdsStyle": {
							"mode": "off"
						}
					},
					"mappings": [],
					"thresholds": {
						"mode": "absolute",
						"steps": [
							{
								"color": "green"
							}
						]
					}
				},
				"overrides": [
					{
						"matcher": {
							"id": "byName",
							"options": "requests"
						},
						"properties": [
							{
								"id": "custom.spanNulls",
								"value": true
							},
							{
								"id": "custom.lineStyle",
								"value": {
									"dash": [10, 10],
									"fill": "dash"
								}
							}
						]
					},
					{
						"matcher": {
							"id": "byName",
							"options": "limit"
						},
						"properties": [
							{
								"id": "custom.spanNulls",
								"value": true
							},
							{
								"id": "custom.lineStyle",
								"value": {
									"dash": [10, 10],
									"fill": "dash"
								}
							}
						]
					}
				]
			},
			"gridPos": {
				"h": 8,
				"w": 8,
				"x": 0,
				"y": 210
			},
			"id": 22,
			"options": {
				"legend": {
					"calcs": [],
					"displayMode": "list",
					"placement": "bottom",
					"showLegend": true
				},
				"tooltip": {
					"mode": "single",
					"sort": "none"
				}
			},
			"targets": [
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "code",
					"expr": "sum by(pod) (rate(container_cpu_usage_seconds_total{cluster=~\"$cluster\", namespace=~\"$namespace\",pod=\"coder-scaletest-runner-scaletest-runner\", container=\"dev\"}[$__rate_interval]))",
					"hide": false,
					"legendFormat": "__auto",
					"range": true,
					"refId": "A"
				}
			],
			"title": "Traffic Generation CPU usage",
			"type": "timeseries"
		},
		{
			"datasource": {
				"type": "prometheus",
				"uid": "${DS_PROMETHEUS}"
			},
			"fieldConfig": {
				"defaults": {
					"color": {
						"mode": "palette-classic"
					},
					"custom": {
						"axisCenteredZero": false,
						"axisColorMode": "text",
						"axisLabel": "",
						"axisPlacement": "auto",
						"barAlignment": 0,
						"drawStyle": "line",
						"fillOpacity": 0,
						"gradientMode": "none",
						"hideFrom": {
							"legend": false,
							"tooltip": false,
							"viz": false
						},
						"lineInterpolation": "linear",
						"lineWidth": 1,
						"pointSize": 5,
						"scaleDistribution": {
							"type": "linear"
						},
						"showPoints": "auto",
						"spanNulls": false,
						"stacking": {
							"group": "A",
							"mode": "none"
						},
						"thresholdsStyle": {
							"mode": "off"
						}
					},
					"mappings": [],
					"thresholds": {
						"mode": "absolute",
						"steps": [
							{
								"color": "green"
							}
						]
					},
					"unit": "bytes"
				},
				"overrides": [
					{
						"matcher": {
							"id": "byName",
							"options": "requests"
						},
						"properties": [
							{
								"id": "custom.spanNulls",
								"value": true
							},
							{
								"id": "custom.lineStyle",
								"value": {
									"dash": [10, 10],
									"fill": "dash"
								}
							}
						]
					},
					{
						"matcher": {
							"id": "byName",
							"options": "limit"
						},
						"properties": [
							{
								"id": "custom.spanNulls",
								"value": true
							},
							{
								"id": "custom.lineStyle",
								"value": {
									"dash": [10, 10],
									"fill": "dash"
								}
							}
						]
					}
				]
			},
			"gridPos": {
				"h": 8,
				"w": 8,
				"x": 8,
				"y": 210
			},
			"id": 23,
			"options": {
				"legend": {
					"calcs": [],
					"displayMode": "list",
					"placement": "bottom",
					"showLegend": true
				},
				"tooltip": {
					"mode": "single",
					"sort": "none"
				}
			},
			"targets": [
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "code",
					"expr": "sum by(pod) (container_memory_working_set_bytes{cluster=~\"$cluster\", namespace=~\"$namespace\",pod=\"coder-scaletest-runner-scaletest-runner\",container=\"dev\"})",
					"hide": false,
					"legendFormat": "__auto",
					"range": true,
					"refId": "A"
				}
			],
			"title": "Traffic Generation Memory usage",
			"type": "timeseries"
		},
		{
			"datasource": {
				"type": "prometheus",
				"uid": "${DS_PROMETHEUS}"
			},
			"fieldConfig": {
				"defaults": {
					"color": {
						"mode": "palette-classic"
					},
					"custom": {
						"axisCenteredZero": false,
						"axisColorMode": "text",
						"axisLabel": "",
						"axisPlacement": "auto",
						"axisSoftMin": 0,
						"barAlignment": 0,
						"drawStyle": "line",
						"fillOpacity": 0,
						"gradientMode": "none",
						"hideFrom": {
							"legend": false,
							"tooltip": false,
							"viz": false
						},
						"lineInterpolation": "linear",
						"lineWidth": 1,
						"pointSize": 5,
						"scaleDistribution": {
							"type": "linear"
						},
						"showPoints": "auto",
						"spanNulls": false,
						"stacking": {
							"group": "A",
							"mode": "none"
						},
						"thresholdsStyle": {
							"mode": "off"
						}
					},
					"mappings": [],
					"thresholds": {
						"mode": "absolute",
						"steps": [
							{
								"color": "green"
							}
						]
					},
					"unit": "none"
				},
				"overrides": [
					{
						"matcher": {
							"id": "byName",
							"options": "requests"
						},
						"properties": [
							{
								"id": "custom.spanNulls",
								"value": true
							},
							{
								"id": "custom.lineStyle",
								"value": {
									"dash": [10, 10],
									"fill": "dash"
								}
							}
						]
					},
					{
						"matcher": {
							"id": "byName",
							"options": "limit"
						},
						"properties": [
							{
								"id": "custom.spanNulls",
								"value": true
							},
							{
								"id": "custom.lineStyle",
								"value": {
									"dash": [10, 10],
									"fill": "dash"
								}
							}
						]
					}
				]
			},
			"gridPos": {
				"h": 8,
				"w": 8,
				"x": 16,
				"y": 210
			},
			"id": 26,
			"options": {
				"legend": {
					"calcs": [],
					"displayMode": "list",
					"placement": "bottom",
					"showLegend": true
				},
				"tooltip": {
					"mode": "single",
					"sort": "none"
				}
			},
			"targets": [
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "code",
					"expr": "sum by(pod) (increase(kube_pod_container_status_restarts_total{cluster=~\"$cluster\", namespace=~\"$namespace\",pod=\"coder-scaletest-runner-scaletest-runner\"}[$__rate_interval]))",
					"hide": false,
					"legendFormat": "__auto",
					"range": true,
					"refId": "A"
				}
			],
			"title": "Traffic generation pod restarts",
			"type": "timeseries"
		},
		{
			"collapsed": false,
			"gridPos": {
				"h": 1,
				"w": 24,
				"x": 0,
				"y": 218
			},
			"id": 46,
			"panels": [],
			"title": "Scaletest Dashboard Actions",
			"type": "row"
		},
		{
			"datasource": {
				"type": "prometheus",
				"uid": "${DS_PROMETHEUS}"
			},
			"fieldConfig": {
				"defaults": {
					"color": {
						"mode": "palette-classic"
					},
					"custom": {
						"axisCenteredZero": false,
						"axisColorMode": "text",
						"axisLabel": "",
						"axisPlacement": "auto",
						"barAlignment": 0,
						"drawStyle": "line",
						"fillOpacity": 0,
						"gradientMode": "none",
						"hideFrom": {
							"legend": false,
							"tooltip": false,
							"viz": false
						},
						"lineInterpolation": "linear",
						"lineWidth": 1,
						"pointSize": 5,
						"scaleDistribution": {
							"log": 2,
							"type": "log"
						},
						"showPoints": "auto",
						"spanNulls": false,
						"stacking": {
							"group": "A",
							"mode": "none"
						},
						"thresholdsStyle": {
							"mode": "off"
						}
					},
					"mappings": [],
					"thresholds": {
						"mode": "absolute",
						"steps": [
							{
								"color": "green"
							},
							{
								"color": "red",
								"value": 80
							}
						]
					},
					"unit": "s"
				},
				"overrides": []
			},
			"gridPos": {
				"h": 19,
				"w": 12,
				"x": 0,
				"y": 219
			},
			"id": 47,
			"options": {
				"legend": {
					"calcs": [],
					"displayMode": "list",
					"placement": "bottom",
					"showLegend": true
				},
				"tooltip": {
					"mode": "single",
					"sort": "none"
				}
			},
			"targets": [
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "builder",
					"expr": "histogram_quantile(0.95, sum by(le, action) (rate(coderd_scaletest_dashboard_duration_seconds_bucket{cluster=~\"$cluster\", namespace=~\"$namespace\", pod=~\"$pod\"}[$__rate_interval])))",
					"legendFormat": "__auto",
					"range": true,
					"refId": "A"
				}
			],
			"title": "Dashboard Actions Duration P95",
			"type": "timeseries"
		},
		{
			"datasource": {
				"type": "prometheus",
				"uid": "${DS_PROMETHEUS}"
			},
			"fieldConfig": {
				"defaults": {
					"color": {
						"mode": "palette-classic"
					},
					"custom": {
						"axisCenteredZero": false,
						"axisColorMode": "text",
						"axisLabel": "",
						"axisPlacement": "auto",
						"barAlignment": 0,
						"drawStyle": "bars",
						"fillOpacity": 0,
						"gradientMode": "none",
						"hideFrom": {
							"legend": false,
							"tooltip": false,
							"viz": false
						},
						"lineInterpolation": "linear",
						"lineWidth": 1,
						"pointSize": 5,
						"scaleDistribution": {
							"type": "linear"
						},
						"showPoints": "auto",
						"spanNulls": false,
						"stacking": {
							"group": "A",
							"mode": "normal"
						},
						"thresholdsStyle": {
							"mode": "off"
						}
					},
					"mappings": [],
					"thresholds": {
						"mode": "absolute",
						"steps": [
							{
								"color": "green"
							},
							{
								"color": "red",
								"value": 80
							}
						]
					},
					"unit": "none"
				},
				"overrides": []
			},
			"gridPos": {
				"h": 19,
				"w": 12,
				"x": 12,
				"y": 219
			},
			"id": 49,
			"options": {
				"legend": {
					"calcs": [],
					"displayMode": "list",
					"placement": "bottom",
					"showLegend": true
				},
				"tooltip": {
					"mode": "single",
					"sort": "none"
				}
			},
			"targets": [
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "code",
					"expr": "sum by(le, action) (rate(coderd_scaletest_dashboard_errors_total{cluster=~\"$cluster\", namespace=~\"$namespace\", pod=~\"$pod\"}[$__rate_interval]))",
					"legendFormat": "__auto",
					"range": true,
					"refId": "A"
				}
			],
			"title": "Dashboard Actions Errors",
			"type": "timeseries"
		},
		{
			"collapsed": false,
			"gridPos": {
				"h": 1,
				"w": 24,
				"x": 0,
				"y": 238
			},
			"id": 17,
			"panels": [],
			"title": "Internals",
			"type": "row"
		},
		{
			"datasource": {
				"type": "prometheus",
				"uid": "${DS_PROMETHEUS}"
			},
			"description": "",
			"fieldConfig": {
				"defaults": {
					"color": {
						"mode": "palette-classic"
					},
					"custom": {
						"axisCenteredZero": false,
						"axisColorMode": "text",
						"axisLabel": "",
						"axisPlacement": "auto",
						"barAlignment": 0,
						"drawStyle": "line",
						"fillOpacity": 31,
						"gradientMode": "none",
						"hideFrom": {
							"legend": false,
							"tooltip": false,
							"viz": false
						},
						"lineInterpolation": "linear",
						"lineWidth": 1,
						"pointSize": 5,
						"scaleDistribution": {
							"type": "linear"
						},
						"showPoints": "auto",
						"spanNulls": false,
						"stacking": {
							"group": "A",
							"mode": "none"
						},
						"thresholdsStyle": {
							"mode": "off"
						}
					},
					"mappings": [],
					"thresholds": {
						"mode": "absolute",
						"steps": [
							{
								"color": "green"
							},
							{
								"color": "red",
								"value": 80
							}
						]
					},
					"unit": "s"
				},
				"overrides": []
			},
			"gridPos": {
				"h": 7,
				"w": 12,
				"x": 0,
				"y": 239
			},
			"id": 5,
			"options": {
				"legend": {
					"calcs": [],
					"displayMode": "list",
					"placement": "bottom",
					"showLegend": true
				},
				"tooltip": {
					"mode": "single",
					"sort": "none"
				}
			},
			"targets": [
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "code",
					"expr": "histogram_quantile(0.5, sum by(le) (rate(coderd_authz_authorize_duration_seconds_bucket{cluster=~\"$cluster\",namespace=~\"$namespace\",pod=~\"$pod\"}[$__rate_interval])))",
					"interval": "",
					"legendFormat": "p50",
					"range": true,
					"refId": "A"
				},
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "code",
					"expr": "histogram_quantile(0.9, sum by(le) (rate(coderd_authz_authorize_duration_seconds_bucket{cluster=~\"$cluster\",namespace=~\"$namespace\",pod=~\"$pod\"}[$__rate_interval])))",
					"hide": false,
					"interval": "",
					"legendFormat": "p90",
					"range": true,
					"refId": "B"
				},
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "code",
					"expr": "histogram_quantile(0.95, sum by(le) (rate(coderd_authz_authorize_duration_seconds_bucket{cluster=~\"$cluster\",namespace=~\"$namespace\",pod=~\"$pod\"}[$__rate_interval])))",
					"hide": false,
					"interval": "",
					"legendFormat": "p95",
					"range": true,
					"refId": "C"
				}
			],
			"title": "AuthZ Duration",
			"type": "timeseries"
		},
		{
			"datasource": {
				"type": "prometheus",
				"uid": "${DS_PROMETHEUS}"
			},
			"description": "",
			"fieldConfig": {
				"defaults": {
					"color": {
						"mode": "palette-classic"
					},
					"custom": {
						"axisCenteredZero": false,
						"axisColorMode": "text",
						"axisLabel": "",
						"axisPlacement": "auto",
						"barAlignment": 0,
						"drawStyle": "line",
						"fillOpacity": 31,
						"gradientMode": "none",
						"hideFrom": {
							"legend": false,
							"tooltip": false,
							"viz": false
						},
						"lineInterpolation": "linear",
						"lineWidth": 1,
						"pointSize": 5,
						"scaleDistribution": {
							"type": "linear"
						},
						"showPoints": "auto",
						"spanNulls": false,
						"stacking": {
							"group": "A",
							"mode": "none"
						},
						"thresholdsStyle": {
							"mode": "off"
						}
					},
					"mappings": [],
					"thresholds": {
						"mode": "absolute",
						"steps": [
							{
								"color": "green"
							},
							{
								"color": "red",
								"value": 80
							}
						]
					},
					"unit": "s"
				},
				"overrides": []
			},
			"gridPos": {
				"h": 7,
				"w": 12,
				"x": 12,
				"y": 239
			},
			"id": 6,
			"options": {
				"legend": {
					"calcs": [],
					"displayMode": "list",
					"placement": "bottom",
					"showLegend": true
				},
				"tooltip": {
					"mode": "single",
					"sort": "none"
				}
			},
			"targets": [
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "builder",
					"expr": "histogram_quantile(0.5, sum by(le, pod) (rate(coderd_provisionerd_job_timings_seconds_bucket{cluster=~\"$cluster\", namespace=~\"$namespace\"}[$__rate_interval])))",
					"interval": "",
					"legendFormat": "p50-{{pod}}",
					"range": true,
					"refId": "A"
				},
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "builder",
					"expr": "histogram_quantile(0.9, sum by(le, pod) (rate(coderd_provisionerd_job_timings_seconds_bucket{cluster=~\"$cluster\", namespace=~\"$namespace\"}[$__rate_interval])))",
					"hide": false,
					"interval": "",
					"legendFormat": "p90-{{pod}}",
					"range": true,
					"refId": "B"
				},
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "builder",
					"expr": "histogram_quantile(0.95, sum by(le, pod) (rate(coderd_provisionerd_job_timings_seconds_bucket{cluster=~\"$cluster\", namespace=~\"$namespace\"}[$__rate_interval])))",
					"hide": false,
					"interval": "",
					"legendFormat": "p95-{{pod}}",
					"range": true,
					"refId": "C"
				}
			],
			"title": "Provisioner Job Timings",
			"type": "timeseries"
		},
		{
			"datasource": {
				"type": "prometheus",
				"uid": "${DS_PROMETHEUS}"
			},
			"fieldConfig": {
				"defaults": {
					"color": {
						"mode": "palette-classic"
					},
					"custom": {
						"axisCenteredZero": false,
						"axisColorMode": "text",
						"axisLabel": "",
						"axisPlacement": "auto",
						"barAlignment": 0,
						"drawStyle": "bars",
						"fillOpacity": 69,
						"gradientMode": "none",
						"hideFrom": {
							"legend": false,
							"tooltip": false,
							"viz": false
						},
						"lineInterpolation": "linear",
						"lineWidth": 1,
						"pointSize": 5,
						"scaleDistribution": {
							"type": "linear"
						},
						"showPoints": "auto",
						"spanNulls": false,
						"stacking": {
							"group": "A",
							"mode": "normal"
						},
						"thresholdsStyle": {
							"mode": "off"
						}
					},
					"mappings": [],
					"thresholds": {
						"mode": "absolute",
						"steps": [
							{
								"color": "green"
							},
							{
								"color": "red",
								"value": 80
							}
						]
					}
				},
				"overrides": []
			},
			"gridPos": {
				"h": 8,
				"w": 12,
				"x": 0,
				"y": 246
			},
			"id": 8,
			"options": {
				"legend": {
					"calcs": [],
					"displayMode": "list",
					"placement": "bottom",
					"showLegend": true
				},
				"tooltip": {
					"mode": "single",
					"sort": "none"
				}
			},
			"targets": [
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "builder",
					"expr": "sum by(status, pod) (coderd_workspace_builds_total{cluster=~\"$cluster\", namespace=~\"$namespace\", workspace_transition=\"START\"})",
					"legendFormat": "__auto",
					"range": true,
					"refId": "A"
				}
			],
			"title": "Total Workspace Builds",
			"type": "timeseries"
		},
		{
			"datasource": {
				"type": "prometheus",
				"uid": "${DS_PROMETHEUS}"
			},
			"fieldConfig": {
				"defaults": {
					"color": {
						"mode": "palette-classic"
					},
					"custom": {
						"axisCenteredZero": false,
						"axisColorMode": "text",
						"axisLabel": "",
						"axisPlacement": "auto",
						"barAlignment": 0,
						"drawStyle": "bars",
						"fillOpacity": 69,
						"gradientMode": "none",
						"hideFrom": {
							"legend": false,
							"tooltip": false,
							"viz": false
						},
						"lineInterpolation": "linear",
						"lineWidth": 1,
						"pointSize": 5,
						"scaleDistribution": {
							"type": "linear"
						},
						"showPoints": "auto",
						"spanNulls": false,
						"stacking": {
							"group": "A",
							"mode": "normal"
						},
						"thresholdsStyle": {
							"mode": "off"
						}
					},
					"mappings": [],
					"thresholds": {
						"mode": "absolute",
						"steps": [
							{
								"color": "green"
							},
							{
								"color": "red",
								"value": 80
							}
						]
					}
				},
				"overrides": [
					{
						"matcher": {
							"id": "byName",
							"options": "daemons"
						},
						"properties": [
							{
								"id": "custom.drawStyle",
								"value": "line"
							},
							{
								"id": "custom.fillOpacity",
								"value": 0
							},
							{
								"id": "color",
								"value": {
									"mode": "continuous-BlYlRd"
								}
							}
						]
					},
					{
						"matcher": {
							"id": "byName",
							"options": "external_daemons"
						},
						"properties": [
							{
								"id": "custom.drawStyle",
								"value": "line"
							},
							{
								"id": "custom.fillOpacity",
								"value": 0
							}
						]
					}
				]
			},
			"gridPos": {
				"h": 8,
				"w": 12,
				"x": 12,
				"y": 246
			},
			"id": 35,
			"options": {
				"legend": {
					"calcs": [],
					"displayMode": "list",
					"placement": "bottom",
					"showLegend": true
				},
				"tooltip": {
					"mode": "single",
					"sort": "none"
				}
			},
			"targets": [
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "code",
					"expr": "sum by(status, container) (coderd_provisionerd_jobs_current{cluster=~\"$cluster\", namespace=~\"$namespace\", container=~\"^(coder|provisionerd)$\"})",
					"legendFormat": "__auto",
					"range": true,
					"refId": "A"
				},
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "code",
					"expr": "sum by(status, container) (coderd_provisionerd_num_daemons{cluster=~\"$cluster\", namespace=~\"$namespace\", container=~\"^(coder|provisionerd)$\"})",
					"hide": false,
					"legendFormat": "builtin_daemons",
					"range": true,
					"refId": "B"
				},
				{
					"datasource": {
						"type": "prometheus",
						"uid": "${DS_PROMETHEUS}"
					},
					"editorMode": "code",
					"expr": "sum(kube_pod_container_status_running {cluster=~\"$cluster\", namespace=~\"coder-big\", pod=~\"coder-provisioner-.*\"})",
					"hide": false,
					"legendFormat": "external_daemons",
					"range": true,
					"refId": "C"
				}
			],
			"title": "Concurrent Provisioner Jobs",
			"type": "timeseries"
		}
	],
	"refresh": false,
	"schemaVersion": 39,
	"tags": [],
	"templating": {
		"list": [
			{
				"allValue": ".*",
				"current": {},
				"datasource": {
					"type": "prometheus",
					"uid": "${DS_PROMETHEUS}"
				},
				"definition": "label_values(coderd_api_concurrent_requests,cluster)",
				"hide": 0,
				"includeAll": false,
				"label": "cluster",
				"multi": false,
				"name": "cluster",
				"options": [],
				"query": {
					"query": "label_values(coderd_api_concurrent_requests,cluster)",
					"refId": "PrometheusVariableQueryEditor-VariableQuery"
				},
				"refresh": 1,
				"regex": "",
				"skipUrlSync": false,
				"sort": 1,
				"type": "query"
			},
			{
				"allValue": ".*",
				"current": {},
				"datasource": {
					"type": "prometheus",
					"uid": "${DS_PROMETHEUS}"
				},
				"definition": "label_values(coderd_api_concurrent_requests,namespace)",
				"hide": 0,
				"includeAll": false,
				"label": "namespace",
				"multi": false,
				"name": "namespace",
				"options": [],
				"query": {
					"query": "label_values(coderd_api_concurrent_requests,namespace)",
					"refId": "PrometheusVariableQueryEditor-VariableQuery"
				},
				"refresh": 1,
				"regex": "",
				"skipUrlSync": false,
				"sort": 0,
				"type": "query"
			},
			{
				"allValue": ".*",
				"current": {},
				"datasource": {
					"type": "prometheus",
					"uid": "${DS_PROMETHEUS}"
				},
				"definition": "label_values(coderd_api_concurrent_requests,pod)",
				"hide": 0,
				"includeAll": true,
				"label": "pod",
				"multi": false,
				"name": "pod",
				"options": [],
				"query": {
					"query": "label_values(coderd_api_concurrent_requests,pod)",
					"refId": "PrometheusVariableQueryEditor-VariableQuery"
				},
				"refresh": 1,
				"regex": "",
				"skipUrlSync": false,
				"sort": 0,
				"type": "query"
			}
		]
	},
	"time": {
		"from": "now-6h",
		"to": "now"
	},
	"timepicker": {},
	"timezone": "",
	"title": "CoderV2 Loadtest Dashboard",
	"uid": "qLVSTR-Vz",
	"version": 254,
	"weekStart": ""
}
